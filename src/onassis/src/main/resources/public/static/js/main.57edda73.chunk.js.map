{"version":3,"sources":["components/minibars/helpers.js","reducers/ping.js","reducers/daterange.js","reducers/minibars.js","reducers/chart.js","reducers/pie.js","reducers/payments.js","reducers/payment.js","reducers/constants.js","reducers/accounts.js","reducers/categories.js","reducers/navi.js","reducers/auditlog.js","reducers/errorMessage.js","reducers/index.js","actions/errorMessage.js","actions/axios.js","actions/constants.js","actions/categories.js","components/editorFields/CurrencyField.js","components/editorFields/CheckboxField.js","components/editorFields/TextField.js","components/editorFields/ColorField.js","util/alertoptions.js","util/currency.js","components/categoriesEditor/constants.js","components/categoriesEditor/CategoriesEditor.js","components/categories/categories.js","actions/chart.js","actions/accounts.js","components/accountsEditor/constants.js","components/accountsEditor/AccountsEditor.js","components/accounts/accounts.js","util/fiDate.js","components/main/Spinner.js","actions/auditlog.js","components/logs/buttons.js","components/logs/auditlog.js","components/logs/logs.js","util/addDays.js","actions/daterange.js","actions/minibars.js","components/minibars/minibars_d3.js","components/minibars/chunkdata.js","components/minibars/minibars.js","components/minibars/buttons.js","components/datepicker/datepicker.js","util/findInArray.js","components/dropdown/dropdown.js","components/constantfilter/ConstantFilter.js","components/main/RangePanel.js","actions/pie.js","actions/payments.js","actions/payment.js","components/editorFields/LockField.js","components/editorFields/DropdownField.js","components/editorFields/DateField.js","components/paymentsEditor/recurrent.js","util/math.js","components/paymentsEditor/constants.js","components/paymentsEditor/PaymentsEditor.js","components/payments/payments.js","components/paymentSelection/paymentSelection.js","util/tooltip.js","components/chart/buttons.js","components/main/DetailsPanel.js","components/chart/chart.js","components/main/ChartPanel.js","util/initials.js","components/pie/pie.js","components/main/PiePanel.js","actions/navi.js","components/main/Content.js","components/main/ErrorMessage.js","components/navi/MenuBar.js","actions/ping.js","components/ping/ping.js","components/main/Onassis.js","index.js"],"names":["dates","convert","d","constructor","Date","Array","Number","String","year","month","date","NaN","compare","a","b","isFinite","this","valueOf","inRange","start","end","module","exports","reducer","state","arguments","length","undefined","action","type","Object","assign","up","payload","s","e","fetching","balances","redraw","curves","nextday","prevday","today","slices","queryType","params","payments","payment","lock_payment_request","locked","refreshTime","constants","accounts","categories","view","logentries","firstpage","lastpage","status","msg","when","rootReducer","combineReducers","ping","daterange","minibars","chart","pie","navi","auditlog","errorMessage","showError","dispatch","showErrorAction","now","show_error","error","response","data","error_message","message","HOST","axios_get","ctx_path","f","axios","get","then","catch","axios_get_params","axios_post","post","request","require","invalidate","id","get_constants","res","json","JSON","parse","getBody","getTime","update","updates","categoriesUpdateRequestAction","load","CurrencyField","props","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","currencyValue","value","onChange","bind","assertThisInitialized","handleFocus","event","target","select","_this$props","onValueChanged","field","index","newCurrencyValue","plus","lastIndexOf","minus","replace","parseInt","slice","normalizeCurrency","setState","nextprops","_this$props2","readOnly","placeholder","touched","fontSize","react_default","createElement","onFocus","disabled","className","style","textAlign","color","substr","display","width","backgroundColor","React","Component","defaultProps","CheckboxField","checked","name","htmlFor","borderColor","FontAwesome","TextField","txtValue","_this2","linkCb","button","Button","bsSize","onClick","ColorField","handleClick","displayColorPicker","handleClose","handleChange","hex","styles","reactCSS","default","height","borderRadius","background","swatch","padding","boxShadow","cursor","popover","position","zIndex","cover","top","right","bottom","left","react_color_lib","alertOptions","offset","theme","time","transition","currencyFormat","c","parseFloat","Math","round","toFixed","fields","defaultValues","i","active","descr","validators","preInitFormat","copy","forEach","p","push","copyCategory","deepCopy","preSubmitFormat","copyObject","category","initState","values","initial","errors","deleted","sort","asc","copyArray","array","splice","tempId","CategoriesEditor","renderCategoriesT","sortedValues","sortersF","Panel","Heading","Title","resetT","pristine","bsStyle","preSubmitT","addR","Body","Table","striped","bordered","hover","condensed","thClassName","th","CategoriesEditor_FontAwesome","map","renderCategoryR","showOk","changePropertyF","changePropertyDeletedF","setValueF","validateF","touchedF","isDifferentFromInitialF","chooseValueF","renderContentF","renderDeletedContentF","setSortF","getDefaultR","removeR","validateR","readOnlyR","isPersistedR","isPristineT","hasErrorsT","preInitT","init","tdClassName","td","objectSpread","initCategories","deleteCount","original","row","editorFields_CurrencyField","editorFields_CheckboxField","editorFields_TextField","editorFields_ColorField","console","log","_this3","inv","textA","toUpperCase","textB","defaults","valuesCopy","errorsCopy","last","l","check","values_copy","errors_copy","ix","v","_this4","key","toConsumableArray","initialCategories","show","icon","src","alt","_this5","created","modified","keys","stringify","allChecked","_this6","label","arrow","sortField","labelField","marginTop","paddingRight","_this7","dist_default","ref","connect","Categories","paddingTop","paddingBottom","alignItems","components_categoriesEditor_CategoriesEditor","store","dateFormat","chartRequestAction","chartResponseAction","chart_load","chart_refresh","assert","chart_next_day","chart_prev_day","chart_today","chart_redraw","accountsUpdateRequestAction","credit","copyAccount","account","AccountsEditor","renderAccountsT","AccountsEditor_FontAwesome","renderAccountR","initAccounts","initialAccounts","Accounts","components_accountsEditor_AccountsEditor","toDateFi","fiDate","parts","split","day","fiDateTimeMillis","millis","getDate","m","getMonth","h","getHours","mi","getMinutes","sec","getSeconds","mspart","getMilliseconds","getFullYear","Spinner","spin","Spinner_FontAwesome","auditlogResponseAction","entries","fp","lp","next","lastPage","PAGE_SIZE","pop","prev","firstPage","shift","Buttons","hs","rownr","hd","first","buttons_FontAwesome","href","AuditLog","renderPaymentsHeaderT","renderLogEntry","renderPaymentR","op","DBDate","toFiDBFormat","g","c_descr","a_descr","r","concat","ret","indexOf","main_Spinner","buttons","Logs","components_logs_auditlog","addDays","days","result","setDate","addMonths","months","setMonth","daydiff","d1","d2","dt1","dt2","floor","UTC","isFirstAndLastOfSameMonth","daysInMonth","getYear","prev_s","prev_e","set_daterange","setDateRangeAction","daterange_next_block","diff","daterange_prev_block","set_todayrange","setFullYear","setHours","prev_cat","balances_load","cat","balance","balancesResponseAction","minibars_redraw","d3","div_border_width","column_width","line_width","b_line_width","leadin_width","leadin_x","top_margin","datearea_height","center_margin","month_height","bottom_margin","datearea_y","center_margin_y","month_y","bottom_margin_y","month_markers","miny","maxy","scale","max_selection_days","FORMAT_DATE","FORMAT_MONTH","FORMAT_MONTH_YEAR","COLOR_INCOME_NEGATIV","COLOR_INCOME_POSITIV","COLOR_BALANCE","COLOR_DAY_BACKGROUND_NORMAL","COLOR_DAY_BACKGROUND_UNDER_LIMITS","COLOR_DAY_BACKGROUND_SELECTED","COLOR_DAY_BACKGROUND_FOCUS","COLOR_MONTH_BACKGROUND_NORMAL_ODD","COLOR_MONTH_BACKGROUND_NORMAL_EVEN","COLOR_MONTH_TEXT","COLOR_MONTH_SEPARATOR_LINE","bindto","slot_width","col_per_slot_ratio","cb_select","_DIV","_TIP_DIV","_TIP_I_DIV","_DAY_TEXT","_B_TEXT","_B_COLOR","_I_TEXT","_LEADIN","_LEADIN_ZERO","_LEADIN_ZERO_TEXT","_MAX_TEXT","_MIN_TEXT","_MONTH","_BG","_I","_E","_B","_LINE_B_PREV","_LINE_B_NEXT","_LINE_ZERO","init_changeables","columns","left_month","monthId","right_month","monthMarkers","dateId","bgColor","smallestb","bgNormal","monthColor","roundNumberText","number","num","toPrecision","roundNumber","prefix","formatPrefix","symbol","show_tip","mid","bg","document","getElementById","getBoundingClientRect","doc","documentElement","offsetRect","window","pageYOffset","scrollTop","clientTop","text","iColor","normalize","_s","min","_e","max","_MS_PER_DAY","dateDiffInDays","utc1","utc2","body","clicks","click","abs","attr","mouseover","mouseout","hide_tip","create","bindTo","clicks_month","s_date","e_date","minibar_div","append","float","background-color","border-style","border-width","border-color","margin-top","tbody","pointer-events","colspan","tr2","tr1","minibar_leadin_svg","x1","x2","y1","y2","stroke","stroke-width","x","y","text-anchor","font-family","font-size","fill","minibar_svg","on","selectAll","enter","prev_b","next_b","cx","cy","leadin","updateMonth","date_id","datum","nullData","len","recreate","remove","resize","config","generate","provideddata","daydata","balances_given","idaydata","lendaydata","monthDays","dayArray","data_i","m_i","y_i","d_i","z","zlen","range_text","z0","zlen0","ax","axlen","ixlen","prevm","z1","zlen1","unshift","nextm","z2","zlen2","chunk_rawdata","prev_month_markers","linear","domain","range","init_scales","start_","end_","addEventListener","Minibars","minibarconfig","su","setDateRange","nextProps","nextBlock","prevBlock","daterangeNextBlock","daterangePrevBlock","minibars_buttons_FontAwesome","dateRange_pickeroptions","dateLimit","showWeekNumbers","autoApply","alwaysShowCalendars","locale","direction","format","separator","applyLabel","cancelLabel","fromLabel","toLabel","customRangeLabel","daysOfWeek","monthNames","firstDay","linkedCalendars","ranges","Last 7 Days","moment","subtract","Last 30 Days","This Month","startOf","endOf","Last Month","dateSingle_pickeroptions","singleDatePicker","showDropdowns","DatePicker","$","pickerName","setStartDate","setEndDate","pickerType","daterangepicker","pickerCallback","onMouseDown","preventDefault","onKeyDown","which","keyCode","componentWillReceiveProps","findInArray","booleanfunction","item","Dropdown","selectedValue","items","getConstants","constants_id","onValueChange","renderOption","selectedItem","validConstants","filter","valid","whiteSpace","textOverflow","overflow","maxWidth","marginRight","marginLeft","dropdown_FontAwesome","border","backgroundImage","renderValue","options","hideResetButton","ConstantFilter","onFilterChanged","onCheck","dd","dropdown","RangePanel","showMinibars","that","setTimeout","minibarsRedraw","butts","minibars_buttons","ctrls","paddingLeft","constantfilter_ConstantFilter","expanded","onToggle","RangePanel_FontAwesome","datepicker","Toggle","componentClass","Collapse","minibars_minibars","pieRequestAction","pieResponseAction","pie_load","pie_redraw","paymentsRequestAction","paymentsResponseAction","paymentsUpdateRequestAction","payments_refresh","day_load","account_load","category_load","group_load","list_load","ids","lock_payment","lockPaymentRequestAction","lockPaymentResponseAction","payment_selection","paymentSelectionAction","Lock","LockField_FontAwesome","Unlock","LockField","toggleLock","lockPayment","component_default","icons","LockField_Unlock","unchecked","LockField_Lock","DropdownField","DateField","DAILY","iteration","date1","WEEKLY","FORTNIGHTLY","TWICE_A_MONTH","n","MONTHLY","EVERY_OTHER_MONTH","EVERY_3_MONTHS","EVERY_4_MONTHS","EVERY_6_MONTHS","YEARLY","recurrent","span","initialMaskValues","checkedList","copyPayment","toDBFormatFi","recurSpans","recurring","recur","times","masked","maskValues","maskErrors","oneIsTrue","checkedSet","PaymentsEditor","setValueCheckAllF","drawBalanceF","PaymentsEditor_FontAwesome","size","renderPaymentsT","setRecurring","setRecurringSpan","react_numeric_input_default","step","precision","setRecurringTimes","showAlert","changePropertyLF","setValueCheckF","setValueMaskF","setValueMaskCheckF","validateMaskF","maskedF","disabledCheckR","groupLoad","initPayments","initialCopy","updateCheckedSet","paymentSelection","set","copy2","editorFields_LockField","editorFields_DateField","editorFields_DropdownField","count","initialPayments","textDecoration","pos","grp","_this8","Payments","components_paymentsEditor_PaymentsEditor","dayLoad","PaymentSelection","list","listLoad","Badge","accountsTooltipTable","dt","showdate","findIndexInArray","trs","acc2","colSpan","nextDay","prevDay","chartNextDay","chartPrevDay","chartToday","chart_buttons_FontAwesome","DetailsPanel","accs","cats","info","acc","DetailsPanel_FontAwesome","a_table","chart_buttons","paymentSelection_paymentSelection","payments_payments","verticalAlign","selectedDayOrAccount","SELECTONHOVER","Chart","selectedType","boundingRect","hahlo_ix","hahlo","draw","dateselect","legendnames","onmouseover","onmouseover_account","onmouseout","find_ix","chartDatetoDate","tooltip","c3onRendered","timer","chart_config","onrendered","grid","lines","grouped","contents","defaultTitleFormat","defaultValueFormat","onclick","xFormat","duration","names","colors","types","groups","selection","axis","tick","culling","legend","transiting","isTargetToShow","api","focus","ReactDOMServer","renderToStaticMarkup","clearTimeout","selectedDate","substring","daterangeToday","accountLoad","alku","loppu","regions","c3","onMouseOut","class","alku1","loppu1","el","svg","chartLoad","ChartPanel","chart_chart","initials","startDate","endDate","Pie","d3onMouseI","d3onMouseOutI","d3onMouseE","d3onMouseOutE","sum_i","sum_e","ratio","order","categoryLoad","total","middlepoint","PI","arc_minus","arc","innerRadius","outerRadius","startAngle","endAngle","arc_plus","arc_space","OUTER_ARC","pieLoad","sl","PiePanel","components_pie_pie","show_view","loadcategories","loadaccounts","naviShowViewRequestAction","Acc","accounts_accounts","Cat","categories_categories","Log","logs","Content","chartRedraw","pieRedraw","main","main_RangePanel","main_ChartPanel","main_PiePanel","main_DetailsPanel","Content_Acc","Content_Cat","Content_Log","showView","ErrorMessage","dismiss","Alert","onDismiss","MenuBar","Navbar","Header","Brand","Nav","NavDropdown","eventKey","title","MenuItem","onSelect","divider","PingResponseAction","Ping","setInterval","minHeight","margin","Onassis","components_ping_ping","navi_MenuBar","main_ErrorMessage","main_Content","createStore","applyMiddleware","thunk","reduxStore","render","es","main_Onassis"],"mappings":"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","file":"static/js/main.57edda73.chunk.js","sourcesContent":["var dates = {\n    convert:function(d) {\n        // Converts the date in d to a date-object. The input can be:\n        //   a date object: returned without modification\n        //  an array      : Interpreted as [year,month,day]. NOTE: month is 0-11.\n        //   a number     : Interpreted as number of milliseconds\n        //                  since 1 Jan 1970 (a timestamp) \n        //   a string     : Any format supported by the javascript engine, like\n        //                  \"YYYY/MM/DD\", \"MM/DD/YYYY\", \"Jan 31 2009\" etc.\n        //  an object     : Interpreted as an object with year, month and date\n        //                  attributes.  **NOTE** month is 0-11.\n        return (\n            d.constructor === Date ? d :\n            d.constructor === Array ? new Date(d[0],d[1],d[2]) :\n            d.constructor === Number ? new Date(d) :\n            d.constructor === String ? new Date(d) :\n            typeof d === \"object\" ? new Date(d.year,d.month,d.date) :\n            NaN\n        );\n    },\n    compare:function(a,b) {\n        // Compare two dates (could be of any type supported by the convert\n        // function above) and returns:\n        //  -1 : if a < b\n        //   0 : if a = b\n        //   1 : if a > b\n        // NaN : if a or b is an illegal date\n        // NOTE: The code inside isFinite does an assignment (=).\n        return (\n            isFinite(a=this.convert(a).valueOf()) &&\n            isFinite(b=this.convert(b).valueOf()) ?\n            (a>b)-(a<b) :\n            NaN\n        );\n    },\n    inRange:function(d,start,end) {\n        // Checks if date in d is between dates in start and end.\n        // Returns a boolean or NaN:\n        //    true  : if d is between start and end (inclusive)\n        //    false : if d is before start or after end\n        //    NaN   : if one or more of the dates is illegal.\n        // NOTE: The code inside isFinite does an assignment (=).\n       return (\n            isFinite(d=this.convert(d).valueOf()) &&\n            isFinite(start=this.convert(start).valueOf()) &&\n            isFinite(end=this.convert(end).valueOf()) ?\n            start <= d && d <= end :\n            NaN\n        );\n    }\n}\n\nmodule.exports = dates;","const reducer = (state = [], action) => {\n // console.log(\"ping reducer: \"+action.type)\n  switch (action.type) {\n    case 'PING_RESPONSE':\n    \t//console.log(\"handling PING_RESPONSE\")\n        return Object.assign({}, state, {\n            up: action.payload.up,\n          })        \n    default:\n      return state\n  }\n}\nexport default reducer","const reducer = (state = [], action) => {\n  //console.log(\"dateRange reducer: \"+action.type)\n  switch (action.type) {\n    case 'DATE_RANGE_SELECTED':\n      //console.log(\"handling DATE_RANGE_SELECTED\")\n      return Object.assign({}, state, {\n          s: action.payload.s,\n          e: action.payload.e\n        })\n    default:\n      return state\n  }\n}\nexport default reducer","const reducer = (state = [], action) => {\n  //console.log(\"minibars reducer: \"+action.type)\n  switch (action.type) {\n    case 'MINIBARS_REQUEST':\n      //console.log(\"handling MINIBARS_REQUEST\")\n      return Object.assign({}, state, {\n         fetching: true\n    })\n    case 'MINIBARS_RESPONSE':\n//        console.log(\"handling MINIBARS_RESPONSE\")\n        return Object.assign({}, state, {\n            balances: action.payload.balances,\n            fetching: false\n          }) \n    case 'MINIBARS_REDRAW':\n        //console.log(\"handling MINIBARS_REDRAW\")\n        return Object.assign({}, state, {\n            redraw: action.payload.redraw,\n        })\n    default:\n      return state\n  }\n}\nexport default reducer","const reducer = (state = [], action) => {\n  //console.log(\"chart reducer: \"+action.type)\n  switch (action.type) {\n    case 'CHART_REQUEST':\n      return Object.assign({}, state, {\n         fetching: true\n    })\n    case 'CHART_RESPONSE':\n        return Object.assign({}, state, {\n            curves: action.payload.curves,\n            fetching: false\n    }) \n    case 'CHART_NEXTDAY':\n        //console.log(\"handling CHART_NEXTDAY\")\n        return Object.assign({}, state, {\n            nextday: action.payload.nextday,\n          })\n    case 'CHART_PREVDAY':\n        //console.log(\"handling CHART_PREVDAY\")\n        return Object.assign({}, state, {\n            prevday: action.payload.prevday,\n          })  \n    case 'CHART_TODAY':\n        //console.log(\"handling CHART_TODAY\")\n        return Object.assign({}, state, {\n            today: action.payload.today,\n          })\n    case 'CHART_REDRAW':\n        //console.log(\"handling CHART_REDRAW\")\n        return Object.assign({}, state, {\n            redraw: action.payload.redraw,\n        })\n    default:\n      return state\n  }\n}\nexport default reducer","const reducer = (state = [], action) => {\n // console.log(\"pie reducer: \"+action.type)\n  switch (action.type) {\n    case 'PIE_REQUEST':\n      //console.log(\"handling PIE_REQUEST\")\n      return Object.assign({}, state, {\n         fetching: true\n    })\n    case 'PIE_RESPONSE':\n        //console.log(\"handling PIE_RESPONSE\")\n        return Object.assign({}, state, {\n            slices: action.payload.slices,\n            fetching: false\n          })\n    case 'PIE_REDRAW':\n        //console.log(\"handling PIE_REDRAW\")\n        return Object.assign({}, state, {\n            redraw: action.payload.redraw,\n        })\n    default:\n      return state\n  }\n}\nexport default reducer","const reducer = (state = [], action) => {\n // console.log(\"payments reducer: \"+action.type)\n  switch (action.type) {\n    case \"PAYMENTS_REQUEST\":\n      return Object.assign({}, state, {\n         fetching: true\n    })\n    case \"PAYMENTS_RESPONSE\":\n      //console.log(action)\n      return Object.assign({}, state, {\n    \t fetching: false,\n    \t queryType: action.payload.queryType, \n    \t params: action.payload.params,\n         payments: action.payload.payments,\n         balances: action.payload.balances\n       })\n    default:\n      return state\n  }\n}\n\nexport default reducer","const reducer = (state = [], action) => {\n  //console.log(\"payment reducer: \"+action.type)\n  switch (action.type) {\n    case 'LOCK_PAYMENT_RESPONSE':\n     // console.log(\"handling LOCK_PAYMENT_RESPONSE\")\n      return Object.assign({}, state, {\n    \t  payment: action.payload.payment,\n        //locked: action.payload.locked\n       })\n    case 'LOCK_PAYMENT_REQUEST':\n       // console.log(\"handling LOCK_PAYMENT_REQUEST\")\n        return Object.assign({}, state, {\n      \tlock_payment_request: action.payload.lock_payment_request,\n          locked: action.payload.locked\n         })       \n    case 'PAYMENT_SELECTION':\n        //console.log(\"handling PAYMENT_SELECTION\")\n        return Object.assign({}, state, {\n        \tpayments: action.payload.payments\n        }) \n    default:\n      return state\n  }\n}\n\nexport default reducer","const reducer = (state = [], action) => {\n // console.log(\"constants reducer: \"+action.type)\n  switch (action.type) {\n    case \"CONSTANTS_REFRESH\":\n      //console.log(\"handling CONSTANTS_REFRESH\")\n      return Object.assign({}, state, {\n    \t refreshTime : action.payload.refreshTime,\n         constants: action.payload.constants\n       })\n       \n    default:\n      return state\n  }\n}\n\nexport default reducer","const reducer = (state = [], action) => {\n // console.log(\"accounts reducer: \"+action.type)\n  switch (action.type) {\n    case \"ACCOUNTS_REQUEST\":\n      //console.log(\"handling ACCOUNTS_REQUEST\")\n      return Object.assign({}, state, {\n         fetching: true\n    })\n    case \"ACCOUNTS_RESPONSE\":\n      //console.log(\"handling ACCOUNTS_RESPONSE\")\n      return Object.assign({}, state, {\n    \t fetching: false,\n         accounts: action.payload.accounts,\n       })\n    default:\n      return state\n  }\n}\n\nexport default reducer","const reducer = (state = [], action) => {\n // console.log(\"accounts reducer: \"+action.type)\n  switch (action.type) {\n    case \"CATEGORIES_REQUEST\":\n      //console.log(\"handling CATEGORIES_REQUEST\")\n      return Object.assign({}, state, {\n         fetching: true\n    })\n    case \"CATEGORIES_RESPONSE\":\n      //console.log(\"handling CATEGORIES_RESPONSE\")\n      return Object.assign({}, state, {\n    \t fetching: false,\n         categories: action.payload.categories,\n       })\n    default:\n      return state\n  }\n}\n\nexport default reducer","const reducer = (state = [], action) => {\n // console.log(\"chart reducer: \"+action.type)\n  switch (action.type) {\n    case 'SHOW_VIEW':\n        //console.log(\"handling SHOW_VIEW\")\n        return Object.assign({}, state, {\n            view: action.payload.view,\n          })        \n    default:\n      return state\n  }\n}\nexport default reducer","const reducer = (state = [], action) => {\n // console.log(\"accounts reducer: \"+action.type)\n  switch (action.type) {\n    case \"AUDITLOG_REQUEST\":\n      //console.log(\"handling AUDITLOG_REQUEST\")\n      return Object.assign({}, state, {\n         fetching: true\n    })\n    case \"AUDITLOG_RESPONSE\":\n      //console.log(\"handling AUDITLOG_RESPONSE\")\n      return Object.assign({}, state, {\n    \t fetching: false,\n         logentries: action.payload.logentries,\n         firstpage: action.payload.firstpage,\n         lastpage: action.payload.lastpage\n       })\n    default:\n      return state\n  }\n}\n\nexport default reducer","const reducer = (state = [], action) => {\n    switch (action.type) {\n\n\t    case 'SHOW_ERROR':\n\t        return Object.assign({}, state, {\n\t            status: action.payload.status,\n\t            msg: action.payload.msg,\n\t            when: action.payload.when\n\t        })\n\t        \n\t    default:\n\t        return state\n    }\n}\n\nexport default reducer","import { combineReducers } from 'redux'\n\nimport ping from './ping'\nimport daterange from './daterange'\nimport minibars from './minibars'\nimport chart from './chart'\nimport pie from './pie'\nimport payments from './payments'\nimport payment from './payment'\nimport constants from './constants'\nimport accounts from './accounts'\nimport categories from './categories'\nimport navi from './navi'\nimport auditlog from './auditlog'\nimport errorMessage from './errorMessage'\n\nconst rootReducer = combineReducers({\n  ping,\n  daterange,\n  minibars,\n  chart,\n  pie,\n  payments,\n  payment,\n  constants,\n  accounts,\n  categories,\n  navi,\n  auditlog,\n  errorMessage \n})\n\nexport default rootReducer","const showErrorAction = (status, msg, when) => ({\n    type: 'SHOW_ERROR',\n    payload: {\n        \"status\": status,\n        \"msg\": msg,\n        \"when\": when\n    }\n})\n\nconst showError = (status, msg) => (\n    (dispatch) => {\n        dispatch(showErrorAction(status, msg, Date.now()))\n    }\n)\n\nconst show_error = (error, dispatch) => {\n    if (error.response && error.response.data) {\n        dispatch(showError(error.response.status, error.response.data.error_message))\n    } else {\n        dispatch(showError('not known', error.message))\n    }\n}\n\nexport {\n    show_error\n}","import axios from 'axios';\nimport { show_error } from './errorMessage'\nconst HOST = 'http://localhost:8080/'\n\nfunction axios_get(ctx_path, f, dispatch) {\n\taxios.get(HOST + ctx_path)\n            .then(f)\n            .catch(error => { show_error(error, dispatch) })\t\t\n}\n\nfunction axios_get_params(ctx_path, params, f, dispatch) {\n\taxios.get(HOST + ctx_path, params)\n            .then(f)\n            .catch(error => { show_error(error, dispatch) })\t\n}\n\nfunction axios_post(ctx_path, payload, f, dispatch) {\n\taxios.post(HOST + ctx_path, payload)\n            .then(f)\n            .catch(error => { show_error(error, dispatch) })\t\n}\n\nexport {HOST, axios_get, axios_get_params, axios_post}","import {HOST} from './axios';\nvar request = require('sync-request');\n\nconst CONSTANTS_REFRESH = 'CONSTANTS_REFRESH'\nconst constantsRefreshAction = (constants) => ({\n    type: CONSTANTS_REFRESH,\n    payload: {\n    \t\"refreshTime\" : (new Date()).getTime(),\n        \"constants\": constants\n    }\n})\n\nvar constants = {}\n\nconst invalidate = (id, dispatch) => {\n\tconstants[id] = null\n\tget_constants(id, dispatch)\n}\n\nconst get_constants = (id, dispatch) => {\n\t    if(!constants[id]) {\n\t    \tvar res = request('GET', HOST + 'constants?id=' + id + '&ts='+Date.now());\n\t    \t//TODO what if fails?\n\t    \tvar json = JSON.parse(res.getBody('utf8'));\n\t        constants[id] = json\n\t    }\n\t    dispatch(constantsRefreshAction(constants))\n\t    return null;\n}\n \nexport {\n    get_constants,\n    invalidate\n}","import {axios_get, axios_post} from './axios';\nimport { invalidate } from './constants'\n\nconst CATEGORY = 'cat'\n\t\nconst CATEGORIES_REQUEST = 'CATEGORIES_REQUEST'\nconst categoriesRequestAction = () => ({\n    type: CATEGORIES_REQUEST\n})\n\nconst CATEGORIES_RESPONSE = 'CATEGORIES_RESPONSE'\nconst categoriesResponseAction = (categories) => ({\n    type: CATEGORIES_RESPONSE,\n    payload: {\n        \"categories\": categories\n    }\n})\n\nconst CATEGORIES_UPDATE_REQUEST = 'CATEGORIES_UPDATE_REQUEST'\nconst categoriesUpdateRequestAction = (updates) => ({\n    type: CATEGORIES_UPDATE_REQUEST,\n    payload: {\n    \t\"updates\": updates\n    }\n})\n\nconst CATEGORIES_UPDATE_RESPONSE = 'CATEGORIES_UPDATE_RESPONSE'\nconst categoriesUpdateResponseAction = () => ({\n    \ttype: CATEGORIES_UPDATE_RESPONSE\n})\n\nconst update = (updates) => (\n    (dispatch) => {\n        dispatch(categoriesUpdateRequestAction(updates))\n        axios_post('cat/update', updates,\n            (response) => {\n               dispatch(categoriesUpdateResponseAction())\n               dispatch(load())\n               invalidate(CATEGORY, dispatch)\n            },\n            dispatch\n        )\n    }\n )\n\n const load = () => (\n    (dispatch) => {\n        dispatch(categoriesRequestAction())\n        axios_get('cat/list?ts='+Date.now(),\n            response => {\n               dispatch(categoriesResponseAction(response.data))\n            },\n            dispatch\n        )\n    }\n )\n \nexport {\n\tCATEGORY,\n    load,\n    update\n}","import React from 'react';\n\nconst normalizeCurrency = value => {\n    if (!value) {\n        return value\n    }\n    if (value === \"-\" || value === \"+\") {\n        value += \"0\"\n    }\n    var plus = value.lastIndexOf('+');\n    var minus = value.lastIndexOf('-');\n\n    value = value.replace(/[^\\d]/g, '')\n    if (value === \"\") {\n        value = \"0\"\n    }\n    value = \"\" + parseInt(value, 10);\n    if (value.length < 3) {\n        value = \"00\".slice(-3 + value.length) + value\n    }\n\n    var res = (plus >= minus ? '+' : '-') + value.slice(0, -2) + \".\" + value.slice(-2)\n    return res;\n}\n\nclass CurrencyField extends React.Component {\n\n\tconstructor(props) {\n        super(props)\n        this.state = {\n        \tcurrencyValue : props.value\n        }\n\t\tthis.onChange = this.onChange.bind(this)\n\t\tthis.handleFocus = this.handleFocus.bind(this)\n\t\t\n\t\t\n    }\n\t\n\thandleFocus(event) {\n\t\t  event.target.select();\n\t}\n\n\tonChange(e) {\n\t\t\n\t\tconst {onValueChanged, field, index} = this.props\n\t\tvar newCurrencyValue = normalizeCurrency(e.target.value)\n\t\tthis.setState({\n\t\t\tcurrencyValue : newCurrencyValue\n\t\t})\n\t\tonValueChanged(newCurrencyValue, field, index)\n\n\t}\n\t\n\tcomponentWillReceiveProps(nextprops) {\n\t\tthis.setState({\n\t\t\tcurrencyValue : nextprops.value\n\t\t})\n\t}\n\t\n\trender() {\n\t\tconst {id, readOnly, placeholder, touched, fontSize} = this.props\n\n\t\treturn (\n\t    <div>\n\t\t\t<input\n\t\t\t  onFocus={this.handleFocus}\n\n\t\t\t  id={id}\n\t\t\t  disabled={readOnly}\n\t\t\t  value={this.state.currencyValue}\n\t\t\t  onChange={this.onChange}\n\t          placeholder={readOnly ? '' : placeholder}  \n\t          type=\"text\"\n\t          className=\"form-control\" \n\t    \t  style={{\n\t    \t\t  'fontSize': fontSize,\n\t    \t\t  'textAlign': 'right', \n\t    \t\t  //'color' : this.state.currencyValue && this.state.currencyValue.startsWith('-') ? 'red' : 'green',\n\t    \t\t  'color' : this.state.currencyValue && (this.state.currencyValue.substr(0,1) === '-') ? 'red' : 'green',\n\t    \t\t  'display': 'inline',\n\t    \t\t  'width': '85px',\n\t    \t\t  'backgroundColor' : (touched ? 'lightyellow' : '')\n\t    \t  }} \n\t      />\n\t    </div>) \n\t}\t\n}\n\nCurrencyField.defaultProps = {\n\t\tid: null,\n\t\tonValueChanged: null,\n\t\tplaceholder : '',\n\t\tvalue : '',\n\t\treadOnly : false,\n\t\tfield: null,\n\t\tindex: null,\n\t\ttouched: false,\n\t\tfontSize: 'inherit'\n}\n\nexport default CurrencyField","import React from 'react'\n\nclass CheckboxField extends React.Component {\n\trender() {\n\t\tconst {id, readOnly, field, index, onValueChanged, touched, checked} = this.props\n\t\treturn(\n\t\t<div>\n\t\t\t<span style = {{display: \"flex\"}}>\n\t\t\t\t<div className = 'checkbox-personalized'>\n\t\t\t\t\t<input \n\t\t\t\t\t\tname = {id}\n\t\t\t\t\t\ttype = 'checkbox' \n\t\t\t\t\t\tdisabled = {readOnly}\n\t\t\t\t\t    id = {id}  \n\t\t\t\t\t\tchecked = {checked}\n\t\t\t\t\t\tonChange = {(e) => onValueChanged(e.target.checked, field, index)}\n\t\t\t\t\t/>\n\t\t\t\t\t<label htmlFor = {id} >\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tclassName = 'check'\n\t\t\t\t\t\t\tstyle = { readOnly ? {backgroundColor: 'lightgray', borderColor: 'lightgray'} : \n\t\t\t\t\t\t\t         (touched ? {backgroundColor: 'darkKhaki', borderColor: 'darkKhaki'} : {})} /> {/*//TODO: to css this*/}\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</span>\n\t\t</div>)\n\t}\t\n}\n\nCheckboxField.defaultProps = {\n\t\tid : null,\n\t\tonValueChanged : null,\n\t\tchecked : true,\n\t\treadOnly : false,\n\t\tfield : null,\n\t\tindex : null,\n\t\ttouched: false\n}\n\nexport default CheckboxField","import React from 'react';\nimport {Button} from 'react-bootstrap'\nvar FontAwesome = require('react-fontawesome');\n\nclass TextField extends React.Component {\n\n\tconstructor(props) {\n        super(props)\n        this.state = {\n        \ttxtValue : props.value\n        }\n        this.onChange = this.onChange.bind(this)\n    }\n\t\n\tonChange(e) {\n\t\tconst {onValueChanged, field, index} = this.props\n\t\tthis.setState({\n\t\t\ttxtValue : e.target.value\n\t\t})\n\t\tonValueChanged(e.target.value, field, index)\n\t}\n\n\tcomponentWillReceiveProps(nextprops) {\n\t\tthis.setState({\n\t\t\ttxtValue : nextprops.value\n\t\t})\n\t}\n\t\n\trender() {\n\t\tconst {id, placeholder, readOnly, touched, linkCb} = this.props\n\t\t\n\t\tvar button = linkCb && this.state.txtValue && this.state.txtValue.length > 0?\n\t\t\t\t<Button bsSize=\"small\" onClick={ () => {\n\t\t\t\t\tlinkCb(this.state.txtValue)}\n\t\t\t\t}>\n\t\t\t\t<FontAwesome name='caret-right' />\n      \t\t\t</Button>\n\t\t:\n\t\tnull\n\t\t\n\t\treturn(\n\t    <div>\n\t    \t<span style={{display: \"inline-flex\"}}>\n\t    \t<input \n\t    \t    id={id}\n\t    \t\tvalue={this.state.txtValue}\n\t    \t    disabled={readOnly}\n\t    \t    style={{'backgroundColor' : (touched ? 'lightyellow' : '')}}\n\t    \t\tplaceholder={readOnly ? '' : placeholder} \n\t    \t\ttype=\"text\" \n\t    \t\tonChange={this.onChange}\n\t    \t\tclassName=\"form-control\"\n\t    \t/>\n\t    \t{button}\n\t    \t</span>\n\t    </div>)\n\t}\t\n}\n\nTextField.defaultProps = {\n\t\tid: null,\n\t\tplaceholder: '',\n\t\tonValueChanged: null,\n\t\tvalue : '',\n\t\treadOnly : false,\n\t\tfield: null,\n\t\tindex: null,\n\t\ttouched: false,\n\t\tlinkCb: null\n}\n\nexport default TextField","\nimport React from 'react'\nimport reactCSS from 'reactcss'\nimport { SketchPicker } from 'react-color'\n\nclass ColorField extends React.Component {\n\tconstructor(props) {\n        super(props)\n        this.state = {\n        \tdisplayColorPicker: false,\n        \tcolor: props.color\n        }\n    }\n\t\n\tcomponentWillReceiveProps(nextprops) {\n\t\tthis.setState({\n\t\t\tcolor : nextprops.color\n\t\t})\n\t}\n\n\thandleClick = () => {\n\t\tif (!this.props.readOnly )\n\t\tthis.setState({ displayColorPicker: !this.state.displayColorPicker })\n\t};\n\t\n\thandleClose = () => {\n\t    this.setState({ displayColorPicker: false })\n\t};\n\n\thandleChange = (color) => {\n\t  const {onValueChanged, field, index} = this.props\n\t  this.setState({ \n\t\t  color: color.hex,\n\t      displayColorPicker: !this.state.displayColorPicker\n\t  })\n\t  onValueChanged(color.hex, field, index)\n   }\n\n  render() {\n\n    const styles = reactCSS({\n      'default': {\n        color: {\n          width: '28px',\n          height: '24px',\n          borderRadius: '4px',\n          background: this.state.color\n        },\n        swatch: {\n          padding: '5px',\n          background: (this.props.touched ? 'lightyellow' : '#fff'),\n          borderRadius: '4px',\n          boxShadow: '0 0 0 1px rgba(0,0,0,' + (this.props.readOnly ? '0' : '.1')+ ')',\n          display: 'inline-block',\n          cursor: (this.props.readOnly ? '' : 'pointer'),\n        },\n        popover: {\n          position: 'relative',\n          zIndex: '2',\n        },\n        cover: {\n          position: 'fixed',\n          top: '0px',\n          right: '0px',\n          bottom: '0px',\n          left: '0px',\n        },\n      },\n    });\n\n    return (\n      <div>\n        <div style={ styles.swatch } onClick={ this.handleClick }>\n          \t<div style={ styles.color } />\n        </div>\n        { this.state.displayColorPicker ? \n        \t\t<div style={ styles.popover }>\n          \t\t\t<div style={ styles.cover } \n          \t\t\t\tonClick={ this.handleClose }\n          \t\t\t/>\n          \t\t\t<SketchPicker \n          \t\t\t\tcolor={ this.state.color } \n          \t\t\t\tonChange={ this.handleChange } \n          \t\t\t/>\n          \t\t</div> \n          : null \n        }\n      </div>\n    )\n  }\n}\n\nColorField.defaultProps = {\n\t\tid: null,\n\t\tonValueChanged: null,\n\t\tcolor : 'red',\n\t\treadOnly : false,\n\t\tfield: null,\n\t\tindex: null,\n\t\ttouched: false,\n}\n\nexport default ColorField","var alertOptions = {\n\t\t\t    offset: 14,\n\t\t\t    position: 'bottom right',\n\t\t\t    theme: 'light',\n\t\t\t    time: 5000,\n\t\t\t    transition: 'scale'\n\t\t\t  }\n\t\t  \t\t\t  \nexport  default alertOptions","// c represents currency\nfunction currencyFormat(c) {\n\treturn parseFloat(Math.round(c* 100) / 100).toFixed(2)\n}\n\nexport default currencyFormat","import currencyFormat  from '../../util/currency'\n\nconst fields = ['color','descr','i','active']\n\nconst defaultValues = {\n\tid: null,\n\ti: \"+0.00\",\n\tactive: true,\n\tdescr: '',\n\tcolor: 'blue'\n}\n\nconst validators = {\n\t'i': (value) => {\n\t\t\treturn null\n\t\t  },\n\t'active': (value) => {\n\t\t\treturn null\n\t\t },\n\t'descr':  (value) => {\n\t\t\treturn (value !== '') ? null : 'required'\n\t\t  },\n\t'color': (value) => {\n\t\t\treturn (value !== '') ? null : 'required'\n\t\t  }\n}\n\nfunction preInitFormat(categories) {\n\tvar copy = deepCopy(categories)\n\tcopy.forEach((c) => {\n\t\t// 2 -> +2.00\n\t\tc.i =  (c.i >=0 ? '+' : '') + currencyFormat(c.i)\n\t})\n\treturn copy\n}\n\nfunction preSubmitFormat(payments) {\n\tpayments.forEach( (p) => {\n\t\tif(p.i) {\n\t\t\t// \"+2.00\" -> 2\n\t\t\tp.i =  parseFloat(p.i)\n\t\t\t//p.i_initial = parseFloat(p.i_initial)\n\t\t }\n\t})\n\treturn payments\n}\n\n\nfunction copyObject(b) {\n\treturn {\n\t\tid: b,\n\t\ti: b,\n\t\tactive: b,\n\t\tdescr: b,\n\t\tcolor: b\n\t}\n}\n\nfunction copyCategory(category, index = null) {\n\treturn {\n\t\t'index': index,\n\t\tid: category.id,\n\t\ti: category.i,\n\t\tactive: category.active,\n\t\tdescr: category.descr,\n\t\tcolor: category.color\n\t}\n}\n\nfunction  deepCopy(payments) {\n\tvar copy = []\n\tpayments.forEach(\n\t\t(p) => {copy.push(copyCategory(p))}\n\t)\n\treturn copy\n}\n\nfunction initState(categories) {\n\tvar copy = {\n\t\tvalues : [],\n\t\tinitial : [],\n\t\terrors : [],\n\t\ttouched : [],\n\t\tdeleted : [],\n\t\tsort: null,\n\t\tasc: true\n\t}\n\tcategories.forEach((p, index) => {\n\t\tcopy.values.push(copyCategory(p, index))\n\t\tcopy.initial.push(copyCategory(p))\n\t\tcopy.errors.push(copyObject(null))\n\t\tcopy.touched.push(copyObject(false))\n\t\tcopy.deleted.push(false)\n\t})\n\treturn copy\n}\n\nfunction oneIsTrue(row) {\n\tvar ret =\n\t\trow.i ||\n\t\trow.active ||\n\t\trow.descr ||\n\t\trow.color \n\treturn ret\n}\n\nfunction activeIsRo(row) {\n\tvar ret =\n\t\trow.i ||\n\t\trow.descr ||\n\t\trow.color \n\treturn ret\n}\nfunction copyArray(array) {\n\treturn array.splice(0)\n}\n\nexport {\n\tfields,\n\tinitState,\n\tdefaultValues,\n\tvalidators,\n\tpreInitFormat,\n\tpreSubmitFormat,\n\toneIsTrue,\n\tcopyArray,\n\tactiveIsRo\n}","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Table, Panel, Button } from 'react-bootstrap';\n\nimport { update } from '../../actions/categories'\n\nimport CurrencyField from '../editorFields/CurrencyField'\nimport CheckboxField from '../editorFields/CheckboxField'\nimport TextField from '../editorFields/TextField'\nimport ColorField from '../editorFields/ColorField'\n\nimport './CategoriesEditor.css'\nimport '../../customMultiSelect.css'\n\n\nimport AlertContainer from 'react-alert'\nimport alertOptions from '../../util/alertoptions'\n\n\n//import { withMedia } from 'react-media-query-hoc';\n\nimport {\n\t\tfields,\n\t\tinitState,\n\t\tdefaultValues, \n\t\tvalidators,\n\t\tpreInitFormat,\n\t\tpreSubmitFormat,\n\t\toneIsTrue,\n\t\tcopyArray,\n\t\tactiveIsRo\n} from './constants'\n\nvar FontAwesome = require('react-fontawesome')\n\nvar tempId = -1\n\nclass CategoriesEditor extends React.Component {\n    constructor(props) {\n        super(props)\n        //postfix -abbr. F = Field, R = Row, T = Table\n        this.showOk = this.showOk.bind(this)\n        //Field related:\n        \n        //callbacks from uicomponents for updating model (state)\n        this.changePropertyF = this.changePropertyF.bind(this)\n        this.changePropertyDeletedF = this.changePropertyDeletedF.bind(this)\n        \n        //set state values:\n        this.setValueF = this.setValueF.bind(this)\n        \n        //validate:\n        this.validateF = this.validateF.bind(this)\n        \n        //some field related util;\n        this.touchedF = this.touchedF.bind(this) //dirty?\n        this.isDifferentFromInitialF = this.isDifferentFromInitialF.bind(this)        \n\n        //choose right value for render\n        this.chooseValueF = this.chooseValueF.bind(this)\n\n        //render\n        this.renderContentF = this.renderContentF.bind(this)\n        this.renderDeletedContentF = this.renderDeletedContentF.bind(this)\n        \n        //sort\n        this.setSortF = this.setSortF.bind(this)\n        this.sortersF = this.sortersF.bind(this)\n        \n        //Row related:\n        \n        //add/remove\n        this.addR = this.addR.bind(this)\n        this.getDefaultR = this.getDefaultR.bind(this) //choose values for new row\n        this.removeR = this.removeR.bind(this)\n\n        //validate\n        this.validateR = this.validateR.bind(this)\n        this.readOnlyR = this.readOnlyR.bind(this)\n        \n        //utils\n        this.isPersistedR = this.isPersistedR.bind(this)\n\n        //render\n        this.renderCategoryR = this.renderCategoryR.bind(this)\n\n        //Table related:\n        this.resetT =  this.resetT.bind(this)\n        //util\n        this.isPristineT = this.isPristineT.bind(this)\n        this.hasErrorsT = this.hasErrorsT.bind(this)\n        \n        //format input/output\n        this.preInitT = this.preInitT.bind(this)\n        this.preSubmitT = this.preSubmitT.bind(this)\n        \n        //init constants\n        this.init =  this.init.bind(this)\n        //render\n        this.renderCategoriesT = this.renderCategoriesT.bind(this)\n\n        //css and stuff\n        this.tdClassName = this.tdClassName.bind(this)\n        this.td = this.td.bind(this)\n        this.thClassName = this.thClassName.bind(this)\n        this.th = this.th.bind(this)\n        \n        this.init()\n        this.state = {...initState(this.preInitT(props.initCategories))}\n    }\n\n    changePropertyF(value, field, index) {\n    \t//touch\n\t\tif (this.isPersistedR(index)) { //new rows do not get 'touched' (unless masked)\n\t\t\tvar copy = copyArray(this.state.touched)\n\t\t\tcopy[index][field] = this.isDifferentFromInitialF(value, field, index)\n\t\t\tthis.setState({touched : copy})\n\t\t}\n\t\t\n\t\t//validate\n\t\tthis.validateF(field, value, index)\n\n    \tthis.setValueF(value, field, index)\n    }\n    \n    changePropertyDeletedF(value, field, index) {\n    \tif(this.isPersistedR(index)) { //if it has id, let backend remove: mark as deleted\n    \t\tthis.deleteCount += (value ? 1 : -1)\n    \t\tvar copy = copyArray(this.state.deleted)\n    \t\tcopy[index] = value\n    \t\tthis.setState({deleted : copy})\n    \t} else {\n    \t\tthis.removeR(index) //if newly created, just remove it\n    \t}\n    }\n    \n\tsetValueF(value, field, index) {\n\t\tvar copy = copyArray(this.state.values)\n\t\tcopy[index][field] = value\n\t\tthis.setState({values : copy})\n\t}\n\n\tvalidateF(field, value, index) {\n\t\tvar original = this.state.errors[index][field]\n\t\tvar result = validators[field](value) \n\t\tif( result !== original ) {\n\t\t\tvar copy = copyArray(this.state.errors)\n\t\t\tcopy[index][field] = validators[field](value) \n\t\t\tthis.setState({errors : copy})\n\t\t}\n\t}\n\t\n\ttouchedF(index, field) {\n\t\tif(index<0) return false //mask-controls are never touched (-1 = checkbox -2 = mask value)\n\t\tif(this.state.deleted[index]) return false \t//to be deleted: not touched\n\t\tif(!this.isPersistedR(index)) return false \t//this is a new row: not touched and not masked\n\t\treturn this.state.touched[index][field]\n\t}\n\t\n\tisDifferentFromInitialF(value, field, index) {\n\t\treturn (value !== this.state.initial[index][field])\n\t}\n\n\tchooseValueF(index, field) {\n\t\tif(this.state.deleted[index]) return this.state.initial[index][field] //show initial values if to be deleted\n\t\treturn this.state.values[index][field] \n\t}\n\t\n\trenderContentF(field, index) {\n     \t\n    \tvar  value = this.chooseValueF(index, field)\n    \t\n    \tswitch(field) {\n    \tcase 'i' :\n\t\t\t\t\treturn(\n\t\t\t\t  \t<div>\n\t\t\t\t  \t\t<CurrencyField \n\t\t\t\t\t  \t\tid = {'icat_'+index}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\tplaceholder = 'amount'\n\t\t\t\t\t  \t\tvalue = {value}\n\t\t\t\t\t  \t\treadOnly = {this.readOnlyR(index, 'i')}\n\t\t\t\t  \t\t\tfield = 'i'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, 'i')}\n\t\t\t\t\t  \t/>\n\t\t\t\t    </div>)\n    \tcase 'active' :\n\t\t\t\t\treturn(\n\t\t\t\t  \t<div>\n\t\t\t\t  \t\t<CheckboxField \n\t\t\t\t\t  \t\tid = {'activecat_' + index}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\tchecked = {value}\n\t\t\t\t\t  \t\treadOnly = {this.isPersistedR(index) && activeIsRo(this.state.touched[index])}\n\t\t\t\t  \t\t\tfield = 'active'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, 'active')}\n\t\t\t\t\t  \t/>\n\t\t\t\t    </div>)\t\t\t\t\t    \n    \tcase 'descr' :\n\t\t\t\t\treturn(\n\t\t\t\t  \t<div>\n\t\t\t\t  \t\t<TextField \n\t\t\t\t\t  \t\tid = {'descrcat_'+index}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\tvalue = {value}\n\t\t\t\t\t  \t\treadOnly = {this.readOnlyR(index, 'descr')}\n\t\t\t\t  \t\t\tfield = 'descr'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, 'descr')}\n\t\t\t\t  \t\t\tplaceholder = 'name'\n\t\t\t\t\t  \t/>\n\t\t\t\t    </div>)\n    \tcase 'color' :\n\t\t\t\t\treturn(\n\t\t\t\t  \t<div>\n\t\t\t\t  \t\t<ColorField \n\t\t\t\t\t  \t\tid = {'colorcat_'+index}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\tcolor = {value}\n\t\t\t\t\t  \t\treadOnly = {this.readOnlyR(index, 'color')}\n\t\t\t\t  \t\t\tfield = 'color'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, 'color')}\n\t\t\t\t\t  \t/>\n\t\t\t\t    </div>)\n\t\tdefault: console.log('UNKONWN field: '+field)\n\t\t\t  \t   return null\n    \t}\n    }\n\t\n\trenderDeletedContentF(index) {\n\t\tif(!this.isPersistedR(index)) { \n\t\t\treturn(\n\t\t\t<button \n\t\t  \t\ttype=\"button\" \n\t\t  \t\tclassName=\"form-control\"  \n\t\t  \t\tonClick={() => this.changePropertyDeletedF(true, 'deleted', index)}>\n\t\t  \t\t<FontAwesome name = 'remove' style = {{'color': 'red'}}/>\n\t\t    </button>)\n\t\t}\n\t  \treturn\t\n\t\t/*return(\n\t  \t<div>\n\t  \t\t<CheckboxField \n\t\t  \t\tid = {'deletedcat_'+index}\n\t\t  \t\tonValueChanged = {this.changePropertyDeletedF}\n\t\t  \t\tchecked = {this.state.deleted[index]}\n\t  \t\t\tfield = 'deleted'\n\t  \t\t\tindex = {index}\n\t  \t\t\ttouched = {false}\n\t\t  \t/>\n\t    </div>)*/\n\t}\n\t\t\n\tsetSortF(field) {\n\t\t//console.log(field)\n\t\tif(!this.state.sort || this.state.sort !==field) {\n\t\t\tthis.setState({\n\t\t\t\tsort : field,\n\t\t\t\tasc : true\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t\tif(this.state.sort === field && this.state.asc) {\n\t\t\tthis.setState({\n\t\t\t\tasc : false\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t\tthis.setState({\n\t\t\tsort : null\n\t\t})\n\t\treturn\n\t}\n\n\tsortersF() {\n\t\tvar inv = this.state.asc ? -1 : 1\n\t\tswitch(this.state.sort) {\n\t\tcase 'i': \n\t\t\treturn (a, b) => {\n\t\t\t\treturn inv * \n\t\t\t\t(this.chooseValueF(b.index,this.state.sort) - this.chooseValueF(a.index,this.state.sort))\n\t\t\t}\n\t\tcase 'descr':\n\t\t\treturn (a, b) => {\n\t\t\t\t var textA = this.chooseValueF(a.index,'descr').toUpperCase()\n\t\t\t\t var textB = this.chooseValueF(b.index,'descr').toUpperCase()\n\t\t\t\t return inv * \n\t\t\t\t ((textA < textB) ? -1 : (textA > textB) ? 1 : 0)\n\t\t\t}\n\t\tcase 'active':\n\t\t\treturn (a, b) => {\n\t\t\t\t return inv * (a.active && b.active ? 0 : (a.active? 1 : -1))\n\t\t\t}\n\t\tdefault: return (a, b) => {return 0}\n\t\t}\n\t}\n\t\n\taddR() {\n    \tvar defaults = this.getDefaultR()\n    \tvar valuesCopy = copyArray(this.state.values)\n    \tvaluesCopy.push(defaults)\n    \t//valuesCopy.splice(valuesCopy.length + 1, 0, defaults);\n    \tthis.sortedValues.push(defaults)\n    \t//this.sortedValues.splice(this.sortedValues.length + 1, 0, defaults);\n    \t\n    \t\n    \tvar errorsCopy = copyArray(this.state.errors)\n    \terrorsCopy.push(this.validateR(defaults))\n    \t//errorsCopy.splice(errorsCopy.length + 1, 0, this.validateR(defaults));\n    \t\n    \tthis.setState({\n    \t\t    \tvalues : valuesCopy,\n    \t\t    \terrors : errorsCopy,\n    \t})\n    }\n\t    \n\tgetDefaultR() {\n\t\tvar last = defaultValues\n\t\tif (this.sortedValues.length){\n\t\t\tlast = this.sortedValues[this.sortedValues.length - 1]\n\t\t}\n\n\t\tvar res = {...last}\n\t\tres.index = this.state.values.length\n\t\tres.id = tempId--\n\t\tres.l = false\n\t\tres.check = false\n\t\treturn res\n\t}\n    \n    removeR(index) {\n    \tthis.state.values.splice(index, 1)\n        var values_copy = copyArray(this.state.values)\n        this.state.errors.splice(index, 1)\n    \tvar errors_copy = copyArray(this.state.errors)\n\n    \t//reindex:\n    \tfor(var ix=index ; ix<values_copy.length ;ix++) {\n    \t\tvalues_copy[ix].index--\n    \t\terrors_copy[ix].index--\n    \t}\n    \tthis.setState({\n    \t\t    \tvalues : values_copy,\n    \t\t    \terrors : errors_copy,\n    \t})\n    }\n    \n    validateR(v) {\n\t   var res = {}\n\t   fields.forEach( (field) => {\n\t\t   \tres[field] = validators[field](v[field])\n    \t})\n    \treturn res\n    }\n    \n    readOnlyR(index, field) {\n\t\treturn this.state.deleted[index] || //marked as to be deleted?\t\t\t\n\t\t\t   \t   (!this.state.values[index].active && this.isPersistedR(index))\n\t}\n    \n    isPersistedR(index) {\n\t\treturn this.state.values[index].id >=0\n\t}\n    \n    renderCategoryR(index) {\n    \treturn(\n    \t<tr key={index}>\n\t \t\t{[...fields].map( (f) => { \n\t \t\t\treturn this.td(index, f) \n\t \t\t})}\n\t \t\t\n\t      \t<td className={this.tdClassName(index, 'deleted')}>\n\t      \t\t{this.renderDeletedContentF(index)}\n\t      \t</td>\n\t      \t\n\t\t</tr>)\n    }\n    \n\tresetT() {\n\t\tvar state = initState(this.state.initial)\n\t\tthis.setState({...state})\n\t\tthis.init()\n\t}\n\t\n\tisPristineT() {\n\t\tvar pristine = true\n    \tthis.state.touched.forEach( (v) => {\n    \t\tfields.forEach( (f) => {\n    \t\t\tpristine = pristine && !v[f]\n    \t\t})\n    \t})\n    \treturn pristine &&\n    \t\t   (this.state.initial.length === this.state.values.length) && \n    \t       !this.deleteCount \n\t}\n\t\n\thasErrorsT() {\n\t\tvar errors = false\n    \tthis.state.errors.forEach( (v) => {\n    \t\terrors = errors || oneIsTrue(v) \n    \t})\n    \treturn errors\n\t}\n\t\n\tpreInitT(initialCategories) {\n\t\treturn preInitFormat(initialCategories)\n\t}\n\t\n\tshowOk() {\n\t\tthis.msg.show('SAVED SUCCESSFULLY', {\n\t      time: 2000,\n\t      type: 'success',\n\t      icon: <img src=\"yes.png\" alt=\"save ok\"/>\n\t    })\n\t }\n\t\n\tpreSubmitT() {\n\t\tvar created = []\n\t\tthis.state.values.forEach((v,index) => {\n\t\t\tif(!this.isPersistedR(index)) {\n\t\t\t\tvar p={}\n\t\t\t\tfields.forEach( (field) =>\n\t\t\t\t{\n\t\t\t\t\t p[field] = this.chooseValueF(index, field)\n\t\t\t\t})\n\t\t\t\tcreated.push(p)\n\t\t\t}\n\t\t}) \n\t\t\n\t\tvar deleted = []\n\t\tthis.state.deleted.forEach((v,i) => {\n\t\t\tif(v) {\n\t\t\t\tdeleted.push(this.state.values[i].id)\n\t\t\t} \n\t\t})\n\t\t\n\t\tvar modified = []\n\t\t//for(var index=0; index<this.state.values.length; index++) {\n\t\tthis.state.values.forEach( (v, index) => {\n\t\t\tif(this.isPersistedR(index)) {\n\t\t\t\tvar p={}\n\t\t\t\tfields.forEach((field) => {\n\t\t\t\t\t if(this.touchedF(index, field)) {\n\t\t\t\t\t\t p.id = v.id\n\t\t\t\t\t\t p[field] = this.chooseValueF(index, field)\n\t\t\t\t\t }\n\t\t\t\t })\n\t\t\t\t if(Object.keys(p).length > 0){\n\t\t\t\t\t modified.push(p)\n\t\t\t\t }\n\t\t\t}\n\t\t})\n\n\t\tvar updates = {\n\t\t\t\t'created' : preSubmitFormat(created),\n\t\t\t\t'deleted' : deleted,\n\t\t\t\t'modified' : preSubmitFormat(modified)\n\t\t}\n\t\tconsole.log(JSON.stringify(updates,null,4))\n\t\t//\"submit\"\n\t\tthis.pristine = null\n\t\tthis.props.update(updates)\n\t}\n\n    init() {\n        this.deleteCount = 0\n        this.pristine = null\n        this.errors = null\n        this.allChecked = false\n    }\n\n\trenderCategoriesT = () => {\n\t\tthis.sortedValues = this.state.values.slice(0)\n\t\tif (this.state.sort) this.sortedValues.sort(this.sortersF())\n\t\t\n\t\treturn (\n\t\t<div>\n\t\t<Panel id=\"accs-panel\" >\n          <Panel.Heading >\n            <Panel.Title >\n\t\t\t\t\t<Button onClick={() => this.resetT()} disabled={this.pristine} bsStyle={this.pristine ? \"default\":\"primary\"} >Reset</Button>\n\t\t\t\t\t<Button onClick={() => this.preSubmitT()} disabled={this.pristine || (this.errors != null)} bsStyle={this.pristine ? \"default\":\"primary\"}>Save</Button>\n\t\t\t\t\t<Button onClick={() => this.addR()}>Add</Button>\n\t\t\t</Panel.Title >\n\t\t </Panel.Heading >\t\n\t\t <Panel.Body>\n\t\t\t<Table id=\"categories_table\" striped bordered hover condensed>\n\t\t\t\t<thead>\n\t\t\t  \t\t<tr>\n\t\t\t  \t\t\t<th className={this.thClassName('color')} />\n\t\t\t  \t\t\t{this.th('descr', 'Name')}\n\t\t\t  \t\t\t{this.th('i', 'Default')}\n\t\t\t  \t\t\t{this.th('active', 'Active')}\n\t\t\t  \t\t\t\n\t\t\t  \t\t\t<th className={this.thClassName('deleted')}>\n\t\t\t  \t\t\t\t<FontAwesome name='remove' style={{'color': 'red'}}/>\n\t\t\t  \t\t\t</th>\n\t\t\t  \t\t\t\n\t\t\t\t\t</tr>\t\t\t\t  \t\t\t\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t  \t{this.sortedValues.map((p) => this.renderCategoryR(p.index))}\n\t\t\t\t</tbody>\n\t\t\t</Table>\n\t\t</Panel.Body>\n\t\t</Panel >\n\t\t</div>)\n\t}\n\t\t\n\ttdClassName(index, field) {\n\t\treturn field + '_cell' + \n\t\t\t   (!this.isPersistedR(index) ? ' newRow' : '') +\n\t\t\t   (this.state.deleted[index] ? ' deleted' : '') +\n\t\t\t   (this.state.errors[index][field] ? ' error' : '')\n\t}\n\t\n\ttd(index, field) {\n\t\treturn (\n\t\t<td key={index+'_'+field} className={this.tdClassName(index, field)}>\n\t\t      {this.renderContentF(field, index)}\t\n\t\t</td>)\n\t}\n\t\n\tthClassName(field) {\n\t\treturn field + '_header' \n\t}\n\t\n\t\n\tth(field, label = null) {\n\t\tvar arrow = (<FontAwesome name = {this.state.asc ? 'sort-asc' : 'sort-desc'} />)\n\n\t\tvar sortField = (<div>{this.state.sort === field ? arrow : ''}</div>)\n\t\t\n\t\tvar labelField = (\n\t\t\t\t<div  style={{marginTop: 8}}>\n  \t\t\t\t\t<button  type=\"button\" className=\"link-button\" onClick={() => {this.setSortF(field)}}>\n  \t\t\t\t\t\t{label}\n  \t\t\t\t\t</button>\n\t\t  \t\t</div>)\n\t\treturn(\n\t\t<th className={this.thClassName(field)}>\n  \t\t\t<div>\n\t  \t\t\t<span style={{display: \"flex\"}}>\t\t\t  \t\t\t\t\t\t\n\t  \t\t\t\t<div style={{marginTop: 8, paddingRight: 3}}>\n\t  \t\t\t\t\t{sortField}\n\t  \t\t\t\t</div>\n\t  \t\t\t\t{label !== null ? labelField : ''}\n\t  \t\t\t</span>\n\t  \t\t</div>\n\t\t</th>)\n\t}\n\t\n\tcomponentWillReceiveProps(nextprops) {\n\t\tif( !this.isPristineT()  && this.pristine == null) { //just saved\n\t\t\tthis.showOk()\n\t\t}\n\t\n\t\tthis.init()\n\t\tthis.setState(\n\t\t\t\t{...initState(this.preInitT(nextprops.initCategories))}\n\t\t)\n\t}\n\t\n\trender() {\n\t\tthis.pristine = this.isPristineT()\n\t\tthis.errors = this.hasErrorsT()\n\t\treturn(\n\t\t\t<div>\n\t        \t\t<AlertContainer ref={a => this.msg = a} {...alertOptions} />\n\t\t\t\t\t{this.renderCategoriesT()}\n\t\n\t\t   </div>\n\t\t)\n\t}\n}\n\nCategoriesEditor.defaultProps = {\n\t\tinitCategories: []\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return({\n        update: (updates) => {\n            dispatch(update(updates))\n        }\n    })\n}\n\nexport default connect(null, mapDispatchToProps)(CategoriesEditor)\n\n\n","import React from 'react';\nimport { connect } from 'react-redux'\nimport { Panel } from 'react-bootstrap'\nimport CategoriesEditor from '../categoriesEditor/CategoriesEditor'\n\nclass Categories extends React.Component {\n\trender() {\n\t\treturn(\n\t\t\t<div>\n\t\t\t  <Panel >\n\t\t\t  \t<Panel.Heading style={{paddingTop: \"4px\", paddingBottom: \"3px\", height: \"45px\", fontSize: \"23px\"}}>\n\t\t\t\t  \t<span style={{display: \"flow-root\", alignItems: \"center\"}}>\n\t\t\t\t  \t\tCategories \n\t\t\t\t  \t</span>\n\t\t\t  \t</Panel.Heading>\n\t\t\t  \t<Panel.Body>\t\t\t\t\t\n\t\t\t\t\t<CategoriesEditor initCategories={this.props.categories} />\n\t\t\t\t</Panel.Body>\n\t\t\t  </Panel>\n\t\t\t</div>\n\t\t\t)\n\t}\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        categories: store.categories.categories\n    }\n}\n\nexport default connect(mapStateToProps)(Categories)\n","import {axios_get_params} from './axios';\n\nvar dateFormat = require('dateformat');\n\nconst CHART_REQUEST = 'CHART_REQUEST'\nconst chartRequestAction = (s, e) => ({\n    type: CHART_REQUEST,\n    payload: {\n        's': s,\n        'e': e\n    }\n})\n\nconst CHART_RESPONSE = 'CHART_RESPONSE'\nconst chartResponseAction = (response) => (\n  { \n\ttype: CHART_RESPONSE,\n    payload: \n    \t{\n    \t\tcurves : response\n    \t} \n  }\n)\n\nconst CHART_NEXTDAY = 'CHART_NEXTDAY'\nconst chartNextDayAction = () => (\n  { \n\ttype: CHART_NEXTDAY,\n    payload: \n    \t{\n    \t\tnextday : (new Date()).getTime() //only signal\n    \t} \n  }\n)\n\nconst CHART_PREVDAY = 'CHART_PREVDAY'\nconst chartPrevDayAction = () => (\n  { \n\ttype: CHART_PREVDAY,\n    payload: \n    \t{\n    \t\tprevday : (new Date()).getTime() //only signal\n    \t} \n  }\n)\n\nconst CHART_TODAY = 'CHART_TODAY'\nconst chartTodayAction = () => (\n  { \n\ttype: CHART_TODAY,\n    payload: \n    \t{\n    \t\ttoday : (new Date()).getTime() //only signal\n    \t} \n  }\n)\n\nconst CHART_REDRAW = 'CHART_REDRAW'\nconst chartRedrawAction = () => (\n  { \n\ttype: CHART_REDRAW,\n    payload: \n    \t{\n    \t\tredraw : (new Date()).getTime() //only signal\n    \t} \n  }\n)\n\nvar params = null\n\nfunction get(dispatch) {\n    dispatch(chartRequestAction(params.s, params.e))\n    axios_get_params('chart?ts='+Date.now(), \n    \t\t\t\t{params: params},\n\t\t\t\t    response => {\n\t\t\t  \t\t  dispatch(chartResponseAction(response.data))\n\t\t\t\t    },\n\t\t\t\t    dispatch\n\t)\n\n}\n\nconst chart_load = (s, e) => (\n  (dispatch) => {\n\t  params = {\n\t\t\t  's': dateFormat(s, \"yyyy-mm-dd\"),\n\t\t\t  'e': dateFormat(e, \"yyyy-mm-dd\")\n\t  }\n\t  get(dispatch)\n    }\n)\n\n\nconst chart_refresh = () => (\n    (dispatch) => {\n        console.assert(params)\n        get(dispatch)\n    }\n)\n\nconst chart_next_day = () => (\n    (dispatch) => {\n    \tdispatch(chartNextDayAction())\n    }\n)\n\nconst chart_prev_day = () => (\n    (dispatch) => {\n    \tdispatch(chartPrevDayAction())\n    }\n)\n\nconst chart_today = () => (\n    (dispatch) => {\n    \tdispatch(chartTodayAction())\n    }\n)\n\nconst chart_redraw = () => (\n    (dispatch) => {\n    \tdispatch(chartRedrawAction())\n    }\n)\n\n\nexport {\n\tchart_load,\n\tchart_refresh,\n\tchart_next_day,\n\tchart_prev_day,\n\tchart_today,\n\tchart_redraw\n}\n","import {axios_get, axios_post} from './axios';\nimport { chart_refresh } from './chart'\nimport { invalidate } from './constants'\n\nconst ACCOUNT = 'acc'\n\t\nconst ACCOUNTS_REQUEST = 'ACCOUNTS_REQUEST'\nconst accountsRequestAction = () => ({\n    type: ACCOUNTS_REQUEST\n})\n\nconst ACCOUNTS_RESPONSE = 'ACCOUNTS_RESPONSE'\nconst accountsResponseAction = (accounts) => ({\n    type: ACCOUNTS_RESPONSE,\n    payload: {\n        \"accounts\": accounts\n    }\n})\n\nconst ACCOUNTS_UPDATE_REQUEST = 'ACCOUNTS_UPDATE_REQUEST'\nconst accountsUpdateRequestAction = (updates) => ({\n    type: ACCOUNTS_UPDATE_REQUEST,\n    payload: {\n    \t\"updates\": updates\n    }\n})\n\nconst ACCOUNTS_UPDATE_RESPONSE = 'ACCOUNTS_UPDATE_RESPONSE'\nconst accountsUpdateResponseAction = () => ({\n    \ttype: ACCOUNTS_UPDATE_RESPONSE\n})\n\nconst update = (updates) => (\n    (dispatch) => {\n        dispatch(accountsUpdateRequestAction(updates))\n        axios_post('acc/update', updates,\n            response => {\n               dispatch(accountsUpdateResponseAction())\n               dispatch(load())\n               invalidate(ACCOUNT, dispatch)\n               dispatch(chart_refresh())\n            },\n            dispatch\n        )\n    }\n )\n\n const load = () => (\n    (dispatch) => {\n        dispatch(accountsRequestAction())\n        axios_get('acc/list?ts='+Date.now(),\n            response => {\n               dispatch(accountsResponseAction(response.data))\n            },\n            dispatch\n        )\n    }\n )\n \nexport {\n\tACCOUNT,\n    load,\n    update\n}","const fields = ['color','descr','credit','active']\n\nconst defaultValues = {\n\tid: null,\n\tcredit: false,\n\tactive: true,\n\tdescr: '',\n\tcolor: 'blue'\n}\n\nconst validators = {\n\t'credit': (value) => {\n\t\t\treturn null\n\t\t  },\n\t'active': (value) => {\n\t\t\treturn null\n\t\t },\n\t'descr':  (value) => {\n\t\t\treturn (value !== '') ? null : 'required'\n\t\t  },\n\t'color': (value) => {\n\t\t\treturn (value !== '') ? null : 'required'\n\t\t  }\n}\n\nfunction preInitFormat(accounts) {\n\treturn deepCopy(accounts)\n}\n\nfunction preSubmitFormat(payments) {\n\treturn payments\n}\n\n\nfunction copyObject(b) {\n\treturn {\n\t\tid: b,\n\t\tcredit: b,\n\t\tactive: b,\n\t\tdescr: b,\n\t\tcolor: b\n\t}\n}\n\nfunction copyAccount(account, index = null) {\n\treturn {\n\t\t'index': index,\n\t\tid: account.id,\n\t\tcredit: account.credit,\n\t\tactive: account.active,\n\t\tdescr: account.descr,\n\t\tcolor: account.color\n\t}\n}\n\nfunction  deepCopy(accounts) {\n\tvar copy = []\n\taccounts.forEach(\n\t\t(p) => {copy.push(copyAccount(p))}\n\t)\n\treturn copy\n}\n\nfunction initState(accounts) {\n\tvar copy = {\n\t\tvalues : [],\n\t\tinitial : [],\n\t\terrors : [],\n\t\ttouched : [],\n\t\tdeleted : [],\n\t\tsort: null,\n\t\tasc: true\n\t}\n\taccounts.forEach((p, index) => {\n\t\tcopy.values.push(copyAccount(p, index))\n\t\tcopy.initial.push(copyAccount(p))\n\t\tcopy.errors.push(copyObject(null))\n\t\tcopy.touched.push(copyObject(false))\n\t\tcopy.deleted.push(false)\n\t})\n\treturn copy\n}\n\nfunction oneIsTrue(row) {\n\tvar ret =\n\t\trow.credit ||\n\t\trow.active ||\n\t\trow.descr ||\n\t\trow.color \n\treturn ret\n}\n\nfunction activeIsRo(row) {\n\tvar ret =\n\t\trow.credit ||\n\t\trow.descr ||\n\t\trow.color \n\treturn ret\n}\nfunction copyArray(array) {\n\treturn array.splice(0)\n}\n\nexport {\n\tfields,\n\tinitState,\n\tdefaultValues,\n\tvalidators,\n\tpreInitFormat,\n\tpreSubmitFormat,\n\toneIsTrue,\n\tcopyArray,\n\tactiveIsRo\n}","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Table, Panel, Button } from 'react-bootstrap';\n\nimport { update } from '../../actions/accounts'\n\nimport CheckboxField from '../editorFields/CheckboxField'\nimport TextField from '../editorFields/TextField'\nimport ColorField from '../editorFields/ColorField'\n\nimport './AccountsEditor.css'\nimport '../../customMultiSelect.css'\n\nimport AlertContainer from 'react-alert'\nimport alertOptions from '../../util/alertoptions'\n\n//import { withMedia } from 'react-media-query-hoc';\n\nimport {\n\t\tfields,\n\t\tinitState,\n\t\tdefaultValues,\n//\t\tinitialMaskValues, \n\t\tvalidators,\n\t\tpreInitFormat,\n\t\tpreSubmitFormat,\n\t\toneIsTrue,\n\t\tcopyArray,\n\t\tactiveIsRo\n} from './constants'\n\nvar FontAwesome = require('react-fontawesome')\n\nvar tempId = -1\n\nclass AccountsEditor extends React.Component {\n    constructor(props) {\n        super(props)\n        this.showOk = this.showOk.bind(this)\n        //postfix -abbr. F = Field, R = Row, T = Table\n        \n        //Field related:\n        \n        //callbacks from uicomponents for updating model (state)\n        this.changePropertyF = this.changePropertyF.bind(this)\n        this.changePropertyDeletedF = this.changePropertyDeletedF.bind(this)\n        \n        //set state values:\n        this.setValueF = this.setValueF.bind(this)\n        \n        //validate:\n        this.validateF = this.validateF.bind(this)\n        \n        //some field related util;\n        this.touchedF = this.touchedF.bind(this) //dirty?\n        this.isDifferentFromInitialF = this.isDifferentFromInitialF.bind(this)        \n\n        //choose right value for render\n        this.chooseValueF = this.chooseValueF.bind(this)\n\n        //render\n        this.renderContentF = this.renderContentF.bind(this)\n        this.renderDeletedContentF = this.renderDeletedContentF.bind(this)\n        \n        //sort\n        this.setSortF = this.setSortF.bind(this)\n        this.sortersF = this.sortersF.bind(this)\n        \n        //Row related:\n        \n        //add/remove\n        this.addR = this.addR.bind(this)\n        this.getDefaultR = this.getDefaultR.bind(this) //choose values for new row\n        this.removeR = this.removeR.bind(this)\n\n        //validate\n        this.validateR = this.validateR.bind(this)\n        this.readOnlyR = this.readOnlyR.bind(this)\n        \n        //utils\n        this.isPersistedR = this.isPersistedR.bind(this)\n\n        //render\n        this.renderAccountR = this.renderAccountR.bind(this)\n\n        //Table related:\n        this.resetT =  this.resetT.bind(this)\n        //util\n        this.isPristineT = this.isPristineT.bind(this)\n        this.hasErrorsT = this.hasErrorsT.bind(this)\n        \n        //format input/output\n        this.preInitT = this.preInitT.bind(this)\n        this.preSubmitT = this.preSubmitT.bind(this)\n        \n        //init constants\n        this.init =  this.init.bind(this)\n        //render\n        this.renderAccountsT = this.renderAccountsT.bind(this)\n\n        //css and stuff\n        this.tdClassName = this.tdClassName.bind(this)\n        this.td = this.td.bind(this)\n        this.thClassName = this.thClassName.bind(this)\n        this.th = this.th.bind(this)\n        \n        this.init()\n        this.state = {...initState(this.preInitT(props.initAccounts))}\n    }\n\n    changePropertyF(value, field, index) {\n    \t//touch\n\t\tif (this.isPersistedR(index)) { //new rows do not get 'touched' (unless masked)\n\t\t\tvar copy = copyArray(this.state.touched)\n\t\t\tcopy[index][field] = this.isDifferentFromInitialF(value, field, index)\n\t\t\tthis.setState({touched : copy})\n\t\t}\n\t\t\n\t\t//validate\n\t\tthis.validateF(field, value, index)\n\n    \tthis.setValueF(value, field, index)\n    }\n    \n    changePropertyDeletedF(value, field, index) {\n    \tif(this.isPersistedR(index)) { //if it has id, let backend remove: mark as deleted\n    \t\tthis.deleteCount += (value ? 1 : -1)\n    \t\tvar copy = copyArray(this.state.deleted)\n    \t\tcopy[index] = value\n    \t\tthis.setState({deleted : copy})\n    \t} else {\n    \t\tthis.removeR(index) //if newly created, just remove it\n    \t}\n    }\n    \n\tsetValueF(value, field, index) {\n\t\tvar copy = copyArray(this.state.values)\n\t\tcopy[index][field] = value\n\t\tthis.setState({values : copy})\n\t}\n\n\tvalidateF(field, value, index) {\n\t\tvar original = this.state.errors[index][field]\n\t\tvar result = validators[field](value) \n\t\tif( result !== original ) {\n\t\t\tvar copy = copyArray(this.state.errors)\n\t\t\tcopy[index][field] = validators[field](value) \n\t\t\tthis.setState({errors : copy})\n\t\t}\n\t}\n\t\n\ttouchedF(index, field) {\n\t\tif(index<0) return false //mask-controls are never touched (-1 = checkbox -2 = mask value)\n\t\tif(this.state.deleted[index]) return false \t//to be deleted: not touched\n\t\tif(!this.isPersistedR(index)) return false \t//this is a new row: not touched and not masked\n\t\treturn this.state.touched[index][field]\n\t}\n\t\n\tisDifferentFromInitialF(value, field, index) {\n\t\treturn (value !== this.state.initial[index][field])\n\t}\n\n\tchooseValueF(index, field) {\n\t\tif(this.state.deleted[index]) return this.state.initial[index][field] //show initial values if to be deleted\n\t\treturn this.state.values[index][field] \n\t}\n\t\n\trenderContentF(field, index) {\n     \t\n    \tvar  value = this.chooseValueF(index, field)\n    \t\n    \tswitch(field) {\n    \tcase 'credit' :\n\t\t\t\t\treturn(\n\t\t\t\t  \t<div>\n\t\t\t\t  \t\t<CheckboxField \n\t\t\t\t\t  \t\tid = {'creditacc_' + index}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\tchecked = {value}\n\t\t\t\t\t  \t\treadOnly = {this.readOnlyR(index, 'credit')}\n\t\t\t\t  \t\t\tfield = 'credit'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, 'credit')}\n\t\t\t\t\t  \t/>\n\t\t\t\t    </div>)\n    \tcase 'active' :\n\t\t\t\t\treturn(\n\t\t\t\t  \t<div>\n\t\t\t\t  \t\t<CheckboxField \n\t\t\t\t\t  \t\tid = {'activeacc_' + index}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\tchecked = {value}\n\t\t\t\t\t  \t\treadOnly = {this.isPersistedR(index) && activeIsRo(this.state.touched[index])}\n\t\t\t\t  \t\t\tfield = 'active'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, 'active')}\n\t\t\t\t\t  \t/>\n\t\t\t\t    </div>)\t\t\t\t\t    \n    \tcase 'descr' :\n\t\t\t\t\treturn(\n\t\t\t\t  \t<div>\n\t\t\t\t  \t\t<TextField \n\t\t\t\t\t  \t\tid = {'descracc_'+index}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\tvalue = {value}\n\t\t\t\t\t  \t\treadOnly = {this.readOnlyR(index, 'descr')}\n\t\t\t\t  \t\t\tfield = 'descr'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, 'descr')}\n\t\t\t\t  \t\t\tplaceholder = 'name'\n\t\t\t\t\t  \t/>\n\t\t\t\t    </div>)\n    \tcase 'color' :\n\t\t\t\t\treturn(\n\t\t\t\t  \t<div>\n\t\t\t\t  \t\t<ColorField \n\t\t\t\t\t  \t\tid = {'coloracc_'+index}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\tcolor = {value}\n\t\t\t\t\t  \t\treadOnly = {this.readOnlyR(index, 'color')}\n\t\t\t\t  \t\t\tfield = 'color'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, 'color')}\n\t\t\t\t\t  \t/>\n\t\t\t\t    </div>)\n\t\tdefault: console.log('UNKONWN field: '+field)\n\t\t\t  \t   return null\n    \t}\n    }\n\t\n\trenderDeletedContentF(index) {\n\t\tif(!this.isPersistedR(index)) { \n\t\t\treturn(\n\t\t\t<button \n\t\t  \t\ttype=\"button\" \n\t\t  \t\tclassName=\"form-control\"  \n\t\t  \t\tonClick={() => this.changePropertyDeletedF(true, 'deleted', index)}>\n\t\t  \t\t<FontAwesome name = 'remove' style = {{'color': 'red'}}/>\n\t\t    </button>)\n\t\t}\n\t  \treturn \n\t\t/*return(\n\t  \t<div>\n\t  \t\t<CheckboxField \n\t\t  \t\tid = {'deletedacc_'+index}\n\t\t  \t\tonValueChanged = {this.changePropertyDeletedF}\n\t\t  \t\tchecked = {this.state.deleted[index]}\n\t  \t\t\tfield = 'deleted'\n\t  \t\t\tindex = {index}\n\t  \t\t\ttouched = {false}\n\t\t  \t/>\n\t    </div>)*/\n\t}\n\t\t\n\tsetSortF(field) {\n\t\tif(!this.state.sort || this.state.sort !==field) {\n\t\t\tthis.setState({\n\t\t\t\tsort : field,\n\t\t\t\tasc : true\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t\tif(this.state.sort === field && this.state.asc) {\n\t\t\tthis.setState({\n\t\t\t\tasc : false\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t\tthis.setState({\n\t\t\tsort : null\n\t\t})\n\t\treturn\n\t}\n\n\tsortersF() {\n\t\tvar inv = this.state.asc ? -1 : 1\n\t\tswitch(this.state.sort) {\n\t\tcase 'i': \n\t\t\treturn (a, b) => {\n\t\t\t\treturn inv * \n\t\t\t\t(this.chooseValueF(b.index,this.state.sort) - this.chooseValueF(a.index,this.state.sort))\n\t\t\t}\n\t\tcase 'descr':\n\t\t\treturn (a, b) => {\n\t\t\t\t var textA = this.chooseValueF(a.index,'descr').toUpperCase()\n\t\t\t\t var textB = this.chooseValueF(b.index,'descr').toUpperCase()\n\t\t\t\t return inv * \n\t\t\t\t ((textA < textB) ? -1 : (textA > textB) ? 1 : 0)\n\t\t\t}\n\t\tcase 'credit':\n\t\t\treturn (a, b) => {\n\t\t\t\t return inv * (a.credit && b.credit ? 0 : (a.credit? 1 : -1))\n\t\t\t}\n\t\tcase 'active':\n\t\t\treturn (a, b) => {\n\t\t\t\t return inv * (a.active && b.active ? 0 : (a.active? 1 : -1))\n\t\t\t}\n\t\tdefault: return (a, b) => {return 0}\n\t\t}\n\t\t\n\t}\n\t\n\taddR() {\n    \tvar defaults = this.getDefaultR()\n    \tvar valuesCopy = copyArray(this.state.values)\n    \tvaluesCopy.push(defaults)\n    \tthis.sortedValues.push(defaults)\n\n    \tvar errorsCopy = copyArray(this.state.errors)\n    \terrorsCopy.push(this.validateR(defaults))    \t\n    \tthis.setState({\n    \t\t    \tvalues : valuesCopy,\n    \t\t    \terrors : errorsCopy,\n    \t})\n    }\n\t    \n\tgetDefaultR() {\n\t\tvar last = defaultValues\n\t\tif (this.sortedValues.length){\n\t\t\tlast = this.sortedValues[this.sortedValues.length - 1]\n\t\t}\n\n\t\tvar res = {...last}\n\t\tres.index = this.state.values.length\n\t\tres.id = tempId--\n\t\tres.l = false\n\t\tres.check = false\n\t\treturn res\n\t}\n    \n    removeR(index) {\n    \tthis.state.values.splice(index, 1)\n        var values_copy = copyArray(this.state.values)\n        this.state.errors.splice(index, 1)\n    \tvar errors_copy = copyArray(this.state.errors)\n\n    \t//reindex:\n    \tfor(var ix=index ; ix<values_copy.length ;ix++) {\n    \t\tvalues_copy[ix].index--\n    \t\terrors_copy[ix].index--\n    \t}\n    \tthis.setState({\n    \t\t    \tvalues : values_copy,\n    \t\t    \terrors : errors_copy,\n    \t})\n    }\n    \n    validateR(v) {\n\t   var res = {}\n\t   fields.forEach( (field) => {\n\t\t   \tres[field] = validators[field](v[field])\n    \t})\n    \treturn res\n    }\n    \n    readOnlyR(index, field) {\n\t\treturn this.state.deleted[index] || //marked as to be deleted?\t\t\t\n\t\t\t   \t   (!this.state.values[index].active && this.isPersistedR(index))\n\t}\n    \n    isPersistedR(index) {\n\t\treturn this.state.values[index].id >=0\n\t}\n    \n    renderAccountR(index) {\n    \treturn(\n    \t<tr key={index}>\n\t \t\t{[...fields].map( (f) => { \n\t \t\t\treturn this.td(index, f) \n\t \t\t})}\n\t \t\t\n\t      \t<td className={this.tdClassName(index, 'deleted')}>\n\t      \t\t{this.renderDeletedContentF(index)}\n\t      \t</td>\n\t      \t\n\t\t</tr>)\n    }\n    \n\tresetT() {\n\t\tvar state = initState(this.state.initial)\n\t\tthis.setState({...state})\n\t\tthis.init()\n\t}\n\t\n\tisPristineT() {\n\t\tvar pristine = true\n    \tthis.state.touched.forEach( (v) => {\n    \t\tfields.forEach( (f) => {\n    \t\t\tpristine = pristine && !v[f]\n    \t\t})\n    \t})\n    \treturn pristine &&\n    \t\t   (this.state.initial.length === this.state.values.length) && \n    \t       !this.deleteCount \n\t}\n\t\n\thasErrorsT() {\n\t\tvar errors = false\n    \tthis.state.errors.forEach( (v) => {\n    \t\terrors = errors || oneIsTrue(v) \n    \t})\n    \treturn errors\n\t}\n\t\n\tpreInitT(initialAccounts) {\n\t\treturn preInitFormat(initialAccounts)\n\t}\n\t\n\tshowOk() {\n\t\tthis.msg.show('SAVED SUCCESSFULLY', {\n\t      time: 2000,\n\t      type: 'success',\n\t      icon: <img src=\"yes.png\" alt=\"save ok\" />\n\t    })\n\t }\n\t\n\tpreSubmitT() {\n\t\tvar created = []\n\t\tthis.state.values.forEach((v,index) => {\n\t\t\tif(!this.isPersistedR(index)) {\n\t\t\t\tvar p={}\n\t\t\t\tfields.forEach( (field) =>\n\t\t\t\t{\n\t\t\t\t\t p[field] = this.chooseValueF(index, field)\n\t\t\t\t})\n\t\t\t\tcreated.push(p)\n\t\t\t}\n\t\t}) \n\t\t\n\t\tvar deleted = []\n\t\tthis.state.deleted.forEach((v,i) => {\n\t\t\tif(v) {\n\t\t\t\tdeleted.push(this.state.values[i].id)\n\t\t\t} \n\t\t})\n\t\t\n\t\tvar modified = []\n\t\t//for(var index=0; index<this.state.values.length; index++) {\n\t\tthis.state.values.forEach( (v, index) => {\n\t\t\tif(this.isPersistedR(index)) {\n\t\t\t\tvar p={}\n\t\t\t\tfields.forEach((field) => {\n\t\t\t\t\t if(this.touchedF(index, field)) {\n\t\t\t\t\t\t p.id = v.id\n\t\t\t\t\t\t p[field] = this.chooseValueF(index, field)\n\t\t\t\t\t }\n\t\t\t\t })\n\t\t\t\t if(Object.keys(p).length > 0){\n\t\t\t\t\t modified.push(p)\n\t\t\t\t }\n\t\t\t}\n\t\t})\n\n\t\tvar updates = {\n\t\t\t\t'created' : preSubmitFormat(created),\n\t\t\t\t'deleted' : deleted,\n\t\t\t\t'modified' : preSubmitFormat(modified)\n\t\t}\n\t\t//console.log(JSON.stringify(updates,null,4))\n\t\t//\"submit\"\n\t\tthis.pristine = null\n\t\tthis.props.update(updates)\n\t}\n\n    init() {\n        this.deleteCount = 0\n        this.pristine = null\n        this.errors = null\n        this.allChecked = false\n    }\n\n\trenderAccountsT = () => {\n\t\tthis.sortedValues = this.state.values.slice(0)\n\t\tif (this.state.sort) this.sortedValues.sort(this.sortersF())\n\t\t\n\t\treturn (\n\t\t<div>\n\t\t<Panel id=\"accs-panel\" >\n          <Panel.Heading >\n            <Panel.Title >\n\t\t\t\t\t<Button onClick={() => this.resetT()} disabled={this.pristine} bsStyle={this.pristine ? \"default\":\"primary\"}>Reset</Button>\n\t\t\t\t\t<Button onClick={() => this.preSubmitT()} disabled={this.pristine || (this.errors != null)} bsStyle={this.pristine ? \"default\":\"primary\"}>Save</Button>\n\t\t\t\t\t<Button onClick={() => this.addR()}>Add</Button>\n\t\t\t</Panel.Title >\n\t\t </Panel.Heading >\t\n\t\t <Panel.Body>\n\t\t\t<Table id=\"accounts_table\" striped bordered hover condensed>\n\t\t\t\t<thead>\n\t\t\t  \t\t<tr>\n\t\t\t  \t\t\t<th className={this.thClassName('color')} />\n\t\t\t  \t\t\t{this.th('descr', 'Name')}\n\t\t\t  \t\t\t{this.th('credit', 'Credit')}\n\t\t\t  \t\t\t{this.th('active', 'Active')}\n\t\t\t  \t\t\t{\n\t\t\t  \t\t\t<th className={this.thClassName('deleted')}>\n\t\t\t  \t\t\t\t<FontAwesome name='remove' style={{'color': 'red'}}/>\n\t\t\t  \t\t\t</th>\n\t\t\t  \t\t\t}\n\t\t\t\t\t</tr>\t\t\t\t  \t\t\t\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t  \t{this.sortedValues.map((p) => this.renderAccountR(p.index))}\n\t\t\t\t</tbody>\n\t\t\t</Table>\n\t\t</Panel.Body>\n\t\t</Panel >\n\t\t</div>)\n\t}\n\t\t\n\ttdClassName(index, field) {\n\t\treturn field + '_cell' + \n\t\t\t   (!this.isPersistedR(index) ? ' newRow' : '') +\n\t\t\t   (this.state.deleted[index] ? ' deleted' : '') +\n\t\t\t   (this.state.errors[index][field] ? ' error' : '')\n\t}\n\t\n\ttd(index, field) {\n\t\treturn (\n\t\t<td key={index+'_'+field} className={this.tdClassName(index, field)}>\n\t\t      {this.renderContentF(field, index)}\t\n\t\t</td>)\n\t}\n\t\n\tthClassName(field) {\n\t\treturn field + '_header' \n\t}\n\t\n\t\n\tth(field, label = null) {\n\t\tvar arrow = (<FontAwesome name = {this.state.asc ? 'sort-asc' : 'sort-desc'} />)\n\n\t\tvar sortField = (<div>{this.state.sort === field ? arrow : ''}</div>)\n\t\t\n\t\tvar labelField = (\n\t\t\t\t<div  style={{marginTop: 8}}>\n  \t\t\t\t\t<button  type=\"button\" className=\"link-button\" onClick={() => {this.setSortF(field)}}>\n  \t\t\t\t\t\t{label}\n  \t\t\t\t\t</button>\n\t\t  \t\t</div>)\n\t\treturn(\n\t\t<th className={this.thClassName(field)}>\n  \t\t\t<div>\n\t  \t\t\t<span style={{display: \"flex\"}}>\t\t\t  \t\t\t\t\t\t\n\t  \t\t\t\t<div style={{marginTop: 8, paddingRight: 3}}>\n\t  \t\t\t\t\t{sortField}\n\t  \t\t\t\t</div>\n\t  \t\t\t\t{label !== null ? labelField : ''}\n\t  \t\t\t</span>\n\t  \t\t</div>\n\t\t</th>)\n\t}\n\t\n\tcomponentWillReceiveProps(nextprops) {\n\t\tif( !this.isPristineT()  && this.pristine == null) { //just saved\n\t\t\tthis.showOk()\n\t\t}\t\n\t\n\t\tthis.init()\n\t\tthis.setState(\n\t\t\t\t{...initState(this.preInitT(nextprops.initAccounts))}\n\t\t)\n\t}\n\t\n\trender() {\n\t\tthis.pristine = this.isPristineT()\n\t\tthis.errors = this.hasErrorsT()\n\t\treturn(\n\t\t\t<div>\n\t        \t\t<AlertContainer ref={a => this.msg = a} {...alertOptions} />\n\t\t\t\t\t{this.renderAccountsT()}\n\t\t   </div>\n\t\t)\n\t}\n}\n\nAccountsEditor.defaultProps = {\n\t\tinitAccounts: []\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return({\n        update: (updates) => {\n            dispatch(update(updates))\n        }\n    })\n}\n\n//export default connect(null, mapDispatchToProps)(withMedia(AccountsEditor))\nexport default connect(null, mapDispatchToProps)(AccountsEditor)\n\n\n","import React from 'react';\nimport { connect } from 'react-redux'\nimport { Panel } from 'react-bootstrap'\nimport AccountsEditor from '../accountsEditor/AccountsEditor'\n\n/*\n * package test;\n\npublic class Test {\n\n\tpublic static void main(String[] args) {\n\t\t// TODO Auto-generated method stub\n\t\tString format = \"%-24.24s|%-8.8s|%-11.11s|%15.15s|%-10.10s|%-10.10s|%-8.8s|%-1.1s|%s\";\n\t\tString forma2 = \"%-24.24s+%-8.8s+%-11.11s+%15.15s+%-10.10s+%-10.10s+%-8.8s+%-1.1s+%s\";\n\t\tSystem.out.println(String.format(format, \"id : 100\",\"crud\",\"date\",\"sum\",\"category\",\"account\",\"group\",\"s\",\"descr\"));\n\t\tSystem.out.println(String.format(format, \"------------------------\",\"--------\",\"-----------\",\"---------------\",\"----------\",\"----------\",\"--------\",\"-\",\"-----\"));\n\t\tSystem.out.println(String.format(format, \"\",\"Updated\",\"88.88.8888\",\"-88888888.88\",\"5\",\"6\",\"7\",\"8\",\"9\"));\n\t\tSystem.out.println(String.format(format, \"2018-06-05 15:20:02.024\",\"Updated\",\"88.88.8888\",\"-88888888.88\",\"ananasakm\",\"rukkanen\",\"joulu\",\"X\",\"tm nyton sellaista hrnlr\"));\n\t\tSystem.out.println(String.format(format, \"\",\"Updated\",\"88.88.8888\",\"-88888888.88\",\"5\",\"6\",\"7\",\"8\",\"9\"));\n//\t\t\t\t\"2018-06-05 15:20:02.024\"\n//\t\t\t\t 123456789012345678901234567890\n\t}\n\n}\n */\n\nclass Accounts extends React.Component {\n\tconstructor(props) {\n\t    super(props);\n\t    this.state = {\n\t        accounts: []\n\t    }\n\t    //this.props.accountsLoad() //loaded as needed\n\t}\n\t\n\trender() {\n\t\treturn(\n\t\t\t<div>\n\t\t\t  <Panel >\n\t\t\t  \t<Panel.Heading style={{paddingTop: \"4px\", paddingBottom: \"3px\", height: \"45px\", fontSize: \"23px\"}}>\n\t\t\t\t  \t<span style={{display: \"flow-root\", alignItems: \"center\"}}>\n\t\t\t\t  \t\tAccounts \n\t\t\t\t  \t</span>\n\t\t\t  \t</Panel.Heading>\n\t\t\t  \t<Panel.Body>\t\t\t\t\t\n\t\t\t\t\t<AccountsEditor initAccounts={this.props.accounts} />\n\t\t\t\t</Panel.Body>\n\t\t\t  </Panel>\n\t\t\t</div>\n\t\t\t)\n\t}\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        accounts: store.accounts.accounts\n    }\n}\n\nexport default connect(mapStateToProps)(Accounts)\n","\nvar dateFormat = require('dateformat');\n\n// fiDate represents date in fi-format (string)\nfunction toDateFi(fiDate) {\n\t\tvar parts = fiDate.split(\".\");\n\t\tvar day = parts[0]\n\t\tvar month = parts[1] - 1\n\t\tvar year = parts[2]\n\t\treturn new Date(year, month, day)\n}\n\nfunction fiDateTimeMillis(millis) {\n\t\t//TODO: any more elegant ways?\n\t\tvar d = new Date(millis)\n\t\t\n\t\tvar day = '00' + d.getDate()\n\t\tday = day.substr(day.length - 2)\n\t\t\n\t\tvar m = '00' + (d.getMonth()+1) \n\t\tm = m.substr(m.length - 2)\n\t\t\n\t\tvar h = '00' + d.getHours()\n\t\th = h.substr(h.length - 2)\n\n\t\tvar mi = '00' + d.getMinutes()\n\t\tmi = mi.substr(mi.length - 2)\n\t\t\n\t\tvar sec = '00' + d.getSeconds()\n\t\tsec = sec.substr(sec.length - 2)\n\t\t\n\t\tvar mspart = '000' + d.getMilliseconds()\n\t\tmspart = mspart.substr(mspart.length - 3)\n\t\tvar r =\n\t\tday + '.' +\n\t\tm + '.' +\n\t\td.getFullYear() + ' ' +\n\t\th + ':' +\n\t\tmi + ':'+\n\t\tsec + '.' +\n\t\tmspart \n\t\treturn r\n}\n\nfunction toDBFormatFi(fiDate) {\n\t\tvar parts = fiDate.split(\".\");\n\t\tvar day = parts[0]\n\t\tvar month = parts[1] - 1\n\t\tvar year = parts[2]\n\t\treturn dateFormat(new Date(year, month, day), \"yyyy-mm-dd\")\n}\n\nfunction toFiDBFormat(DBDate) {\n\t\tvar parts = DBDate.split(\"-\");\n\t\tvar day = parts[2]\n\t\tvar month = parts[1] - 1\n\t\tvar year = parts[0]\n\t\treturn dateFormat(new Date(year, month, day), \"dd.mm.yyyy\")\n}\n\nexport {toDateFi, toDBFormatFi, fiDateTimeMillis, toFiDBFormat}","import React from 'react' //  Main React library\nvar FontAwesome = require('react-fontawesome');\n\nclass Spinner extends React.Component{\n\trender(){\n\t\tvar spin = <FontAwesome name='spinner' spin />\n\t\t//console.log(\"fetch:\"+this.props.fetching)\n\t\treturn(this.props.fetching ? spin : '')\t\t\t\t\t\n\t\t\n\t}\n}\n\nexport default Spinner\n","import {axios_get} from './axios';\n\t\nconst AUDITLOG_REQUEST = 'AUDITLOG_REQUEST'\nconst auditlogRequestAction = () => ({\n    type: AUDITLOG_REQUEST\n})\n\nconst AUDITLOG_RESPONSE = 'AUDITLOG_RESPONSE'\nconst auditlogResponseAction = (entries, fp, lp) => ({\n    type: AUDITLOG_RESPONSE,\n    payload: {\n        \"logentries\": entries,\n        \"firstpage\": fp,\n        \"lastpage\": lp\n    }\n})\n\nconst PAGE_SIZE = 50\n//NOTE Backend should return always PAGE_SIZE + 1 so, we can detect last/first -page\n const load = () => (\n    (dispatch) => {\n        dispatch(auditlogRequestAction())\n        axios_get('history?ts='+Date.now(),\n           response => {\n        \t   var lastPage = true\n               if(response.data.length === (PAGE_SIZE + 1)) {\n            \t   lastPage = false\n            \t   response.data.pop()\n               }\n               dispatch(auditlogResponseAction(response.data, true, lastPage))\n           },\n           dispatch\n       )\n    }\n )\n\nconst next = (s) => (\n    (dispatch) => {\n        dispatch(auditlogRequestAction(s))\n        axios_get('history?ts='+Date.now()+\"&s=\"+s,\n            response  => {\n               var lastPage = true\n               if(response.data.length === (PAGE_SIZE + 1)) {\n            \t   lastPage = false\n            \t   response.data.pop()\n               }\n               dispatch(auditlogResponseAction(response.data, false, lastPage))\n            },\n            dispatch\n        )\n    }\n )\n \n const prev = (e) => (\n\t(dispatch) => {\n        dispatch(auditlogRequestAction(e))\n        axios_get('history?ts='+Date.now()+\"&e=\"+e,\n            response => {\n               var firstPage = true\n               if(response.data.length === (PAGE_SIZE + 1)) {\n            \t   firstPage = false\n            \t   response.data.shift()\n               }\n               dispatch(auditlogResponseAction(response.data, firstPage, false))\n            },\n            dispatch\n        )\n    }\n )\n\nexport {\n    load,\n    next,\n    prev\n}","import React from 'react' //  Main React library\nimport { Button } from 'react-bootstrap';\nimport { connect } from 'react-redux'\nimport { next, prev } from '../../actions/auditlog'\nvar FontAwesome = require('react-fontawesome');\n\nclass Buttons extends React.Component{\n\tconstructor(props) {\n\t    super(props)\n\t    this.next = this.next.bind(this)\n\t    this.prev = this.prev.bind(this)\n\t}\n\t\n\tnext() {\n\t\tif(!this.props.logentries || this.props.logentries.length === 0) return\n\t\tvar last = this.props.logentries[this.props.logentries.length - 1]\n\t\tvar s = last.hs[last.rownr].hd\n\t\tthis.props.next(s)\n\t}\n\n\tprev() {\n\t\tif(!this.props.logentries || this.props.logentries.length === 0) return\n\t\tvar first = this.props.logentries[0]\n\t\tvar e = first.hs[first.rownr].hd\n\t\tthis.props.prev(e)\n\t}\n\t\n\trender(){\n\t    return (\n\t    <div>\n\t\t    <Button onClick={this.prev} disabled={this.props.firstpage} >\n\t\t     \t<FontAwesome name='caret-left' />\n\t\t     </Button>\n\t\t     <Button onClick={this.next} disabled={this.props.lastpage}>\n\t\t     \t<FontAwesome name='caret-right'/>\n\t\t     </Button>\n\t\t     <Button href=\"http://localhost:8080/log\">\n\t\t     \t<FontAwesome name='download'/>\n\t\t     </Button>\n\t    </div>\n\t    )\n\t}\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        logentries: store.auditlog.logentries,\n        firstpage: store.auditlog.firstpage,\n        lastpage: store.auditlog.lastpage\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return ({\n        next: (s) => {\n            dispatch(next(s))\n        },\n        prev: (e) => {\n            dispatch(prev(e))\n        }\n    })\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Buttons)\n","import React from 'react';\nimport { connect } from 'react-redux'\nimport { Table, Panel } from 'react-bootstrap';\nimport {fiDateTimeMillis, toFiDBFormat} from '../../util/fiDate'\nimport currencyFormat  from '../../util/currency'\n\nimport './auditlog.css'\nimport Spinner from '../main/Spinner'\nimport Buttons from './buttons'\nconst fields = ['d','i','s','g','c','a','descr']\n\nclass AuditLog extends React.Component {\n\t\n\tconstructor(props) {\n\t    super(props);\n\n\t    //render\n\t    this.renderLogEntry = this.renderLogEntry.bind(this)\n        this.renderPaymentsHeaderT = this.renderPaymentsHeaderT.bind(this)\n        this.renderPaymentR = this.renderPaymentR.bind(this)\n\n        //render\n        this.renderContentF = this.renderContentF.bind(this)\n        \n        //css and stuff\n        this.tdClassName = this.tdClassName.bind(this)\n        this.td = this.td.bind(this)\n        this.thClassName = this.thClassName.bind(this)\n        this.th = this.th.bind(this)\n        \n        //choose right value for render\n        this.chooseValueF = this.chooseValueF.bind(this)\n\t}\n\t\n\tchooseValueF(p, field) {\n\t\t//'w','o','d','i','s','g','c','a','descr'\n    \tswitch(field) {\n\t    \tcase 'w' : return fiDateTimeMillis(p.hd)\n\t    \tcase 'op' : {\n\t    \t\tswitch(p.op) {\n\t    \t\tcase 'C' : return 'creation'\n\t    \t\tcase 'U' : return 'modification'\n\t    \t\tcase 'D' : return 'deletion'\n\t    \t\tdefault : console.log('UNKONWN op:' + p.op)\n\t    \t\t\t\t  return null\n\t    \t\t}\n\t    \t}\n\t    \t\t\n\t    \tcase 'd' : return toFiDBFormat(p.d)\n\t    \tcase 'i' : return currencyFormat(p.i)\n\t    \tcase 's' : return p.s ? 'X' : '-'\n\t    \tcase 'g' : return p.g\n\t    \tcase 'c' : return p.c_descr\n\t    \tcase 'a' : return p.a_descr\n\t    \tcase 'descr' : return p.descr\n\t    \tdefault : console.log('UNKONWN field: '+field)\n\t    \t\t\treturn null\n    \t}\n    \t\n\t}\n\t\n\trenderContentF(value) {\n\t\t\treturn(\t\t\n\t\t\t<div>\n\t\t\t  \t{value}\n\t\t    </div>)\n    }\n\t\n\tthClassName(field) {\n\t\treturn field + '_header' \n\t}\n\t\n\tth(field, label = null) {\n\t\tvar labelField = (\n\t\t\t\t<div >\n  \t\t\t\t\t\t{label}\n\t\t  \t\t</div>)\n\t\treturn(\n\t\t<th className={this.thClassName(field)}>\n  \t\t\t<div>\n\t  \t\t\t<span style={{display: \"flex\"}}>\t\t\t  \t\t\t\t\t\t\n\t  \t\t\t\t{label !== null ? labelField : ''}\n\t  \t\t\t</span>\n\t  \t\t</div>\n\t\t</th>)\n\t}\n\n\trenderPaymentR(r, index) {\n\t    \treturn(\n    \t<tr key={r.hs[index].id+'_'+r.hs[index].rownr}>\n\t \t\t{['w','op', ...fields].map( (f) => { \n\t \t\t\treturn this.td(r, index, f) \n\t \t\t})}\n\t\t</tr>)\n    }\n\t\n\ttdClassName(r, index, field) {\n\t\tvar ret = field + '_cell' \n\t\tif(r.hs[index].op === 'U' \n\t\t   && (fields.indexOf(field) > -1) \n\t\t   && r.hs[index][field] !== r.hs[index - 1][field]) {\n\t\t\tret += ' updatedRow'\n\t\t}\n\t\tif(index === r.rownr) {\n\t\t\tret += ' actualRow'\n\t\t}\n\t\treturn ret\n\t}\n\t\n\n\t\n\ttd(r, index, field) {\n\t\tvar value = this.chooseValueF(r.hs[index], field)\n\t\treturn (\n\t\t<td key={r.hs[index].id + '_' + index+'_'+field} className={this.tdClassName(r, index, field)}>\n\t\t      \t\t{this.renderContentF(value)}\t\n\t\t</td>)\n\t}\n\t\n\trenderPaymentsHeaderT = () => {\n    \treturn (\n\t\t<thead>\n\t  \t\t<tr>\n\t  \t\t\t{this.th('w', 'When')}\n\t  \t\t\t{this.th('op','What')}\n\t  \t\t\t{this.th('d', 'Date')}\n\t  \t\t\t{this.th('i', 'Pay')}\n\t  \t\t\t{this.th('s', 's')}\n\t  \t\t\t{this.th('g', 'Ref')}\n\t  \t\t\t{this.th('c', 'Issue')}\n\t  \t\t\t{this.th('a', 'Account')}\n\t  \t\t\t{this.th('descr', 'Desc.')}\t\t  \t\t\t\n\t\t\t</tr>\t\t\t\t  \t\t\t\n\t\t</thead>)\n    }\n\t\n\trenderLogEntry(r) {\n\n\t\treturn (\n\t\t\n\t\t<Panel key={'al_panel_'+r.hs[0].id+'_'+r.rownr} >\n\t        <Panel.Heading >\n\t            <Panel.Title >\n\t            \t{this.chooseValueF(r.hs[r.rownr], 'op')} at { fiDateTimeMillis(r.hs[r.rownr].hd) } ( id: {r.hs[0].id} )\n\t\t\t\t</Panel.Title >\n\t\t\t </Panel.Heading >\t\n\t\t\t <Panel.Body>\t\t\t\n\t\t\t\t<div>\n\t\t\t\t\t<Table id=\"auditlog_table\" key={'al_table_'+r.id} striped bordered hover condensed>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.renderPaymentsHeaderT()\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t  \t{\n\t\t\t\t\t\t  \t\tr.hs.map((p, ix) => { return this.renderPaymentR(r, ix) })\n\t\t\t\t\t\t  \t}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</Table>\n\t\t\t\t</div>\n\t\t\t</Panel.Body>\n\t\t</Panel >\n\t\t\n\t\t)\n\t}\n\t\n\trender() {\n\t\t\n\t\tvar entries = this.props.logentries || []\n\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t<div>\n\t\t\t\t\t<Panel>\n\t\t\t\t\t  \t<Panel.Heading style={{paddingTop: \"6px\", paddingBottom: \"3px\", height: \"45px\", fontSize: \"23px\"}}>\n\t\t\t\t\t  \t\tAudit Log <Spinner fetching={this.props.fetching} />\n\t\t\t\t\t  \t\t\t<span className=\"pull-right\">\n\t\t\t\t\t\t  \t\t\t<Buttons />\n\t\t\t\t\t\t  \t    </span>\n\t\t\t\t\t  \t</Panel.Heading>\n\t\t\t\t\t </Panel>\n\t\t\t\t </div>\n\t\t\t\t{entries.map((r) => this.renderLogEntry(r))}\n\t\t\t\t<div>\n\t\t\t\t\t<Panel>\n\t\t\t\t\t  \t<Panel.Heading style={{paddingTop: \"6px\", paddingBottom: \"3px\", height: \"45px\", fontSize: \"23px\"}}>\n\t\t\t\t\t  \t\t\t<span className=\"pull-right\">\n\t\t\t\t\t\t  \t\t\t<Buttons />\n\t\t\t\t\t\t  \t    </span>\n\t\t\t\t\t  \t</Panel.Heading>\n\t\t\t\t\t </Panel>\n\t\t\t\t </div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        logentries: store.auditlog.logentries,\n        fetching: store.auditlog.fetching\n    }\n}\n\nexport default connect(mapStateToProps)(AuditLog)\n","import React from 'react';\nimport { connect } from 'react-redux'\nimport AuditLog from './auditlog'\n\nclass Logs extends React.Component {\n\trender() {\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t<AuditLog logentries={this.props.auditlog} />\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = (store) => {\n    return {\n    \t//TODO\n        auditlog: store.auditlog.logentries\n    }\n}\n\nexport default connect(mapStateToProps)(Logs)\n","function addDays(date, days) {\n  var result = new Date(date);\n  result.setDate(result.getDate() + days);\n  return result;\n}\n\nfunction addMonths(date, months) {\n\tvar result = new Date(date);\n\tresult.setMonth(result.getMonth() + months);\n  return result;\t\n}\n\nfunction daydiff(d1, d2) {\n\tvar dt1 = new Date(d1);\n\tvar dt2 = new Date(d2);\n\treturn Math.floor((Date.UTC(dt2.getFullYear(), dt2.getMonth(), dt2.getDate()) - Date.UTC(dt1.getFullYear(), dt1.getMonth(), dt1.getDate()) ) /(1000 * 60 * 60 * 24));\n}\n\nfunction isFirstAndLastOfSameMonth(d1, d2) {\n\tvar result = \n\t\td1.getDate() === 1 &&\n\t\td1.getMonth() === d2.getMonth() &&\n\t\td1.getFullYear() === d2.getFullYear() &&\n\t\td2.getDate() === daysInMonth(d1.getMonth(), d1.getYear())\n\treturn result;\n\t\n}\n\nfunction daysInMonth (month, year) {// month is 0-based\n    return new Date(year, month + 1, 0).getDate();\n}\n\nexport {addDays, addMonths, daydiff, isFirstAndLastOfSameMonth, daysInMonth}","import {addDays, addMonths, daydiff, isFirstAndLastOfSameMonth, daysInMonth} from '../util/addDays'\n\nconst DATE_RANGE_SELECTED = 'DATE_RANGE_SELECTED'\nconst setDateRangeAction = (s, e, name) => ({\n    type: DATE_RANGE_SELECTED,\n    payload: {\n        's': s,\n        'e': e\n    }\n})\n\nvar prev_s, prev_e\n\nconst set_daterange = (s, e) => (\n    (dispatch) => {\n    \tprev_s = s\n    \tprev_e = e\n        dispatch(setDateRangeAction(s, e))\n    }\n)\n\n\nconst daterange_next_block = () => (\n    (dispatch) => {\n    \t//if it is a even month so will be the next month be even\n    \tif ( isFirstAndLastOfSameMonth(prev_s, prev_e) ) {\n    \t\tvar s = addMonths(prev_s, 1)\n    \t\tvar e = new Date(s)\n    \t\ts.setDate(1)\n    \t\te.setDate(daysInMonth(e.getMonth(), e.getYear()))\n    \t\tdispatch(set_daterange(s, e))\n    \t\treturn\n    \t\t\n    \t}\n    \tvar diff = daydiff(prev_s, prev_e)\n    \tdispatch(set_daterange(addDays(prev_s, diff + 1), addDays(prev_e, diff + 1)))\n    }\n)\n\nconst daterange_prev_block = () => (\n    (dispatch) => {\n    \t//if it is a even month so will be the preious month be even\n    \tif ( isFirstAndLastOfSameMonth(prev_s, prev_e) ) {\n    \t\tvar s = addMonths(prev_s, -1)\n    \t\tvar e = new Date(s)\n    \t\ts.setDate(1)\n    \t\te.setDate(daysInMonth(e.getMonth(), e.getYear()))\n    \t\tdispatch(set_daterange(s, e))\n    \t\treturn\n    \t}\n    \tvar diff = daydiff(prev_e, prev_s)\n    \tdispatch(set_daterange(addDays(prev_s, diff - 1), addDays(prev_e, diff - 1)))\n    }\n)\n\nconst set_todayrange = () => (\n    (dispatch) => {\n    \t\tvar s = new Date(0)\n    \t\tvar today = new Date()\n    \t\ts.setFullYear(today.getFullYear())\n    \t\ts.setMonth(today.getMonth())\n    \t\ts.setDate(1)\n    \t\ts.setHours(0);\n    \t\tvar e = new Date(s)\n    \t\te.setDate(daysInMonth(e.getMonth(), e.getYear()))\n    \t\tdispatch(set_daterange(s, e))\n    }\n)\n\nexport {\n    set_daterange,\n    set_todayrange,\n    daterange_prev_block,\n    daterange_next_block\n    \n}","import {axios_get_params} from './axios';\n\nconst MINIBARS_REQUEST = 'MINIBARS_REQUEST'\nconst balancesRequestAction = () => ({\n    type: MINIBARS_REQUEST,\n    payload: null\n})\n\nconst MINIBARS_RESPONSE = 'MINIBARS_RESPONSE'\nconst balancesResponseAction = (response) => ({\n    type: MINIBARS_RESPONSE,\n    payload: {\n        balances: response\n    }\n})\n\nconst MINIBARS_REDRAW = 'MINIBARS_REDRAW'\nconst minibarsRedrawAction = () => (\n  { \n\ttype: MINIBARS_REDRAW,\n    payload: \n    \t{\n    \t\tredraw : (new Date()).getTime() //only signal\n    \t} \n  }\n)\n\nvar prev_cat = 0\n\nconst balances_load = (cat) => (\n    (dispatch) => {\n    \tprev_cat = cat\n        dispatch(balancesRequestAction())\n        axios_get_params('minibars?ts='+Date.now(), \n        \t\t{ \n        \t\t\tparams: {\"cat\": cat}\n        \t\t},\n        \t\tresponse => {\n//                console.log(response);\n        \t\t\tvar ret = {\n        \t\t\t\t\t\"data\": response.data,\n        \t\t\t\t\tbalance: 0\n        \t\t\t}\n        \t\t\tdispatch(balancesResponseAction(ret))\n        \t\t},\n        \t\tdispatch\n        )\n    }\n)\n\n\nconst balances_refresh = () => (\n\tbalances_load(prev_cat)\n)\n\nconst minibars_redraw = () => (\n    (dispatch) => {\n    \tdispatch(minibarsRedrawAction())\n    }\n)\nexport {\n    balances_load,\n    balances_refresh,\n    minibars_redraw\n}","import { chunk_rawdata } from './chunkdata'\n\n//var chunk_rawdata = require('./chunkdata');\nvar dates = require('./helpers');\n\n\n\nvar dateFormat = require('dateformat');\nvar d3 = require('d3');\n\nfunction currencyFormat(c) {\n\treturn parseFloat(Math.round(c* 100) / 100).toFixed(2)\n}\n\nvar minibars = (function() {\n\t//date:\n  var FORMAT_DATE = \"dd.mm.yyyy ddd\"\n  var FORMAT_MONTH = \"mmm\"\n  var FORMAT_MONTH_YEAR = \"mmm yyyy\"\n  //colors:\n  var COLOR_INCOME_NEGATIV = \"red\"\n  var COLOR_INCOME_POSITIV = \"green\"\n  var COLOR_BALANCE = \"blue\"\n\n  var COLOR_DAY_BACKGROUND_NORMAL = \"white\"\n  var COLOR_DAY_BACKGROUND_UNDER_LIMITS = \"pink\"\n  var COLOR_DAY_BACKGROUND_SELECTED = \"gray\"\n  var COLOR_DAY_BACKGROUND_FOCUS = \"cadetblue\"\n\n  var COLOR_MONTH_BACKGROUND_NORMAL_ODD = \"lightblue\"\n  var COLOR_MONTH_BACKGROUND_NORMAL_EVEN = \"lightblue\"\n  var COLOR_MONTH_TEXT = \"black\"\n\n  var COLOR_MONTH_SEPARATOR_LINE = \"lightblue\"\n\n  //name of the element to bind to\n  var bindto = null\n  \n  //widths\n  var div_border_width\n  var column_width\n  var slot_width = 3\n  var line_width\n  var b_line_width\n\n  //leadin = rowstart in which the min and max are shown\n  var leadin_width\n\n  var col_per_slot_ratio = 0.8\n\n  //x-coords\n  var leadin_x\n\n  //heights\n  var top_margin\n  var datearea_height\n  var center_margin\n  var month_height\n  var bottom_margin\n\n  //y-coords\n  var datearea_y\n  var center_margin_y\n  var month_y\n  var bottom_margin_y\n  var height\n\n  \n  //min/max -months shown\n  var month_markers\n  \n\n  var miny, maxy\n  var scale\n\n  //date range selection\n  var start = null;\n  var end = null;\n\n  //callback\n  var cb_select = null;\n  //var dataprovider = null;\n\n  var max_selection_days\n\n  //default values\n  function init(config) {\n    if (!bindto) {\n      console.assert(config.bindto, \"bindto is mandatory\")\n      bindto = config.bindto\n    } else {\n      console.assert(!config.bindto || bindto === config.bindto, \"bindto can be defined only once\")\n    }\n  \n    //widths\n    div_border_width = config.div_border_width ||div_border_width || 0\n    leadin_width =  config.leadin_width || leadin_width || 45\n    line_width = config.line_width || line_width || 1\n    b_line_width = config.b_line_width || b_line_width || 0.2\n\n    //heights\n    top_margin = config.top_margin || top_margin || 10\n    datearea_height = config.datearea_height || datearea_height || 80\n    center_margin = config.center_margin || center_margin || 0 \n    month_height = config.month_height || month_height || 20\n    bottom_margin = config.bottom_margin || bottom_margin || 3 \n\n    //y-coords\n    datearea_y = top_margin\n\n    center_margin_y = datearea_y + datearea_height\n    month_y = center_margin_y + center_margin\n    bottom_margin_y = month_y + month_height\n    height = bottom_margin_y + bottom_margin\n\n    //callbacks\n    cb_select = config.select\n    //dataprovider = config.dataprovider\n    max_selection_days =  config.max_selection_days || 90\n    \n    month_markers = \"NONE\"\n  }\n\n  //id constants\n  var _DIV = \"_div_minibar\"\n  var _TIP_DIV = \"_tip_div_minibar\"\n  var _TIP_I_DIV = \"_tip_i_div_minibar\"\n  var _DAY_TEXT = \"_day_text\"\n  var _B_TEXT = \"_b_text\"\n  var _B_COLOR = \"_b_color\"\n  var _I_TEXT = \"_i_text\"\n  var _LEADIN = \"_leadin_minibar\"\n  var _LEADIN_ZERO = \"_zero_leadin_minibar\"\n  var _LEADIN_ZERO_TEXT = \"_zero_leadin_text_minibar\"\n  var _MAX_TEXT = \"_max_text_minibar\"\n  var _MIN_TEXT = \"_min_text_minibar\"\n  var _MONTH = \"_month_minibar\"\n  var _BG = \"_slot_bg_minibar\"\n  var _I = \"_i_minibar\"\n  var _E = \"_e_minibar\"\n  var _B = \"_b_minibar\"\n  var _LINE_B_PREV = \"_b_prev_minibar\"\n  var _LINE_B_NEXT = \"_b_next_minibar\"\n  var _LINE_ZERO = \"_zero_minibar\"\n\n  var months = null;\n  //init min and max for all\n  function init_scales() {\n  \n    miny = d3.min([0, months[0].columns[0].b])\n    maxy = d3.max([0, months[0].columns[0].b])\n\n    for (var ix = 0, len = months.length; ix < len; ix++) {\n      miny = d3.min([miny, d3.min(months[ix].columns, function(d) {\n        console.assert((null != d.i) && (null != d.e) && (null != d.b) && d.d , \"i, e, b and d must be defined\")\n        console.assert((d.i >= 0) && (d.e <=0 ), \"i must be positive, e must be negative\")\n        return d3.min([d.i, d.e, d.b]) \n      })])\n      maxy = d3.max([maxy, d3.max(months[ix].columns, function(d) {\n        return d3.max([d.i, d.e, d.b]) \n      })])\n    }\n    if(miny === 0 && maxy === 0) {maxy = 100}\n    scale = d3.scale.linear().domain([miny, maxy]).range([datearea_y + line_width, center_margin_y])\n\n    //miny_text = roundNumberText(miny)\n    //maxy_text  = roundNumberText(maxy)\n\n    //leadin_x = null\n  }\n\n//properties that may change dynamically in addition to basic data (ie. by update)\nfunction init_changeables() {\n  //widths\n  column_width = slot_width * col_per_slot_ratio\n\n  //min/max -months shown (used to decide wheter to create or update)\n  month_markers = monthMarkers()\n  \n  leadin_x = null\n}\n\n//helpers\nfunction dateId(day) {\n  return \"_\" + bindto + \"_\" + day.getDate() + \"_\" + (day.getMonth()+1) + \"_\" + day.getFullYear()\n}\n\nfunction monthId(day) {\n  return \"_\" + bindto + \"_\" + (day.getMonth() + 1) + \"_\" + day.getFullYear()\n}\n\nfunction bgColor(data) {\n  if (start && !end && !dates.compare(data.d, start)) {\n    return COLOR_DAY_BACKGROUND_FOCUS\n  }\n  if (withinSelection(data)) {\n    return COLOR_DAY_BACKGROUND_SELECTED\n  }\n  //return COLOR_DAY_BACKGROUND_NORMAL\n  return bgNormal(data)\n}\n\n/*function getNormalColorByDateOnly(day) {\n\tvar first_month = months[0].columns[0].d.getMonth()\n\tvar index_m = day.getMonth() - first_month\n\tvar index_d = day.getDate() - 1\n\treturn bgNormal(months[index_m].columns[index_d])\n}*/\n\nfunction bgNormal(data) {\n\tif( data.smallestb < 0 ) {\n\t\treturn COLOR_DAY_BACKGROUND_UNDER_LIMITS\n\t}\n\treturn COLOR_DAY_BACKGROUND_NORMAL\n}\n\nfunction iColor(data) {\n  return ((data.i + data.e) < 0) ? COLOR_INCOME_NEGATIV : COLOR_INCOME_POSITIV\n}\n\nfunction monthColor(day) {\n  return day.getMonth() % 2 ? COLOR_MONTH_BACKGROUND_NORMAL_EVEN : COLOR_MONTH_BACKGROUND_NORMAL_ODD\n}\n\nfunction mouseover_month(day) {\n  var point = d3.select('#' + monthId(day) + _MONTH)\n  point.attr(\"fill\", COLOR_DAY_BACKGROUND_FOCUS)\n}\n\nfunction mouseout_month(day) {\n  var point = d3.select('#' + monthId(day) + _MONTH)\n  point.attr(\"fill\", monthColor(day))\n}\n\nfunction click_month(s_date, e_date) {\n  /*if (start) {\n    var point = d3.select('#'+dateId(start) + _BG)\n    point.attr(\"fill\", getNormalColorByDateOnly(start))\n  }*/\n  start = s_date\n  end = e_date\n  //normalize_selection()\n  update() //jh\n  cb_select(start, end)\n  \n}\n\nfunction getmonthtext(date) {\n  if(date.getMonth() === 0) {\n\t  return dateFormat(date, FORMAT_MONTH_YEAR)\n  } else {\n\t  return dateFormat(date, FORMAT_MONTH)\n  }\n}\n\nfunction monthMarkers() {\n  //min/max -months\n  console.assert(months[0].columns[0].d, \"d must be defined\")\n  console.assert(months[months.length-1].columns[0].d, \"d must be defined\")\n\n  var left_month = monthId(months[0].columns[0].d)\n  var right_month = monthId(months[months.length-1].columns[0].d)\n\n  return left_month+\"-\"+right_month\n}\n\nfunction roundNumber(number) {\n\t  return Math.round(number).toPrecision(3)\n}\n\nfunction roundNumberText(number) {\n  var num = roundNumber(number)\n  var prefix = d3.formatPrefix(num);\n  return  \"\" + prefix.scale(num) + (prefix.symbol ===  \"y\" ? \"\" : prefix.symbol)\n}\n\nfunction withinSelection(d) {\n  return (start && end && d.d && dates.inRange(d.d, start, end))\n}\n\n/*function colorRange(s_date, e_date, colorfunction) {\n  console.log(\"colorRange: months=\");\n>>>>>>> branch 'master' of https://github.com/jhupli/bud5.git\n  console.log(months);\n  if (!s_date || !e_date || !colorfunction || !months) return\n  var ixd = new Date(s_date)\n  \n  do {\n\tconsole.log(colorfunction(ixd))\n    d3.select('#'+dateId(ixd)+_BG).attr(\"fill\", colorfunction(ixd))\n    ixd.setDate(ixd.getDate() + 1);\n  } while(dates.compare(ixd, e_date) < 1)\n}*/\n\nfunction show_tip(data) {\n  var mid = monthId(data.d)\n  var bg = document.getElementById(dateId(data.d) + _BG).getBoundingClientRect()\n  var doc = document.documentElement;\n//  var left = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n  var top = (window.pageYOffset || doc.scrollTop)  - (doc.clientTop || 0);\n  //console.log('top=' + top)\n  var offsetRect = {left:0, 'top': -top} //document.getElementsByClassName(\"col-md-12\")[0].getBoundingClientRect()\n  //console.log(\"offsetRect:\" + offsetRect.left)\n  d3.select('#' + mid + _TIP_I_DIV).style(\"display\", (data.i === 0 && data.e === 0) ? \"none\" : \"table-row\")\n  d3.select('#' + mid + _TIP_DIV)\n  .style(\n    {\"display\": \"inline\",\n      \"left\" : (bg.left - offsetRect.left + slot_width) + \"px\",\n      \"top\" : (bg.top - offsetRect.top) + (0.75 * datearea_height) + \"px\",\n      \"position\" : \"absolute\"\n    })\n  d3.select(\"#\" + mid +_DAY_TEXT).text(dateFormat(data.d,FORMAT_DATE))\n  d3.select(\"#\" + mid +_B_TEXT).text(currencyFormat(data.b))\n  d3.select(\"#\" + mid +_B_COLOR).style(\"background-color\", iColor(data))\n  d3.select(\"#\" + mid +_I_TEXT).text((currencyFormat(data.i + data.e)))\n}\n\nfunction hide_tip(data) {\n  d3.select('#'+monthId(data.d) +_TIP_DIV).style(\"display\", \"none\")\n}\n\n\nfunction select(start_, end_) {\n  //console.log(\"select!\")\n  if (!start_ || !end_ ) {\n\t  console.assert(null != start_ && null != end_) \n\t  return\n  }\n  normalize(start_,end_) \n  \n  //console.log(\"select\")\n  //console.log(\"start:\" + start)\n  //console.log(\"end:\" + end)\n  \n  update() //jh\n  \n  //normalize_selection()\n}\n\nfunction normalize(s,e) {\n\t  var _s = d3.min([s, e])\n\t  var _e = d3.max([s, e])\n\t  start = _s\n\t  end = _e\n}\nfunction mouseover(data, i) {\n  ////console.log(\"mouseover\")\n  show_tip(data, i)\n  var point = d3.select('#' + dateId(data.d) +_BG)\n  point.attr(\"fill\", COLOR_DAY_BACKGROUND_FOCUS)\n  if (start && !end && Math.abs(dateDiffInDays(start, data.d)) > max_selection_days) {\n    cursor(\"not-allowed\")\n  } else if (start && !end) {\n    cursor(\"col-resize\")\n  } else {\n    cursor(\"pointer\")\n  }\n}\n\nfunction mouseout(data) {\n  ////console.log(\"mouseout\")\n  hide_tip(data)\n  var point = d3.select('#' + dateId(data.d) +_BG)\n  point.attr(\"fill\", bgColor(data))\n  //cursor(data, \"default\")\n}\n\nvar _MS_PER_DAY = 1000 * 60 * 60 * 24;\n\n// a and b are javascript Date objects\nfunction dateDiffInDays(a, b) {\n  // Discard the time and time-zone information.\n  var utc1 = Date.UTC(a.getFullYear(), a.getMonth(), a.getDate());\n  var utc2 = Date.UTC(b.getFullYear(), b.getMonth(), b.getDate());\n\n  return Math.floor((utc2 - utc1) / _MS_PER_DAY);\n}\n\n/*var prev_start = null\nvar prev_end = null\nfunction normalize_selection() {\n  var _s = d3.min([start, end])\n  var _e = d3.max([start, end])\n  start = _s\n  end = _e\n  colorRange(prev_start, prev_end, getNormalColorByDateOnly)\n  prev_start = start\n  prev_end = end\n\n  colorRange(start, end, () => {return COLOR_DAY_BACKGROUND_SELECTED})\n<<<<<<< HEAD\n}\n=======\n}*/\n\n\nfunction cursor(cursor) {\n  document.body.style.cursor = cursor\n}\n\nfunction click(data) {\n  if (start == null || (start && end)) {\n    start = data.d\n    end = null\n    cursor(\"col-resize\")\n    update() //jh\n    \n    //colorRange(prev_start, prev_end, getNormalColorByDateOnly)\n  } else if (end  == null) {\n    if (start && Math.abs(dateDiffInDays(start, data.d)) > max_selection_days) {\n      return;\n    }\n    end = data.d\n    cursor(\"pointer\")\n    normalize(start,end) \n    update() //jh\n    //normalize_selection()\n    cb_select(start, end)\n  }\n  ////console.log(\"s:\" + start + \" e:\" + end)\n  show_tip(data)\n  d3.select('#' + dateId(data.d) + _BG).attr(\"fill\", COLOR_DAY_BACKGROUND_FOCUS)\n}\n\nvar clicks = \n  {\n\t  \"click\": click,\n\t  \"mouseover\": mouseover,\n\t  \"mouseout\": mouseout\n  }\n\nfunction create(month) {\n  var mid = monthId(month.columns[0].d)\n  var width = month.columns.length * slot_width + line_width\n  var bindTo = d3.select('#' + bindto)\n  //console.log(\"div_width:\" + width );\n  var clicks_month =\n  {\n        \"click\": function() {click_month(month.columns[0].d, month.columns[month.columns.length - 1].d)},\n        \"mouseover\": function() {mouseover_month(month.columns[0].d)},\n        \"mouseout\": function() {mouseout_month(month.columns[0].d)}\n  }\n  \n  var minibar_div =\n    bindTo\n    .append(\"div\")\n    .attr(\"id\", mid +_DIV)\n    .style({\n      \"width\": width  + \"px\",\n      \"height\": height + \"px\",\n      \"float\": \"left\",\n      \"background-color\": \"white\",\n      \"border-style\": \"solid\",       \n      \"border-width\": div_border_width + \"px\",\n      \"border-color\": \"magenta\",\n      \"margin-top\": \"5px\" })\n    \n  var tip_div =\n  bindTo\n  .append(\"div\")\n  .attr(\"id\", mid +_TIP_DIV)\n  .style({\n      \"display\": \"none\",\n      \"position\": \"absolute\",\n      \"pointer-events\": \"none\",\n      \"top\": \"0px\",\n      \"left\": \"0px\"})\n  .append(\"table\")\n  .attr(\"class\",\"c3-tooltip\")\n\n  var tbody =\n  tip_div\n  .append(\"tbody\")\n\n  tbody.append(\"tr\").append(\"th\").attr(\n    { \"id\": mid +_DAY_TEXT,\n      \"colspan\":\"2\"}).text(\"CCC\")\n\n  var tr2 = tbody.append(\"tr\").attr(\"class\",\"c3-tooltip-name--data2\")\n  tr2.append(\"td\").attr(\"class\",\"name\").append(\"span\").style(\"background-color\", COLOR_BALANCE)\n  tr2.append(\"td\").attr(\"class\",\"value\").attr(\"id\", mid +_B_TEXT).text(\"\")\n\n  var tr1 = tbody.append(\"tr\").attr(\"id\", mid +_TIP_I_DIV).attr(\"class\",\"c3-tooltip-name--data1\")\n  tr1.append(\"td\").attr(\"class\",\"name\").append(\"span\").attr(\"id\", mid +_B_COLOR).style(\"background-color\", \"white\")\n  tr1.append(\"td\").attr(\"class\",\"value\").attr(\"id\", mid +_I_TEXT).text(\"\")\n\n  var minibar_leadin_svg = minibar_div\n    .append(\"svg\")\n    .attr({\n      \"id\": mid + _LEADIN,\n      \"width\": \"0px\",\n      \"height\": height })\n\n  minibar_leadin_svg\n    .append(\"line\")\n    .attr({\n    \"x1\" : leadin_width - (0.5 * line_width),\n    \"x2\" : leadin_width - (0.5 * line_width),\n    \"y1\": datearea_y,\n    \"y2\": bottom_margin_y,\n    \"stroke\": COLOR_MONTH_SEPARATOR_LINE,\n    \"stroke-width\": line_width\n    }) \n\n  minibar_leadin_svg\n  .append(\"line\")\n  .attr({\n    \"id\": mid + _LEADIN_ZERO,\n    \"x1\" : leadin_width - 7,\n    \"x2\" : leadin_width,\n    \"y1\": center_margin_y - scale(0) + top_margin + line_width,\n    \"y2\": center_margin_y - scale(0) + top_margin + line_width,\n    \"stroke\": \"black\",\n    \"stroke-width\": b_line_width\n  })\n\n  minibar_leadin_svg\n  .append(\"text\")\n        //.text(maxy_text)\n        .text('')\n        .attr({\n          \"id\": mid + _MAX_TEXT,\n          \"x\": leadin_width - 10,\n          \"y\": datearea_y + 12,\n          \"text-anchor\": \"end\",\n          \"font-family\": \"sans-serif\",\n          \"font-size\": \"12px\",\n          \"fill\": \"black\"\n        })\n\n  minibar_leadin_svg\n  .append(\"text\")\n        //.text(miny_text)\n  \t\t.text('')\n        .attr({\n          \"id\": mid + _MIN_TEXT,\n          \"x\": leadin_width - 10,\n          \"y\": center_margin_y  ,\n          \"text-anchor\": \"end\",\n          \"font-family\": \"sans-serif\",\n          \"font-size\": \"12px\",\n          \"fill\": \"black\"\n        })\n  //console.log(\"minibar_div.width = \" + width)\n  var minibar_svg = minibar_div\n    .append(\"svg\")\n    .style({\n        \"cursor\": \"inherit\"\n    })\n    .attr({ \n      \"width\": width,\n      \"height\": height,\n      \"fill\" : \"red\" })\n    .on({\n      \"mouseout\" : function() {cursor(\"default\")}\n    })\n\n  \n  minibar_svg\n    .append(\"rect\")\n    .attr({\n      \"id\": mid + _MONTH,\n      \"y\": month_y,\n      \"x\": 0,\n      \"width\": width - line_width,\n      \"height\" : month_height,\n      \"fill\" : monthColor(month.columns[0].d)\n    }).style(\"cursor\", \"pointer\")\n    .on(clicks_month)\n\n  minibar_svg\n  .append(\"text\")\n        .text(getmonthtext(month.columns[0].d))\n        .attr({\n          \"x\": 3,\n          \"y\": month_y + 15,\n          \"text-anchor\": \"start\",\n          \"font-family\": \"sans-serif\",\n          \"font-size\": \"12px\",\n          \"fill\": COLOR_MONTH_TEXT\n        }).style(\"cursor\", \"pointer\")\n        .on(clicks_month)\n        \n    minibar_svg\n    .selectAll()\n    .data(month.columns)\n    .enter()    \n    .append(\"rect\")\n    .attr({\n      \"id\": function(d) { \n        console.assert(d.d, \"d must be defined\")\n        return dateId(d.d) + _BG },\n      \"x\" : function(d, ix) {\n        ////console.log(\"x:\"+ (ix * slot_width))\n        return (ix * slot_width)},\n      \"y\": datearea_y,\n      \"width\": slot_width,\n      \"height\": datearea_height,\n      \"fill\": function(d) {return bgColor(d)}\n    })/*.style(\"cursor\", \"pointer\") */\n    .on(clicks)\n\n    minibar_svg\n    .selectAll()\n    .data(month.columns)\n    .enter()    \n    .append(\"rect\")\n    .attr({\n      \"id\": function(d) { return dateId(d.d) + _I },\n      \"x\" : function(d, ix){ return ((ix + (1 - col_per_slot_ratio) / 2) * slot_width)},\n      \"y\": function(d) { return  center_margin_y - scale(d.i) + top_margin + line_width },\n      \"width\": column_width,\n      \"height\": function(d) { return scale(d.i) - scale(0) },\n      \"fill\": COLOR_INCOME_POSITIV\n    })//.style(\"cursor\", \"pointer\")\n    .on(clicks)\n  \n    minibar_svg\n    .selectAll()\n    .data(month.columns)\n    .enter()    \n    .append(\"rect\")\n    .attr({\n      \"id\": function(d) { return dateId(d.d) + _E },\n      \"x\" : function(d, ix){ return ((ix + (1 - col_per_slot_ratio) / 2) * slot_width)},\n      \"y\": center_margin_y - scale(0) + top_margin + line_width,\n      \"width\": column_width,\n      \"height\": function(d) { return scale(0) - scale(d.e)},\n      \"fill\": COLOR_INCOME_NEGATIV\n    })//.style(\"cursor\", \"pointer\")\n    .on(clicks)\n    \n   minibar_svg\n    .selectAll()\n    .data(month.columns)\n    .enter()    \n    .append(\"line\")\n    .attr({\n      \"id\": function(d) { return dateId(d.d) + _LINE_ZERO },\n      \"x1\" : function(d, ix){ return (ix * slot_width)},\n      \"x2\" : function(d, ix) { return ((ix+1) * slot_width)},\n      \"y1\": center_margin_y - scale(0) + top_margin + line_width,\n      \"y2\": center_margin_y - scale(0) + top_margin + line_width,\n      \"stroke\": \"black\",\n      \"stroke-width\": b_line_width\n    })/*.style(\"cursor\", \"pointer\")*/\n    .on(clicks)\n\n   minibar_svg\n    .selectAll()\n    .data(month.columns)\n    .enter()    \n    .append(\"line\")\n    .attr({\n      \"id\": function(d){ return dateId(d.d) + _LINE_B_PREV},\n      \"x1\" : function(d, ix){ return (ix-(null != d.prev_b ? 0.5 : -0.5)) * slot_width},\n      \"x2\" : function(d, ix){ return (ix+0.5) * slot_width},\n      \"y1\": function(d){\n        return center_margin_y - scale(null != d.prev_b ? d.prev_b : d.b) + top_margin + line_width},\n      \"y2\": function(d, ix) {\n        return center_margin_y - scale(d.b) + top_margin + line_width},\n      \"stroke\": COLOR_BALANCE,\n      \"stroke-width\": b_line_width\n    })/*.style(\"cursor\", \"pointer\") */\n    .on(clicks)\n    \n\n    minibar_svg\n    .selectAll()\n    .data(month.columns)\n    .enter()    \n    .append(\"line\")\n    .attr({\n      \"id\": function(d){ return dateId(d.d) + _LINE_B_NEXT},\n      \"x1\" : function(d, ix){ return (ix+0.5) * slot_width },\n      \"x2\" : function(d, ix){ return (ix+(null != d.next_b ? 1.5 : 0.5)) * slot_width},\n      \"y1\": function(d) {\n        return center_margin_y - scale(d.b) + top_margin + line_width},\n      \"y2\": function(d, ix){\n        return center_margin_y - scale(null != d.next_b ? d.next_b : d.b) + top_margin + line_width},\n      \"stroke\": COLOR_BALANCE,\n      \"stroke-width\": b_line_width\n    })/*.style(\"cursor\", \"pointer\") */\n    .on(clicks)\n\n    if (slot_width > 4) {\n      minibar_svg\n      .selectAll()\n      .data(month.columns)\n      .enter()    \n      .append(\"circle\")\n      .style(\"shape-rendering\",\"auto\")\n      .attr({\n        \"id\": function(d) { return dateId(d.d) + _B},\n        \"cx\" : function(d, ix){ return ((ix + 0.5) * slot_width)},\n        \"cy\": function(d) { return center_margin_y - scale(d.b) + top_margin + line_width },\n        \"r\": 1.5, //slot_width / 6,\n        \"fill\": COLOR_BALANCE,\n      })/*.style(\"cursor\", \"pointer\") */\n      .on(clicks)\n    }\n\n    minibar_svg\n    .append(\"line\")\n    .attr({\n      \"x1\" : -2,\n      \"x2\" : width + 2,\n      \"y1\" : datearea_y + (0.5*line_width),\n      \"y2\" : datearea_y + (0.5*line_width),\n      \"stroke\": COLOR_MONTH_SEPARATOR_LINE,\n      \"stroke-width\": line_width\n    })\n\n    minibar_svg\n    .append(\"line\")\n    .attr({\n      x1 : width - (0.5 * line_width),\n      x2 : width - (0.5 * line_width),\n      \"y1\" : datearea_y,\n      \"y2\" : bottom_margin_y,\n      \"stroke\": COLOR_MONTH_SEPARATOR_LINE,\n      \"stroke-width\": line_width\n    })\n\n} //create(config)\n\nfunction leadin(month) {\n  var mid = monthId(month.columns[0].d)\n  var e = document.getElementById(mid +_DIV)\n  var x = e.getBoundingClientRect().left\n  var first = false\n  \n  var width = month.columns.length * slot_width +  line_width\n  if( !leadin_x ) { //init lead_in x\n\t  //console.log(\"first!\")  \n    leadin_x = x\n    first = true\n  }\n  //console.log(\"x:\"+x+\" leadin:\"+leadin_x+\" add:\"+ (leadin_x === x ? leadin_width : 0))\n  /*d3.select('#' + mid +_DIV)\n  .style({\n    \"width\": width + (leadin_x === x ? leadin_width : 0) + \"px\"\n  })\n\n  d3.select('#' + mid + _LEADIN)\n  .attr({\n    \"width\": (leadin_x === x ? leadin_width : 0) + \"px\",\n  })*/\n  d3.select('#' + mid +_DIV)\n  .style({\n    \"width\": width + (x <= leadin_x ? leadin_width : 0) + \"px\"\n  })\n\n  d3.select('#' + mid + _LEADIN)\n  .attr({\n    \"width\": (x <= leadin_x ? leadin_width : 0) + \"px\",\n  })\n  \n  if (first) {\n\t  d3.select('#' + mid + _MAX_TEXT)\n\t  .text(roundNumberText(maxy))\n\t\n\t  d3.select('#' + mid + _MIN_TEXT)\n\t  .text(roundNumberText(miny)) \n  }\n}\n\nfunction updateMonth(month) {\n  ////console.log(\"update\")\n  var mid = monthId(month.columns[0].d)\n  d3.select('#' + mid + _LEADIN_ZERO)\n    .transition()\n    .attr({\n      \"y1\": center_margin_y - scale(0) + top_margin + line_width,\n      \"y2\": center_margin_y - scale(0) + top_margin + line_width\n    })\n  d3.select('#' + mid + _LEADIN_ZERO_TEXT)\n    .transition()\n    .attr({\n      \"y\": center_margin_y - scale(0) + 3 + top_margin + line_width,\n    })\n\n  //for (var ix = 0, len = month.columns.length; ix < len; ix++) {\n  month.columns.forEach( m => {\n    var date_id = dateId(m.d)\n\n    d3.select('#' + date_id + _I)\n      .datum(function(d) {\n        d.i =  m.i\n        d.e =  m.e\n        d.b =  m.b\n        d.smallestb =  m.smallestb\n        d.prev_b =  m.prev_b\n        d.next_b =  m.next_b\n        return d\n      })\n      .transition()\n      .attr({\n        \"y\": function(d) {\n          return center_margin_y - scale(d.i) + top_margin + line_width\n        },\n        \"height\": function(d) {    \n          return  scale(d.i) - scale(0)  \n        }\n      }\n    )\n    \n   d3.select('#' + date_id + _BG)\n      .transition()\n      .attr({\n      \"fill\": function(d) {return bgColor(d)}\n    })\n    \n    \n    d3.select('#' + date_id + _E)\n      .transition()\n      .attr({\n        \"y\": center_margin_y - scale(0) + top_margin + line_width,\n        \"height\":  function(d) { \n        \treturn scale(0) - scale(d.e)  \n        }\n      }\n    )\n    \n    d3.select('#' + date_id + _B)\n      .transition()\n      .attr({\n        \"cy\": function(d) { \n          return center_margin_y - scale(d.b) + top_margin + line_width\n        }  \n      })\n\n    d3.select('#' + date_id + _LINE_ZERO)\n      .transition()\n      .attr({\n        \"y1\": center_margin_y - scale(0) + top_margin + line_width,\n        \"y2\": center_margin_y - scale(0) + top_margin + line_width\n      })\n\n\n    d3.select('#' + date_id + _LINE_B_PREV)\n      .transition()\n      .attr({\n        \"y1\": function(d) {\n          return center_margin_y - scale(null != d.prev_b ? d.prev_b : d.b) + top_margin + line_width\n        },\n        \"y2\": function(d) {\n          return center_margin_y - scale(d.b) + top_margin + line_width\n        }\n      })\n\n    d3.select('#' + date_id +  _LINE_B_NEXT)\n      .transition()\n      .attr({\n        \"y1\": function(d) {\n          return center_margin_y - scale(d.b) + top_margin + line_width\n        },\n        \"y2\": function(d) {\n          return center_margin_y - scale(null != d.next_b ? d.next_b : d.b) + top_margin + line_width\n        }\n      })\n  })\n} //updateMonth(month)\n\n\n\n\nfunction resize() {\n\t// slot_width = 3;\n\tinit_changeables()\n\t//init_scales()\n\trecreate()\n}\n\nfunction config(config) {\n//  //console.log(\"config\")\n  if(!bindto) {\n\t  console.assert(config, \"not a valid config\")\n\t  init(config)\n  }\n  //dataprovider = config.dataprovider\n // fetchData()\n}\n\n/*function fetchData() {\n  //console.log(\"fetchData\")\n  dataprovider(fetchdataCb)\n}*/\n\nconst nullData = \n{\n\tbalance : 0,\n\tdata : \n\t[\n\t\t{\n\t\t\t//d: (new Date).getFullYear() + \"-\" + ((new Date).getMonth() + 1) + \"-01\",\n\t\t\td:new Date(),\n\t\t\tb:0, \n\t\t\te:0, \n\t\t\ti:0,\n\t\t\tsmallestb: 0\n\t\t}\n\t]\n}\n\n\nfunction generate(provideddata) {\n\tif (!provideddata || !provideddata.data) return\n\t  if (!provideddata.data.length) {\n\t\t  provideddata = nullData\t \n\t  }\n\t  //console.log(\"generate\")\n\t  console.assert(bindto, \"config must be called first!\")\n\t  //console.log(provideddata)\n\t  //months = chunk_rawdata(provideddata.data, provideddata.balance)\n\t  months = chunk_rawdata(provideddata.data)\n\t  var prev_month_markers = month_markers;\n\t  //slot_width = calculateSlotWidth()\n\n\t  init_changeables()\n\t  init_scales()\n\t  if ( prev_month_markers === month_markers ) {\n\t\t  update()\n\t  } else {\n\t\t  recreate()\n\t  }\n\t  /*if(start == null && end == null) {\n\t\t  select(initials.startDate, initials.endDate)\n\t  }*/\n}\n\nfunction update() {\n  if(!months) return\n  for (var ix = 0, len = months.length; ix < len; ix++) {\n\t    updateMonth(months[ix])\n\t    leadin(months[ix])\n\t}\n}\n\nfunction recreate() {\n\t  d3.select('#'+bindto).selectAll(\"div\").remove()\n\t  for (var ix = 0, len = months.length; ix < len; ix++) {\n\t    create(months[ix])\n\t    leadin(months[ix])\n\t  }\n}\n/*\nvar p_cursor\nfunction fetchAllMonths() {\n  //console.log(\"fetchAllMonths\")\n  p_cursor = document.body.style.cursor\n  //cursor(wait)\n  dataprovider(dataCb)\n}\n\nfunction dataCb(provideddata) {\n\t  cursor(p_cursor)\n\t  //console.log(\"dataCb\")\n\t  //console.log(provideddata)\n\t  months = chunk_rawdata(provideddata.data, provideddata.balance)\n\t  resizeMonths();\n\t}\n\nfunction resizeMonths() {\n  //console.log(\"resizeMonths\")\n  slot_width = calculateSlotWidth()\n  init_changeables()\n  init_scales()\n  d3.select('#'+bindto).selectAll(\"div\").remove()\n  for (var ix = 0, len = months.length; ix < len; ix++) {\n    create(months[ix])\n    leadin(months[ix])\n  }\n}\n\nfunction refresh() {\n  //console.log(\"refresh\")\n  dataprovider(refreshCb)\n}\n\nfunction refreshCb(provideddata) {\n  months = chunk_rawdata(provideddata.data, provideddata.balance)\n  init_scales()\n  for (var ix = 0, len = months.length; ix < len; ix++) {\n    updateMonth(months[ix])\n    leadin(months[ix])\n  }\n}*/\n\n/*function add(date, ie) {\n  //console.log(\"add \" +date )\n  console.assert(date && null != ie, \"add cannot have null params\")\n  if(dates.compare(date, months[0].columns[0].d ) < 0  || dates.compare(date, months[months.length-1].columns[months[months.length-1].columns.length-1].d ) > 0) {\n    fetchAllMonths()\n  } else  {\n    var found = false;\n    for (var ix1 = 0, len1 = months.length; ix1 < len1; ix1++) {\n      var month = months[ix1]\n      for (var ix2 = 0, len2 = month.columns.length; ix2 < len2; ix2++) {\n        if (!found && (dateDiffInDays(date, month.columns[ix2].d) == -1)) {\n            month.columns[ix2].next_b += ie\n        }\n        if (!found && (dateDiffInDays(date, month.columns[ix2].d) == 0)) {\n            month.columns[ix2].i += ie\n            month.columns[ix2].b += ie\n            month.columns[ix2].next_b += ie\n            found = true\n        } else if (found) {\n          month.columns[ix2].prev_b += ie\n          month.columns[ix2].b += ie\n          if (month.columns[ix2].next_b) {\n            month.columns[ix2].next_b += ie\n          }\n        }\n      }\n    }\n    refresh()\n  }\n}*/\n\n\nreturn {\n  //\t\"refresh\" : refresh,\n    \"resize\" : resize,\n    //\"add\" : add,\n    \"config\" : config,\n    \"generate\" : generate,\n    \"select\" : select\n}\n})()\n\nwindow.addEventListener(\"resize\", function(e) {\n  minibars.resize()\n});\n\nexport {minibars}\n//module.exports = minibars;\n","//produces array of objects containing\n//months in input and dates of each month and more...\n\nfunction chunk_rawdata(daydata) {\n  // (I) loop daydata (must be ascending by date and date is unique) (var i)\n  //  - (II) for each dates (var data_i) construct array of dates for that month - if needed. (var dayArray)\n  //  - (III) update the corresponding array index data (var data_i) to data of that date (var dayArray)\n  //  - (IV) add to each day balances of previous and next days\n  //  - (V) add empty month to the beginning and end\n\t\n\t\n  // if account == -1, we must calculate balances ourselves (i.e denotes that category filter is on)\n  var balances_given = (daydata[0].a !== -1);\n\t\n  //trivial checks\n\n  var r = []; //return value\n  if (!daydata || !daydata.length) {\n    return r\n  }\n\n  //convert date-strings to date\n  if (typeof daydata[0].d  === \"string\") {\n\t  for (var idaydata = 0, lendaydata = daydata.length; idaydata < lendaydata; idaydata++) {\n\t\t  daydata[idaydata].d = new Date(daydata[idaydata].d)\n\t  }\n  }\n\n  //returns the # of days of month (m is 0-based)\n  function monthDays(m , y){\n    return (new Date(y, m + 1, 0)).getDate();\n  }\n\n  //init the main loop vars\n  console.assert(daydata[0].d, \"d is mandatory\")\n  var m = daydata[0].d.getMonth() - 1\n  var y = daydata[0].d.getFullYear()\n  var d = daydata[0].d.getDate() - 1\n  var b = 0\n  var smallestb = 0\n  var dayArray = null\n\n  //main loop (I)\n  for (var i = 0, len = daydata.length; i < len; i++) {\n    var data_i = daydata[i]\n    console.assert(data_i.d, \"d is mandatory\")\n    var m_i = data_i.d.getMonth()\n    var y_i = data_i.d.getFullYear()\n    var d_i = data_i.d.getDate()\n    \n    console.assert(\n      m_i >= 0 \n      && m_i < 12 \n      && d_i >0 \n      && d_i <= 31 \n      && (y * (12 * 31) + m * 31 + d) < (y_i * (12 * 31) + m_i * 31 + d_i),\n     \"input array must be ascending\")\n    d = d_i\n    while (m !== m_i || y !== y_i) {\n      //(II)\n      //a new month encountered: construct empty array for that month and the months before\n      m++\n      if (m === 12) {\n        y++\n        m=0\n      }\n      //array constructor\n      dayArray = []\n      for(var z=1, zlen = monthDays(m,y); z <= zlen; z++) {\n        dayArray.push(\n          { \n            \"i\": 0,\n            \"e\": 0,\n            \"d\": new Date(y, m, z),\n            \"b\": b,\n            \"smallestb\": smallestb\n          }\n        )\n      }\n\n      r.push({\n        \"columns\": dayArray,\n        \"range_text\": (m + 1) + \"/\" + y\n      })\n    }\n    // (III)  \n    //balances\n    //balances prior to day are set in array constructor\n    \n    console.assert(null != data_i.b, \"b is mandatory\")\n    console.assert(null != data_i.smallestb, \"smallestb is mandatory\")\n    console.assert(null != data_i.i, \"i is mandatory\")\n    console.assert(data_i.i >= 0, \"i must be positive\")\n    console.assert(null != data_i.e, \"e is mandatory\")\n    console.assert(data_i.e <= 0, \"i must be negative\")\n    \n    //calculate balance\n    if( !balances_given ) {\n    \tb = Math.round((b + data_i.i + data_i.e) * 100) / 100\n    \tsmallestb = b\n    } else {\n    \tb =  data_i.b\n    \tsmallestb = data_i.smallestb\n    }\n    \n    //fill up the array from this date  till end of month with balance\n    for(var z0 = data_i.d.getDate(), zlen0 = dayArray.length; z0 < zlen0; z0++) {\n       dayArray[z0].b = b\n       dayArray[z0].smallestb = smallestb\n    }\n    //update i, e and balance in array\n    dayArray[data_i.d.getDate()-1].i = data_i.i\n    dayArray[data_i.d.getDate()-1].e = data_i.e\n    dayArray[data_i.d.getDate()-1].b = b \n    dayArray[data_i.d.getDate()-1].smallestb = smallestb\n  }\n  \n  //(IV) add to each day balances of previous and next days\n  for(var ax = 0, axlen = r.length; ax < axlen; ax++) {\n    for( var ix = 0, ixlen = r[ax].columns.length; ix < ixlen; ix++) {\n      var data = r[ax].columns[ix]\n      if (!ax && !ix) {\n        data.prev_b = null;\n      } else if((ax + 1) === axlen && (ix + 1) === ixlen) {\n        data.next_b = null;\n      } else if(!ix) {\n        data.prev_b = r[ax - 1].columns[r[ax - 1].columns.length - 1].b\n      } else if((ix + 1) === ixlen) {\n        data.next_b = r[ax + 1].columns[0].b\n      } \n      if (typeof data.prev_b === \"undefined\") {\n        data.prev_b = r[ax].columns[ix - 1].b\n      }\n      if (typeof data.next_b === \"undefined\") {\n        data.next_b = r[ax].columns[ix + 1].b       \n      }\n    }  \n  }\n  \n  //  - (V) add empty month to the beginning and end\n dayArray = []\n var prevm = new Date(r[0].columns[0].d)\n prevm.setMonth(prevm.getMonth()-1);\n m = prevm.getMonth()\n y = prevm.getFullYear()\n for(var z1=1, zlen1 = monthDays(m, y); z1 <= zlen1; z1++) {\n        dayArray.push(\n          { \n            \"i\": 0,\n            \"e\": 0,\n            \"d\": new Date(y, m, z1),\n            \"b\": 0,\n            \"smallestb\": 0\n          }\n        )\n  }\n  r.unshift({\n    \"columns\": dayArray,\n    \"range_text\": (m + 1) + \"/\" + y\n  })\n\n dayArray = []\n var last = r[r.length-1].columns[r[r.length-1].columns.length-1]\n last.next_b = last.b\n var nextm = new Date(last.d)\n nextm.setDate(1)\n nextm.setMonth(nextm.getMonth() + 1);\n\n m = nextm.getMonth()\n y = nextm.getFullYear()\n for(var z2=1, zlen2 = monthDays(m, y); z2 <= zlen2; z2++) {\n\t \n        dayArray.push(\n          { \n            \"i\": 0,\n            \"e\": 0,\n            \"d\": new Date(y, m, z2),\n            \"b\": last.b,\n            \"smallestb\": last.smallestb,\n            \"prev_b\": last.b,\n            \"next_b\": last.b          \n          }\n        )\n  }\n dayArray[dayArray.length -1].next_b = null\n  r.push({\n    \"columns\": dayArray,\n    \"range_text\": (m + 1) + \"/\" + y\n  })\n\n  return r;\n}\n\nexport {chunk_rawdata}\n","import React from 'react';\n\nimport {balances_load} from '../../actions/minibars'\nimport {set_daterange} from '../../actions/daterange'\nimport '../../../node_modules/c3/c3.min.css'\n\nimport { connect } from 'react-redux'\nimport { minibars } from './minibars_d3'\n\nclass Minibars extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    \t\tstart: new Date(),\n    \t\tend: new Date(),\n    \t\tbalances: null,\n    \t\tredraw: null\n    }\n    // This binding is necessary to make `this` work in the callback\n    this.select = this.select.bind(this);\n    this.redraw = this.redraw.bind(this);\n    props.load();\n  }\n  \n  componentDidMount() {\n\t  var minibarconfig = {\n\t\t\t  \tmax_selection_days: 400,\n\t\t\t    bindto: this.props.name,\n\t\t\t    select: this.select,\n\t\t\t}  \n\t  \n\t  this.minibars = minibars;\n\t  this.minibars.config(minibarconfig);\n  }\n  \n  select(start, end) {\n\t  this.su = false;\n      this.props.setDateRange(new Date(start), new Date(end), \"rangePicker1\")\n  }\n  \n  redraw() {\n\t  this.minibars.generate(this.props.balances)\n\t  this.minibars.select(this.props.start, this.props.end)\n  }\n  \n  componentWillReceiveProps(nextProps){\n\t  this.minibars.generate(nextProps.balances)\n\t  this.minibars.select(nextProps.start, nextProps.end)\n  }\n\n  render() {\n    return (\n    \t<div>\n\t        <div id={this.props.name} />\n        </div>\n    );\n  }\n  \n}\n\nconst mapStateToProps = (store) => {\n\t  return {\n  \t\tstart: store.daterange.s,\n\t\tend: store.daterange.e,\n\t\tbalances: store.minibars.balances,\n\t\tredraw: store.minibars.redraw,\n\t  }\n  }\n\nfunction mapDispatchToProps(dispatch) {\n    return({\n        load: () => {\n        \tdispatch(balances_load(0)) //all\n        },\n        setDateRange: (s, e, name) => {\n        \tdispatch(set_daterange(s, e, name)) \n        }\n    })\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(Minibars)\n","import React from 'react' //  Main React library\nimport { Button } from 'react-bootstrap';\nimport { connect } from 'react-redux'\n\nimport { daterange_next_block, daterange_prev_block } from '../../actions/daterange'\nvar FontAwesome = require('react-fontawesome');\n\nclass Buttons extends React.Component{\n\tconstructor(props) {\n\t    super(props)\n\t    this.nextBlock = this.nextBlock.bind(this)\n\t    this.prevBlock = this.prevBlock.bind(this)\n\t}\n\t\n\tnextBlock() {\n\t\tthis.props.daterangeNextBlock()\n\t}\n\t\n\tprevBlock() {\n\t\tthis.props.daterangePrevBlock()\n\t}\n\t\n\trender(){\n\t    return (\n\t    <div>\n\t     <Button onClick={this.prevBlock}>\n\t     \t<FontAwesome name='caret-left' />\n\t     </Button>\n\t     <Button onClick={this.nextBlock}>\n\t     \t<FontAwesome name='caret-right' />\n\t     </Button>\n\t    </div>\n\t    )\n\t}\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return ({\n        daterangeNextBlock: () => {\n            dispatch(daterange_next_block())\n        },\n        daterangePrevBlock: () => {\n            dispatch(daterange_prev_block())\n        }\n    })\n}\n\nexport default connect(null, mapDispatchToProps)(Buttons)\n","import React from 'react';\nimport moment from 'moment';\nimport $ from 'jquery';\n// eslint-disable-next-line\nimport daterangepicker from 'daterangepicker';\nimport { connect } from 'react-redux'\n\n/*\n * Note: this must be included:\n    <link rel=\"stylesheet\" type=\"text/css\" media=\"all\" href=\"%PUBLIC_URL%/daterangepicker/daterangepicker.css\" />\n */\n\nvar dateRange_pickeroptions = {\n\t    \"dateLimit\": {\n\t        \"days\": 90\n\t    },\n\t    \"showWeekNumbers\": true,\n\t    \"autoApply\": true,\n\t    \"alwaysShowCalendars\": true,\n\t    \"locale\": {\n\t      \"direction\": \"ltr\",\n\t      \"format\": \"DD.MM.YYYY\",\n\t      \"separator\": \" - \",\n\t      \"applyLabel\": \"Apply\",\n\t      \"cancelLabel\": \"Cancel\",\n\t      \"fromLabel\": \"From\",\n\t      \"toLabel\": \"To\",\n\t      \"customRangeLabel\": \"Custom\",\n\t      \"daysOfWeek\": [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"],\n\t      \"monthNames\": [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n\t      \"firstDay\": 1\n\t    },\n\t    \"linkedCalendars\": false,\n\t    //\"startDate\": new Date(),\n\t    //\"endDate\": new Date(),\n\t    \"ranges\": {\n\t        'Last 7 Days': [moment().subtract(6, 'days'), moment()],\n\t        'Last 30 Days': [moment().subtract(29, 'days'), moment()],\n\t        'This Month': [moment().startOf('month'), moment().endOf('month')],\n\t        'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]\n\t     }\n\t  }\n\n\tvar dateSingle_pickeroptions = {\n\t        \"singleDatePicker\": true,\n\t        \"showDropdowns\": false,\n\t\t    \"showWeekNumbers\": true,\n\t\t    \"alwaysShowCalendars\": true,\n\t\t    \"autoApply\": true,\n\t\t    \"locale\": {\n\t\t      \"direction\": \"ltr\",\n\t\t      \"format\": \"DD.MM.YYYY\",\n\t\t      \"separator\": \" - \",\n\t\t      \"applyLabel\": \"Apply\",\n\t\t      \"cancelLabel\": \"Cancel\",\n\t\t      \"fromLabel\": \"From\",\n\t\t      \"toLabel\": \"To\",\n\t\t      \"customRangeLabel\": \"Custom\",\n\t\t      \"daysOfWeek\": [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"],\n\t\t      \"monthNames\": [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n\t\t      \"firstDay\": 1\n\t\t    },\n\t\t //   \"startDate\": new Date()\n\t\t  }\nclass DatePicker extends React.Component {\n   constructor(props) {\n\t    super(props);\n\t    this.state = {\n\t    \t\tstart: props.value ? props.value : props.start ? props.start : new Date(),\n\t    \t\tend: props.value ? null : props.end ? props.end : new Date()\n\t    }\n  }\n  \n  componentWillReceiveProps(nextProps){\n\t    //console.log('componentWillReceiveProps' + this.props.componentWillReceiveProps)\n\t    if(nextProps.value) {\n\t    \t//console.log(\"VALUE=\" + nextProps.value)\n\t    \t$('#' + this.props.pickerName).data('daterangepicker').setStartDate(nextProps.value)\n\t    \t$('#' + this.props.pickerName).data('daterangepicker').setEndDate(nextProps.value)\n\t    } else if (nextProps.start) {\n\t    \t  //console.log(\"START=\" + nextProps.start)\n\t\t\t  $('#' + this.props.pickerName).data('daterangepicker').setStartDate(nextProps.start)\n\t\t\t  $('#' + this.props.pickerName).data('daterangepicker').setEndDate(nextProps.end)\n\t  \t} \n  }\n   \n  componentDidMount() {\n\t  //new:\n\t\tif(this.props.pickerType === \"single\") {\n\t\t\t$('#' + this.props.pickerName).daterangepicker(\n\t\t\t\t\tdateSingle_pickeroptions, \n\t\t\t\t\t(start) =>  {\n\t\t\t\t\t\t//console.log('New single date selected: ' + start.format('MM.DD.YYYY'));\n\t\t\t\t\t\tthis.props.pickerCallback(start, this.props.pickerName)\n\t\t\t\t\t}\n\t\t\t)\n\t\t}\n\t\tif(this.props.pickerType === \"range\") {\n\t\t\t$('#' + this.props.pickerName).daterangepicker(\n\t\t\t\t\t  dateRange_pickeroptions, \n\t\t\t\t\t  (start, end) => { \n\t\t\t\t\t\t\t//console.log('New date range selected: ' + start.format('MM.DD.YYYY')+ \" - \" + end.format('MM.DD.YYYY'));\n\t\t\t\t\t\t\tthis.props.pickerCallback(start, end, this.props.pickerName)\n\t\t\t\t    }\n\t\t\t  )\n\t\t}\n\t\t$('#' + this.props.pickerName).data('daterangepicker').setStartDate(this.state.start)\n\t\tif (this.props.pickerType === \"range\") {\n\t\t\t$('#' + this.props.pickerName).data('daterangepicker').setEndDate(this.state.end)\n\t\t} else {\n\t\t\t$('#' + this.props.pickerName).data('daterangepicker').setEndDate(this.state.start)\t\n\t\t}\n\n  }\n  render() {\n    return (\n    \t\t<div>\n    \t\t\t<input disabled = {this.props.disabled}\n    \t\t\t\tonMouseDown={function(e) { \n       \t\t\t\t\t\te.preventDefault(); return false;\n    \t\t\t\t}}\n    \t\t\t\tonKeyDown={function(e) { \n    \t\t\t\t\tvar char = e.which || e.keyCode;\n    \t\t\t\t\tif( char !== 9) {\n    \t\t\t\t\t\te.preventDefault(); return false;\n    \t\t\t\t\t}\n    \t\t\t\t}} \n    \t\t\t\ttype=\"text\" \n    \t\t\t\tid={this.props.pickerName} \n    \t\t\t\tclassName=\"form-control\" \n    \t\t\t\tstyle={{\n    \t\t\t\t\t\tdisplay: 'inline', \n    \t\t\t\t\t\twidth: this.props.pickerType === 'range' ? '185px' : '100px',\n    \t\t\t\t\t\t'backgroundColor' : (this.props.touched ? 'lightyellow' : '')\n    \t\t\t\t}}/>\n    \t\t</div>\n    );\n  }\n}\n\nDatePicker.defaultProps = {\n\t\tcomponentWillReceiveProps: false,\n\t    start: null, //initials.startDate,\n\t    end: null, //initials.endDate,\n\t    disabled: false,\n\t    touched: false\n}\n\nconst mapStateToProps = (store) => {\n\t  return {\n  \t\tstart: store.daterange.s,\n\t\tend: store.daterange.e\n\t  }\n  }\n\nexport default connect(mapStateToProps)(DatePicker)\n\n//module.exports = connect(mapStateToProps)(DatePicker)\n\n","//because IE11 does not support .find!!!\nfunction findInArray(array, booleanfunction) {\n  for(var i=0; i<array.length; i++) {\n\t  var item = array[i]\n\t  if(booleanfunction(item)) return item \n  }\n  return null;\n}\n\n//because IE11 does not support .find!!!\nfunction findIndexInArray(array, booleanfunction) {\n  for(var i=0; i<array.length; i++) {\n\t  var item = array[i]\n\t  if(booleanfunction(item)) return i \n  }\n  return -1;\n}\nexport {findInArray, findIndexInArray}","import React from 'react';\nimport {SimpleSelect} from 'react-selectize'\nimport 'react-selectize/themes/index.css'\nimport { get_constants } from '../../actions/constants'\nimport { connect } from 'react-redux'\nimport { findInArray } from '../../util/findInArray'\n\nvar FontAwesome = require('react-fontawesome');\n\nconst width = 150\n\nclass Dropdown extends React.Component {\n\tconstructor(props) {\n\t    super(props);\n\t    this.state = {\n\t    \t\tselectedValue : null,\n\t    \t\t'items' :  props.getConstants(props.constants_id) // return null, but launches fetch\n\t    \t\t\n\t    }\n\t    this.constants_id = props.constants_id\n\t    this.onValueChange = this.onValueChange.bind(this);\n\t    this.className = this.className.bind(this);\n\t}\n\t\n\tonValueChange(item) {\n    \tthis.setState( {\n\t    \t\tselectedValue : item\n\t    })\n\t    this.props.onValueChange(item != null? item.value : null)\n    \treturn this.renderOption(item)\n    }\n\n\t\n    componentWillReceiveProps(nextProps){\n    \tif( nextProps.constants && nextProps.constants[this.props.constants_id]) {\n    \t\tvar constants = nextProps.constants[this.props.constants_id]\n    \t\tvar selectedItem = findInArray( constants,  c => { return c.value === nextProps.selectedValue} )\n\t    \t/*var selectedItem = constants.find( c => { return c.value === nextProps.selectedValue })*/\n\t    \tvar validConstants = constants.filter(  c => { return (c.valid || c === selectedItem) })\n\t    \tthis.setState({\n\t\t    \t\tselectedValue : selectedItem,\n\t\t    \t\t'items' : validConstants\t\t\n\t\t    })\n    \t}\n    }\n    \n\trenderOption(item) {\t\t\n\t\tif(item == null) {\n\t\t\treturn\n\t\t}\n    \treturn (\n\t\t\t<span style={{\n\t \t\t\t\t display: 'block', \n\t \t\t\t\t whiteSpace: 'nowrap',\n\t\t\t}}>\n\t\t\t\t<span style={{\n\t \t\t\t\t display: 'block', \n\t\t\t\t\t textOverflow: 'ellipsis',\n\t\t\t\t\t overflow: 'hidden',\n\t\t\t\t\t whiteSpace: 'nowrap',\n\t\t\t\t\t maxWidth: (width-50)+'px'\n\t    \t\t}}>\n\t\t\t\t\t<span style = {{'marginRight':'5px', 'marginLeft':'5px'}}>\n\t\t\t\t\t\t<FontAwesome name = 'square' style = {{'color': item.color}} />\n\t\t\t\t\t</span>\n\t    \t\t\t<span>\n\t    \t\t\t\t{item.label}\n\t    \t\t\t</span>\n\t    \t\t</span>\n\t\t\t</span>\n    \t)    \t\n    }\n\t\n\tclassName() {\n\t\tif(!this.props.readOnly && !this.props.touched) return 'simpledropdown'\n\t\tif(!this.props.readOnly && this.props.touched) return 'simpledropdown_touched'\n\t\tif(this.props.readOnly && !this.props.touched) return 'simpledropdown_ro'\n\t\tif(this.props.readOnly && this.props.touched) return 'simpledropdown_ro_touched'\n\t\t\n\t}\n\t\n\trender() {\n\t\treturn (\n\t\t<SimpleSelect\n\t\t\tclassName={this.className()}\n\t\t\tdisabled={this.props.readOnly}\n\t\t    style={{\n\t\t    \twidth: width+'px',\n\t\t    \tborder: 'none',\n\t\t    \tbackgroundColor: 'none',\n\t\t    \tbackgroundImage: 'none'\n\t\t    }}\n\t\t\trenderOption={this.renderOption}\n\t\t\trenderValue={this.renderOption}\n\t\t\tonValueChange={this.onValueChange}\n\t        placeholder={this.props.placeholder}\n\t        options = {this.state.items}\n\t\t\tvalue = {this.state.selectedValue}\n\t\t\thideResetButton = {true}\n\t\t/>)\n\t}\n}\n\nDropdown.defaultProps = {\n\t\trefreshTime: null,\n\t\tonValueChange: null,\n\t    touched: false,\n\t    readOnly: false,\n\t    placeholder: '',\n\t    constants: null,\n\t    constants_id: null\n}\n\nconst mapStateToProps = (store) => {\n    return {\n    \trefreshTime:  store.constants.refreshTime,\n        constants: store.constants.constants\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return({\n        getConstants: (id) => {\n        \tget_constants(id, dispatch)\n        }\n    })\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(Dropdown)\n","import React from 'react';\nimport { connect } from 'react-redux'\nimport { balances_load } from '../../actions/minibars'\nimport Dropdown from '../dropdown/dropdown'\nimport CheckboxField from '../editorFields/CheckboxField'\n\nclass ConstantFilter extends React.Component {\n\tconstructor(props) {\n\t    super(props);\n\t    this.state = {\n\t    \tfilter: null,\n\t    \tchecked: true\n\t    }\n\t    this.onFilterChanged = this.onFilterChanged.bind(this);\n\t    this.onCheck = this.onCheck.bind(this);\n  \t}\n\t  \n\tonFilterChanged(e) {\n\t\tthis.setState(\n\t\t\t\t{\n\t\t\t\t\tfilter: e\n\t\t\t\t})\n\t\tthis.props.balances_load(e)\n\t}\n\t\n\tonCheck(e) {\n\t\tthis.setState(\n\t\t\t\t{\n\t\t\t\t\tchecked: e\n\t\t\t\t})\n\t\tif(e) {\n\t\t\tthis.props.balances_load(0)\n\t\t} else if(this.state.filter) {\n\t\t\tthis.props.balances_load(this.state.filter)\n\t\t}\n\t}\n\t\n\t\n\trender() {\t\n\t\tvar dd = \t<Dropdown \n\t\t\t    \t\treadOnly = {this.state.checked}\n\t\t\t    \t\tonValueChange={ this.onFilterChanged } \n\t\t\t    \t\tselectedValue={this.state.filter}\n\t\t\t    \t\tplaceholder='filter'\n\t\t\t    \t\tconstants_id='cat'\n\t\t\t    \t/>\n\t\treturn(\n\t    <div>\n\t\t    <span style={{display: \"inline-flex\"}}>\n\t\t    \t<div style={{paddingTop: \"7px\", paddingRight: \"5px\"}}>\n\t\t    \tAll \n\t\t    \t</div>\n\t\t    \t<CheckboxField\n\t\t    \t\t\tid = 'all'\n\t\t\t\t  \t\tonValueChanged = {this.onCheck}\n\t\t\t\t  \t\tchecked = {this.state.checked}\n\t\t\t\t/>\n\t\t    \t{ !this.state.checked ? dd : null }\n\t\t    </span>\n\t    </div>)\n\t}\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return({\n        balances_load: (e) => {\n        \tdispatch(balances_load(e)) \n        }\n    })\n}\n\nexport default connect(null, mapDispatchToProps)(ConstantFilter)\n","import React from 'react' //  Main React library\nimport { Panel } from 'react-bootstrap';\nimport { set_daterange } from '../../actions/daterange'\nimport { minibars_redraw } from '../../actions/minibars'\n\nimport Minibars from '../minibars/minibars'\nimport Buttons from '../minibars/buttons'\n\nimport DatePicker from '../datepicker/datepicker'\n\nimport ConstantFilter from '../constantfilter/ConstantFilter'\n\nimport { connect } from 'react-redux'\n\nimport Spinner from './Spinner'\n\nvar FontAwesome = require('react-fontawesome');\n\n\nclass RangePanel extends React.Component{\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.showMinibars = this.showMinibars.bind(this)\n\t\tthis.state = {\n\t\t\tshowMinibars: false\n\t\t}\n\t}\n\t\n\tshowMinibars() {\n\t\tthis.setState({\n\t\t\tshowMinibars : !this.state.showMinibars\n    \t})\n    \tvar that = this\n\t\tvar f = () => {\n\t    \t\t\tthat.props.minibarsRedraw()\n\t    }\n\t    console.log(\"FIRE:\")\n\t    setTimeout(f, 0)\n\t}\n\n\trender(){\n\t\t/*\n\t\treturn(\n\t\t<div>\n\t\t\t<Panel style={{width: '100%'}}>\n\t\t\t  \t<Panel.Heading style={{paddingTop: \"3px\", paddingBottom: \"3px\", height: \"45px\"}}>\n\t\t\t  \t\t<div style={{\"display\": \"inline-flex\", \"whiteSpace\": \"nowrap\", \"alignItems\": \"center\", fontSize: \"23px\"}}>\n\t\t              \t\t  <FontAwesome name='calendar' />-<FontAwesome name='calendar' />&nbsp;\n\t\t\t\t              <DatePicker componentWillReceiveProps = {true} pickerName=\"rangePicker1\" pickerType=\"range\"\n\t\t\t\t\t              pickerCallback=\n\t\t\t\t\t              \t{(start, end, name) => {this.props.setDateRange(new Date(start), new Date(end))}}\n\t\t\t\t              />&nbsp;<Spinner fetching={this.props.fetching} /> \n\t\t               </div>\n\t\t\t\t       <span className=\"pull-right\" style={{paddingLeft: \"20px\"}}>  \n\t\t\t\t       \t\t<ConstantFilter />\n\t\t\t\t      </span>\n\t\t\t\t      <span className=\"pull-right\">\n\t\t\t\t  \t\t\t<Buttons />\n\t\t\t\t  \t  </span>\n\t\t\t  \t\n\t\t\t  \t</Panel.Heading>\n\t\t\t  \t<Panel.Body>\n\t\t\t  \t\t<Minibars name=\"minibar\"/>\n\t\t\t  \t\t{this.props.children}\n\t\t\t\t</Panel.Body>\n\t\t\t  </Panel>\n\t\t</div>\n\t\t)*/\n\t\t\n\t\tvar butts = <span className=\"pull-right\">\n\t\t\t\t  \t\t\t<Buttons />\n\t\t\t\t  \t </span>\n\t\t\t\t  \t \n\t\tvar ctrls = this.state.showMinibars ?\n\t\t\t\t       <span className=\"pull-right\" style={{paddingLeft: \"20px\"}}>  \n\t\t\t\t       \t\t<ConstantFilter />\n\t\t\t\t       </span>\n\t\t\t\t  \t :\n\t\t\t\t  \t   null\n\t\t\t\n\t\treturn(\n\t\t<Panel style={{width: '100%'}} id=\"minibars-panel\" expanded={this.state.showMinibars} onToggle={() => {}}  >\n          <Panel.Heading style={{paddingTop: \"3px\", paddingBottom: \"3px\", height: \"45px\"}}>\n         \n\t\t\t  \t\t<div style={{\"display\": \"inline-flex\", \"whiteSpace\": \"nowrap\", \"alignItems\": \"center\", fontSize: \"23px\"}}>\n\t\t              \t\t  <FontAwesome name='calendar' />-<FontAwesome name='calendar' />&nbsp;\n\t\t\t\t              <DatePicker componentWillReceiveProps = {true} pickerName=\"rangePicker1\" pickerType=\"range\"\n\t\t\t\t\t              pickerCallback=\n\t\t\t\t\t              \t{(start, end, name) => {this.props.setDateRange(new Date(start), new Date(end))}}\n\t\t\t\t              />&nbsp;<Spinner fetching={this.props.fetching} /> \n\t\t\t\t              \n\t\t            </div>\n\t\t            <span>\n\t\t\t\t\t\t\t<Panel.Toggle componentClass=\"button\" className=\"link-button\" onClick={this.showMinibars} >\n\t\t\t\t\t\t\t\t{ (this.state.showMinibars ? <FontAwesome name='minus-square-o' /> : <FontAwesome name='plus-square-o' />) }\n\t\t            \t\t</Panel.Toggle>\n\t                </span>\n\t                {butts}\n\t\t            {ctrls}\n\t\t            {/*\n\t\t\t\t   <span style={{marginTop: \"6px\"}}>\n\t\t\t\t\t\t\t<Panel.Toggle componentClass=\"button\" className=\"link-button\" onClick={this.showMinibars} >\n\t\t\t\t\t\t\t\t{ (this.state.showMinibars ? 'Hide details' : 'Show details') }\n\t\t            \t\t</Panel.Toggle>\n\t               </span>*/}\n\t\t           \n\n         \n          </Panel.Heading>\n          <Panel.Collapse>\n            <Panel.Body >\n            \t<Minibars name=\"minibar\" />\n            </Panel.Body>\n          </Panel.Collapse>\n        </Panel>)\n        \n\t}\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return ({\n        'setDateRange': (start, end) => {\n            dispatch(set_daterange(start, end))\n        },\n        minibarsRedraw: () => {\n            dispatch(minibars_redraw())\n        }\n    })\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        fetching: store.minibars.fetching\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RangePanel)\n\t\t\t\t\t\t","import { axios_get_params } from './axios'\nvar dateFormat = require('dateformat')\n\nconst PIE_REQUEST = 'PIE_REQUEST'\nconst pieRequestAction = (s, e) => ({\n    type: PIE_REQUEST,\n    payload: {\n        's': s,\n        'e': e\n    }\n})\n\n  \nconst PIE_RESPONSE = 'PIE_RESPONSE'\nconst pieResponseAction = (response) => (\n  { \n\ttype: PIE_RESPONSE,\n    payload: \n    \t{\n    \t\tslices : response\n    \t} \n  }\n)\n\nconst PIE_REDRAW = 'PIE_REDRAW'\nconst pieRedrawAction = () => (\n  { \n\ttype: PIE_REDRAW,\n    payload: \n    \t{\n    \t\tredraw : (new Date()).getTime() //only signal\n    \t} \n  }\n)\n\nvar params = null\n\nfunction get(dispatch) {\n    dispatch(pieRequestAction(params.s, params.e));\n    axios_get_params('pie?ts='+Date.now(), \n    \t\t{\t\t  \n\t\t  \t\tparams: params\n    \t\t},\n    \t\tresponse => {\n    \t\t\t// console.log(response);\n    \t\t\tdispatch(pieResponseAction(response.data))\n    \t\t},\n    \t\tdispatch\n\t  )\n}\n\nconst pie_load = (s, e) => (\n  (dispatch) => {\n\t  params = {\n\t\t\t  's': dateFormat(s, \"yyyy-mm-dd\"),\n\t\t\t  'e': dateFormat(e, \"yyyy-mm-dd\")\n\t  }\n\t  get(dispatch)\n    }\n)\n\nconst pie_refresh = () => (\n    (dispatch) => {\n        console.assert(params)\n        get(dispatch)\n    }\n)\n\nconst pie_redraw = () => (\n    (dispatch) => {\n    \tdispatch(pieRedrawAction())\n    }\n)\nexport {\n\tpie_load,\n\tpie_refresh,\n\tpie_redraw\n}\n","import { axios_get_params, axios_post } from './axios';\nimport { balances_refresh } from '../actions/minibars'\nimport { chart_refresh } from '../actions/chart'\nimport { pie_refresh } from '../actions/pie'\n\nvar dateFormat = require('dateformat');\n\nvar params = null; //cache for refresh\n\n\nconst PAYMENTS_REQUEST = 'PAYMENTS_REQUEST'\nconst paymentsRequestAction = () => ({\n    type: PAYMENTS_REQUEST\n})\n\nconst PAYMENTS_RESPONSE = 'PAYMENTS_RESPONSE'\nconst paymentsResponseAction = (payments, balances) => ({\n    type: PAYMENTS_RESPONSE,\n    payload: {\n    \t\"params\" : params,\n    \t\"queryType\" : params.e,\n        \"payments\": payments,\n        \"balances\": balances\n    }\n})\n\n\nconst PAYMENTS_UPDATE_REQUEST = 'PAYMENTS_UPDATE_REQUEST'\nconst paymentsUpdateRequestAction = (updates) => ({\n    type: PAYMENTS_UPDATE_REQUEST,\n    payload: {\n    \t\"updates\": updates\n    }\n})\n\nconst PAYMENTS_UPDATE_RESPONSE = 'PAYMENTS_UPDATE_RESPONSE'\nconst paymentsUpdateResponseAction = () => ({\n    \ttype: PAYMENTS_UPDATE_RESPONSE\n})\n\nconst update = (updates) => (\n    (dispatch) => {\n        dispatch(paymentsUpdateRequestAction(updates))\n        axios_post('payments/update', \n        \t\tupdates,\n        \t\tresponse => {\n        \t\t\tdispatch(paymentsUpdateResponseAction())\n        \t\t\t//thn kaikki refrhesit, jotka update aiheuttaa\n                    //refresh pie and minibars\n        \t\t\tdispatch(payments_refresh())\n        \t\t\tdispatch(pie_refresh())\n        \t\t\tdispatch(balances_refresh())\n        \t\t\tdispatch(chart_refresh())\n        \t\t},\n        \t\tdispatch\n        )\n    }\n )\n\nfunction get(dispatch) {\n    dispatch(paymentsRequestAction())\n    axios_get_params('payments?ts='+Date.now(), \n    \t\t{\n        \t\t\"params\": params\n    \t\t},\n    \t\t(response) => {\n    \t\t\tdispatch(paymentsResponseAction(response.data[0], response.data[1]))\n    \t\t},\n    \t\tdispatch\n    )\n}\n\nconst day_load = (d) => (\n    (dispatch) => {\n        params = {\n            \"e\": \"d\",\n            \"d\": dateFormat(d, \"yyyy-mm-dd\")\n        }\n        get(dispatch)\n    }\n)\n\nconst account_load = (a, d1, d2) => (\n    (dispatch) => {\n        params = {\n            \"e\": \"a\",\n            \"a\": a,\n            \"d1\": dateFormat(d1, \"yyyy-mm-dd\"),\n            \"d2\": dateFormat(d2, \"yyyy-mm-dd\")\n        }\n        get(dispatch)\n    }\n)\n\nconst category_load = (c, d1, d2) => (\n    (dispatch) => {\n        params = {\n            \"e\": \"c\",\n            \"c\": c,\n            \"d1\": dateFormat(d1, \"yyyy-mm-dd\"),\n            \"d2\": dateFormat(d2, \"yyyy-mm-dd\")\n        }\n        get(dispatch)\n    }\n)\n\nconst group_load = (g) => (\n    (dispatch) => {\n        params = {\n            \"e\": \"g\",\n            \"g\": g\n        }\n        get(dispatch)\n    }\n)\n\nconst list_load = (ids) => (\n    (dispatch) => {\n        params = {\n            \"e\": \"l\",\n            \"ids\": ids\n        }\n        get(dispatch)\n    }\n)\n\nconst payments_refresh = () => (\n    (dispatch) => {\n        console.assert(params)\n        get(dispatch)\n    }\n)\n\nexport {\n    day_load,\n    account_load,\n    category_load,\n    group_load,\n    list_load,\n    payments_refresh,\n    update\n}","import {axios_get_params} from './axios';\n\nconst LOCK_PAYMENT_REQUEST = 'LOCK_PAYMENT_REQUEST'\nconst lockPaymentRequestAction = (lock_payment_request, locked) => {\n    return {\n        type: LOCK_PAYMENT_REQUEST,\n        payload: {\n            lock_payment_request: lock_payment_request,\n            locked: locked\n        }\n    }\n}\n\nconst LOCK_PAYMENT_RESPONSE = 'LOCK_PAYMENT_RESPONSE'\nconst lockPaymentResponseAction = (payment, locked) => {\n    return {\n        type: LOCK_PAYMENT_RESPONSE,\n        payload: {\n            payment: payment\n        }\n    }\n}\n\nconst lock_payment = (payment, locked) => (\n    (dispatch) => {\n        dispatch(lockPaymentRequestAction(payment, locked))\n        axios_get_params('lock?ts='+Date.now(), \n        \t\t{\n                \tparams: {\n                \t\t\"id\": payment,\n                \t\t\"l\": locked\n                \t}\n        \t\t},\n        \t\tresponse => {\n        \t\t\tdispatch(lockPaymentResponseAction(payment, locked))\n                //DO NOT dispatch(payments_refresh()) : it will refresh possibly unsubmitted payments, \n                \n        \t\t},\n        \t\tdispatch\n        )\n    }\n )\n    \nconst PAYMENT_SELECTION = 'PAYMENT_SELECTION'\nconst paymentSelectionAction = (payments) => {\n    return {\n        type: PAYMENT_SELECTION,\n        payload: {\n            \"payments\": payments\n        }\n    }\n}\n\nconst payment_selection = (payments) => (\n    (dispatch) => {\n        dispatch(paymentSelectionAction(payments))\n    }\n)\n\n export {\n    lock_payment,\n    payment_selection\n}","import Toggle from 'react-toggle'\nimport React from 'react';\nimport { lock_payment } from '../../actions/payment'\nimport { connect } from 'react-redux'\n\nimport './toggle.css'\n\nvar FontAwesome = require('react-fontawesome')\n\n\n\nclass Lock extends React.Component {\n\trender() {\n\t\treturn <FontAwesome name='lock' style={{ 'color':'white' }}/>\n\t}\n}\n\nclass Unlock extends React.Component {\n\trender() {\n\t\treturn <FontAwesome name='unlock-alt' style={{ 'color':'white' }}/>\n\t}\n}\n\nclass LockField extends React.Component {\n\t  constructor(props) {\n\t\t    super(props);\n\t\t    this.toggleLock = this.toggleLock.bind(this);\n\t  }\n\t  \n\t  toggleLock(e) {\n\t\t  \tconst {field, index} = this.props\n\t\t\tvar locked = !e.target.checked;\n\t\t\tthis.props.onValueChanged(locked, field, index )\n\t\t\tthis.props.lockPayment(this.props.id, locked)\n\t  }\n\t  \n\t  componentWillReceiveProps(nextProps){\n\t\t  this.setState({\n\t        checked : nextProps.checked,\n\t\t  })\n\t  }\n\t  render() {\n\t\tconst {readOnly, checked} = this.props\n\n\t    return (\n\t    <div style={{paddingTop: 8}}>\n\t\t\t<Toggle\n\t\t\t\tdisabled = {readOnly}\n\t\t\t    checked = {!checked}\n\t    \t\tonChange = {this.toggleLock}\n\t    \t\ticons={{\n\t    \t\t      checked: <Unlock />,\n\t    \t\t      unchecked: <Lock />,\n\t    \t\t}}\t\n\t\t\t/>\n\t    </div>)\n\t  }\n\t}\n\nLockField.defaultProps = {\n\t\tid: null,\n\t\tonValueChanged: null,\n\t\tchecked : false,\n\t\treadOnly : false,\n\t\tfield: null,\n\t\tindex: null,\n}\n\n\nfunction mapDispatchToProps(dispatch) {\n    return({\n        lockPayment: (id, locked) => {\n        \tdispatch(lock_payment(id, locked)) \n        }\n    })\n}\n\nexport default connect(null, mapDispatchToProps)(LockField)\n","import React from 'react';\nimport Dropdown from '../dropdown/dropdown'\n\nclass DropdownField extends React.Component {\n\trender() {\n\t\tconst {readOnly, field, index, onValueChanged, placeholder, touched, constants_id} = this.props\n\t\n\t\treturn(\n\t    <div>\n\t    \t<Dropdown \n\t    \t    readOnly={readOnly}\n\t    \t\tonValueChange={ (e) => {\n\t    \t\t\tonValueChanged(e, field, index ) \n\t    \t\t}} \n\t    \t\tselectedValue={this.props.value}\n\t    \t\tplaceholder={placeholder}\n\t    \t\ttouched={touched}\n\t    \t\tconstants_id={constants_id}\n\t    \t/>\n\t    </div>)\n\t}\t\n}\n\nDropdownField.defaultProps = {\n\t\tonValueChanged: null,\n\t\tvalue : null,\n\t\treadOnly : false,\n\t\tplaceholder : '',\n\t\tfield: null,\n\t\tindex: null,\n\t\ttouched: false,\n\t\tconstants_id: null\n}\n\nexport default DropdownField\n\n","import React from 'react';\nimport DatePicker from '../datepicker/datepicker'\n\nvar dateFormat = require('dateformat');\n\nclass DateField extends React.Component {\n\trender() {\n\t\tconst {id, onValueChanged, value, readOnly, field, index, touched} = this.props\n\t\treturn(\n\t\t<div>\n\t    \t<DatePicker \n\t    \t    disabled={readOnly}\n\t    \t\tvalue={value}\n\t    \t\tid={id}\n\t    \t\tpickerName={'picker_d_' + id + index} \n\t    \t \tpickerCallback={(d) => onValueChanged(dateFormat(d, \"dd.mm.yyyy\"), field, index)}\n\t    \t \tpickerType=\"single\"\n\t    \t \ttouched = {touched}\n\t    \t \tstyle={{\n\t    \t\t  'backgroundColor' : (touched ? 'lightyellow' : '')\n\t    \t \t}}\n\t    \t />\n\t    </div>)\n\t}\t\n}\n\nDateField.defaultProps = {\n\t\tid: null,\n\t\tonValueChanged: null,\n\t\tvalue : true,\n\t\treadOnly : false,\n\t\tfield: null,\n\t\tindex: null,\n\t\ttouched: false,\n}\n\nexport default DateField","import {toDateFi} from '../../util/fiDate'\nimport {addDays, addMonths} from '../../util/addDays'\nimport {isEven} from '../../util/math'\n\nvar dateFormat = require('dateformat')\n\nvar f = {\n\t\"DAILY\" : (payment, iteration) => {\n\t\tvar date = toDateFi(payment.d)\n\t\tvar date1 = addDays(date, 1)\n\t\tpayment.d = dateFormat(date1, \"dd.mm.yyyy\")\n\t},\n\t\"WEEKLY\" : (payment, iteration) => {\n\t\tvar date = toDateFi(payment.d)\n\t\tvar date1 = addDays(date, 7)\n\t\tpayment.d = dateFormat(date1, \"dd.mm.yyyy\")\n\t},\n\t\"FORTNIGHTLY\" : (payment, iteration) => {\n\t\tvar date = toDateFi(payment.d)\n\t\tvar date1 = addDays(date, 14)\n\t\tpayment.d = dateFormat(date1, \"dd.mm.yyyy\")\n\t},\n\t\"TWICE_A_MONTH\" : (payment, iteration) => {\n\t\tvar date = toDateFi(payment.d)\n\t\tvar date1 = null\n\t\tif(isEven(iteration)) {\n\t\t\tdate1 = addDays(date, 14)\n\t\t} else {\n\t\t\tdate1 = addDays(date, -14)\n\t\t\tdate1 = addMonths(date1, 1)\n\t\t}\n\t\tpayment.d = dateFormat(date1, \"dd.mm.yyyy\")\n\t},\n\t\"MONTHLY\" : (payment, iteration) => {\n\t\tvar date = toDateFi(payment.d)\n\t\tvar date1 = addMonths(date, 1)\n\t\tpayment.d = dateFormat(date1, \"dd.mm.yyyy\")\n\t},\n\t\"EVERY_OTHER_MONTH\" : (payment, iteration) => {\n\t\tvar date = toDateFi(payment.d)\n\t\tvar date1 = addMonths(date, 2)\n\t\tpayment.d = dateFormat(date1, \"dd.mm.yyyy\")\n\t},\n\t\"EVERY_3_MONTHS\" : (payment, iteration) => {\n\t\tvar date = toDateFi(payment.d)\n\t\tvar date1 = addMonths(date, 3)\n\t\tpayment.d = dateFormat(date1, \"dd.mm.yyyy\")\n\t},\n\t\"EVERY_4_MONTHS\" : (payment, iteration) => {\n\t\tvar date = toDateFi(payment.d)\n\t\tvar date1 = addMonths(date, 4)\n\t\tpayment.d = dateFormat(date1, \"dd.mm.yyyy\")\n\t},\n\t\"EVERY_6_MONTHS\" : (payment, iteration) => {\n\t\tvar date = toDateFi(payment.d)\n\t\tvar date1 = addMonths(date, 6)\n\t\tpayment.d = dateFormat(date1, \"dd.mm.yyyy\")\n\t},\n\t\"YEARLY\" : (payment, iteration) => {\n\t\tvar date = toDateFi(payment.d)\n\t\tvar date1 = addMonths(date, 12)\n\t\tpayment.d = dateFormat(date1, \"dd.mm.yyyy\")\n\t}\n}\n\nfunction recurrent(payment, iteration, span) {\n\tf[span](payment, iteration)\n}\n\nexport default recurrent","function isEven(n) {\n  n = Number(n);\n  return n === 0 || !!(n && !(n%2));\n}\n\nexport {isEven}","import {toDBFormatFi} from '../../util/fiDate'\nimport currencyFormat  from '../../util/currency'\n\nvar dateFormat = require('dateformat')\n\nconst fields = ['d','b','i','s','g','c','a','descr']\n\nconst defaultValues = {\n\tid: null,\n\tl: false ,\n\td: dateFormat(new Date(), \"dd.mm.yyyy\"),\n\ti: \"+0.00\",\n\tc: null,\n\ta: null,\n\ts: true,\n\tg: \"\",\n\tdescr: \"\",\n\tb: null\n}\n\nconst initialMaskValues = {\n\tid: null,\n\tl: false,\n\td: dateFormat(new Date(), 'dd.mm.yyyy'),\n\ti: '+0.00',\n\tc: null,\n\ta: null,\n\ts: true,\n\tg: '',\n\tdescr: '',\n\tb: null\n}\n\nconst \tvalidators = {\n\t'check': (value) => {\n\t\t\treturn null\n\t\t  },\n\t'l': (value) => {\n\t\t\treturn null\n\t\t  },\n\t'd': (value) => {\n\t\t\treturn (value != null && value !== '') ? null : 'required'\n\t\t  },\n\t'i':  (value) => {\n\t\t\treturn (value !== '') ? null : 'required'\n\t\t  },\n\t's': (value) => {\n\t\t\treturn null\n\t\t  },\n\t'c': (value) => {\n\t\t\treturn (value != null && value !== '') ? null : 'required'\n\t\t  },\n\t'a': (value) => {\n\t\t\treturn (value !== null && value !== '') ? null : 'required'\n\t\t  },\n\t'g': (value) => {\n\t\t\treturn null\n\t\t  },\n\t'descr': (value) => {\n\t\t\treturn null\n\t\t  },\n\t'b': (value) => {\n\t\t\treturn null\n\t\t  }\n}\n\nfunction preInitFormat(payments, checkedList) {\n\tvar copy = deepCopy(payments, checkedList)\n\tcopy.forEach((p) => {\n\t\t// 2006-12-31 -> 31.12.2005\n\t\tp.d = dateFormat(p.d, \"dd.mm.yyyy\")\n\t\t// 2 -> +2.00\n\t\tp.i =  (p.i >=0 ? '+' : '') + currencyFormat(p.i)\n\t})\n\treturn copy\n}\n\nfunction preSubmitFormat(payments) {\n\tpayments.forEach( (p) => {\n\t\tif(p.i) {\n\t\t\t// \"+2.00\" -> 2\n\t\t\tp.i =  parseFloat(p.i)\n\t\t\t//p.i_initial = parseFloat(p.i_initial)\n\t\t }\n\t\t if(p.d) {\n\t\t\t// \"1.12.2001\" -> \"2001-12-01\"\n\t\t\tp.d = toDBFormatFi(p.d)\n\t\t\t//p.d_initial = toDBFormatFi(p.d_initial)\n\t\t }\n\t})\n\treturn payments\n}\n\n\nfunction copyObject(b) {\n\treturn {\n\t\tcheck: b,\n\t\tid: b,\n\t\tl: b,\n\t\td: b,\n\t\ti: b,\n\t\tc: b,\n\t\ta: b,\n\t\ts: b,\n\t\tg: b,\n\t\tdescr: b,\n\t\t\"b\": b\n\t}\n}\n\nfunction copyPayment(payment, checkedList, index = null) {\n\treturn {\n\t\tcheck: checkedList.indexOf(payment.id) > -1,\n\t\tindex: index,\n\t\tid: payment.id,\n\t\tl: payment.l,\n\t\td: payment.d,\n\t\ti: payment.i,\n\t\tc: payment.c,\n\t\ta: payment.a,\n\t\ts: payment.s,\n\t\tg: payment.g,\n\t\tdescr: payment.descr,\n\t\tb: payment.b\n\t}\n}\n\nfunction  deepCopy(payments, checkedList) {\n\tvar copy = []\n\tpayments.forEach(\n\t\t(p) => {copy.push(copyPayment(p, checkedList))}\n\t)\n\treturn copy\n}\n\nconst recurSpans = [\n\t{label: \"daily\", value: \"DAILY\"},\n\t{label: \"weekly\", value: \"WEEKLY\"},\n\t{label: \"fortnightly\", value: \"FORTNIGHTLY\"},\n\t{label: \"twice a month\", value: \"TWICE_A_MONTH\"},\n\t{label: \"monthly\", value: \"MONTHLY\"},\n\t{label: \"every other month\", value: \"EVERY_OTHER_MONTH\"},\n\t{label: \"every 3 months\", value: \"EVERY_3_MONTHS\"},\n\t{label: \"every 4 months\", value: \"EVERY_4_MONTHS\"},\n\t{label: \"every 6 months\", value: \"EVERY_6_MONTHS\"},\n\t{label: \"yearly\", value: \"YEARLY\"},\n\t];\n\nfunction initState(payments, checkedList, recurring = { recur: false, times: 1, span: recurSpans[3]} ) {\n\tvar copy = {\n\t\tvalues : [],\n\t\tinitial : [],\n\t\terrors : [],\n\t\ttouched : [],\n\t\tdeleted : [],\n\t\tmasked : copyObject(false),\n\t\tmaskValues : initialMaskValues,\n\t\tmaskErrors : copyObject(null),\n\t\tsort: null,\n\t\tasc: true,\n\t\tallChecked: false,\n\t\trecurring : recurring,\n\t}\n\tcopy.recurring.recur = false\n\t\n\tpayments.forEach((p, index) => {\n\t\tcopy.values.push(copyPayment(p, checkedList, index))\n\t\tcopy.initial.push(copyPayment(p, checkedList))\n\t\tcopy.errors.push(copyObject(null))\n\t\tcopy.touched.push(copyObject(false))\n\t\tcopy.deleted.push(false)\n\t})\n\treturn copy\n}\n\nfunction oneIsTrue(row) {\n\tvar ret =\n\t\trow.d ||\t\t\t\n\t\trow.i ||\n\t\trow.c ||\n\t\trow.a ||\n\t\trow.s ||\n\t\trow.g ||\n\t\trow.descr\n\t\t\n\treturn ret\n}\n\nfunction copyArray(array) {\n\treturn array.splice(0)\n}\n\nexport {\n\tfields,\n\tinitState,\n\tdefaultValues,\n\tinitialMaskValues, \n\tvalidators,\n\tpreInitFormat,\n\tpreSubmitFormat,\n\toneIsTrue,\n\tcopyArray,\n\trecurSpans,\n\tcopyPayment\n}","import React from 'react'\nimport { connect } from 'react-redux'\n\nimport { update } from '../../actions/payments'\nimport { payment_selection } from '../../actions/payment'\nimport { CATEGORY } from '../../actions/categories'\nimport { ACCOUNT } from '../../actions/accounts'\n\n\nimport { Table, Panel, Button } from 'react-bootstrap';\n\nimport LockField from '../editorFields/LockField'\nimport CurrencyField from '../editorFields/CurrencyField'\nimport CheckboxField from '../editorFields/CheckboxField'\nimport DropdownField from '../editorFields/DropdownField'\nimport TextField from '../editorFields/TextField'\nimport DateField from '../editorFields/DateField'\n//import Recur from '../recur/recur' \n\nimport NumericInput from 'react-numeric-input';\nimport alertOptions from '../../util/alertoptions'\n\nimport './PaymentsEditor.css'\nimport '../../customMultiSelect.css'\n\nimport { group_load } from '../../actions/payments'\n\nimport {SimpleSelect} from 'react-selectize'\n\nimport {toDateFi} from '../../util/fiDate'\n\nimport recurrent from './recurrent'\n\nimport AlertContainer from 'react-alert'\n\n//import { withMedia } from 'react-media-query-hoc';\n\n\nimport {\n\t\tfields,\n\t\tinitState,\n\t\tdefaultValues,\n\t\tvalidators,\n\t\tpreInitFormat,\n\t\tpreSubmitFormat,\n\t\toneIsTrue,\n\t\tcopyArray,\n\t\trecurSpans,\n\t\tcopyPayment\n} from './constants'\n\nvar FontAwesome = require('react-fontawesome')\n\nvar tempId = -1\nvar checkedSet = []\n\nclass PaymentsEditor extends React.Component {\n\n\tconstructor(props) {\n        super(props)\n        this.showAlert = this.showAlert.bind(this)\n        this.showOk = this.showOk.bind(this)\n        //postfix -abbr. F = Field, R = Row, T = Table\n        \n        //Field related:\n        \n        //callbacks from uicomponents for updating model (state)\n        this.changePropertyF = this.changePropertyF.bind(this)\n        this.changePropertyDeletedF = this.changePropertyDeletedF.bind(this)\n        this.changePropertyLF = this.changePropertyLF.bind(this)\n        \n        //set state values:\n        this.setValueF = this.setValueF.bind(this)\n        this.setValueCheckF = this.setValueCheckF.bind(this)\n        this.setValueCheckAllF = this.setValueCheckAllF.bind(this)\n        this.setValueMaskF = this.setValueMaskF.bind(this)\n        this.setValueMaskCheckF = this.setValueMaskCheckF.bind(this)\n        \n        //validate:\n        this.validateF = this.validateF.bind(this)\n        this.validateMaskF = this.validateMaskF.bind(this) \n        \n        //some field related util;\n        this.maskedF = this.maskedF.bind(this) //is field masked \n        this.touchedF = this.touchedF.bind(this) //dirty?\n        this.isDifferentFromInitialF = this.isDifferentFromInitialF.bind(this)        \n        this.drawBalanceF = this.drawBalanceF.bind(this)\n        \n        //choose right value for render\n        this.chooseValueF = this.chooseValueF.bind(this)\n\n        //render\n        this.renderContentF = this.renderContentF.bind(this)\n        this.renderDeletedContentF = this.renderDeletedContentF.bind(this)\n        \n        //sort\n        this.setSortF = this.setSortF.bind(this)\n        this.sortersF = this.sortersF.bind(this)\n        \n        //Row related:\n        \n        //add/remove\n        this.addR = this.addR.bind(this)\n        this.getDefaultR = this.getDefaultR.bind(this) //choose values for new row\n        this.removeR = this.removeR.bind(this)\n        this.setRecurring = this.setRecurring.bind(this)\n        this.setRecurringTimes = this.setRecurringTimes.bind(this)\n        this.setRecurringSpan = this.setRecurringSpan.bind(this)\n        \n        //validate\n        this.validateR = this.validateR.bind(this)\n        this.readOnlyR = this.readOnlyR.bind(this)\n        \n        //utils\n        this.isPersistedR = this.isPersistedR.bind(this)\n        this.disabledCheckR = this.disabledCheckR.bind(this) //row selection disabled\n\n        //render\n        this.renderPaymentR = this.renderPaymentR.bind(this)\n\n        //Table related:\n        this.resetT =  this.resetT.bind(this)\n        //util\n        this.isPristineT = this.isPristineT.bind(this)\n        this.hasErrorsT = this.hasErrorsT.bind(this)\n        \n        //format input/output\n        this.preInitT = this.preInitT.bind(this)\n        this.preSubmitT = this.preSubmitT.bind(this)\n        \n        //init constants\n        this.init =  this.init.bind(this)\n        //render\n        this.renderPaymentsHeaderT = this.renderPaymentsHeaderT.bind(this)\n        this.renderPaymentsT = this.renderPaymentsT.bind(this)\n\n        //css and stuff\n        this.tdClassName = this.tdClassName.bind(this)\n        this.td = this.td.bind(this)\n        this.thClassName = this.thClassName.bind(this)\n        this.th = this.th.bind(this)\n        \n        this.groupLoad = this.groupLoad.bind(this)\n        \n        this.init()\n        this.state = {...initState(this.preInitT(props.initPayments), checkedSet)}\n    }\n\t\n\tshowAlert() {\n\t\tthis.msg.show('SAVE YOUR CHANGES, OR RESET FIRST!', {\n\t      time: 5000,\n\t      type: 'success',\n\t      icon: <img src=\"stop.png\" alt=\"SAVE YOUR CHANGES, OR RESET FIRST!\"/>\n\t    })\n\t }\n\n\tshowOk() {\n\t\tthis.msg.show('SAVED SUCCESSFULLY', {\n\t      time: 2000,\n\t      type: 'success',\n\t      icon: <img src=\"yes.png\" alt=\"save ok\" />\n\t    })\n\t }\n\t\n    changePropertyF(value, field, index) {\n    \tif(index === -1){ //mask checkbox\n    \t\tthis.setValueMaskCheckF(field, value)\n    \t\treturn\n    \t}\n    \t\n    \tif(index === -2){ //mask value\n    \t\tthis.validateMaskF(field, value)\n    \t\tthis.setValueMaskF(field, value)\n    \t\treturn\n    \t}\n    \t\n    \t//touch\n\t\tif (this.isPersistedR(index)) { //new rows do not get 'touched' (unless masked)\n\t\t\tvar copy = copyArray(this.state.touched)\n\t\t\tcopy[index][field] = this.isDifferentFromInitialF(value, field, index)\n\t\t\tthis.setState({touched : copy})\n\t\t}\n\t\t\n\t\t//validate\n\t\tif(!this.state.masked[field]) { //do not validate masked fields\n\t\t\tthis.validateF(field, value, index)\n\t\t}\n    \tthis.setValueF(value, field, index)\n    }\n    \n    changePropertyDeletedF(value, field, index) {\n    \tif(this.isPersistedR(index)) { //if it has id, let backend remove: mark as deleted\n    \t\tthis.deleteCount += (value ? 1 : -1)\n    \t\tvar copy = copyArray(this.state.deleted)\n    \t\tcopy[index] = value\n    \t\tthis.setValueCheckF( false, 'check', index)\n    \t\tthis.setState({deleted : copy})\n    \t} else {\n    \t\tthis.removeR(index) //if newly created, just remove it\n    \t}\n    }\n    \n\tchangePropertyLF(value, field, index) { //updated on-the-fly (ie. lock-field), so don't set touched, set initial\n\t\tvar valuesCopy = copyArray(this.state.values)\n\t\tvaluesCopy[index].l = value\n\t\tvar initialCopy = copyArray(this.state.initial)\n\t\tinitialCopy[index].l = value\n\t\tthis.setState({\n\t\t\tvalues : valuesCopy,\n\t\t\tinitial : initialCopy\n\t\t})\n\t}\n\n\tsetValueF(value, field, index) {\n\t\tvar copy = copyArray(this.state.values)\n\t\tcopy[index][field] = value\n\t\tthis.setState({values : copy})\n\t}\n\n\tsetValueCheckF(value, field, index) {\n\t\tthis.updateCheckedSet(value, index)\n\t\tthis.setValueF(value, 'check', index)\n\t\tthis.props.paymentSelection(checkedSet.slice(0))  //broadcast\n\t}\n\t\n\tsetValueCheckAllF(value, field, index) {\n\t\tvar copy = this.state.values.slice(0)\n\t\tcopy.map( (v) => { \n\t\t\tthis.updateCheckedSet(value, v.index, copy)\n\t\t\treturn null\n\t\t})\n\t\tthis.setState({\n\t\t\tvalues: copy,\n\t\t\tallChecked : value\n\t\t})\n\t\tthis.props.paymentSelection(checkedSet.slice(0))\n\t}\n\t\n\tsetValueMaskF(field, value) {\n\t\tvar copy = {...this.state.maskValues}\n\t\tcopy[field] = value\n\t\tthis.setState({maskValues : copy})\n\t}\n\t\n\tsetValueMaskCheckF(field, set) {\n\t    var copy = {...this.state.masked}\n\t\tcopy[field] = set\n\t\tthis.setState({masked : copy})\n\t\t\n\t\t//clear/set errors of existing maskValues\n\t\tcopy = {...this.state.maskErrors}\n\t\tcopy[field] = !set ? null : validators[field](this.state.maskValues[field])\n\t\tthis.setState({maskErrors : copy})\n\n\t\t//clear/set errors of existing values masked\n\t\tvar copy2 = copyArray(this.state.errors)\n\t\tthis.state.values.forEach( (v, index) => {\n\t\t\tcopy2[index][field] = set ? null : validators[field](v[field])\n\t\t})\n\t\tthis.setState({errors : copy2})\n\t}\n\t\n\tvalidateF(field, value, index) {\n\t\tvar original = this.state.errors[index][field]\n\t\tvar result = validators[field](value) \n\t\tif( result !== original ) {\n\t\t\tvar copy = copyArray(this.state.errors)\n\t\t\tcopy[index][field] = validators[field](value) \n\t\t\tthis.setState({errors : copy})\n\t\t}\n\t}\n\t\n\tvalidateMaskF(field, value) {\n\t\tvar copy = {...this.state.maskErrors}\n\t\tcopy[field] = !this.state.masked[field] ? null : validators[field](value)\n\t\tthis.setState({maskErrors : copy})\n\t}\n\t\n\tmaskedF(index, field) {\n\t\tif(index<0 || this.state.deleted[index]) return false\n\t\treturn this.state.masked[field] && !this.state.values[index].l\n\t}\n\t\t\n\ttouchedF(index, field) {\n\t\tif(index<0) return false //mask-controls are never touched (-1 = checkbox -2 = mask value)\n\t\tif(this.state.deleted[index]) return false \t//to be deleted: not touched\n\t\tif(this.maskedF(index, field) && \n\t\t   this.isPersistedR(index) && \n\t\t   !this.isDifferentFromInitialF(this.state.maskValues[field], field, index)) return false //if masked and different: it is touched\n\t\tif(this.maskedF(index, field)) return true\n\t\tif(!this.isPersistedR(index)) return false \t//this is a new row: not touched and not masked\n\t\treturn this.state.touched[index][field]\n\t}\n\t\n\tisDifferentFromInitialF(value, field, index) {\n\t\treturn (value !== this.state.initial[index][field])\n\t}\n\n\tchooseValueF(index, field) {\n\t\tif(this.state.deleted[index]) return this.state.initial[index][field] //show initial values if to be deleted\n\t\treturn this.maskedF(index, field) ? this.state.maskValues[field] : this.state.values[index][field] \n\t}\n\t\n\trenderContentF(field, index) {\n    \tif(index === -1) {//mask -checkbox\n    \t\treturn(\n\t    \t<div>\n\t\t  \t\t<CheckboxField \n\t\t\t  \t\tid = {field + '_mask_check'}\n\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t  \t\tchecked = {this.state.masked[field]}\n\t\t\t  \t\treadOnly = {false}\n\t\t  \t\t\tfield = {field}\n\t\t  \t\t\tindex = {-1}\n\t\t\t  \t/>\n\t\t    </div>)\n    \t}\n\n    \tif(index === -2 && !this.state.masked[field]) return //draw maskValue only if masked\n    \t\n    \tvar  value = null\n    \tif(index === -2) { //mask value\n    \t\tvalue = this.state.maskValues[field]\n    \t} else {\n    \t   value = this.chooseValueF(index, field)\n    \t}\n    \t\n    \tswitch(field) {\n    \tcase 'check' :\n    \t\t\t\treturn(\n\t\t\t\t  \t<div>\n\t\t\t\t  \t\t<CheckboxField \n\t\t\t\t\t  \t\tid = {'check_' + index}\n\t\t\t\t\t  \t\tonValueChanged = {this.setValueCheckF}\n\t\t\t\t\t  \t\tchecked = {value}\n\t\t\t\t\t  \t\treadOnly = {this.disabledCheckR(index)}\n\t\t\t\t  \t\t\tfield = 'check'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {false}\n\t\t\t\t\t  \t/>\n\t\t\t\t    </div>)\n    \tcase 'l' :\n\t\t\t\t\treturn(\n\t\t\t\t  \t<div>\n\t\t\t\t  \t\t<LockField \n\t\t\t\t\t  \t\tid = {this.state.values[index].id}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyLF}\n\t\t\t\t\t  \t\tchecked = {value}\n\t\t\t\t\t  \t\treadOnly = {\n\t\t\t\t  \t\t\t\t!this.isPersistedR(index) \n\t\t\t\t  \t\t\t\t|| this.state.deleted[index] \n\t\t\t\t\t  \t\t\t|| oneIsTrue(this.state.masked)\n\t\t\t\t\t  \t\t\t|| oneIsTrue(this.state.touched[index])\n\t\t\t\t\t  \t\t}\n\t\t\t\t  \t\t\tfield = 'l'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t\t  \t/>\n\t\t\t\t    </div>)\t\t\t\t\t    \n    \tcase 'd' :\n\t\t\t\t\treturn(\t\t\n\t\t\t\t\t<div>\n\t\t\t\t    \t<DateField \n\t\t\t\t    \t\tid = {'d_'+index}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\tvalue = {value}\n\t\t\t\t\t  \t\treadOnly = {this.readOnlyR(index, 'd')}\n\t\t\t\t  \t\t\tfield = 'd'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, 'd')}\n\t\t\t\t    \t />\n\t\t\t\t    </div>)\n    \tcase 'b' :  return(\n    \t\t\t\t<div>\n     \t\t\t\t\t<CurrencyField \n\t\t\t\t\t\t  \t\tvalue = {'' + this.chooseValueF(index, 'b')}\n\t\t\t\t\t  \t\t\tfield = 'b'\n\t\t\t\t\t\t  \t\treadOnly = {true}\n\t\t\t\t\t  \t\t\ttouched = {false}\n\t\t\t\t\t\t />\t\n     \t\t\t\t</div>)\n    \tcase 'i' :\n\t\t\t\t\treturn(\n\t\t\t\t  \t<div>\n\t\t\t\t  \t\t<CurrencyField \n\t\t\t\t\t  \t\tid = {'i_'+index}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\tplaceholder = 'amount'\n\t\t\t\t\t  \t\tvalue = {value}\n\t\t\t\t\t  \t\treadOnly = {this.readOnlyR(index, 'i')}\n\t\t\t\t  \t\t\tfield = 'i'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, 'i')}\n\t\t\t\t\t  \t/>\n\t\t\t\t    </div>)\n    \tcase 's' :\n\t\t\t\t\treturn(\n\t\t\t\t  \t<div>\n\t\t\t\t  \t\t<CheckboxField \n\t\t\t\t\t  \t\tid = {'s_' + index}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\tchecked = {value}\n\t\t\t\t\t  \t\treadOnly = {this.readOnlyR(index, 's')}\n\t\t\t\t  \t\t\tfield = 's'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, 's')}\n\t\t\t\t\t  \t/>\n\t\t\t\t    </div>)\t\t\t\t\t    \n    \tcase 'g' :\n\t\t\t\t\treturn(\n\t\t\t\t  \t<div>\n\t\t\t\t  \t\t<TextField \n\t\t\t\t\t  \t\tid = {'g_'+index}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\tvalue = {value}\n\t\t\t\t\t  \t\treadOnly = {this.readOnlyR(index, 'g')}\n\t\t\t\t  \t\t\tfield = 'g'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, 'g')}\n\t\t\t\t  \t\t\tplaceholder = 'gId'\n\t\t\t\t  \t\t\tlinkCb = {this.groupLoad}\n\t\t\t\t\t  \t/>\n\t\t\t\t    </div>)\n     \tcase 'c' :\n\t\t\t\t\treturn(\n\t\t\t\t  \t<div>\n\t\t\t\t  \t\t<DropdownField \n\t\t\t\t  \t\t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t  \t\t\tvalue = {value}\n\t\t\t\t  \t\t\treadOnly = {this.readOnlyR(index, field)}\n\t\t\t\t  \t\t\tplaceholder = 'select'\n\t\t\t\t  \t\t\tfield = 'c'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, field)}\n\t\t\t\t  \t\t\tconstants_id = {CATEGORY}\n\t\t\t\t\t  \t/>\n\t\t\t\t    </div>)\n     \tcase 'a' :\n \t\t\t\t\treturn(\n\t\t\t\t\t  \t<div style={{\"display\": \"inline-flex\", \"whiteSpace\": \"nowrap\"}}>\n\t\t\t\t\t  \t\t<DropdownField \n\t\t\t\t\t  \t\t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\t\tvalue = {value}\n\t\t\t\t\t  \t\t\treadOnly = {this.readOnlyR(index, field)}\n\t\t\t\t\t  \t\t\tplaceholder = 'select'\n\t\t\t\t\t  \t\t\tfield = 'a'\n\t\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t\t  \t\t\ttouched = {this.touchedF(index, field)}\n\t\t\t\t\t  \t\t\tconstants_id = {ACCOUNT}\n\t\t\t\t\t\t  \t/>\n\t\t\t\t\t    </div>)\n     \tcase 'descr' :\n\t\t\t\t\treturn(\n\t\t\t\t  \t<div>\n\t\t\t\t  \t\t<TextField \n\t\t\t\t\t  \t\tid = {'descr_'+index}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\tvalue = {value}\n\t\t\t\t\t  \t\treadOnly = {this.readOnlyR(index, 'descr')}\n\t\t\t\t  \t\t\tfield = 'descr'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, 'descr')}\n\t\t\t\t  \t\t\tplaceholder = 'description'\n\t\t\t\t\t  \t/>\n\t\t\t\t  \t\t{ /* CHG-\n\t\t\t\t  \t\t<TextareaField \n\t\t\t\t\t  \t\tid = {'descr_'+index}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\tvalue = {value}\n\t\t\t\t\t  \t\treadOnly = {this.readOnlyR(index, 'descr')}\n\t\t\t\t  \t\t\tfield = 'descr'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, 'descr')}\n\t\t\t\t  \t\t\tplaceholder = 'description'\n\t\t\t\t  \t\t\twidth = '180px'\n\t\t\t\t\t  \t/>*/}\n\t\t\t\t    </div>)\t\n\t\t  default: console.log('UNKONWN field: '+field)\n\t\t\t  \t   return null\n    \t}\n    }\n\t\n\trenderDeletedContentF(index) {\n\t\tif(!this.isPersistedR(index)) { \n\t\t\treturn(\n\t\t\t<button \n\t\t  \t\ttype=\"button\" \n\t\t  \t\tclassName=\"form-control\"  \n\t\t  \t\tonClick={() => this.changePropertyDeletedF(true, 'deleted', index)}>\n\t\t  \t\t<FontAwesome name = 'remove' style = {{'color': 'red'}}/>\n\t\t    </button>)\n\t\t}\n\t  \t\t\n\t\treturn(\n\t  \t<div>\n\t  \t\t<CheckboxField \n\t\t  \t\tid = {'deleted_'+index}\n\t\t  \t\tonValueChanged = {this.changePropertyDeletedF}\n\t\t  \t\tchecked = {this.state.deleted[index]}\n\t\t  \t\treadOnly = {this.state.values[index].l}\n\t  \t\t\tfield = 'deleted'\n\t  \t\t\tindex = {index}\n\t  \t\t\ttouched = {false}\n\t\t  \t/>\n\t    </div>)\n\t}\n\t\t\n\tsetSortF(field) {\n\t\t//console.log(field)\n\t\tif(!this.state.sort || this.state.sort !==field) {\n\t\t\tthis.setState({\n\t\t\t\tsort : field,\n\t\t\t\tasc : true\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t\tif(this.state.sort === field && this.state.asc) {\n\t\t\tthis.setState({\n\t\t\t\tasc : false\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t\tthis.setState({\n\t\t\tsort : null\n\t\t})\n\t\treturn\n\t}\n\n\tsortersF() {\n\t\tvar inv = this.state.asc ? -1 : 1\n\t\tswitch(this.state.sort) {\n\t\tcase 'i': \n\t\t//TODO: a:n ja c:n tekstiarvolla sorttaus ei id:ll\n\t\t// eslint-disable-next-line\n\t\tcase 'a':\n\t\tcase 'c':\n\t\t\treturn (a, b) => {\n\t\t\t\treturn inv * \n\t\t\t\t(this.chooseValueF(b.index,this.state.sort) - this.chooseValueF(a.index,this.state.sort))\n\t\t\t}\n\t\tcase 'd': \n\t\t\treturn (a, b) => {\n\t\t\t\treturn inv * \n\t\t\t\t(toDateFi(this.chooseValueF(b.index,'d')).getTime() - toDateFi(this.chooseValueF(a.index,'d')).getTime())\n\t\t\t}\n\t\tcase 'g':\n\t\t\treturn (a, b) => {\n\t\t\t\t var textA = this.chooseValueF(a.index,'g').toUpperCase()\n\t\t\t\t var textB = this.chooseValueF(b.index,'g').toUpperCase()\n\t\t\t\t return inv * \n\t\t\t\t ((textA < textB) ? -1 : (textA > textB) ? 1 : 0)\n\t\t\t}\n\t\tdefault: return (a, b) => {return 0}\n\t\t}\n\t}\n\t\t\n\taddR() {\n\t\tvar defaults = this.getDefaultR()\n    \tvar valuesCopy = copyArray(this.state.values)\n    \tvar errorsCopy = copyArray(this.state.errors)\n    \tvar count = 1\n    \t\n    \tif(this.state.recurring.recur) {\n    \t\tcount = this.state.recurring.times\n    \t}\n\t\t\n\t\tfor(var i=0; i<count; i++) {\n\t\t\tdefaults = copyPayment(defaults, [])\n\t\t\tdefaults.id = tempId--\n\t\t\tdefaults.index = valuesCopy.length\n\t\t\tdefaults.l = false\n\t\t\tdefaults.check = false\n\t\t\t\t\n\t\t\tif(this.state.recurring.recur) {\n\t\t\t\trecurrent(defaults, i, this.state.recurring.span.value)\n\t\t\t}\n\t\t\t\n\t\t\tvaluesCopy.push(defaults)\n\t\t\tthis.sortedValues.push(defaults)\n\t\t\terrorsCopy.push(this.validateR(defaults)) \n\t\t}\n\t\tthis.setState({\n    \t\t    \tvalues : valuesCopy,\n    \t\t    \terrors : errorsCopy,\n    \t})\n    }\n\t\n\tsetRecurring() {\n\t\tthis.setState({\n\t\t\trecurring : { ...this.state.recurring, recur: !this.state.recurring.recur }\n    \t})\n\t}\n\t\n\tsetRecurringTimes(times) {\n\t\tthis.setState({\n\t\t\trecurring : { ...this.state.recurring, times: times }\n    \t})\n\t}\n\t\n\tsetRecurringSpan(span) {\n\t\tthis.setState({\n\t\t\trecurring : { ...this.state.recurring, span: span }\n    \t})\n\t}\n\t\n\tgetDefaultR() {\n\t\tvar last = defaultValues\n\t\tif (this.sortedValues.length){\n\t\t\tlast = this.sortedValues[this.sortedValues.length - 1]\n\t\t}\n\n\t\tvar res = {...last}\n\t\treturn res\n\t}\n    \n    removeR(index) {\n    \tthis.state.values.splice(index, 1)\n        var values_copy = copyArray(this.state.values)\n        this.state.errors.splice(index, 1)\n    \tvar errors_copy = copyArray(this.state.errors)\n\n    \t//reindex:\n    \tfor(var ix=index ; ix<values_copy.length ;ix++) {\n    \t\tvalues_copy[ix].index--\n    \t\terrors_copy[ix].index--\n    \t}\n    \tthis.setState({\n    \t\t    \tvalues : values_copy,\n    \t\t    \terrors : errors_copy,\n    \t})\n    }\n    \n    validateR(v) {\n\t   var res = {}\n\t   fields.forEach( (field) => {\n\t\t   \tres[field] = validators[field](v[field])\n    \t})\n    \treturn res\n    }\n    \n    readOnlyR(index, field) {\n\t\tif(index<0) return false  //mask-controls are never readOnly (-1 =checkbox -2 =mask value)\n\t\treturn this.state.masked[field] ||\t//this col is masked?\n\t\t\t   this.state.deleted[index] || //marked as to be deleted?\t\t\t\n\t\t\t   this.state.values[index].l  //locked?\n\t}\n    \n    isPersistedR(index) {\n\t\treturn this.state.values[index].id >=0\n\t}\n    \n    disabledCheckR(index) {\n\t\treturn !this.isPersistedR(index) ||\n\t\t\t   this.state.deleted[index] \t//marked as to be deleted?\t\t\t\n    }\n\n    renderPaymentR(index) {\n    \treturn(\n    \t<tr key={index}>\n\t \t\t{['check', 'l', ...fields].map( (f) => { \n\t \t\t\treturn this.td(index, f) \n\t \t\t})}\n\t      \t<td className={this.tdClassName(index, 'deleted')}>\n\t      \t\t{this.renderDeletedContentF(index)}\n\t      \t</td>\n\t\t</tr>)\n    }\n    \n\tresetT() {\n\t\tvar state = initState(this.state.initial, checkedSet, this.state.recurring)\n\t\tthis.setState({...state})\n\t\tthis.init()\n\t}\n\t\n\tisPristineT() {\n\t\tvar pristine = true\n    \tthis.state.touched.forEach( (v) => {\n    \t\tfields.forEach( (f) => {\n    \t\t\tpristine = pristine && !v[f]\n    \t\t})\n    \t})\n\n    \treturn pristine &&\n    \t\t   (this.state.initial.length === this.state.values.length) && \n    \t       !oneIsTrue(this.state.masked) &&\n    \t       !this.deleteCount \n\t}\n\t\n\thasErrorsT() {\n\t\tvar errors = false\n    \tthis.state.errors.forEach( (v) => {\n    \t\terrors = errors || oneIsTrue(v) \n    \t})\n    \treturn errors || oneIsTrue(this.state.maskErrors)\n\t}\n\t\n\tpreInitT(initialPayments) {\n\t\treturn preInitFormat(initialPayments, checkedSet)\n\t}\n\t\n\tpreSubmitT() {\n\t\tvar created = []\n\t\tthis.state.values.forEach((v,index) => {\n\t\t\tif(!this.isPersistedR(index)) {\n\t\t\t\tvar p={}\n\t\t\t\tfields.forEach( (field) =>\n\t\t\t\t{\n\t\t\t\t\t p[field] = this.chooseValueF(index, field)\n\t\t\t\t})\n\t\t\t\tcreated.push(p)\n\t\t\t}\n\t\t}) \n\t\t\n\t\tvar deleted = []\n\t\tthis.state.deleted.forEach((v,i) => {\n\t\t\tif(v) {\n\t\t\t\tdeleted.push(this.state.values[i].id)\n\t\t\t} \n\t\t})\n\t\t\n\t\tvar modified = []\n\t\t\n\t\tthis.state.values.forEach( (v, index) => {\n\t\t\tif(this.isPersistedR(index)) {\n\t\t\t\tvar p={}\n\t\t\t\tfields.forEach((field) => {\n\t\t\t\t\t if(this.touchedF(index, field)) {\n\t\t\t\t\t\t p.id = v.id\n\t\t\t\t\t\t p[field] = this.chooseValueF(index, field)\n\t\t\t\t\t }\n\t\t\t\t })\n\t\t\t\t if(Object.keys(p).length > 0){\n\t\t\t\t\t modified.push(p)\n\t\t\t\t }\n\t\t\t}\n\t\t})\n\t\tvar updates = {\n\t\t\t\t'created' : preSubmitFormat(created),\n\t\t\t\t'deleted' : deleted,\n\t\t\t\t'modified' : preSubmitFormat(modified)\n\t\t}\n\t\t//console.log(JSON.stringify(updates,null,4))\n\t\t//\"submit\"\n\t\tthis.pristine = null\n\t\tthis.props.update(updates)\n\t\tthis.showOk()\n\t}\n\n    init() {\n        this.deleteCount = 0\n        this.pristine = null\n        this.errors = null\n        this.allChecked = false\n    }\n\n    renderPaymentsHeaderT = () => {\n    \tif (!this.state.values || this.state.values.length === 0) { \n    \t\treturn (<thead><tr><th /></tr></thead>)\n    \t}\n    \treturn (\n\t\t<thead>\n\t  \t\t<tr>\n\t  \t\t\t<th className={this.thClassName('check')}>\n\t\t  \t\t\t<CheckboxField \n\t\t\t\t  \t\tid={'check_all'}\n\t\t\t\t  \t\tonValueChanged={this.setValueCheckAllF}\n\t\t\t\t  \t\tchecked={this.state.allChecked}\n\t\t\t\t  \t\treadOnly={false}\n\t\t\t  \t\t\tfield = {'check_all'}\n\t\t\t  \t\t\tindex = {-2}\n\t\t\t  \t\t\ttouched = {false}\n\t\t\t\t  \t/>\n\t  \t\t\t</th>\n\t\t  \t\t<th className={this.thClassName('l')} />\n\t  \t\t\t{this.th('d', 'Date')}\n\t\t  \t\t{this.drawBalanceF() ?  this.th('b', 'Balance', false) : null}\n\t  \t\t\t{this.th('i', 'Pay')}\n\t  \t\t\t<th className={this.thClassName('s')} />\n\t  \t\t\t{this.th('g', <FontAwesome name='paperclip' size='lg' />)}\n\t  \t\t\t{this.th('c', 'Issue')}\n\t  \t\t\t{this.th('a', 'Account')}\n\t  \t\t\t{this.th('descr', 'Description')}\t\t  \t\t\t\n\t  \t\t\t<th className={this.thClassName('deleted')}>\n\t  \t\t\t\t<FontAwesome name='remove' style={{'color': 'red'}}/>\n\t  \t\t\t</th>\n\t\t\t</tr>\t\t\t\t  \t\t\t\n\t\t</thead>)\n    }\n    \n\trenderPaymentsT = () => {\n\t\tthis.sortedValues = this.state.values.slice(0)\n\t\tif (this.state.sort) this.sortedValues.sort(this.sortersF())\n\t\t\n\t\treturn (\n\t\t<div>\n\t\t\t<div>\n\t\t<Panel id=\"ctrls-panel\" expanded={this.state.recurring.recur} onToggle={() => {}}  >\n          <Panel.Heading >\n            <Panel.Title >\n\n\t\t\t\t\t<Button onClick={() => this.resetT()} disabled={this.pristine} bsStyle={this.pristine ? \"default\":\"primary\"}>Reset</Button>\n\t\t\t\t\t<Button onClick={() => this.preSubmitT()} disabled={this.pristine  || (this.errors != null)} bsStyle={this.pristine ? \"default\":\"primary\"}>Save</Button>\n\t\t\t\t\t<Button onClick={() => this.addR()}>Add</Button>\n\n\n\t\t\t\t\t\t{/*this.pristine ? 'pristine' : 'not pristine'*/}\n\t\t\t\t\t\t{/*this.errors ? ' errors' : ' no errors'*/}\n\t\t\t\t\t\t<span className=\"pull-right\" style={{marginTop: \"6px\"}}>\n\t\t\t\t\t\t\t<Panel.Toggle componentClass=\"button\" className=\"link-button\" onClick={this.setRecurring} >\n\t\t\t\t\t\t\t{   (!this.state.values || this.state.values.length === 0) ?\n\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t\t:\n\t\t            \t\t\t(this.state.recurring.recur ? 'No recur' : 'Recurring...') }\n\t\t            \t\t</Panel.Toggle>\n\t            \t\t</span>\n\n            </Panel.Title>\n          </Panel.Heading>\n          <Panel.Collapse>\n            <Panel.Body >\n            <span style={{display: \"inline-flex\"}}>\n\t\t\t\t<SimpleSelect\n\t\t\t\t\tstyle={{\n\t\t\t\t    \twidth: '170px'\n\t\t\t\t\t}}\n\t\t\t\t\tonValueChange={this.setRecurringSpan}\n\t\t\t\t\tplaceholder='choose span'\n\t\t\t\t\toptions = {recurSpans}\n\t\t\t\t\tvalue = {this.state.recurring.span}\n\t\t\t\t\thideResetButton = {true}\n\t\t\t\t/>\n\t\t\t\t<NumericInput \n\t\t\t\t\tid=\"recurringTimes\"\n\t\t\t\t\tmin={1} \n\t\t\t\t\tstep={1} \n\t\t\t\t\tprecision={0} \n\t\t\t\t\tmax={365} \n\t\t\t\t\tvalue={this.state.recurring.times} \n\t\t\t\t\tonChange={this.setRecurringTimes} \n\t\t\t\t/> \n\t\t\t\t<span style={{marginTop: \"6px\"}}>\n\t\t\t\ttimes.\n\t\t\t\t</span>\n\t\t\t</span>\n\n            </Panel.Body>\n          </Panel.Collapse>\n        </Panel>\n\t\t\t\n\n\n\t\t\t\t\t  \n\t\t\t</div>\n\t\t\t\n\n\t\t\t\n\t\t\t<Table id=\"payments_table\" striped bordered hover condensed>\n\t\t\t\t{this.renderPaymentsHeaderT()}\n\t\t\t\t<tbody>\n\t\t\t\t  \t{this.sortedValues.map((p) => this.renderPaymentR(p.index))}\n\t\t\t\t</tbody>\n\t\t\t</Table>\n\t\t</div>)\n\t}\n\t\t\n\ttdClassName(index, field) {\n\t\treturn field + '_cell' + \n\t\t\t   (!this.isPersistedR(index) ? ' newRow' : '') +\n\t\t\t   (this.state.deleted[index] ? ' deleted' : '') +\n\t\t\t   (this.state.values[index].check ? ' selected' : '') +\n\t\t\t   (this.state.errors[index][field] ? ' error' : '')\n\t}\n\t\n\tdrawBalanceF() {\n\t\treturn( this.props.queryType === 'a' && this.pristine )\n\t}\n\t\n\ttd(index, field) {\n\t\tif( field ==='b' && !this.drawBalanceF()) return\n\t\treturn (\n\t\t<td key={index+'_'+field} className={this.tdClassName(index, field)}>\n\t\t      \t\t{this.renderContentF(field, index)}\t\n\t\t</td>)\n\t}\n\t\n\tthClassName(field) {\n\t\treturn field + '_header' + \n\t\t\t   (this.state.maskErrors[field] ? ' error' : '') + \n\t\t\t   (oneIsTrue(this.state.masked) ? ' header_tall' : '')\n\t}\n\t\n\tth(field, label = null, sort = true) {\n\t\tif(!sort) {\n\t\t\treturn(\n\t\t\t<th className={this.thClassName(field)}>\n\t  \t\t\t<div>\n\t\t  \t\t\t<span style={{display: 'flex'}} >\n\t\t  \t\t\t\t<div  style={{marginTop: 8, textDecoration: 'none'}} className=\"link-button\" >\n\t\t  \t\t\t\t\t{label !== null ? label : ''}\n\t\t  \t\t\t\t</div>\n\t\t  \t\t\t</span>\n\t\t  \t\t</div>\n\t  \t\t</th>)\n\t\t}\n\t\t\n\t\t\n\t\tvar arrow = (<FontAwesome name = {this.state.asc ? 'sort-asc' : 'sort-desc'} />)\n\n\t\tvar sortField = (<div>{this.state.sort === field ? arrow : ''}</div>)\n\t\t\n\t\tvar labelField = (\n\t\t\t\t<div  style={{marginTop: 8}}>\n  \t\t\t\t\t<button type=\"button\" className=\"link-button\" onClick={() => {this.setSortF(field)}}>\n  \t\t\t\t\t\t{label}\n  \t\t\t\t\t</button>\n\t\t  \t\t</div>)\n\t\treturn(\n\t\t<th className={this.thClassName(field)}>\n  \t\t\t<div>\n\t  \t\t\t<span style={{display: \"flex\"}}>\t\t\t  \t\t\t\t\t\t\n\t  \t\t\t\t{this.renderContentF(field, -1)}\n\t  \t\t\t\t<div style={{marginTop: 8, paddingRight: 3}}>\n\t  \t\t\t\t\t{sortField}\n\t  \t\t\t\t</div>\n\t  \t\t\t\t{label !== null ? labelField : ''}\n\t  \t\t\t</span>\n\t  \t\t</div>\n\t  \t\t{this.renderContentF(field, -2)}\n\t\t</th>)\n\t}\n\t\n\t/*shouldComponentUpdate(nextProps, nextState) {\n\t\tconsole.log(\"shouldComponentUpdate :\"+ this.isPristineT())\n\t\t\n\t\treturn this.isPristineT()\n\t}*/\n\t\n\tcomponentWillReceiveProps(nextprops) {\n\t\tthis.init()\n\t\tthis.setState(\n\t\t\t\t{...initState(this.preInitT(nextprops.initPayments), checkedSet)}\n\t\t)\n\t}\n\n\tupdateCheckedSet(value, index, values = null) {\n\t\tif(index<0 || this.disabledCheckR(index)) return\n\t\tvar pos = checkedSet.indexOf(this.state.values[index].id)\n\t\tif(value && pos < 0) {\n\t\t\tcheckedSet.push(this.state.values[index].id)\n\t\t} if(!value && pos > -1) {\n\t\t\tcheckedSet.splice( pos, 1 )\n\t\t}\n\t\tif(values) values[index].check = value\n\t}\n\t\n\tgroupLoad(grp) {\n\t\tif(this.pristine && grp && grp.length > 0) this.props.groupLoad(grp)\n\t}\n\t\n\trender() {\n\t\tthis.pristine = this.isPristineT()\n\t\tthis.errors = this.hasErrorsT()\n\t\treturn(\n\t\t\t<div>\n\t\t        <AlertContainer ref={a => this.msg = a} {...alertOptions} />\n\t\t\t\t{this.renderPaymentsT()}\n\t\t   </div>\n\t\t)\n\t}\n}\n\nPaymentsEditor.defaultProps = {\n\t\tinitPayments: [],\n\t\tqueryType: null\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return({\n        update: (updates) => {\n            dispatch(update(updates))\n        },\n        paymentSelection: (payments) => {\n            dispatch(payment_selection(payments))\n        },\n        groupLoad: (g) => {\n            dispatch(group_load(g))\n        }\n    })\n}\n\n//export default connect(null, mapDispatchToProps)(withMedia(PaymentsEditor))\nexport default connect(null, mapDispatchToProps)(PaymentsEditor)\n\n\n","import React from 'react';\nimport { connect } from 'react-redux'\nimport PaymentsEditor from '../paymentsEditor/PaymentsEditor'\nimport { day_load } from '../../actions/payments'\n\nclass Payments extends React.Component {\n\tconstructor(props) {\n\t    super(props);\n\t    this.state = {\n\t        payments: [],\n\t        balances: [] //TODO: needed?, if not remove from backend too!\n\t    }\n\t}\n\t\n\trender() {\n\t\treturn(\n\t\t\t<PaymentsEditor initPayments={this.props.payments} queryType={this.props.queryType} />\n\t\t)\n\t}\n}\n\nconst mapStateToProps = (store) => {\n    return {\n    \tqueryType: store.payments.queryType,\n        payments: store.payments.payments,\n        balances: store.payments.balances //TODO: needed?, if not remove from backend too!\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return ({\n        dayLoad: (d) => {\n            dispatch(day_load(d))\n        }       \n    })\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(Payments)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { list_load } from '../../actions/payments'\n//import update from 'react-addons-update';\n\nimport { Badge, Button } from 'react-bootstrap';\nclass PaymentSelection extends React.Component {\n\t\n\tconstructor(props) {\n\t    super(props);\n\t    this.list = this.list.bind(this);\n\t}\n\t/*  constructor(props) {\n\t\t    super(props);\n\t\t    \n\t\t    this.state = {\n\t\t    \tselection : []\n\t\t    }\n\t\t    this.select = this.select.bind(this);\n\t  }\n\t  \n\t  \n\t  select(payments, selected) {\n\t\t  \n\t\t  if (!Array.isArray(payments)) {\n\t\t\t  payments = [payments]\n\t\t  }\n\t\t  \n\t\t  var new_selection = this.state.selection.slice(0)\n\t\t  payments.forEach( (payment) =>  {\n\t\t\t  if (selected) {\n\t\t\t\t  var index =  new_selection.indexOf(payment)\n\t\t\t\t  if (index === -1) {\n\t\t\t\t\t  new_selection.push(payment)\n\t\t\t\t  }\n\t\t\t  } else {\n\t\t\t\t  var index =  new_selection.indexOf(payment)\n\t\t\t\t  if (index !== -1) {\n\t\t\t\t\t  new_selection.splice(index,1)\n\t\t\t\t  }\n\t\t\t  }\n\t\t  })\n\t\t  this.setState({\"selection\": new_selection});\n\t  }\n\t  \n\t  componentWillUpdate(nextProps, nextState){\n\t\t  if (\n\t\t\t\t  nextProps.payment != this.props.payment ||\n\t\t\t\t  nextProps.selected != this.props.selected ) {\n\t\t\t  \t  this.select(nextProps.payment, nextProps.selected)\n\t\t  }\n\t  }*/\n\t\n\t/*componentWillReceiveProps(nextprops) {\n\t\tconsole.log(nextprops)\n\t\tif (nextprops.payment != this.props.payment) {\n\t\t\tvar index =  this.props.payments.indexOf(nextprops.payment);\n\t\t\tif (index !== -1) {\n\t\t\t\tthis.props.payments.splice( index, 1 );\n\t\t\t}\n\t\t}\n\t}*/\n\t\n\tlist() {\n\t\tthis.props.listLoad(this.props.payments)\n\t}\n\t\n\trender() {\n\t\tif( this.props.payments.length === 0 ) return null\n\t    return (\n\t     <Button onClick={this.list}><Badge>{this.props.payments.length}</Badge></Button>\n\t    );\n\t  }\n}\n\n\nPaymentSelection.defaultProps = {\n\t\tpayments: [],\n\t\t//payment: null\n};\n\nconst mapStateToProps = (store) => {\n\t  return {\n  \t\tpayments: store.payment.payments,\n  \t\t//payment: store.payment.payment\n\t  }\n  }\n\nfunction mapDispatchToProps(dispatch) {\n    return ({\n        listLoad: (ids) => {\n            dispatch(list_load(ids))\n        }       \n    })\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PaymentSelection)\n//export default PaymentSelection\n","import React from 'react'\nimport currencyFormat from './currency'\nimport {findInArray, findIndexInArray} from './findInArray'\nvar dateFormat = require('dateformat');\nfunction accountsTooltipTable(dt, curves, constants, showdate = false) {\n\tvar a_table = {};\n\t\n\tif(curves) {\n\t\tvar d = dateFormat(dt, 'yyyymmdd') + 'T00'\n\t\tvar ix = findIndexInArray( curves[0], n => { return d === n})\n\t\tvar trs = []\n\t\t\n\t\tcurves.forEach( (c, i) => {\n\t\t\tif( i===1 ) {\n\t\t\t\ttrs.push(\n\t\t\t\t\t\t<tr className='c3-tooltip-name--data2' key={-1}>\n\t\t\t                      <td className=\"name\"><span style={{backgroundColor: 'green'}}></span></td>\n\t\t\t                      <td className=\"value\" >{currencyFormat(c[ix])}</td>\n\t\t\t            </tr>\n\t\t\t     )\t\t\t\t\t\n\t\t\t}\n\t\t\tif( i===2 ) {\n\t\t\t\ttrs.push(\n\t\t\t\t\t\t<tr className='c3-tooltip-name--data2' key={-2}>\n\t\t\t                      <td className=\"name\"><span style={{backgroundColor: 'red'}}></span></td>\n\t\t\t                      <td className=\"value\" >{currencyFormat(c[ix])}</td>\n\t\t\t            </tr>\n\t\t\t     )\t\n\t\t\t}\n\t\t\tif(i>=3) {\n\t\t\t\tvar acc2 = findInArray(constants['acc'], n => { return c[0] === '' + n.value})\n\n\t\t\t\ttrs.push(\n\t\t\t\t\t\t<tr className='c3-tooltip-name--data2' key={acc2.value}>\n\t\t\t                      <td className=\"name\"><span style={{backgroundColor: acc2.color}}></span></td>\n\t\t\t                      <td className=\"value\" >{currencyFormat(c[ix])}</td>\n\t\t\t            </tr>\n\t\t\t     )\n\t\t\t}\n\t\t})\n\t\t\n\t\ta_table = \n\t\t\t        <table className='c3-tooltip'>\n\t\t              <tbody>\n\t\t              \t  {showdate ? <th colSpan = '2'>{dateFormat(dt, \"dd.mm.yyyy ddd\")}</th>: null}\n\t\t              \t  {trs}\n\t\t              </tbody>\n\t\t            </table>\n\t\treturn a_table\n\t}\n}\nexport {accountsTooltipTable}","import React from 'react' //  Main React library\nimport { Button } from 'react-bootstrap';\nimport { connect } from 'react-redux'\nimport { chart_next_day, chart_prev_day, chart_today } from '../../actions/chart'\nvar FontAwesome = require('react-fontawesome');\n\nclass Buttons extends React.Component{\n\tconstructor(props) {\n\t    super(props)\n\t    this.nextDay = this.nextDay.bind(this)\n\t    this.prevDay = this.prevDay.bind(this)\n\t    this.today = this.today.bind(this)\n\t}\n\t\n\tnextDay() {\n\t\tthis.props.chartNextDay()\n\t}\n\t\n\tprevDay() {\n\t\tthis.props.chartPrevDay()\n\t}\n\t\n\ttoday() {\n\t\tthis.props.chartToday()\n\t}\n\t\n\trender(){\n\t    return (\n\t    <div>\n\t     <Button onClick={this.prevDay}>\n\t     \t<FontAwesome name='caret-left' />\n\t     </Button>\n\t     <Button onClick={this.nextDay}>\n\t     \t<FontAwesome name='caret-right' />\n\t     </Button>\n\t     <Button onClick={this.today}>\n\t     \tToday\n\t     </Button>\n\t    </div>\n\t    )\n\t}\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return ({\n        chartNextDay: () => {\n            dispatch(chart_next_day())\n        },\n        chartPrevDay: () => {\n            dispatch(chart_prev_day())\n        },\n        chartToday: () => {\n            dispatch(chart_today())\n        }\n    })\n}\n\nexport default connect(null, mapDispatchToProps)(Buttons)\n","import React from 'react' //  Main React library\nimport { connect } from 'react-redux'\nimport { Panel } from 'react-bootstrap';\nimport Payments from '../payments/payments'\nimport PaymentSelection from '../paymentSelection/paymentSelection'\nimport Spinner from './Spinner'\nimport { get_constants } from '../../actions/constants'\nimport { findInArray } from '../../util/findInArray'\nimport {accountsTooltipTable} from '../../util/tooltip'\nimport Buttons from '../chart/buttons'\n\nvar dateFormat = require('dateformat');\nvar FontAwesome = require('react-fontawesome');\n\nclass DetailsPanel extends React.Component{\n\tconstructor(props) {\n\tsuper(props);\n\tthis.state = {\n    \t\taccs: props.getConstants('acc'), // return null, but launches fetch\n    \t\tcats: props.getConstants('cat'), // return null, but launches fetch\n    \t\trefreshTime: null,\n     \t}\n\t}\n    componentWillReceiveProps(nextProps){\n    \tif( nextProps.constants && nextProps.constants['acc']) {\n    \t\tthis.setState({\n\t\t    \t\taccs : nextProps.constants['acc']\n\t\t    })\n    \t}\n    \tif( nextProps.constants && nextProps.constants['cat']) {\n    \t\tthis.setState({\n\t\t    \t\taccs : nextProps.constants['cat']\n\t\t    })\n    \t}\n    \t\n    \t\n    \t\n    }\n\trender(){\n\t\tvar info = '';\n\t\tswitch(this.props.queryType) {\n\t\t\tcase 'd' : \n\t\t\t\tinfo = dateFormat(this.props.params.d, \"dd.mm.yyyy ddd\")\n\t\t\t\tbreak\n\t\t\tcase 'a' :\n\t\t\t\tvar acc = findInArray(this.props.constants['acc'], n => { return this.props.params.a === '' + n.value})\n\t\t\t\tinfo = \n\t\t\t\t<span >\n\t\t\t\t\t<span style = {{'marginRight':'5px', 'marginLeft':'5px'}}>\n\t\t\t\t\t\tAccount : <FontAwesome name = 'square' style = {{'color': acc.color}} />\n\t\t\t\t\t</span>\n\t    \t\t\t<span>\n\t    \t\t\t\t{acc.label + ' (' + dateFormat(this.props.params.d1, \"dd.mm.yyyy ddd\")\n\t    \t\t\t\t\t+ ' - '+  dateFormat(this.props.params.d2, \"dd.mm.yyyy ddd\") + ')'}\n\t    \t\t\t</span>\n\t    \t\t</span>\n\t\t\t\t\n\t\t\t\tbreak\n\t\t\tcase 'c' : \n\t\t\t\tvar cat = findInArray(this.props.constants['cat'], n => { return this.props.params.c === '' + n.value})\n\t\t\t\tinfo = \n\t\t\t\t<span >\n\t\t\t\t\t<span style = {{'marginRight':'5px', 'marginLeft':'5px'}}>\n\t\t\t\t\t\tIssue : <FontAwesome name = 'square' style = {{'color': cat.color}} />\n\t\t\t\t\t</span>\n\t    \t\t\t<span>\n\t    \t\t\t\t{cat.label + ' (' + dateFormat(this.props.params.d1, \"dd.mm.yyyy ddd\")\n\t    \t\t\t\t\t+ ' - '+  dateFormat(this.props.params.d2, \"dd.mm.yyyy ddd\") + ')'}\n\t    \t\t\t</span>\n\t    \t\t</span>\n\t    \t\t\n\t\t\t\tbreak\n\t\t\tcase 'g' :\n\t\t\t\tinfo = \n\t\t\t\t\t<span>\n\t\t\t\t\t\t<FontAwesome name='paperclip' size='lg' />  {this.props.params.g}\n\t\t\t\t\t</span>\n\t\t\t\tbreak\n\t\t\tcase 'l' : \n\t\t\t\tinfo = 'Checked'\n\t\t\t\tbreak\n\t\t\tdefault: info = '';\n\t\t\t\tbreak\n\t\t}\n\t\tvar a_table = null\n\t\t\n\t\tif(this.props.queryType === 'd' && this.props.curves) {\n\t\t\ta_table = accountsTooltipTable(this.props.params.d, this.props.curves, this.props.constants)\n\t\t}\n\t\t\n\t\treturn(\n\t\t\t<div>\n\t\t\t  <Panel >\n\t\t\t  \t<Panel.Heading style={{paddingTop: \"4px\", paddingBottom: \"3px\", height: \"45px\", fontSize: \"23px\"}}>\n\t\t\t\t  \t<span style={{display: \"flow-root\", alignItems: \"center\"}}>\n\t\t\t\t  \t\t<FontAwesome name='th-list' /> <span style={{fontSize: \"15px\"}}>{info}</span><Spinner fetching={this.props.fetching} />\n\t\t\t\t  \t\t<span className=\"pull-right\">\n\t\t\t\t  \t\t\t<Buttons />\n\t\t\t\t  \t\t\t<PaymentSelection />\n\t\t\t\t  \t\t</span>\n\t\t\t\t  \t</span>\n\t\t\t  \t</Panel.Heading>\n\t\t\t  \t<Panel.Body>\t\t\t\t\t\n\t\t\t  \t<table>\n\t\t\t  \t  <tbody>\n\t\t\t\t  \t  <tr>\n\t        \t\t\t<td style={{width: '100%'}}>\n\t\t        \t\t\t<Payments />\n\t\t        \t\t</td>\n\t\t        \t\t<td style={{width: '30px', verticalAlign: 'top', paddingLeft: '4px'}}>\n\t\t        \t\t{a_table}\n\t\t        \t\t</td>\n\t\t        \t   </tr>\n\t        \t   </tbody>\n        \t      </table>\n\t\t\t\t</Panel.Body>\n\t\t\t  </Panel>\n\t\t\t</div>\t\t\t\t\t\n\t\t)\n\t}\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        fetching: store.payments.fetching,\n        queryType: store.payments.queryType,\n        params: store.payments.params,\n        refreshTime:  store.constants.refreshTime,\n        constants: store.constants.constants,\n        curves: store.chart.curves\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return({\n        getConstants: (id) => {\n        \tget_constants(id, dispatch)\n        }\n    })\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(DetailsPanel)\n\n","import React from 'react'\nimport c3 from 'c3'\nimport ReactDOMServer from 'react-dom/server';\n\nimport {addDays, daydiff} from '../../util/addDays'\nimport {accountsTooltipTable} from '../../util/tooltip'\n\nimport { chart_load } from '../../actions/chart'\nimport { day_load, account_load } from '../../actions/payments'\n//import initials from '../../util/initials'\nimport { connect } from 'react-redux'\nimport { get_constants } from '../../actions/constants'\nimport { set_daterange, set_todayrange, daterange_next_block, daterange_prev_block } from '../../actions/daterange'\n\nimport '../../../node_modules/c3/c3.min.css'\nimport './style_region.css'\n\nimport {findInArray} from '../../util/findInArray'\n\nvar d3 = require('d3');\n\nvar dateFormat = require('dateformat');\nvar selectedDayOrAccount = -1\n\nvar SELECTONHOVER = false\n\nclass Chart extends React.Component {\n    constructor(props) {\n        super(props)\n        \n        var that = this;\n        this.state = {\n    \t\t//start: initials.startDate,\n        \tstart: null,\n    \t\t//end: initials.endDate,\n        \tend: null,\n    \t\tcurves: null, //Curves\n    \t\tconstants: props.getConstants('acc'), // return null, but launches fetch\n    \t\trefreshTime: null,\n    \t\tselectedType: '',\n    \t\tnextday: null,\n    \t\tprevday: null,\n    \t\ttoday: null,\n    \t\tredraw: null\n        }\n        \n        this.boundingRect = null\n        this.hahlo_ix = null\n        this.hahlo = null\n        this.draw = this.draw.bind(this)\n        this.dateselect = this.dateselect.bind(this)\n        this.nextday = this.nextday.bind(this)\n        this.prevday = this.prevday.bind(this)\n        this.today = this.today.bind(this)\n        this.redraw = this.redraw.bind(this)\n        this.legendnames = this.legendnames.bind(this)\n        this.onmouseover = this.onmouseover.bind(this)\n        this.onmouseover_account = this.onmouseover_account.bind(this)\n        this.onmouseout = this.onmouseout.bind(this)\n        this.find_ix = this.find_ix.bind(this)\n        this.chartDatetoDate = this.chartDatetoDate.bind(this)\n        this.tooltip = this.tooltip.bind(this)\n        this.c3onRendered = this.c3onRendered.bind(this)\n        \n        this.timer = null\n        this.chart_config = {\n        \tonrendered: this.c3onRendered,\n            bindto: '#chart',\n            /*grid: {\n                y: {\n                    lines: [{\n                        value: 0\n                    }]\n                }\n            },*/\n            grid: {\n                x: {\n                    show: true\n                },\n                y: {\n                    show: true,\n                    lines: [{\n                        value: 0\n                    }]\n                }\n            },\n            tooltip: {\n                grouped: true, // Default true\n                /*format: {\n                \tvalue: function (value, ratio, id, index) { return currencyFormat(value) },\n                \tname: function (name, ratio, id, index) { return '' }\n                },*/\n                \n            \n              \tcontents: function (d, defaultTitleFormat, defaultValueFormat, color) {\n            \t  \treturn that.tooltip(d)\n                }\n            },\n            /*regions: [\n                {start:\"20180202T12\", end: \"20180203T12\"},\n                {start:2, end:4, class:'foo'}\n            ],*/\n            data: {\n                x: 'x',\n                onmouseover: function (c) { \n    \t\t        \tif (SELECTONHOVER) {\n    \t\t        \t\tthat.onmouseover(c)\n    \t\t        \t}\n    \t\t    },\n                onclick: this.onmouseover,\n                xFormat: '%Y%m%dT%H',\n                columns: null,\n                transition: {\n                    duration: 500\n                },\n                names : {},\n                colors : {},\n                types : {},\n                type: 'bar',\n                groups: [\n                    ['E', 'I']\n                ],\n                selection: {}\n            },\n            axis: {\n                x: {\n                    type: 'timeseries',\n                    tick: {\n                    \tculling: {\n                    \t\tmax: 10 // the number of tick texts will be adjusted to less than this value note: does not work?\n                    \t},\n                        //format: x => {return dateFormat(x, \"dd.mm.yyyy ddd\")}\n                    \tformat: x => {return dateFormat(x, \"dd.mm\")}\n                    }\n                }\n            },\n            legend: {\n                item: {\n                    onclick: function(a) {\n //                       console.log(\"LEGEND\")\n //                       console.log(a)\n                    \tthat.onmouseover_account(a)\n                    },\n                    onmouseover: function(a) {\n//                        console.log(a)\n                        //magic copied from caller to do the default behaviour (i.e. dim other curves and focus the selected curve) :\n                        if (!this.transiting && this.isTargetToShow(a)) {\n                            this.api.focus(a)\n                        }\n                        //magic ends here\n                        if (SELECTONHOVER) {\n                        \tthat.onmouseover_account(a)\n                        }\n                    }\n                }\n            }\n        }\n       //this.props.chartLoad(this.state.start ,this.state.end)\n    }\n    \n    tooltip(dt) {\n\t\tvar a_table = accountsTooltipTable(dt[0].x, this.props.curves, this.props.constants, true)\n\t\treturn ReactDOMServer.renderToStaticMarkup(a_table)\n    }\n    \n    onmouseout() {\n        if (this.timer) {\n            clearTimeout(this.timer)\n        }\n    }\n    \n    onmouseover(d) {\n    \t//console.log(d)\n    \tif(SELECTONHOVER) {\n\t    \t\tif(d.id === \"I\" && daydiff(d.x, this.selectedDate) !== 0) {\n\t    \t\t if (this.timer) {\n\t    \t       \tclearTimeout(this.timer)\n\t    \t    }\n\t    \t\tvar f = () => {\n\t    \t\t\tthis.dateselect(d.x)\n\t    \t\t}\n\t    \t\t\n\t    \t\t//console.log(\"FIRE:\" + d.id+ \" \" + d.x + \" \" + this.selectedDate)\n\t\t        this.timer = setTimeout(f, 300)\n\t    \t}\n    \t} else {\n    \t\tthis.dateselect(d.x)\n    \t}\n    \t/*\n    \tif (this.timer) {\n    \t       \tclearTimeout(this.timer)\n    \t    }\n\n\n       if (d.id === \"I\") { //this is because event will be trigger for all curves and we want to load day only once\n\t    \tvar f = () => {\n\t    \t\tthis.dateselect(d.x)\n\t    \t}\n\n\t           console.log(\"FIRE:\" + d.id+ \" \" + d.x)\n\t           this.timer = setTimeout(f, 300)\n       }*/\n    }\n    \n   \n    \n    chartDatetoDate(d) {\n    \tvar year = d.substring(0,4)\n    \tvar month = d.substring(4,6) - 1\n    \tvar day = d.substring(6,8)\n    \treturn new Date(year, month, day)\n    }\n\n    find_ix(d) {\n    \tif(!this.chart_config.data.columns) return null;\n\n    \tvar ix = daydiff(this.chartDatetoDate(this.chart_config.data.columns[0][1]), d)\n    \treturn ix\n    }\n\n    \n    nextday() {\n    \tif(this.selectedDate) {\n    \t\tthis.dateselect(addDays(this.selectedDate, 1))\n    \t}\n    }\n    \n    prevday() {\n    \tif(this.selectedDate) {\n    \t\tthis.dateselect(addDays(this.selectedDate, -1))\n    \t}\n    }\n\n    today() {\n\t\tvar now = new Date()\n\t\tthis.props.daterangeToday()\n\t\tthis.dateselect(now)\n    }\n    \n    redraw() {\n    \tthis.draw()\n    }\n    \n    onmouseover_account(a) {\n    \tif (a === \"I\" || a === \"E\") return;\n        //magic copied from caller to do the default behaviour (i.e. dim other curves and focus the selected curve) :\n       /* if (!this.transiting && this.isTargetToShow(a)) {\n            this.api.focus(a)\n        }*/\n        //magic ends\n    \tvar that = this\n        var f = () => {\n\n            this.props.accountLoad(a, that.props.start ,that.props.end)\n        }\n        this.timer = setTimeout(f, 300)\n    }\n    \n    dateselect(d) {\n    \t\t\t//console.log(\"DATESEL\")\n    \t\t\tthis.selectedDate = d\n    \t\t\t//CHG-13this.legendnames(this.props.curves, this.props.constants)\n            \t//vhn vois kyl kauniimmaks laittaa:\n    \t\t\tvar ix = this.find_ix(d)\n    \t\t\tif(null !== ix && ix === -1)  {\n    \t\t\t\t//console.log(\"vasemmalta yli \"+ix)\n    \t\t\t\tthis.props.daterangePrevBlock()\n    \t\t\t\tix = this.chart_config.data.columns[0].length - 2\n    \t\t\t\t//console.log(\"vasemmalta yli \"+ix)\n    \t\t\t}\n    \t\t\tif(null != ix && ix === this.chart_config.data.columns[0].length - 1)  {\n    \t\t\t\t//console.log(\"oikealta yli \"+ix)\n    \t\t\t\tthis.props.daterangeNextBlock()\n    \t\t\t\tix = 0\n    \t\t\t}\n\n                this.props.dayLoad(d, ix)\n                \n                if(this.hahlo_ix) {\n\t    \t\t\t//dayselection:\n\t    \t\t\tvar alku = dateFormat(addDays(this.selectedDate,-1), \"yyyymmdd\") + \"T20\"\n\t    \t\t\tvar loppu = dateFormat(this.selectedDate, \"yyyymmdd\") + \"T4\"\n\t    \t\t\tthis.chart_config.regions[this.hahlo_ix].start = alku\n\t    \t\t\tthis.chart_config.regions[this.hahlo_ix].end = loppu\n\t    \t\t\tc3.generate(this.chart_config)\n    \t\t\t}\n    }\n   \n    render() {\n    \t//var width = document.getElementById('chart').getBoundingClientRect().width\n    \t//console.log(\"render()\")\n        return ( \n        \t<div id = \"chart\" onMouseOut = {() => this.onmouseout()} />\n        )\n   }\n \n    draw() {\n    \tthis.boundingRect = document.getElementById('chart').getBoundingClientRect()\n    \t//console.log(\"draw() width = \" + this.boundingRect)\n    \t\n    \tif(!this.chart_config.data.columns) {\n    \t\t//console.log(\"draw() nothing yet\")\n    \t\treturn //data not yet there\n    \t}\n    \t/* red / white backgrounds here*/\n       if(!this.chart_config.regions) {\n    \t   //init with white\n    \t   this.chart_config.regions = []\n    \t   for(var x=1; x<(this.chart_config.data.columns[0].length); x++) { //x date \n    \t\t   \n    \t\t   for(var y=3; y<this.chart_config.data.columns.length; y++) { //y accounts start with 3 \n    \t\t\t\tvar alku = dateFormat(addDays(this.chartDatetoDate(this.chart_config.data.columns[0][x]),-1), \"yyyymmdd\") + \"T12\"\n    \t\t\t\tvar loppu = dateFormat(this.chartDatetoDate(this.chart_config.data.columns[0][x]), \"yyyymmdd\") + \"T12\"\n\n    \t\t\t\tthis.chart_config.regions.push( \n\t                    {\"start\": alku, \"end\": loppu, class: this.chart_config.data.columns[y][x] < 0 ? \"red\" : \"white\"}\n\t                 )\t\t\n    \t\t   }\n    \t   }\n    \t   \n    \t   if(this.selectedDate) {\n    \t   //dayselection as last in array:\n\t    \t   this.hahlo_ix = this.chart_config.regions.length\n\t    \t   var alku1 = dateFormat(addDays(this.selectedDate,-1), \"yyyymmdd\") + \"T20\"\n\t    \t   var loppu1 = dateFormat(this.selectedDate, \"yyyymmdd\") + \"T4\"\n\t    \t   this.chart_config.regions.push( \n\t\t            {\"start\": alku1, \"end\": loppu1, class: \"gray\"}\n\t\t       )\n    \t   }\n       }\n        c3.generate(this.chart_config)\n   }\n   \n   c3onRendered() {\n    \t//console.log(\"c3onRendered() width = \" + this.boundingRect)\n    \tthis.chart_config.data.columns[0].forEach((el, i) => {\n    \t\tif(i>0) {\n    \t\t\tvar svg = d3.selectAll('#chart').select('.c3-event-rect-'+(i-1))\n    \t\t\tvar dd=this.chartDatetoDate(el)\n    \t\t\tsvg[0][0].onclick = () => {\n    \t\t\t\tthis.dateselect(dd)\n    \t\t\t}\n    \t\t}\n    \t})\n    }\n    \n    componentWillReceiveProps(nextProps) {\n    \t//var width = document.getElementById('chart').getBoundingClientRect().width\n    \t//console.log(\"componentWillReceiveProps() width = \" + width)\n    \tif(nextProps.nextday !== this.props.nextday) {\n    \t\t//console.log('N')\n    \t\tthis.nextday()\n    \t}\n    \tif(nextProps.prevday !== this.props.prevday) {\n    \t\t//console.log('P')\n    \t\tthis.prevday()\n    \t}\n    \tif(nextProps.today !== this.props.today) {\n    \t\t//console.log('T')\n    \t\tthis.today()\n    \t}\n    \tif(nextProps.redraw !== this.props.redraw) {\n    \t\t//console.log('RD')\n    \t\tthis.redraw()\n    \t}\n    \t\n    \tif(nextProps.selectedType !== this.props.selectedType) {\n    \t\t//console.log('TY')\n    \t\tselectedDayOrAccount = -1 //reset\n    \t}\n    \tif( nextProps.constants && nextProps.constants[this.props.constants_id]) {\n    \t\t//console.log('C')\n    \t\tvar constants = nextProps.constants[this.props.constants_id]\n    \t\tvar selectedItem = findInArray(constants, c => { return c.value === nextProps.selectedValue })\n\t    \tvar validConstants = constants.filter(  c => { return (c.valid || c === selectedItem) })\n\t    \tthis.setState({\n\t\t    \t\tselectedValue : selectedItem,\n\t\t    \t\t'items' : validConstants\t\t\n\t\t    })\n    \t}\n    \t\n        if (\n        \t// eslint-disable-next-line\t\n        \t\t!(this.state.start == nextProps.start) //note 'undefined == null' yields true but 'undefined !== null' as well\n        \t|| \n        \t// eslint-disable-next-line\n        \t\t!(this.state.end == nextProps.end)) { \n        \t//console.log('R')\n        \t//selected date span changed?\n        \tthis.setState({\n\t\t    \t\tstart : nextProps.start,\n\t\t    \t\tend : nextProps.end\t\t\n\t\t    })\n            this.props.chartLoad(nextProps.start, nextProps.end)\n        } else if (nextProps.curves !== this.props.curves || nextProps.refreshTime !== this.props.refreshTime) {\n        \t//console.log('CU')\n        \t//TODO ji thn laita vrit ja nimet tilit on jo account#ssa\n        \tthis.chart_config.data.names = {}\n        \tthis.chart_config.data.types = {}\n        \tthis.chart_config.data.colors = {}\n        \tthis.chart_config.data.columns = nextProps.curves //curves updated\n        \tthis.chart_config.regions = null \n        \tthis.legendnames(nextProps.curves, nextProps.constants)\n        \t//this.chart_config.data.names['I'] ='Income'\n        \tthis.chart_config.data.colors['I'] ='green'\n        \t//this.chart_config.data.names['E'] ='Exp'\n        \tthis.chart_config.data.colors['E'] ='red'\n//        \tvar max = 0, min = 0\n        \tif (nextProps.curves) {\n        \t\t//console.log(\"curves 1\")\n        \t\tvar f = n =>  { return key === '' + n.value}\n\t        \tfor(var i=3; i<nextProps.curves.length; i++) {\n\t        \t\tvar key = nextProps.curves[i][0]\n\t        \t\tvar acc = findInArray(nextProps.constants['acc'], f)\n\t        \t\tthis.chart_config.data.colors[key] = acc.color\n\t        \t\tthis.chart_config.data.types[key] = 'spline'\n\t        \t}\n\t            this.draw()\n        \t}\n        } \n    }\n    \n    \n    legendnames(curves, constants) {\n    \t//heihei ihan karmeen nkst koodia\n    \tthis.chart_config.data.names['I'] ='Income'\n    \tthis.chart_config.data.names['E'] ='Exp'\n        if (curves) {\n        \t\tvar f = n => { return key === ''+n.value}\n\t        \tfor(var i=3; i<curves.length; i++) {\n\t        \t\tvar key = curves[i][0]\n\t        \t\tvar acc = findInArray(constants['acc'], f)\n\t        \t\tthis.chart_config.data.names[key] = acc.label\n\t        \t}\n        }\n    } \n}\n\nconst mapStateToProps = (store) => {\n    return {\n        start: store.daterange.s,\n        end: store.daterange.e,\n        curves: store.chart.curves,\n        nextday: store.chart.nextday,\n        prevday: store.chart.prevday,\n        today: store.chart.today,\n        redraw: store.chart.redraw,\n        refreshTime:  store.constants.refreshTime,\n        constants: store.constants.constants,\n        selectedType: store.payments.queryType\n    }\n}\n\n\nfunction mapDispatchToProps(dispatch) {\n    return ({\n        chartLoad: (s, e) => {\n        \tselectedDayOrAccount = -1; //reset\n            dispatch(chart_load(s, e))\n        },\n        dayLoad: (d, index) => {\n        \tif (index === selectedDayOrAccount) return;\n        \tselectedDayOrAccount = index;\n            dispatch(day_load(d))\n        },\n        accountLoad: (a, d1, d2) => {\n        \tif (a === selectedDayOrAccount) return;\n        \tselectedDayOrAccount = a;\n            dispatch(account_load(a, d1, d2))\n        },\n        getConstants: (id) => {\n        \tget_constants(id, dispatch)\n        },\n        daterangeToday: () => {\n            dispatch(set_todayrange())\n        },\n        daterangeNextBlock: () => {\n            dispatch(daterange_next_block())\n        },\n        daterangePrevBlock: () => {\n            dispatch(daterange_prev_block())\n        },\n        setDateRange: (start, end) => {\n            dispatch(set_daterange(start, end))\n        }\n    })\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Chart)","import React from 'react' //  Main React library\nimport { Panel } from 'react-bootstrap';\n\nimport Chart from '../chart/chart'\nimport Buttons from '../chart/buttons'\nimport Spinner from './Spinner'\nimport { connect } from 'react-redux'\nvar dateFormat = require('dateformat');\n\nvar FontAwesome = require('react-fontawesome');\n\nclass ChartPanel extends React.Component{\n\trender(){\n\t\tvar dates = \" \" + dateFormat(this.props.start, \"dd.mm.yyyy ddd\") + \" - \" + dateFormat(this.props.end, \"dd.mm.yyyy ddd\")\n\t\treturn(\n\t\t<div>\n\t\t\t<Panel>\n\t\t\t{/*\n\t\t\t  \t<Panel.Heading style={{paddingTop: \"6px\", paddingBottom: \"3px\", height: \"45px\", fontSize: \"23px\"}}>\n\t\t\t  \t\t<FontAwesome name='bar-chart' /> <span style={{fontSize: \"15px\"}}>{dates}</span><Spinner fetching={this.props.fetching} />\n\t\t\t  \t\t\t<span className=\"pull-right\">\n\t\t\t\t  \t\t\t<Buttons />\n\t\t\t\t  \t    </span>\n\t\t\t  \t</Panel.Heading> */}\n\t\t\t  \t<Panel.Body>\n\t\t\t  \t\t<Buttons />\n\t\t\t  \t\t<Chart />\n\t\t\t\t</Panel.Body>\n\t\t\t  </Panel>\n\t\t</div>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        fetching: store.chart.fetching,\n        start: store.daterange.s,\n        end: store.daterange.e\n    }\n}\n\nexport default connect(mapStateToProps)(ChartPanel)","import {addDays} from './addDays'\n\nconst initials = {\n\t\tstartDate: addDays(new Date(),- 10),\n\t\tendDate: addDays(new Date(), 10)\n}\n\nexport default initials","import React from 'react'\nimport c3 from 'c3'\n\nimport '../../../node_modules/c3/c3.min.css'\n\nimport { pie_load } from '../../actions/pie'\nimport { category_load } from '../../actions/payments'\nimport { connect } from 'react-redux'\nimport currencyFormat from '../../util/currency'\nimport initials from '../../util/initials'\nimport { get_constants } from '../../actions/constants'\n\nimport { findInArray } from '../../util/findInArray'\n\nimport './pie.css'\n\n\nvar d3 = require('d3');\n\nconst INNER_ARC = 0\nconst OUTER_ARC = 40\n    \nvar SELECTONHOVER = false\nvar names = {}\n\nclass Pie extends React.Component {\n\n    constructor(props) {\n        super(props)\n        var that = this;\n        this.state = {\n        \tconstants: props.getConstants('cat'), // return null, but launches fetch\n    \t\trefreshTime: null,\n    \t\tredraw: null\n        }\n\n        this.draw = this.draw.bind(this)\n        this.redraw = this.redraw.bind(this)\n        this.onmouseover = this.onmouseover.bind(this)\n        this.onmouseout = this.onmouseout.bind(this)\n        this.c3onRendered = this.c3onRendered.bind(this)\n        this.d3onMouseI = this.d3onMouseI.bind(this)\n        this.d3onMouseOutI = this.d3onMouseOutI.bind(this)\n        this.d3onMouseE = this.d3onMouseE.bind(this)\n        this.d3onMouseOutE = this.d3onMouseOutE.bind(this)\n        this.timer = null\n        this.chart_config = {\n        \t\tonrendered: this.c3onRendered,\n        \t\tsum_i: 0,\n        \t\tsum_e: 0,\n    \t\t    bindto: '#pie',\n    \t\t    tooltip: {\n    \t\t        format: {\n    \t\t            //TODO make a util function to format a sum:\n    \t\t            value: function (value, ratio, id) {\n    \t\t            \t/*if (id.startsWith(\"p\")) {*/\n    \t\t            \tif (id.substr(0,1) === \"p\") {\n    \t\t            \t\treturn value + \"  (\" + currencyFormat(value*100/that.chart_config.sum_i) + \"%)\"\n    \t\t            \t}else{\n    \t\t            \t\treturn -value + \"  (\" + currencyFormat(-value*100/that.chart_config.sum_e) + \"%)\";\n    \t\t        \t\t    \n    \t\t            \t}\n    \t\t            }\n    \t\t        }\n    \t\t    },\n    \t\t    data: {\n                    names: {},\n    \t\t        columns: [],\n    \t\t        colors: {},\n    \t\t        order: null,\n    \t\t        onclick: function (c) { \n    \t\t        \tthat.onmouseover(c.id)\n    \t\t        },\n    \t\t        onmouseover: function (c) { \n    \t\t        \tif (SELECTONHOVER) {\n    \t\t        \t\tthat.onmouseover(c.id)\n    \t\t        \t}\n    \t\t        }, \t\t        \n    \t\t        type: 'pie'\n    \t\t    },\n    \t\t    pie: {\n    \t\t        label: {\n    \t\t            format: function (value, ratio, id) {\n    \t\t            \t//console.log(value)\n    \t\t            \t//console.log(ratio)\n    \t\t            \t//console.log(id)\n    \t\t            \t//console.log(names[id])\n    \t\t                return names[id];\n    \t\t            }\n    \t\t        }\n    \t\t    },\n    \t\t    legend: {\n    \t\t    \tshow: false\n    \t\t    }\n                /*legend: {\n                    item: {\n                        onclick: function(c) {\n                        \tthat.onmouseover(c)\n                        },\n                        onmouseover: function(c) {\n                            //magic copied from caller to do the default behaviour (i.e. dim other curves and focus the selected curve) :\n                            if (!this.transiting && this.isTargetToShow(c)) {\n                                this.api.focus(c)\n                            }\n                            //magic ends here\n                            if (SELECTONHOVER) {\n                            \tthat.onmouseover(c)\n                            }\n                        }\n                    }\n                }*/\n    \t\t}\n    }\n\n    onmouseout() {\n        if (this.timer) {\n            clearTimeout(this.timer)\n        }\n    }\n\n    onmouseover(c) {\n            var f = () => {\n                this.props.categoryLoad(c.substring(1), this.props.start, this.props.end)\n            }\n            this.timer = setTimeout(f, 300)\n    }\n    \n    d3onMouseI() {\n    \td3.select('#incomes')\n    \t.style(\n    \t\t\t{\"display\": \"inline\"}\n    \t)\n    }\n    \n    d3onMouseOutI() {\n    \td3.select('#incomes')\n    \t.style(\n    \t\t\t{\"display\": \"none\"}\n    \t)\n    }\n    \n    d3onMouseE() {\n    \td3.select('#expences')\n    \t.style(\n    \t\t\t{\"display\": \"inline\"}\n    \t)\n    }\n    \n    d3onMouseOutE() {\n    \td3.select('#expences')\n    \t.style(\n    \t\t\t{\"display\": \"none\"}\n    \t)\n    }\n    \n    c3onRendered() {\n    \tvar total  = this.chart_config.sum_i - this.chart_config.sum_e\n    \tif( total === 0 ) return\n    \tvar middlepoint = (-this.chart_config.sum_e/total)*2*Math.PI\n\n\tvar arc_minus = d3.svg.arc()\n\t.innerRadius(INNER_ARC)\n\t.outerRadius(OUTER_ARC)\n\t.startAngle(0)\n\t.endAngle(middlepoint);\n\t\n\t var arc_plus = d3.svg.arc()\n\t.innerRadius(INNER_ARC)\n\t.outerRadius(OUTER_ARC)\n\t.startAngle(middlepoint)\n\t.endAngle(2*Math.PI);\n\t \n\t var arc_space = d3.svg.arc()\n\t.innerRadius(OUTER_ARC)\n\t.outerRadius(OUTER_ARC + 1)\n\t.startAngle(0)\n\t.endAngle(2*Math.PI);\n\t \n    var svg = d3.selectAll(\"#pie\").select(\".c3-chart-arcs\")\n    \t\n    svg\n    .append(\"svg:path\")\n    .attr(\"id\", \"arc-minus\")\n    .style(\"stroke-width\", 0)\n    .attr(\"d\", arc_minus)\n    .on({\n        \"click\": this.d3onMouseE,\n        \"mouseover\": this.d3onMouseE,\n        \"mouseout\": this.d3onMouseOutE\t\n    })\n \n     svg\n    .append(\"svg:path\")\n    .attr(\"id\", \"arc-plus\")\n    .style(\"stroke-width\", 0)\n    .attr(\"d\", arc_plus)    \n    .on({\n        \"click\": this.d3onMouseI,\n        \"mouseover\": this.d3onMouseI,\n        \"mouseout\": this.d3onMouseOutI\n    })\n    \n    svg\n    .append(\"svg:path\")\n    .attr(\"id\", \"arc-space\")\n    .style(\"stroke-width\", 0)\n    .attr(\"d\", arc_space)    \n\n    }\n    \n    draw() {\n         c3.generate(this.chart_config)\n    }\n\n    redraw() {\n    \tthis.draw()\n    }\n    \n    componentWillReceiveProps(nextProps) {\n        if (this.props.start !== nextProps.start || this.props.end !== nextProps.end) { //selected date span changed?\n            this.props.pieLoad(nextProps.start, nextProps.end)\n        } else {\n\n        \tvar colors = {}\n        \tvar columns = []\n        \tvar sum_i = 0\n        \tvar sum_e = 0\n        \tvar id = null\n        \t\n\n        \t\n        \t\n        \tif (nextProps.slices) {\n\t        \tnextProps.slices.forEach(\n\t        \t\t(s) => {\n\t        \t\t\tvar cat = findInArray(nextProps.constants['cat'], n => { return s.c === n.value})\n\t        \t\t\t/* var cat = nextProps.constants['cat'].find( \n\t\t        \t\t\tn => { return s.c == n.value}\n\t        \t\t\t )*/\n\t        \t\t\tif (s.sl<0) {\n\t        \t\t\t\tsum_e += s.sl\n\t        \t\t\t\tid = 'n' + s.c\n\t        \t\t\t\t//names[id] = 'nimi' + s.c\n\t        \t\t\t\tnames[id] = cat.label\n\t        \t\t\t\t//colors[id] = 'red'\n\t        \t\t\t\tcolors[id] = cat.color\n\t        \t\t\t\tcolumns.push([id, -s.sl])\n\t        \t\t\t}else{\n\t        \t\t\t\tsum_i += s.sl\n\t        \t\t\t\tid = 'p' + s.c\n\t        \t\t\t\t//names[id] = 'nimi' + s.c\n\t        \t\t\t\tnames[id] = cat.label\n\t        \t\t\t\t//colors[id] = 'green'\n\t        \t\t\t\tcolors[id] = cat.color\n\t        \t\t\t\tcolumns.push([id, s.sl])\n\t        \t\t\t}\n\t        \t\t}\n\t        \t)\n\t        \tthis.chart_config.sum_i = sum_i\n\t        \tthis.chart_config.sum_e = sum_e\n\t            this.chart_config.data.names = names\n\t            this.chart_config.data.colors = colors\n\t            this.chart_config.data.columns = columns\n\t            this.draw()\n        \t}\n        }\n    }\n\n    render() {\n        return (\t \n        \t<div>\n        \t<div id = \"pie\" onMouseOut = {() => this.onmouseout()} />\n        \t<table id=\"incomes\" className=\"c3-tooltip\" style={{display: \"none\", left: \"75px\", top: \"150px\", position: \"absolute\"}}>\n        \t<tbody>\n        \t\t<tr>\n        \t\t\t<td >\n        \t\t\t\t<span style={{backgroundColor : \"green\"}} /> Income total\n        \t\t\t</td>\n        \t\t\t<td >\n        \t\t\t\t{currencyFormat(this.chart_config.sum_i)}\n        \t\t\t</td>\n        \t\t</tr>\n        \t</tbody>\n        \t</table>\n        \t<table id=\"expences\" className=\"c3-tooltip\" style={{display: \"none\", left: \"250px\", top: \"250px\", position: \"absolute\"}}>\n        \t<tbody>\n        \t\t<tr>\n        \t\t\t<td >\n        \t\t\t\t<span style={{backgroundColor : \"red\"}} /> Expences total\n        \t\t\t</td>\n        \t\t\t<td >\n        \t\t\t\t{currencyFormat(this.chart_config.sum_e)}\n        \t\t\t</td>\n        \t\t</tr>\n        \t</tbody>\n        \t</table>        \t\n        \t</div>\n\n        )\n    }\n}\n\nPie.defaultProps = {\n    \tstart: initials.startDate,\n    \tend: initials.endDate,\n        slices: null\n}\nconst mapStateToProps = (store) => {\n    return {\n        start: store.daterange.s,\n        end: store.daterange.e,\n        slices: store.pie.slices,\n        refreshTime:  store.constants.refreshTime,\n        redraw: store.pie.redraw,\n        constants: store.constants.constants\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return ({\n        pieLoad: (s, e) => {\n            dispatch(pie_load(s, e))\n        },\n        categoryLoad: (c, d1, d2) => {\n            dispatch(category_load(c, d1, d2))\n        },\n        getConstants: (id) => {\n        \tget_constants(id, dispatch)\n        }       \n    })\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Pie)","import React from 'react' //  Main React library\nimport { Panel } from 'react-bootstrap';\nimport Pie from '../pie/pie'\nimport Spinner from './Spinner'\nimport { connect } from 'react-redux'\nvar dateFormat = require('dateformat');\n\nvar FontAwesome = require('react-fontawesome');\n\nclass PiePanel extends React.Component{\n\trender(){\n\t\tvar dates = \" \" + dateFormat(this.props.start, \"dd.mm.yyyy ddd\") + \" - \" + dateFormat(this.props.end, \"dd.mm.yyyy ddd\")\n\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t<Panel>\n\t\t\t\t{/*\n\t\t\t  \t<Panel.Heading style={{paddingTop: \"6px\", paddingBottom: \"3px\", height: \"45px\", fontSize: \"23px\"}}><FontAwesome name='pie-chart' /> <span style={{fontSize: \"15px\"}}>{dates}</span><Spinner fetching={this.props.fetching} />\n\t\t\t  \t</Panel.Heading> */}\n\t\t\t  \t\t<Panel.Body>\t\t\t\t\t\n\t\t\t  \t\t<Pie />\n\t\t\t\t</Panel.Body>\n\t\t\t  </Panel>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        fetching: store.pie.fetching,\n        start: store.daterange.s,\n        end: store.daterange.e\n    }\n}\n\nexport default connect(mapStateToProps)(PiePanel)\n","import {load as loadcategories} from './categories'\nimport {load as loadaccounts} from './accounts'\nimport {load as loadauditlog} from './auditlog'\n\n\nconst SHOW_VIEW = 'SHOW_VIEW'\n\t\n\nconst naviShowViewRequestAction = (view) => ({\n    type: SHOW_VIEW,\n    payload: {\n    \t\"view\": view\n    }\n})\n\nconst show_view = (view) => (\n    (dispatch: Redux.Dispatch) => {\n    \tif(view === 'c') {\n    \t\tdispatch(loadcategories())\n    \t}\n    \tif(view === 'a') {\n    \t\tdispatch(loadaccounts())\n    \t}\n    \tif(view === 'l') {\n    \t\tdispatch(loadauditlog())\n    \t}\n        dispatch(naviShowViewRequestAction(view))\n    }\n )\n\nexport {\n    show_view\n}","import React from 'react' //  Main React library\n//import { Grid, Row, Col, Tabs, Tab} from 'react-bootstrap';\n\nimport Categories from '../categories/categories'\nimport Accounts from '../accounts/accounts'\nimport Logs from '../logs/logs'\n\nimport RangePanel from './RangePanel'\nimport DetailsPanel from './DetailsPanel'\nimport ChartPanel from './ChartPanel'\nimport PiePanel from './PiePanel'\n\nimport { connect } from 'react-redux'\nimport { show_view } from '../../actions/navi'\nimport { chart_redraw } from '../../actions/chart'\nimport { pie_redraw } from '../../actions/pie'\nimport { minibars_redraw } from '../../actions/minibars'\n/*\n<Tabs defaultActiveKey={2} id=\"uncontrolled-tab-example\">\n  <Tab eventKey={1} title=\"Tab 1\">\n    Tab 1 content\n  </Tab>\n  <Tab eventKey={2} title=\"Tab 2\">\n    Tab 2 content\n  </Tab>\n  <Tab eventKey={3} title=\"Tab 3\" disabled>\n    Tab 3 content\n  </Tab>\n</Tabs>;\n*/\n\nconst Acc = () => (\n\t\t\t\t\t<Accounts />\n)\n\nconst Cat = () => (\n\n\t\t\t\t\t<Categories />\n)\n\nconst Log = () => (\n\t\t\t\t\t<Logs />\n)\n\nclass Content extends React.Component {\n\t/*constructor(props) {\n\t\tsuper(props)\n\t\tthis.handleSelect = this.handleSelect.bind(this)\n\t}*/\n\t\n\t/*handleSelect(key) {\n\t\tif(key === 1) {\n\t\t\t\tvar that = this\n\t\t\t\tvar f = () => {\n\t    \t\t\tthat.props.minibarsRedraw()\n\t    \t\t}\n\t\t        setTimeout(f, 0)\n\t\t}\n\t\tif(key === 2) {\n\t\t\t\tvar that = this\n\t\t\t\tvar f = () => {\n\t    \t\t\tthat.props.chartRedraw()\n\t    \t\t\tthat.props.pieRedraw()\n\t    \t\t}\n\t\t        setTimeout(f, 0)\n\t\t}\n\t}*/\n   \n\tcomponentWillReceiveProps(nextProps) {\n\t\tif(this.props.view !== 'main' && nextProps.view === 'main') {\n\t\t\t//refresh c3-views (bug in lib)\n\t\t\tthis.props.minibarsRedraw()\n\t\t\tthis.props.chartRedraw()\n\t    \tthis.props.pieRedraw()\n\t\t}\n\t}\n\trender() {\n\t\tvar main = \n\t\t\t<div>\n\t\t\t\t<div style={{width: '100%'}}>\n\t\t\t\t\t<RangePanel />\n\t\t\t\t</div>\n\t\t\t\t<div style={{width: '100%'}}>\n\t\t\t\t\t<div style={{width: '100%', \"display\": \"inline-flex\", \"whiteSpace\": \"nowrap\"}}>\n\t\t\t\t\t\t<div style={{width: '75%', paddingRight: '2px'}}>\n\t\t\t\t\t\t\t<ChartPanel />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style={{width: '25%', paddingLeft: '2px'}}>\n\t\t\t\t\t\t\t<PiePanel />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<DetailsPanel />\n\t\t\t</div>\n\t\t\t\n\t\treturn(\n\t\t\t\t<div style={{padding: '15px'}}> \n\t\t\t\t\t<div style={{display : (this.props.view === 'main') ? '' : 'none'}}>\n\t\t\t\t\t\t\t{main}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div style={{display : (this.props.view === 'a') ? '' : 'none'}}>\n\t\t\t\t\t\t\t<Acc />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div style={{display : (this.props.view === 'c') ? '' : 'none'}}>\n\t\t\t\t\t\t\t<Cat /> \n\t\t\t\t\t</div>\n\t\t\t\t\t<div style={{display : (this.props.view === 'l') ? '' : 'none'}}>\n\t\t\t\t\t\t\t<Log /> \n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t)\n\t}\n}\n\nContent.defaultProps = {\n\t\tview: 'main'\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        view: store.navi.view\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return ({\n        showView: (view) => {\n            dispatch(show_view(view))\n        },\n        chartRedraw: () => {\n            dispatch(chart_redraw())\n        },\n        pieRedraw: () => {\n            dispatch(pie_redraw())\n        },\n        minibarsRedraw: () => {\n            dispatch(minibars_redraw())\n        }\n    })\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(Content)\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n","import React from 'react'\nimport { Alert, Button } from 'react-bootstrap'\nimport { connect } from 'react-redux'\n\nclass ErrorMessage extends React.Component {\n    constructor(props) {\n        super(props)\n\n        this.dismiss = this.dismiss.bind(this)\n        this.show = this.show.bind(this)\n\n        this.state = {\n            show: false\n        }\n    }\n\n    dismiss() {\n        this.setState({ show: false })\n    }\n\n    show() {\n        this.setState({ show: true })\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.when !== this.props.when) {\n            this.show()\n        }\n    }\n\n    render() {\n\n        if (!this.state.show) return null;\n\n        const { status, msg } = this.props\n        return (\n\n       <Alert bsStyle=\"danger\" onDismiss={this.dismiss}>\n\t\t    <h4>We've got an error!</h4>\n\t\t    Server returned:\n\t\t    <ul>\n\t\t        <li>Status: {status}</li>\n\t\t        <li>Message: {msg}</li>\n\t\t    </ul>\n\t\t    <hr />\n\t\t    <p>\n\t        \t<Button onClick={this.dismiss}>Close</Button>\n\t        </p>\n\t\t</Alert>\n\t\t)\n    }\n\n}\n\nErrorMessage.defaultProps = {\n    when: 0\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        status: store.errorMessage.status,\n        msg: store.errorMessage.msg,\n        when: store.errorMessage.when\n    }\n}\n\nexport default connect(mapStateToProps)(ErrorMessage)","import React from 'react';\nimport { Navbar, /*NavItem,*/ Nav, NavDropdown, MenuItem} from 'react-bootstrap';\nimport { connect } from 'react-redux'\n\nimport { show_view } from '../../actions/navi'\n\nclass MenuBar extends React.Component{\n\t\n\trender(){\t\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t<Navbar>\n\t\t\t\t    <Navbar.Header>\n\t\t\t\t        <Navbar.Brand> Onassis </Navbar.Brand>\n\t\t\t\t        <Navbar.Toggle /> \n\t\t\t\t    </Navbar.Header>\n\t\t\t\t    <Navbar.Collapse>\n\t\t\t\t        <Nav>\n\t\t\t\t            {/*<NavItem eventKey={1} href=\"#\">View</NavItem>*/}\n\t\t\t\t            <NavDropdown eventKey={3} title=\"View\" id=\"basic-nav-dropdown\">\n\t\t\t\t                <MenuItem eventKey={3.1} onSelect={(e) => {this.props.showView('main')}}>\n\t\t\t\t                \t{this.props.view === 'main' ? 'X' : '' } Main\n\t\t\t\t                </MenuItem>\n\t\t\t\t                <MenuItem eventKey={3.2} onSelect={(e) => {this.props.showView('c')}}>\n\t\t\t\t                \t{this.props.view === 'c' ? 'X' : '' } Categories\n\t\t\t\t                </MenuItem>\n\t\t\t\t                <MenuItem eventKey={3.3} onSelect={(e) => {this.props.showView('a')}}>\n\t\t\t\t                \t{this.props.view === 'a' ? 'X' : '' } Accounts\n\t\t\t\t                </MenuItem>\n\t\t\t\t                <MenuItem divider />\n\t\t\t\t                <MenuItem eventKey={3.4} onSelect={(e) => {this.props.showView('l')}}>\n\t\t\t\t                \t{this.props.view === 'l' ? 'X' : '' } Logs\n\t\t\t\t                </MenuItem>\n\t\t\t\t                \t{/*\n\t\t\t\t                <MenuItem divider />\n\t\t\t\t                <MenuItem eventKey={3.5}> Settings </MenuItem>*/}\n\t\t\t\t            </NavDropdown>\n\t\t\t\t        </Nav>\n\t\t\t\t        {/*\n\t\t\t\t        <Nav pullRight>\n\t\t\t\t            <NavItem eventKey={2} href=\"#\"> Logout </NavItem>\n\t\t\t\t        </Nav>*/}\n\t\t\t\t    </Navbar.Collapse>\n\t\t\t\t</Navbar>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nMenuBar.defaultProps = {\n\t\tview: 'main'\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        view: store.navi.view\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return ({\n        showView: (view) => {\n            dispatch(show_view(view))\n        }       \n    })\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(MenuBar)","import { axios_get } from './axios'\n\nconst PING_REQUEST = 'PING_REQUEST'\nconst PingRequestAction = () => {\n    return {\n        type: PING_REQUEST\n    }\n}\n\nconst PING_RESPONSE = 'PING_RESPONSE'\nconst PingResponseAction = (status) => {\n    return {\n        type: PING_RESPONSE,\n        payload: {\n            up: status\n        }\n    }\n}\n\nconst ping = () => (\n    (dispatch) => {\n        dispatch(PingRequestAction())\n        axios_get('ping?ts='+Date.now(),\n        \t\tresponse => {\n        \t\t\tdispatch(PingResponseAction(true))\n        \t\t},\n        \t\tdispatch\n        )\n    }\n )\n\nconst noping = () => (\n    (dispatch) => {\n\t\t\t\tdispatch(PingResponseAction(false))\n    }\n )\n\n    \n\n export {\n    ping,\n    noping\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux'\nimport { ping } from '../../actions/ping'\n\nclass Ping extends React.Component {\n    constructor(props) {\n        super(props)\n        this.timer = null\n    }\n    \n    componentDidMount() {\n        var f = () => {\n        \tthis.props.ping()\n        }\n        this.timer = setInterval(f, 5000)\n    }\n  \n    render() {\n    // Render nothing if the \"show\" prop is false\n    if(!this.props.show) {\n      return null;\n    }\n\n    // The gray background\n    const backdropStyle = {\n      position: 'fixed',\n      top: 0,\n      bottom: 0,\n      left: 0,\n      right: 0,\n      backgroundColor: 'rgba(0,0,0,0.3)',\n      padding: 50,\n      zIndex: 1000\n    };\n\n    // The modal \"window\"\n    const modalStyle = {\n      backgroundColor: '#fff',\n      borderRadius: 5,\n      maxWidth: 500,\n      minHeight: 300,\n      margin: '0 auto',\n      padding: 30\n    };\n\n    return (\n      <div style={backdropStyle} >\n        <div style={modalStyle} >\n        \tWaiting for service to be available...\n        </div>\n      </div>\n    );\n  }\n}\n\nPing.defaultProps = {\n\t\tshow: false\n}\n\nPing.propTypes = {\n  show: PropTypes.bool\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        show: (store.ping.length === 0 ? false : !store.ping.up)\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return ({\n        \"ping\": () => {\n            dispatch(ping())\n        }\n    })\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Ping)\n","import React from 'react' //  Main React library\nimport Content from './Content'\nimport ErrorMessage from './ErrorMessage'\nimport MenuBar from '../navi/MenuBar'\nimport Ping from '../ping/ping'\nimport { connect } from 'react-redux'\nimport { chart_today } from '../../actions/chart'\n//CHG-10 import { set_daterange } from '../../actions/daterange'\n\nclass Onassis extends React.Component{\n\tcomponentDidMount() {\n\t\t//this.props.setDateRange(addDays(new Date(),-10), addDays(new Date(),+10))\n\t\tthis.props.chartToday()\n\t}\n\n\trender(){\n\t    return (\n\t    \t<div>\n\t    \t <Ping />\n\t    \t <MenuBar />\n\t    \t <ErrorMessage />\n\t    \t <Content /> \n\t\t\t {/*\n\t\t\t\t<FooterInstance />\n\t\t\t*/}\n\t\t</div>\n\t    )\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return ({\n        chartToday: () => {\n            dispatch(chart_today())\n        }/* //CHG-10 ,\n        setDateRange: (start, end) => {\n            dispatch(set_daterange(start, end))\n        }*/\n    })\n}\n\nexport default connect(null, mapDispatchToProps)(Onassis)\n","import React from 'react' //  Main React library\nimport { render } from 'react-dom' //  Main react library\nimport { Provider } from 'react-redux' // Bridge React and Redux\nimport { createStore, applyMiddleware } from 'redux' //  Main Redux library\nimport thunk from 'redux-thunk'\n\n\n//import { MediaQueryProvider } from 'react-media-query-hoc';\n\n\n//import ReduxFormTutorial from './reduxFormTut'\n//import ExamplePage from './components/exampleForm3/ExamplePage'\n//import FormPage from './components/editpayments/FormPage'\n//import AddPage from './components/payments/add/AddPage'\n\n\n\n\nimport rootReducer from './reducers'\n\nimport Onassis  from './components/main/Onassis'\n\n\n//var FontAwesome = require('react-fontawesome');\n//import AddOne from './AddOne'\n//import ContactPageContainer from './ContactPageContainer'\n//import './index.css';\n//var jquery = require('jquery')\n\n\n//var store = createStore(rootReducer)\nvar store = createStore(rootReducer,\n\t\tapplyMiddleware(thunk))\n\t\t//,\t\twindow.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__())\n\n\nwindow.reduxStore = store\n\n/*\nrender(\n\t\t <MediaQueryProvider>\n\t\t \t<Provider store={store}>\n\t\t\t\t<Onassis />\t\n\t\t\t</Provider>\n\t\t </MediaQueryProvider>,\n  document.getElementById('root')\n);*/\n\t\t\t\t\t\t\n\t\t\t\t\t\t\nrender(\n\t\t \t<Provider store={store}>\n\t\t\t\t<Onassis />\t\n\t\t\t</Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}