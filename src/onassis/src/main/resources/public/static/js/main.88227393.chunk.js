(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{140:function(e,t,n){},245:function(e,t,n){e.exports=n(612)},287:function(e,t,n){},472:function(e,t,n){},534:function(e,t,n){},536:function(e,t,n){},539:function(e,t){var n={convert:function(e){return e.constructor===Date?e:e.constructor===Array?new Date(e[0],e[1],e[2]):e.constructor===Number?new Date(e):e.constructor===String?new Date(e):"object"===typeof e?new Date(e.year,e.month,e.date):NaN},compare:function(e,t){return isFinite(e=this.convert(e).valueOf())&&isFinite(t=this.convert(t).valueOf())?(e>t)-(e<t):NaN},inRange:function(e,t,n){return isFinite(e=this.convert(e).valueOf())&&isFinite(t=this.convert(t).valueOf())&&isFinite(n=this.convert(n).valueOf())?t<=e&&e<=n:NaN}};e.exports=n},560:function(e,t,n){},575:function(e,t,n){},586:function(e,t,n){},588:function(e,t,n){},591:function(e,t,n){},593:function(e,t,n){},595:function(e,t,n){},612:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(19),s=n(13),l=n(51),c=n(231),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PING_RESPONSE":return Object.assign({},e,{up:t.payload.up});default:return e}},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DATE_RANGE_SELECTED":return Object.assign({},e,{s:t.payload.s,e:t.payload.e});default:return e}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MINIBARS_REQUEST":return Object.assign({},e,{fetching:!0});case"MINIBARS_RESPONSE":return Object.assign({},e,{balances:t.payload.balances,fetching:!1});case"MINIBARS_REDRAW":return Object.assign({},e,{redraw:t.payload.redraw});default:return e}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHART_REQUEST":return Object.assign({},e,{fetching:!0});case"CHART_RESPONSE":return Object.assign({},e,{curves:t.payload.curves,fetching:!1});case"CHART_NEXTDAY":return Object.assign({},e,{nextday:t.payload.nextday});case"CHART_PREVDAY":return Object.assign({},e,{prevday:t.payload.prevday});case"CHART_TODAY":return Object.assign({},e,{today:t.payload.today});case"CHART_REDRAW":return Object.assign({},e,{redraw:t.payload.redraw});default:return e}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PIE_REQUEST":return Object.assign({},e,{fetching:!0});case"PIE_RESPONSE":return Object.assign({},e,{slices:t.payload.slices,fetching:!1});case"PIE_REDRAW":return Object.assign({},e,{redraw:t.payload.redraw});default:return e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PAYMENTS_REQUEST":case"PAYMENTS_UPDATE_REQUEST":return Object.assign({},e,{fetching:!0});case"PAYMENTS_RESPONSE":return Object.assign({},e,{fetching:!1,queryType:t.payload.queryType,params:t.payload.params,payments:t.payload.payments,balances:t.payload.balances,historystack:t.payload.historystack});default:return e}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOCK_PAYMENT_RESPONSE":return Object.assign({},e,{payment:t.payload.payment});case"LOCK_PAYMENT_REQUEST":return Object.assign({},e,{lock_payment_request:t.payload.lock_payment_request,locked:t.payload.locked});case"PAYMENT_SELECTION":return Object.assign({},e,{payments:t.payload.payments});default:return e}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONSTANTS_REFRESH":return Object.assign({},e,{refreshTime:t.payload.refreshTime,constants:t.payload.constants});default:return e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ACCOUNTS_REQUEST":return Object.assign({},e,{fetching:!0});case"ACCOUNTS_RESPONSE":return Object.assign({},e,{fetching:!1,accounts:t.payload.accounts});default:return e}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CATEGORIES_REQUEST":return Object.assign({},e,{fetching:!0});case"CATEGORIES_RESPONSE":return Object.assign({},e,{fetching:!1,categories:t.payload.categories});default:return e}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_VIEW":return Object.assign({},e,{view:t.payload.view});default:return e}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUDITLOG_REQUEST":return Object.assign({},e,{fetching:!0});case"AUDITLOG_RESPONSE":return Object.assign({},e,{fetching:!1,logentries:t.payload.logentries,firstpage:t.payload.firstpage,lastpage:t.payload.lastpage});default:return e}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_ERROR":return Object.assign({},e,{status:t.payload.status,msg:t.payload.msg,when:t.payload.when});default:return e}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_GROUP_REQUEST":return Object.assign({},e,{fetching:!0});case"NEW_GROUP_RESPONSE":return Object.assign({},e,{fetching:!1,g:t.payload.g});default:return e}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CALC_ADD_REQUEST":return Object.assign({},e,{p:t.payload.p,ts:Date.now()});default:return e}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEXTDAY":return Object.assign({},e,{nextday:t.payload.nextday});case"PREVDAY":return Object.assign({},e,{prevday:t.payload.prevday});case"TODAY":return Object.assign({},e,{today:t.payload.today});default:return e}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"VERSIONINFO_RESPONSE":return Object.assign({},e,{version:t.payload.version});default:return e}},w=Object(l.combineReducers)({ping:o,daterange:u,minibars:d,chart:h,pie:p,payments:f,payment:m,constants:b,accounts:y,categories:v,navi:g,auditlog:O,errorMessage:E,group:j,calculator:k,day:C,versionInfo:x}),_=n(5),R=n(6),T=n(9),S=n(7),F=n(8),D=n(232),N=n.n(D),P=n(621),V=n(18),A=n(1),I=n(146),M=n(613),L=n(54),H=n.n(L),U=function(e,t){return function(n){n(function(e,t,n){return{type:"SHOW_ERROR",payload:{status:e,msg:t,when:n}}}(e,t,Date.now()))}},Y=function(e,t){e.response&&e.response.data?t(U(e.response.status,e.response.data.error_message)):t(U("not known",e.message))};var B="http://"+function(e){var t=document.createElement("a");return t.href=e,t}(document.URL).hostname+":8080/";function W(e,t){return e+"?"+(null==t?"":t+"&")+"ts="+Date.now()}function z(e,t,n,a){var r=W(e,t);H.a.get(B+r).then(n).catch(function(e){Y(e,a)})}function q(e,t,n,a){var r=W(e,null);H.a.get(B+r,t).then(n).catch(function(e){Y(e,a)})}function G(e,t,n,a){H.a.post(B+e,t).then(n).catch(function(e){Y(e,a)})}n(152),n(233);var Q=n(153),K=n.n(Q),J=function(e){return{type:"CONSTANTS_REFRESH",payload:{refreshTime:(new Date).getTime(),constants:e}}},X={},Z={},$=function(e,t){X[e]=null,Z[e]=null,ee(e,t)};var ee=function(e,t){if(X[e]||Z[e])return X[e]?(t(J(X)),null):null;Z[e]=!0,K()("GET",B+"constants?id="+e+"&ts="+Date.now()).done(function(n){var a=JSON.parse(n.getBody("utf8"));X[e]=a,t(J(X))})},te=function(e){return function(t){t(function(e){return{type:"CATEGORIES_UPDATE_REQUEST",payload:{updates:e}}}(e)),G("cat/update",e,function(e){t({type:"CATEGORIES_UPDATE_RESPONSE"}),t(ne()),$("cat",t)},t)}},ne=function(){return function(e){e({type:"CATEGORIES_REQUEST"}),z("cat/list",null,function(t){e({type:"CATEGORIES_RESPONSE",payload:{categories:t.data}})},e)}},ae=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).state={currencyValue:e.value},n.onChange=n.onChange.bind(Object(A.a)(Object(A.a)(n))),n.handleFocus=n.handleFocus.bind(Object(A.a)(Object(A.a)(n))),n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"handleFocus",value:function(e){e.target.select()}},{key:"onChange",value:function(e){var t=this.props,n=t.onValueChanged,a=t.field,r=t.index,i=function(e){if(!e)return e;"-"!==e&&"+"!==e||(e+="0");var t=e.lastIndexOf("+"),n=e.lastIndexOf("-");return""===(e=e.replace(/[^\d]/g,""))&&(e="0"),(e=""+parseInt(e,10)).length<3&&(e="00".slice(-3+e.length)+e),(t>=n?"+":"-")+e.slice(0,-2)+"."+e.slice(-2)}(e.target.value);this.setState({currencyValue:i}),n(i,a,r)}},{key:"componentWillReceiveProps",value:function(e){this.setState({currencyValue:e.value})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.readOnly,a=e.placeholder,i=e.touched,s=e.fontSize;return r.a.createElement("div",null,r.a.createElement("input",{autoFocus:!0,onFocus:this.handleFocus,autoComplete:"off",id:t,disabled:n,value:this.state.currencyValue,onChange:this.onChange,placeholder:n?"":a,type:"text",className:"form-control",style:{fontSize:s,textAlign:"right",color:this.state.currencyValue&&"-"===this.state.currencyValue.substr(0,1)?"red":"green",display:"inline",width:"85px",backgroundColor:i?"lightyellow":""}}))}}]),t}(r.a.Component);ae.defaultProps={id:null,onValueChanged:null,placeholder:"",value:"",readOnly:!1,field:null,index:null,touched:!1,fontSize:"inherit"};var re=ae,ie=(n(287),function(e){function t(){return Object(_.a)(this,t),Object(T.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.readOnly,a=e.field,i=e.index,s=e.onValueChanged,l=e.touched,c=e.checked;return r.a.createElement("div",null,r.a.createElement("span",{style:{display:"flex",width:"20px"}},r.a.createElement("div",null,r.a.createElement("input",{name:t,type:"checkbox",disabled:n,id:t,checked:c,onChange:function(e){return s(e.target.checked,a,i)},style:n?{backgroundColor:"lightgray",borderColor:"lightgray"}:l?{backgroundColor:"darkKhaki",borderColor:"darkKhaki"}:{}}))))}}]),t}(r.a.Component));ie.defaultProps={id:null,onValueChanged:null,checked:!0,readOnly:!1,field:null,index:null,touched:!1};var se=ie,le=n(25),ce=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).state={txtValue:e.value},n.onChange=n.onChange.bind(Object(A.a)(Object(A.a)(n))),n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"onChange",value:function(e){var t=this.props,n=t.onValueChanged,a=t.field,r=t.index;this.setState({txtValue:e.target.value}),n(e.target.value,a,r)}},{key:"componentWillReceiveProps",value:function(e){this.setState({txtValue:e.value})}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,a=t.placeholder,i=t.readOnly,s=t.touched,l=t.linkCb,c=t.maxLength,o=l&&this.state.txtValue&&this.state.txtValue.length>0?r.a.createElement(I.a,{bsSize:"small",onClick:function(){l(e.state.txtValue)}},r.a.createElement(le,{name:"caret-right"})):null;return r.a.createElement("div",null,r.a.createElement("span",{style:{display:"inline-flex"}},r.a.createElement("input",{maxLength:c,id:n,value:this.state.txtValue,disabled:i,style:{backgroundColor:s?"lightyellow":""},placeholder:i?"":a,type:"text",autoComplete:"off",onChange:this.onChange,className:"form-control"}),o))}}]),t}(r.a.Component);ce.defaultProps={id:null,placeholder:"",onValueChanged:null,value:"",readOnly:!1,field:null,index:null,touched:!1,linkCb:null,maxLength:255};var oe=ce,ue=n(15),de=n.n(ue),he=n(236),pe=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).handleClick=function(){n.props.readOnly||n.setState({displayColorPicker:!n.state.displayColorPicker})},n.handleClose=function(){n.setState({displayColorPicker:!1})},n.handleChange=function(e){var t=n.props,a=t.onValueChanged,r=t.field,i=t.index;n.setState({color:e.hex,displayColorPicker:!n.state.displayColorPicker}),a(e.hex,r,i)},n.state={displayColorPicker:!1,color:e.color},n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({color:e.color})}},{key:"render",value:function(){var e=de()({default:{color:{width:"28px",height:"24px",borderRadius:"4px",background:this.state.color},swatch:{padding:"5px",background:this.props.touched?"lightyellow":"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,"+(this.props.readOnly?"0":".1")+")",display:"inline-block",cursor:this.props.readOnly?"":"pointer"},popover:{position:"relative",zIndex:"2"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}}});return r.a.createElement("div",null,r.a.createElement("div",{style:e.swatch,onClick:this.handleClick},r.a.createElement("div",{style:e.color})),this.state.displayColorPicker?r.a.createElement("div",{style:e.popover},r.a.createElement("div",{style:e.cover,onClick:this.handleClose}),r.a.createElement(he.SketchPicker,{color:this.state.color,onChange:this.handleChange})):null)}}]),t}(r.a.Component);pe.defaultProps={id:null,onValueChanged:null,color:"red",readOnly:!1,field:null,index:null,touched:!1};var fe=pe,me=(n(472),n(140),n(41)),be=n.n(me),ye={offset:14,position:"bottom right",theme:"light",time:5e3,transition:"scale"};var ve=function(e){return parseFloat(Math.round(100*e)/100).toFixed(2)},ge=["color","descr","i","active"],Oe={id:null,i:"+0.00",active:!0,descr:"",color:"blue"},Ee={i:function(e){return null},active:function(e){return null},descr:function(e){return""!==e?null:"required"},color:function(e){return""!==e?null:"required"}};function je(e){var t=function(e){var t=[];return e.forEach(function(e){t.push(xe(e))}),t}(e);return t.forEach(function(e){e.i=(e.i>=0?"+":"")+ve(e.i)}),t}function ke(e){return e.forEach(function(e){e.i&&(e.i=parseFloat(e.i))}),e}function Ce(e){return{id:e,i:e,active:e,descr:e,color:e}}function xe(e){return{index:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,id:e.id,i:e.i,active:e.active,descr:e.descr,color:e.color}}function we(e){var t={values:[],initial:[],errors:[],touched:[],deleted:[],sort:null,asc:!0};return e.forEach(function(e,n){t.values.push(xe(e,n)),t.initial.push(xe(e)),t.errors.push(Ce(null)),t.touched.push(Ce(!1)),t.deleted.push(!1)}),t}function _e(e){return e.splice(0)}var Re=n(25),Te=-1,Se=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).renderCategoriesT=function(){return n.sortedValues=n.state.values.slice(0),n.state.sort&&n.sortedValues.sort(n.sortersF()),r.a.createElement("div",null,r.a.createElement(P.a,{id:"accs-panel"},r.a.createElement(P.a.Heading,null,r.a.createElement(P.a.Title,null,r.a.createElement(I.a,{onClick:function(){return n.resetT()},disabled:n.pristine,bsStyle:n.pristine?"default":"primary"},"Reset"),r.a.createElement(I.a,{onClick:function(){return n.preSubmitT()},disabled:n.pristine||null!=n.errors,bsStyle:n.pristine?"default":"primary"},"Save"),r.a.createElement(I.a,{onClick:function(){return n.addR()}},"Add"))),r.a.createElement(P.a.Body,null,r.a.createElement(M.a,{id:"categories_table",striped:!0,bordered:!0,hover:!0,condensed:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:n.thClassName("color")}),n.th("descr","Name"),n.th("active","Active"),r.a.createElement("th",{className:n.thClassName("deleted")},r.a.createElement(Re,{name:"trash",size:"lg"})))),r.a.createElement("tbody",null,n.sortedValues.map(function(e){return n.renderCategoryR(e.index)}))))))},n.showOk=n.showOk.bind(Object(A.a)(Object(A.a)(n))),n.changePropertyF=n.changePropertyF.bind(Object(A.a)(Object(A.a)(n))),n.changePropertyDeletedF=n.changePropertyDeletedF.bind(Object(A.a)(Object(A.a)(n))),n.setValueF=n.setValueF.bind(Object(A.a)(Object(A.a)(n))),n.validateF=n.validateF.bind(Object(A.a)(Object(A.a)(n))),n.touchedF=n.touchedF.bind(Object(A.a)(Object(A.a)(n))),n.isDifferentFromInitialF=n.isDifferentFromInitialF.bind(Object(A.a)(Object(A.a)(n))),n.chooseValueF=n.chooseValueF.bind(Object(A.a)(Object(A.a)(n))),n.renderContentF=n.renderContentF.bind(Object(A.a)(Object(A.a)(n))),n.renderDeletedContentF=n.renderDeletedContentF.bind(Object(A.a)(Object(A.a)(n))),n.setSortF=n.setSortF.bind(Object(A.a)(Object(A.a)(n))),n.sortersF=n.sortersF.bind(Object(A.a)(Object(A.a)(n))),n.addR=n.addR.bind(Object(A.a)(Object(A.a)(n))),n.getDefaultR=n.getDefaultR.bind(Object(A.a)(Object(A.a)(n))),n.removeR=n.removeR.bind(Object(A.a)(Object(A.a)(n))),n.validateR=n.validateR.bind(Object(A.a)(Object(A.a)(n))),n.readOnlyR=n.readOnlyR.bind(Object(A.a)(Object(A.a)(n))),n.isPersistedR=n.isPersistedR.bind(Object(A.a)(Object(A.a)(n))),n.renderCategoryR=n.renderCategoryR.bind(Object(A.a)(Object(A.a)(n))),n.resetT=n.resetT.bind(Object(A.a)(Object(A.a)(n))),n.isPristineT=n.isPristineT.bind(Object(A.a)(Object(A.a)(n))),n.hasErrorsT=n.hasErrorsT.bind(Object(A.a)(Object(A.a)(n))),n.preInitT=n.preInitT.bind(Object(A.a)(Object(A.a)(n))),n.preSubmitT=n.preSubmitT.bind(Object(A.a)(Object(A.a)(n))),n.init=n.init.bind(Object(A.a)(Object(A.a)(n))),n.renderCategoriesT=n.renderCategoriesT.bind(Object(A.a)(Object(A.a)(n))),n.tdClassName=n.tdClassName.bind(Object(A.a)(Object(A.a)(n))),n.td=n.td.bind(Object(A.a)(Object(A.a)(n))),n.thClassName=n.thClassName.bind(Object(A.a)(Object(A.a)(n))),n.th=n.th.bind(Object(A.a)(Object(A.a)(n))),n.init(),n.state=Object(V.a)({},we(n.preInitT(e.initCategories))),n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"changePropertyF",value:function(e,t,n){if(this.isPersistedR(n)){var a=_e(this.state.touched);a[n][t]=this.isDifferentFromInitialF(e,t,n),this.setState({touched:a})}this.validateF(t,e,n),this.setValueF(e,t,n)}},{key:"changePropertyDeletedF",value:function(e,t,n){if(this.isPersistedR(n)){this.deleteCount+=e?1:-1;var a=_e(this.state.deleted);a[n]=e,this.setState({deleted:a})}else this.removeR(n)}},{key:"setValueF",value:function(e,t,n){var a=_e(this.state.values);a[n][t]=e,this.setState({values:a})}},{key:"validateF",value:function(e,t,n){var a=this.state.errors[n][e];if(Ee[e](t)!==a){var r=_e(this.state.errors);r[n][e]=Ee[e](t),this.setState({errors:r})}}},{key:"touchedF",value:function(e,t){return!(e<0)&&(!this.state.deleted[e]&&(!!this.isPersistedR(e)&&this.state.touched[e][t]))}},{key:"isDifferentFromInitialF",value:function(e,t,n){return e!==this.state.initial[n][t]}},{key:"chooseValueF",value:function(e,t){return this.state.deleted[e]?this.state.initial[e][t]:this.state.values[e][t]}},{key:"renderContentF",value:function(e,t){var n,a=this.chooseValueF(t,e);switch(e){case"i":return r.a.createElement("div",null,r.a.createElement(re,{id:"icat_"+t,onValueChanged:this.changePropertyF,placeholder:"amount",value:a,readOnly:this.readOnlyR(t,"i"),field:"i",index:t,touched:this.touchedF(t,"i")}));case"active":return r.a.createElement("div",null,r.a.createElement(se,{id:"activecat_"+t,onValueChanged:this.changePropertyF,checked:a,readOnly:this.isPersistedR(t)&&(n=this.state.touched[t],n.i||n.descr||n.color),field:"active",index:t,touched:this.touchedF(t,"active")}));case"descr":return r.a.createElement("div",null,r.a.createElement(oe,{id:"descrcat_"+t,onValueChanged:this.changePropertyF,value:a,readOnly:this.readOnlyR(t,"descr"),field:"descr",index:t,touched:this.touchedF(t,"descr"),placeholder:"name",maxLength:30}));case"color":return r.a.createElement("div",null,r.a.createElement(fe,{id:"colorcat_"+t,onValueChanged:this.changePropertyF,color:a,readOnly:this.readOnlyR(t,"color"),field:"color",index:t,touched:this.touchedF(t,"color")}));default:return console.log("UNKONWN field: "+e),null}}},{key:"renderDeletedContentF",value:function(e){var t=this;if(!this.isPersistedR(e))return r.a.createElement("button",{type:"button",className:"form-control",onClick:function(){return t.changePropertyDeletedF(!0,"deleted",e)}},r.a.createElement(Re,{name:"remove",style:{color:"red"}}))}},{key:"setSortF",value:function(e){this.state.sort&&this.state.sort===e?this.state.sort===e&&this.state.asc?this.setState({asc:!1}):this.setState({sort:null}):this.setState({sort:e,asc:!0})}},{key:"sortersF",value:function(){var e=this,t=this.state.asc?-1:1;switch(this.state.sort){case"i":return function(n,a){return t*(e.chooseValueF(a.index,e.state.sort)-e.chooseValueF(n.index,e.state.sort))};case"descr":return function(n,a){var r=e.chooseValueF(n.index,"descr").toUpperCase(),i=e.chooseValueF(a.index,"descr").toUpperCase();return t*(r<i?-1:r>i?1:0)};case"active":return function(e,n){return t*(e.active&&n.active?0:e.active?1:-1)};default:return function(e,t){return 0}}}},{key:"addR",value:function(){var e=this.getDefaultR(),t=_e(this.state.values);t.push(e),this.sortedValues.push(e);var n=_e(this.state.errors);n.push(this.validateR(e)),this.setState({values:t,errors:n})}},{key:"getDefaultR",value:function(){var e=Oe;this.sortedValues.length&&(e=this.sortedValues[this.sortedValues.length-1]);var t=Object(V.a)({},e);return t.index=this.state.values.length,t.id=Te--,t.l=!1,t.check=!1,t}},{key:"removeR",value:function(e){this.state.values.splice(e,1);var t=_e(this.state.values);this.state.errors.splice(e,1);for(var n=_e(this.state.errors),a=e;a<t.length;a++)t[a].index--,n[a].index--;this.setState({values:t,errors:n})}},{key:"validateR",value:function(e){var t={};return ge.forEach(function(n){t[n]=Ee[n](e[n])}),t}},{key:"readOnlyR",value:function(e,t){return this.state.deleted[e]||!this.state.values[e].active&&this.isPersistedR(e)}},{key:"isPersistedR",value:function(e){return this.state.values[e].id>=0}},{key:"renderCategoryR",value:function(e){var t=this;return r.a.createElement("tr",{key:e},["color","descr","active"].map(function(n){return t.td(e,n)}),r.a.createElement("td",{className:this.tdClassName(e,"deleted")},this.renderDeletedContentF(e)))}},{key:"resetT",value:function(){var e=we(this.state.initial);this.setState(Object(V.a)({},e)),this.init()}},{key:"isPristineT",value:function(){var e=!0;return this.state.touched.forEach(function(t){ge.forEach(function(n){e=e&&!t[n]})}),e&&this.state.initial.length===this.state.values.length&&!this.deleteCount}},{key:"hasErrorsT",value:function(){var e=!1;return this.state.errors.forEach(function(t){var n;e=e||((n=t).i||n.active||n.descr||n.color)}),e}},{key:"preInitT",value:function(e){return je(e)}},{key:"showOk",value:function(){this.msg.show("SAVED SUCCESSFULLY",{time:2e3,type:"success",icon:r.a.createElement("img",{src:"yes.png",alt:"save ok"})})}},{key:"preSubmitT",value:function(){var e=this,t=[];this.state.values.forEach(function(n,a){if(!e.isPersistedR(a)){var r={};ge.forEach(function(t){r[t]=e.chooseValueF(a,t)}),t.push(r)}});var n=[];this.state.deleted.forEach(function(t,a){t&&n.push(e.state.values[a].id)});var a=[];this.state.values.forEach(function(t,n){if(e.isPersistedR(n)){var r={};ge.forEach(function(a){e.touchedF(n,a)&&(r.id=t.id,r[a]=e.chooseValueF(n,a))}),Object.keys(r).length>0&&a.push(r)}});var r={created:ke(t),deleted:n,modified:ke(a)};console.log(JSON.stringify(r,null,4)),this.pristine=null,this.props.update(r)}},{key:"init",value:function(){this.deleteCount=0,this.pristine=null,this.errors=null,this.allChecked=!1}},{key:"tdClassName",value:function(e,t){return t+"_cell"+(this.isPersistedR(e)?"":" newRow")+(this.state.deleted[e]?" deleted":"")+(this.state.errors[e][t]?" error":"")}},{key:"td",value:function(e,t){return r.a.createElement("td",{key:e+"_"+t,className:this.tdClassName(e,t)},this.renderContentF(t,e))}},{key:"thClassName",value:function(e){return e+"_header"}},{key:"th",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=r.a.createElement(Re,{name:this.state.asc?"sort-asc":"sort-desc"}),i=r.a.createElement("div",null,this.state.sort===e?a:""),s=r.a.createElement("div",{style:{marginTop:8}},r.a.createElement("button",{type:"button",className:"link-button",onClick:function(){t.setSortF(e)}},n));return r.a.createElement("th",{className:this.thClassName(e)},r.a.createElement("div",null,r.a.createElement("span",{style:{display:"flex"}},r.a.createElement("div",{style:{marginTop:8,paddingRight:3}},i),null!==n?s:"")))}},{key:"componentWillReceiveProps",value:function(e){this.isPristineT()||null!=this.pristine||this.showOk(),this.init(),this.setState(Object(V.a)({},we(this.preInitT(e.initCategories))))}},{key:"render",value:function(){var e=this;return this.pristine=this.isPristineT(),this.errors=this.hasErrorsT(),r.a.createElement("div",null,r.a.createElement(be.a,Object.assign({ref:function(t){return e.msg=t}},ye)),this.renderCategoriesT())}}]),t}(r.a.Component);Se.defaultProps={initCategories:[]};var Fe=Object(s.b)(null,function(e){return{update:function(t){e(te(t))}}})(Se),De=function(e){function t(){return Object(_.a)(this,t),Object(T.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(P.a,null,r.a.createElement(P.a.Heading,{style:{paddingTop:"4px",paddingBottom:"3px",height:"45px",fontSize:"23px"}},r.a.createElement("span",{style:{display:"flow-root",alignItems:"center"}},"Issues")),r.a.createElement(P.a.Body,null,r.a.createElement(Fe,{initCategories:this.props.categories}))))}}]),t}(r.a.Component),Ne=Object(s.b)(function(e){return{categories:e.categories.categories}})(De),Pe=n(33),Ve=function(e,t){return{type:"CHART_REQUEST",payload:{s:e,e:t}}},Ae=function(e){return{type:"CHART_RESPONSE",payload:{curves:e}}},Ie=null;function Me(e){e(Ve(Ie.s,Ie.e)),q("chart",{params:Ie},function(t){e(Ae(t.data))},e)}var Le=function(e,t){return function(n){Ie={s:Pe(e,"yyyy-mm-dd"),e:Pe(t,"yyyy-mm-dd")},Me(n)}},He=function(){return function(e){console.assert(Ie),Me(e)}},Ue=function(){return function(e){e({type:"CHART_REDRAW",payload:{redraw:(new Date).getTime()}})}},Ye=function(e){return function(t){t(function(e){return{type:"ACCOUNTS_UPDATE_REQUEST",payload:{updates:e}}}(e)),G("acc/update",e,function(e){t({type:"ACCOUNTS_UPDATE_RESPONSE"}),t(Be()),$("acc",t),t(He())},t)}},Be=function(){return function(e){e({type:"ACCOUNTS_REQUEST"}),z("acc/list",null,function(t){e({type:"ACCOUNTS_RESPONSE",payload:{accounts:t.data}})},e)}},We=(n(534),["color","descr","credit","active"]),ze={id:null,credit:0,active:!0,descr:"",color:"blue"},qe={credit:function(e){return null},active:function(e){return null},descr:function(e){return""!==e?null:"required"},color:function(e){return""!==e?null:"required"}};function Ge(e){return function(e){var t=[];return e.forEach(function(e){t.push(Je(e))}),t}(e)}function Qe(e){return e}function Ke(e){return{id:e,credit:e,active:e,descr:e,color:e}}function Je(e){return{index:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,id:e.id,credit:e.credit,active:e.active,descr:e.descr,color:e.color}}function Xe(e){var t={values:[],initial:[],errors:[],touched:[],deleted:[],sort:null,asc:!0};return e.forEach(function(e,n){t.values.push(Je(e,n)),t.initial.push(Je(e)),t.errors.push(Ke(null)),t.touched.push(Ke(!1)),t.deleted.push(!1)}),t}function Ze(e){return e.splice(0)}var $e=n(25),et=-1,tt=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).renderAccountsT=function(){return n.sortedValues=n.state.values.slice(0),n.state.sort&&n.sortedValues.sort(n.sortersF()),r.a.createElement("div",null,r.a.createElement(P.a,{id:"accs-panel"},r.a.createElement(P.a.Heading,null,r.a.createElement(P.a.Title,null,r.a.createElement(I.a,{onClick:function(){return n.resetT()},disabled:n.pristine,bsStyle:n.pristine?"default":"primary"},"Reset"),r.a.createElement(I.a,{onClick:function(){return n.preSubmitT()},disabled:n.pristine||null!=n.errors,bsStyle:n.pristine?"default":"primary"},"Save"),r.a.createElement(I.a,{onClick:function(){return n.addR()}},"Add"))),r.a.createElement(P.a.Body,null,r.a.createElement(M.a,{id:"accounts_table",striped:!0,bordered:!0,hover:!0,condensed:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:n.thClassName("color")}),n.th("descr","Name"),n.th("active","Active"),r.a.createElement("th",{className:n.thClassName("deleted")},r.a.createElement($e,{name:"trash",size:"lg"})))),r.a.createElement("tbody",null,n.sortedValues.map(function(e){return n.renderAccountR(e.index)}))))))},n.showOk=n.showOk.bind(Object(A.a)(Object(A.a)(n))),n.changePropertyF=n.changePropertyF.bind(Object(A.a)(Object(A.a)(n))),n.changePropertyDeletedF=n.changePropertyDeletedF.bind(Object(A.a)(Object(A.a)(n))),n.setValueF=n.setValueF.bind(Object(A.a)(Object(A.a)(n))),n.validateF=n.validateF.bind(Object(A.a)(Object(A.a)(n))),n.touchedF=n.touchedF.bind(Object(A.a)(Object(A.a)(n))),n.isDifferentFromInitialF=n.isDifferentFromInitialF.bind(Object(A.a)(Object(A.a)(n))),n.chooseValueF=n.chooseValueF.bind(Object(A.a)(Object(A.a)(n))),n.renderContentF=n.renderContentF.bind(Object(A.a)(Object(A.a)(n))),n.renderDeletedContentF=n.renderDeletedContentF.bind(Object(A.a)(Object(A.a)(n))),n.setSortF=n.setSortF.bind(Object(A.a)(Object(A.a)(n))),n.sortersF=n.sortersF.bind(Object(A.a)(Object(A.a)(n))),n.addR=n.addR.bind(Object(A.a)(Object(A.a)(n))),n.getDefaultR=n.getDefaultR.bind(Object(A.a)(Object(A.a)(n))),n.removeR=n.removeR.bind(Object(A.a)(Object(A.a)(n))),n.validateR=n.validateR.bind(Object(A.a)(Object(A.a)(n))),n.readOnlyR=n.readOnlyR.bind(Object(A.a)(Object(A.a)(n))),n.isPersistedR=n.isPersistedR.bind(Object(A.a)(Object(A.a)(n))),n.renderAccountR=n.renderAccountR.bind(Object(A.a)(Object(A.a)(n))),n.resetT=n.resetT.bind(Object(A.a)(Object(A.a)(n))),n.isPristineT=n.isPristineT.bind(Object(A.a)(Object(A.a)(n))),n.hasErrorsT=n.hasErrorsT.bind(Object(A.a)(Object(A.a)(n))),n.preInitT=n.preInitT.bind(Object(A.a)(Object(A.a)(n))),n.preSubmitT=n.preSubmitT.bind(Object(A.a)(Object(A.a)(n))),n.init=n.init.bind(Object(A.a)(Object(A.a)(n))),n.renderAccountsT=n.renderAccountsT.bind(Object(A.a)(Object(A.a)(n))),n.tdClassName=n.tdClassName.bind(Object(A.a)(Object(A.a)(n))),n.td=n.td.bind(Object(A.a)(Object(A.a)(n))),n.thClassName=n.thClassName.bind(Object(A.a)(Object(A.a)(n))),n.th=n.th.bind(Object(A.a)(Object(A.a)(n))),n.init(),n.state=Object(V.a)({},Xe(n.preInitT(e.initAccounts))),n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"changePropertyF",value:function(e,t,n){if(this.isPersistedR(n)){var a=Ze(this.state.touched);a[n][t]=this.isDifferentFromInitialF(e,t,n),this.setState({touched:a})}this.validateF(t,e,n),this.setValueF(e,t,n)}},{key:"changePropertyDeletedF",value:function(e,t,n){if(this.isPersistedR(n)){this.deleteCount+=e?1:-1;var a=Ze(this.state.deleted);a[n]=e,this.setState({deleted:a})}else this.removeR(n)}},{key:"setValueF",value:function(e,t,n){var a=Ze(this.state.values);a[n][t]=e,this.setState({values:a})}},{key:"validateF",value:function(e,t,n){var a=this.state.errors[n][e];if(qe[e](t)!==a){var r=Ze(this.state.errors);r[n][e]=qe[e](t),this.setState({errors:r})}}},{key:"touchedF",value:function(e,t){return!(e<0)&&(!this.state.deleted[e]&&(!!this.isPersistedR(e)&&this.state.touched[e][t]))}},{key:"isDifferentFromInitialF",value:function(e,t,n){return e!==this.state.initial[n][t]}},{key:"chooseValueF",value:function(e,t){return this.state.deleted[e]?this.state.initial[e][t]:this.state.values[e][t]}},{key:"renderContentF",value:function(e,t){var n,a=this.chooseValueF(t,e);switch(e){case"credit":return r.a.createElement("div",null,r.a.createElement(se,{id:"creditacc_"+t,onValueChanged:this.changePropertyF,checked:a,readOnly:this.readOnlyR(t,"credit"),field:"credit",index:t,touched:this.touchedF(t,"credit")}));case"active":return r.a.createElement("div",null,r.a.createElement(se,{id:"activeacc_"+t,onValueChanged:this.changePropertyF,checked:a,readOnly:this.isPersistedR(t)&&(n=this.state.touched[t],n.credit||n.descr||n.color),field:"active",index:t,touched:this.touchedF(t,"active")}));case"descr":return r.a.createElement("div",null,r.a.createElement(oe,{id:"descracc_"+t,onValueChanged:this.changePropertyF,value:a,readOnly:this.readOnlyR(t,"descr"),field:"descr",index:t,touched:this.touchedF(t,"descr"),placeholder:"name",maxLength:30}));case"color":return r.a.createElement("div",null,r.a.createElement(fe,{id:"coloracc_"+t,onValueChanged:this.changePropertyF,color:a,readOnly:this.readOnlyR(t,"color"),field:"color",index:t,touched:this.touchedF(t,"color")}));default:return console.log("UNKONWN field: "+e),null}}},{key:"renderDeletedContentF",value:function(e){var t=this;if(!this.isPersistedR(e))return r.a.createElement("button",{type:"button",className:"form-control",onClick:function(){return t.changePropertyDeletedF(!0,"deleted",e)}},r.a.createElement($e,{name:"remove",style:{color:"red"}}))}},{key:"setSortF",value:function(e){this.state.sort&&this.state.sort===e?this.state.sort===e&&this.state.asc?this.setState({asc:!1}):this.setState({sort:null}):this.setState({sort:e,asc:!0})}},{key:"sortersF",value:function(){var e=this,t=this.state.asc?-1:1;switch(this.state.sort){case"i":return function(n,a){return t*(e.chooseValueF(a.index,e.state.sort)-e.chooseValueF(n.index,e.state.sort))};case"descr":return function(n,a){var r=e.chooseValueF(n.index,"descr").toUpperCase(),i=e.chooseValueF(a.index,"descr").toUpperCase();return t*(r<i?-1:r>i?1:0)};case"credit":return function(e,n){return t*(e.credit&&n.credit?0:e.credit?1:-1)};case"active":return function(e,n){return t*(e.active&&n.active?0:e.active?1:-1)};default:return function(e,t){return 0}}}},{key:"addR",value:function(){var e=this.getDefaultR(),t=Ze(this.state.values);t.push(e),this.sortedValues.push(e);var n=Ze(this.state.errors);n.push(this.validateR(e)),this.setState({values:t,errors:n})}},{key:"getDefaultR",value:function(){var e=ze;this.sortedValues.length&&(e=this.sortedValues[this.sortedValues.length-1]);var t=Object(V.a)({},e);return t.index=this.state.values.length,t.id=et--,t.l=!1,t.check=!1,t}},{key:"removeR",value:function(e){this.state.values.splice(e,1);var t=Ze(this.state.values);this.state.errors.splice(e,1);for(var n=Ze(this.state.errors),a=e;a<t.length;a++)t[a].index--,n[a].index--;this.setState({values:t,errors:n})}},{key:"validateR",value:function(e){var t={};return We.forEach(function(n){t[n]=qe[n](e[n])}),t}},{key:"readOnlyR",value:function(e,t){return this.state.deleted[e]||!this.state.values[e].active&&this.isPersistedR(e)}},{key:"isPersistedR",value:function(e){return this.state.values[e].id>=0}},{key:"renderAccountR",value:function(e){var t=this;return r.a.createElement("tr",{key:e},["color","descr","active"].map(function(n){return t.td(e,n)}),r.a.createElement("td",{className:this.tdClassName(e,"deleted")},this.renderDeletedContentF(e)))}},{key:"resetT",value:function(){var e=Xe(this.state.initial);this.setState(Object(V.a)({},e)),this.init()}},{key:"isPristineT",value:function(){var e=!0;return this.state.touched.forEach(function(t){We.forEach(function(n){e=e&&!t[n]})}),e&&this.state.initial.length===this.state.values.length&&!this.deleteCount}},{key:"hasErrorsT",value:function(){var e=!1;return this.state.errors.forEach(function(t){var n;e=e||((n=t).credit||n.active||n.descr||n.color)}),e}},{key:"preInitT",value:function(e){return Ge(e)}},{key:"showOk",value:function(){this.msg.show("SAVED SUCCESSFULLY",{time:2e3,type:"success",icon:r.a.createElement("img",{src:"yes.png",alt:"save ok"})})}},{key:"preSubmitT",value:function(){var e=this,t=[];this.state.values.forEach(function(n,a){if(!e.isPersistedR(a)){var r={};We.forEach(function(t){r[t]=e.chooseValueF(a,t)}),t.push(r)}});var n=[];this.state.deleted.forEach(function(t,a){t&&n.push(e.state.values[a].id)});var a=[];this.state.values.forEach(function(t,n){if(e.isPersistedR(n)){var r={};We.forEach(function(a){e.touchedF(n,a)&&(r.id=t.id,r[a]=e.chooseValueF(n,a))}),Object.keys(r).length>0&&a.push(r)}});var r={created:Qe(t),deleted:n,modified:Qe(a)};this.pristine=null,this.props.update(r)}},{key:"init",value:function(){this.deleteCount=0,this.pristine=null,this.errors=null,this.allChecked=!1}},{key:"tdClassName",value:function(e,t){return t+"_cell"+(this.isPersistedR(e)?"":" newRow")+(this.state.deleted[e]?" deleted":"")+(this.state.errors[e][t]?" error":"")}},{key:"td",value:function(e,t){return r.a.createElement("td",{key:e+"_"+t,className:this.tdClassName(e,t)},this.renderContentF(t,e))}},{key:"thClassName",value:function(e){return e+"_header"}},{key:"th",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=r.a.createElement($e,{name:this.state.asc?"sort-asc":"sort-desc"}),i=r.a.createElement("div",null,this.state.sort===e?a:""),s=r.a.createElement("div",{style:{marginTop:8}},r.a.createElement("button",{type:"button",className:"link-button",onClick:function(){t.setSortF(e)}},n));return r.a.createElement("th",{className:this.thClassName(e)},r.a.createElement("div",null,r.a.createElement("span",{style:{display:"flex"}},r.a.createElement("div",{style:{marginTop:8,paddingRight:3}},i),null!==n?s:"")))}},{key:"componentWillReceiveProps",value:function(e){this.isPristineT()||null!=this.pristine||this.showOk(),this.init(),this.setState(Object(V.a)({},Xe(this.preInitT(e.initAccounts))))}},{key:"render",value:function(){var e=this;return this.pristine=this.isPristineT(),this.errors=this.hasErrorsT(),r.a.createElement("div",null,r.a.createElement(be.a,Object.assign({ref:function(t){return e.msg=t}},ye)),this.renderAccountsT())}}]),t}(r.a.Component);tt.defaultProps={initAccounts:[]};var nt=Object(s.b)(null,function(e){return{update:function(t){e(Ye(t))}}})(tt),at=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).state={accounts:[]},n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(P.a,null,r.a.createElement(P.a.Heading,{style:{paddingTop:"4px",paddingBottom:"3px",height:"45px",fontSize:"23px"}},r.a.createElement("span",{style:{display:"flow-root",alignItems:"center"}},"Accounts")),r.a.createElement(P.a.Body,null,r.a.createElement(nt,{initAccounts:this.props.accounts}))))}}]),t}(r.a.Component),rt=Object(s.b)(function(e){return{accounts:e.accounts.accounts}})(at),it=(n(536),n(25),function(e){function t(){return Object(_.a)(this,t),Object(T.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){return null}}]),t}(r.a.Component)),st=function(e,t,n){return{type:"AUDITLOG_RESPONSE",payload:{logentries:e,firstpage:t,lastpage:n}}},lt=function(e){return function(t){t({type:"AUDITLOG_REQUEST"}),z("history",null!=e?"id="+e:"",function(e){var n=!0;51===e.data.length&&(n=!1,e.data.pop()),t(st(e.data,!0,n))},t)}},ct=function(e){return function(t){t({type:"AUDITLOG_REQUEST"}),z("history","s="+e,function(e){var n=!0;51===e.data.length&&(n=!1,e.data.pop()),t(st(e.data,!1,n))},t)}},ot=function(e){return function(t){t({type:"AUDITLOG_REQUEST"}),z("history","e="+e,function(e){var n=!0;51===e.data.length&&(n=!1,e.data.shift()),t(st(e.data,n,!1))},t)}},ut=n(25),dt=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).next=n.next.bind(Object(A.a)(Object(A.a)(n))),n.prev=n.prev.bind(Object(A.a)(Object(A.a)(n))),n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"next",value:function(){if(this.props.logentries&&0!==this.props.logentries.length){var e=this.props.logentries[this.props.logentries.length-1],t=e.hs[e.rownr].hd;this.props.next(t)}}},{key:"prev",value:function(){if(this.props.logentries&&0!==this.props.logentries.length){var e=this.props.logentries[0],t=e.hs[e.rownr].hd;this.props.prev(t)}}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(I.a,{onClick:this.prev,disabled:this.props.firstpage},r.a.createElement(ut,{name:"caret-left"})),r.a.createElement(I.a,{onClick:this.next,disabled:this.props.lastpage},r.a.createElement(ut,{name:"caret-right"})),r.a.createElement(I.a,{href:"http://localhost:8080/log"},r.a.createElement(ut,{name:"download"})))}}]),t}(r.a.Component);var ht=Object(s.b)(function(e){return{logentries:e.auditlog.logentries,firstpage:e.auditlog.firstpage,lastpage:e.auditlog.lastpage}},function(e){return{next:function(t){e(ct(t))},prev:function(t){e(ot(t))}}})(dt),pt=n(33);function ft(e){var t=e.split("."),n=t[0],a=t[1]-1,r=t[2];return new Date(r,a,n)}function mt(e){var t=new Date(e),n="00"+t.getDate();n=n.substr(n.length-2);var a="00"+(t.getMonth()+1);a=a.substr(a.length-2);var r="00"+t.getHours();r=r.substr(r.length-2);var i="00"+t.getMinutes();i=i.substr(i.length-2);var s="00"+t.getSeconds();s=s.substr(s.length-2);var l="000"+t.getMilliseconds();return l=l.substr(l.length-3),n+"."+a+"."+t.getFullYear()+" "+r+":"+i+":"+s+"."+l}function bt(e,t){switch(t){case"w":return mt(e.hd);case"op":switch(e.op){case"C":return"creation";case"U":return"modification";case"D":return"deletion";default:return console.log("UNKONWN op:"+e.op),null}case"d":return function(e){var t=e.split("-"),n=t[2],a=t[1]-1,r=t[0];return pt(new Date(r,a,n),"dd.mm.yyyy")}(e.d);case"i":return ve(e.i);case"s":return e.s?"X":"-";case"g":return e.g;case"c":return e.c_descr;case"a":return e.a_descr;case"descr":return e.descr;default:return console.log("UNKONWN field: "+t),null}}var yt=["d","i","s","g","c","a","descr"],vt=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).renderLogHeaderT=function(){return r.a.createElement("thead",null,r.a.createElement("tr",null,n.th("w","When"),n.th("op","What"),n.th("d","Date"),n.th("i","Pay"),n.th("s","s"),n.th("g","Ref"),n.th("c","Issue"),n.th("a","Account"),n.th("descr","Desc.")))},n.renderLogHeaderT=n.renderLogHeaderT.bind(Object(A.a)(Object(A.a)(n))),n.renderLogR=n.renderLogR.bind(Object(A.a)(Object(A.a)(n))),n.renderContentF=n.renderContentF.bind(Object(A.a)(Object(A.a)(n))),n.tdClassName=n.tdClassName.bind(Object(A.a)(Object(A.a)(n))),n.td=n.td.bind(Object(A.a)(Object(A.a)(n))),n.thClassName=n.thClassName.bind(Object(A.a)(Object(A.a)(n))),n.th=n.th.bind(Object(A.a)(Object(A.a)(n))),n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"renderContentF",value:function(e){return r.a.createElement("div",null,e)}},{key:"thClassName",value:function(e){return e+"_header"}},{key:"th",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=r.a.createElement("div",null,t);return r.a.createElement("th",{className:this.thClassName(e)},r.a.createElement("div",null,r.a.createElement("span",{style:{display:"flex"}},null!==t?n:"")))}},{key:"renderLogR",value:function(e,t){var n=this;return r.a.createElement("tr",{key:e.hs[t].id+"_"+e.hs[t].rownr},["w","op"].concat(yt).map(function(a){return n.td(e,t,a)}))}},{key:"tdClassName",value:function(e,t,n){var a=n+"_cell";return"U"===e.hs[t].op&&yt.indexOf(n)>-1&&e.hs[t][n]!==e.hs[t-1][n]&&(a+=" updatedRow"),(t===e.rownr||this.props.singleEntry)&&(a+=" actualRow"),a}},{key:"td",value:function(e,t,n){var a=bt(e.hs[t],n);return r.a.createElement("td",{key:e.hs[t].id+"_"+t+"_"+n,className:this.tdClassName(e,t,n)},this.renderContentF(a))}},{key:"render",value:function(){var e=this;if(null==this.props.logEntry)return null;var t=this.props.logEntry;return r.a.createElement(M.a,{id:"auditlog_table",key:"al_table_"+t.id,striped:!0,bordered:!0,hover:!0,condensed:!0},this.renderLogHeaderT(),r.a.createElement("tbody",null,t.hs.map(function(n,a){return e.renderLogR(t,a)})))}}]),t}(r.a.Component),gt=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).renderLogEntry=n.renderLogEntry.bind(Object(A.a)(Object(A.a)(n))),n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"renderLogEntry",value:function(e){return e.rownr<0?null:r.a.createElement(P.a,{key:"al_panel_"+e.hs[0].id+"_"+e.rownr},r.a.createElement(P.a.Heading,null,r.a.createElement(P.a.Title,null,bt(e.hs[e.rownr],"op")," at ",mt(e.hs[e.rownr].hd)," ( id: ",e.hs[0].id," )")),r.a.createElement(P.a.Body,null,r.a.createElement(vt,{logEntry:e})))}},{key:"render",value:function(){var e=this,t=this.props.logentries||[];return r.a.createElement("div",null,t.map(function(t){return e.renderLogEntry(t)}))}}]),t}(r.a.Component),Ot=function(e){function t(){return Object(_.a)(this,t),Object(T.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){var e=this.props.logentries||[];return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(P.a,null,r.a.createElement(P.a.Heading,{style:{paddingTop:"6px",paddingBottom:"3px",height:"45px",fontSize:"23px"}},"Audit Log ",r.a.createElement(it,{fetching:this.props.fetching}),r.a.createElement("span",{className:"pull-right"},r.a.createElement(ht,null))))),r.a.createElement(gt,{logentries:e}),r.a.createElement("div",null,r.a.createElement(P.a,null,r.a.createElement(P.a.Heading,{style:{paddingTop:"6px",paddingBottom:"3px",height:"45px",fontSize:"23px"}},r.a.createElement("span",{className:"pull-right"},r.a.createElement(ht,null))))))}}]),t}(r.a.Component),Et=Object(s.b)(function(e){return{logentries:e.auditlog.logentries,fetching:e.auditlog.fetching}})(Ot),jt=function(e){function t(){return Object(_.a)(this,t),Object(T.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Et,{logentries:this.props.auditlog}))}}]),t}(r.a.Component),kt=Object(s.b)(function(e){return{auditlog:e.auditlog.logentries}})(jt);function Ct(e,t){var n=new Date(e);return n.setDate(n.getDate()+t),n}function xt(e,t){var n=new Date(e);return n.setMonth(n.getMonth()+t),n}function wt(e,t){var n=new Date(e),a=new Date(t);return Math.floor((Date.UTC(a.getFullYear(),a.getMonth(),a.getDate())-Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()))/864e5)}function _t(e,t){return 1===e.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()&&t.getDate()===Rt(e.getMonth(),e.getYear())}function Rt(e,t){return new Date(t,e+1,0).getDate()}var Tt,St,Ft=function(e,t){return function(n){Tt=e,St=t,n(function(e,t,n){return{type:"DATE_RANGE_SELECTED",payload:{s:e,e:t}}}(e,t))}},Dt=function(){return function(e){if(_t(Tt,St)){var t=xt(Tt,1),n=new Date(t);return t.setDate(1),n.setDate(Rt(n.getMonth(),n.getYear())),void e(Ft(t,n))}var a=wt(Tt,St);e(Ft(Ct(Tt,a+1),Ct(St,a+1)))}},Nt=function(){return function(e){if(_t(Tt,St)){var t=xt(Tt,-1),n=new Date(t);return t.setDate(1),n.setDate(Rt(n.getMonth(),n.getYear())),void e(Ft(t,n))}var a=wt(St,Tt);e(Ft(Ct(Tt,a-1),Ct(St,a-1)))}},Pt=function(){return function(e){var t=new Date(0),n=new Date;t.setFullYear(n.getFullYear()),t.setMonth(n.getMonth()),t.setDate(1),t.setHours(0);var a=new Date(t);a.setDate(Rt(a.getMonth(),a.getYear())),e(Ft(t,a))}},Vt=0,At=function(e){return function(t){Vt=e,t({type:"MINIBARS_REQUEST",payload:null}),q("minibars",{params:{cat:e}},function(e){var n={data:e.data,balance:0};t(function(e){return{type:"MINIBARS_RESPONSE",payload:{balances:e}}}(n))},t)}},It=function(){return At(Vt)},Mt=function(){return function(e){e({type:"MINIBARS_REDRAW",payload:{redraw:(new Date).getTime()}})}};n(141);var Lt=n(539),Ht=n(33),Ut=n(103);function Yt(e){return parseFloat(Math.round(100*e)/100).toFixed(2)}var Bt=function(){var e,t,n,a,r,i,s,l,c,o,u,d,h,p,f,m,b,y,v,g,O,E="dd.mm.yyyy ddd",j="mmm",k="mmm yyyy",C="red",x="green",w="blue",_="white",R="pink",T="gray",S="cadetblue",F="lightblue",D="lightblue",N="black",P="lightgray",V="lightblue",A=null,I=3,M=.8,L=null,H=null,U=null;var Y="_div_minibar",B="_tip_div_minibar",W="_tip_i_div_minibar",z="_day_text",q="_b_text",G="_b_color",Q="_i_text",K="_leadin_minibar",J="_zero_leadin_minibar",X="_zero_leadin_text_minibar",Z="_max_text_minibar",$="_min_text_minibar",ee="_month_minibar",te="_slot_bg_minibar",ne="_i_minibar",ae="_e_minibar",re="_b_minibar",ie="_b_unlocked",se="_b_prev_minibar",le="_b_next_minibar",ce="_zero_minibar",oe=null;function ue(){t=I*M,b=function(){console.assert(oe[0].columns[0].d,"d must be defined"),console.assert(oe[oe.length-1].columns[0].d,"d must be defined");var e=he(oe[0].columns[0].d),t=he(oe[oe.length-1].columns[0].d);return e+"-"+t}(),i=null}function de(e){return"_"+A+"_"+e.getDate()+"_"+(e.getMonth()+1)+"_"+e.getFullYear()}function he(e){return"_"+A+"_"+(e.getMonth()+1)+"_"+e.getFullYear()}function pe(e){return!L||H||Lt.compare(e.d,L)?(t=e,L&&H&&t.d&&Lt.inRange(t.d,L,H)?T:function(e){if(e.smallestb<0)return R;return _}(e)):S;var t}function fe(e){return e.getMonth()%2?D:F}function me(e){var t=function(e){return Math.round(e).toPrecision(3)}(e),n=Ut.formatPrefix(t);return""+n.scale(t)+("y"===n.symbol?"":n.symbol)}function be(e){var t=he(e.d),n=document.getElementById(de(e.d)+te).getBoundingClientRect(),a=document.documentElement,r=0,i=-((window.pageYOffset||a.scrollTop)-(a.clientTop||0));Ut.select("#"+t+W).style("display",0===e.i&&0===e.e?"none":"table-row"),Ut.select("#"+t+B).style({display:"inline",left:n.left-r+I+"px",top:n.top-i+.75*l+"px",position:"absolute"}),Ut.select("#"+t+z).text(Ht(e.d,E)),Ut.select("#"+t+q).text(Yt(e.b)),Ut.select("#"+t+G).style("background-color",function(e){return e.i+e.e<0?C:x}(e)),Ut.select("#"+t+Q).text(Yt(e.i+e.e))}function ye(e,t){var n=Ut.min([e,t]),a=Ut.max([e,t]);L=n,H=a}var ve=864e5;function ge(e,t){var n=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),a=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((a-n)/ve)}function Oe(e){document.body.style.cursor=e}var Ee={click:function(e){if(null==L||L&&H)L=e.d,H=null,Oe("col-resize"),we();else if(null==H){if(L&&Math.abs(ge(L,e.d))>O)return;H=e.d,Oe("pointer"),ye(L,H),we(),U(L,H)}be(e),Ut.select("#"+de(e.d)+te).attr("fill",S)},mouseover:function(e,t){be(e),Ut.select("#"+de(e.d)+te).attr("fill",S),L&&!H&&Math.abs(ge(L,e.d))>O?Oe("not-allowed"):Oe(L&&!H?"col-resize":"pointer")},mouseout:function(e){!function(e){Ut.select("#"+he(e.d)+B).style("display","none")}(e),Ut.select("#"+de(e.d)+te).attr("fill",pe(e))}};function je(i){var c=he(i.columns[0].d),u=i.columns.length*I+n,b=Ut.select("#"+A),y={click:function(){var e,t;e=i.columns[0].d,t=i.columns[i.columns.length-1].d,L=e,H=t,we(),U(L,H)},mouseover:function(){var e;e=i.columns[0].d,Ut.select("#"+he(e)+ee).attr("fill",S)},mouseout:function(){var e;e=i.columns[0].d,Ut.select("#"+he(e)+ee).attr("fill",fe(e))}},v=b.append("div").attr("id",c+Y).style({width:u+"px",height:m+"px",float:"left","background-color":"white","border-style":"solid","border-width":e+"px","border-color":"magenta","margin-top":"5px"}),O=b.append("div").attr("id",c+B).style({display:"none",position:"absolute","pointer-events":"none",top:"0px",left:"0px"}).append("table").attr("class","c3-tooltip").append("tbody");O.append("tr").append("th").attr({id:c+z,colspan:"2"}).text("CCC");var E=O.append("tr").attr("class","c3-tooltip-name--data2");E.append("td").attr("class","name").append("span").style("background-color",w),E.append("td").attr("class","value").attr("id",c+q).text("");var _=O.append("tr").attr("id",c+W).attr("class","c3-tooltip-name--data1");_.append("td").attr("class","name").append("span").attr("id",c+G).style("background-color","white"),_.append("td").attr("class","value").attr("id",c+Q).text("");var R=v.append("svg").attr({id:c+K,width:"0px",height:m});R.append("line").attr({x1:r-.5*n,x2:r-.5*n,y1:d,y2:f,stroke:V,"stroke-width":n}),R.append("line").attr({id:c+J,x1:r-7,x2:r,y1:h-g(0)+s+n,y2:h-g(0)+s+n,stroke:"black","stroke-width":a}),R.append("text").text("").attr({id:c+Z,x:r-10,y:d+12,"text-anchor":"end","font-family":"sans-serif","font-size":"12px",fill:"black"}),R.append("text").text("").attr({id:c+$,x:r-10,y:h,"text-anchor":"end","font-family":"sans-serif","font-size":"12px",fill:"black"});var T,F=v.append("svg").style({cursor:"inherit"}).attr({width:u,height:m,fill:"red"}).on({mouseout:function(){Oe("default")}});F.append("rect").attr({id:c+ee,y:p,x:0,width:u-n,height:o,fill:fe(i.columns[0].d)}).style("cursor","pointer").on(y),F.append("text").text((T=i.columns[0].d,0===T.getMonth()?Ht(T,k):Ht(T,j))).attr({x:3,y:p+15,"text-anchor":"start","font-family":"sans-serif","font-size":"12px",fill:N}).style("cursor","pointer").on(y),F.selectAll().data(i.columns).enter().append("rect").attr({id:function(e){return console.assert(e.d,"d must be defined"),de(e.d)+te},x:function(e,t){return t*I},y:d,width:I,height:l,fill:function(e){return pe(e)}}).on(Ee),F.selectAll().data(i.columns).enter().append("rect").attr({id:function(e){return de(e.d)+ne},x:function(e,t){return(t+(1-M)/2)*I},y:function(e){return h-g(e.i)+s+n},width:t,height:function(e){return g(e.i)-g(0)},fill:x}).on(Ee),F.selectAll().data(i.columns).enter().append("rect").attr({id:function(e){return de(e.d)+ae},x:function(e,t){return(t+(1-M)/2)*I},y:h-g(0)+s+n,width:t,height:function(e){return g(0)-g(e.e)},fill:C}).on(Ee),F.selectAll().data(i.columns).enter().append("line").attr({id:function(e){return de(e.d)+ce},x1:function(e,t){return t*I},x2:function(e,t){return(t+1)*I},y1:h-g(0)+s+n,y2:h-g(0)+s+n,stroke:"black","stroke-width":a}).on(Ee),F.selectAll().data(i.columns).enter().append("line").attr({id:function(e){return de(e.d)+se},x1:function(e,t){return(t-(null!=e.prev_b?.5:-.5))*I},x2:function(e,t){return(t+.5)*I},y1:function(e){return h-g(null!=e.prev_b?e.prev_b:e.b)+s+n},y2:function(e,t){return h-g(e.b)+s+n},stroke:w,"stroke-width":a}).on(Ee),F.selectAll().data(i.columns).enter().append("line").attr({id:function(e){return de(e.d)+le},x1:function(e,t){return(t+.5)*I},x2:function(e,t){return(t+(null!=e.next_b?1.5:.5))*I},y1:function(e){return h-g(e.b)+s+n},y2:function(e,t){return h-g(null!=e.next_b?e.next_b:e.b)+s+n},stroke:w,"stroke-width":a}).on(Ee),I>4&&F.selectAll().data(i.columns).enter().append("circle").style("shape-rendering","auto").attr({id:function(e){return de(e.d)+re},cx:function(e,t){return(t+.5)*I},cy:function(e){return h-g(e.b)+s+n},r:1.5,fill:w}).on(Ee),F.selectAll().data(i.columns).enter().append("circle").style("shape-rendering","auto").attr({id:function(e){return de(e.d)+ie},cx:function(e,t){return(t+.5)*I},cy:function(e){return s-4},r:1.5,fill:function(e){return e.l?P:"white"}}).on(Ee),F.append("line").attr({x1:-2,x2:u+2,y1:d+.5*n,y2:d+.5*n,stroke:V,"stroke-width":n}),F.append("line").attr({x1:u-.5*n,x2:u-.5*n,y1:d,y2:f,stroke:V,"stroke-width":n})}function ke(e){var t=he(e.columns[0].d),a=document.getElementById(t+Y).getBoundingClientRect().left,s=e.columns.length*I+n;i||(i=a),Ut.select("#"+t+Y).style({width:s+(a<=i?r:0)+"px"}),Ut.select("#"+t+K).attr({width:(a<=i?r:0)+"px"}),Ut.select("#"+t+Z).text(me(v)),Ut.select("#"+t+$).text(me(y))}function Ce(e){var t=he(e.columns[0].d);Ut.select("#"+t+J).transition().attr({y1:h-g(0)+s+n,y2:h-g(0)+s+n}),Ut.select("#"+t+X).transition().attr({y:h-g(0)+3+s+n}),e.columns.forEach(function(e){var t=de(e.d);Ut.select("#"+t+ne).datum(function(t){return t.i=e.i,t.e=e.e,t.b=e.b,t.smallestb=e.smallestb,t.prev_b=e.prev_b,t.next_b=e.next_b,t.l=e.l,t}).transition().attr({y:function(e){return h-g(e.i)+s+n},height:function(e){return g(e.i)-g(0)}}),Ut.select("#"+t+te).transition().attr({fill:function(e){return pe(e)}}),Ut.select("#"+t+ae).transition().attr({y:h-g(0)+s+n,height:function(e){return g(0)-g(e.e)}}),Ut.select("#"+t+re).transition().attr({cy:function(e){return h-g(e.b)+s+n}}),Ut.select("#"+t+ie).transition().attr({fill:function(e){return e.l?P:"white"}}),Ut.select("#"+t+ce).transition().attr({y1:h-g(0)+s+n,y2:h-g(0)+s+n}),Ut.select("#"+t+se).transition().attr({y1:function(e){return h-g(null!=e.prev_b?e.prev_b:e.b)+s+n},y2:function(e){return h-g(e.b)+s+n}}),Ut.select("#"+t+le).transition().attr({y1:function(e){return h-g(e.b)+s+n},y2:function(e){return h-g(null!=e.next_b?e.next_b:e.b)+s+n}})})}var xe={balance:0,data:[{d:new Date,b:0,e:0,i:0,smallestb:0,l:!1}]};function we(){if(oe)for(var e=0,t=oe.length;e<t;e++)Ce(oe[e]),ke(oe[e])}function _e(){Ut.select("#"+A).selectAll("div").remove();for(var e=0,t=oe.length;e<t;e++)je(oe[e]),ke(oe[e])}return{resize:function(){ue(),_e()},config:function(t){A||(console.assert(t,"not a valid config"),function(t){A?console.assert(!t.bindto||A===t.bindto,"bindto can be defined only once"):(console.assert(t.bindto,"bindto is mandatory"),A=t.bindto),e=t.div_border_width||e||0,r=t.leadin_width||r||45,n=t.line_width||n||1,a=t.b_line_width||a||.2,s=t.top_margin||s||10,l=t.datearea_height||l||80,c=t.center_margin||c||0,o=t.month_height||o||20,u=t.bottom_margin||u||3,m=(f=(p=(h=(d=s)+l)+c)+o)+u,U=t.select,O=t.max_selection_days||90,b="NONE"}(t))},generate:function(e){if(e&&e.data){e.data.length||(e=xe),console.assert(A,"config must be called first!"),oe=function(e){var t=-1!==e[0].a,n=[];if(!e||!e.length)return n;if("string"===typeof e[0].d)for(var a=0,r=e.length;a<r;a++)e[a].d=new Date(e[a].d);function i(e,t){return new Date(t,e+1,0).getDate()}console.assert(e[0].d,"d is mandatory");for(var s=e[0].d.getMonth()-1,l=e[0].d.getFullYear(),c=e[0].d.getDate()-1,o=0,u=0,d=null,h=0,p=e.length;h<p;h++){var f=e[h];console.assert(f.d,"d is mandatory");var m=f.d.getMonth(),b=f.d.getFullYear(),y=f.d.getDate();for(console.assert(m>=0&&m<12&&y>0&&y<=31&&372*l+31*s+c<372*b+31*m+y,"input array must be ascending"),c=y;s!==m||l!==b;){12===++s&&(l++,s=0),d=[];for(var v=1,g=i(s,l);v<=g;v++)d.push({i:0,e:0,d:new Date(l,s,v),b:o,smallestb:u,l:!1});n.push({columns:d,range_text:s+1+"/"+l})}console.assert(null!=f.b,"b is mandatory"),console.assert(null!=f.smallestb,"smallestb is mandatory"),console.assert(null!=f.i,"i is mandatory"),console.assert(f.i>=0,"i must be positive"),console.assert(null!=f.e,"e is mandatory"),console.assert(f.e<=0,"i must be negative"),console.assert(null!=f.l,"l is mandatory"),t?(o=f.b,u=f.smallestb):u=o=Math.round(100*(o+f.i+f.e))/100;for(var O=f.d.getDate(),E=d.length;O<E;O++)d[O].b=o,d[O].smallestb=u;d[f.d.getDate()-1].i=f.i,d[f.d.getDate()-1].e=f.e,d[f.d.getDate()-1].b=o,d[f.d.getDate()-1].smallestb=u,d[f.d.getDate()-1].l=f.l}for(var j=0,k=n.length;j<k;j++)for(var C=0,x=n[j].columns.length;C<x;C++){var w=n[j].columns[C];j||C?j+1===k&&C+1===x?w.next_b=null:C?C+1===x&&(w.next_b=n[j+1].columns[0].b):w.prev_b=n[j-1].columns[n[j-1].columns.length-1].b:w.prev_b=null,"undefined"===typeof w.prev_b&&(w.prev_b=n[j].columns[C-1].b),"undefined"===typeof w.next_b&&(w.next_b=n[j].columns[C+1].b)}d=[];var _=new Date(n[0].columns[0].d);_.setMonth(_.getMonth()-1);for(var R=1,T=i(s=_.getMonth(),l=_.getFullYear());R<=T;R++)d.push({i:0,e:0,d:new Date(l,s,R),b:0,smallestb:0,l:!1});n.unshift({columns:d,range_text:s+1+"/"+l}),d=[];var S=n[n.length-1].columns[n[n.length-1].columns.length-1];S.next_b=S.b;var F=new Date(S.d);F.setDate(1),F.setMonth(F.getMonth()+1);for(var D=1,N=i(s=F.getMonth(),l=F.getFullYear());D<=N;D++)d.push({i:0,e:0,d:new Date(l,s,D),b:S.b,smallestb:S.smallestb,prev_b:S.b,next_b:S.b,l:!1});return d[d.length-1].next_b=null,n.push({columns:d,range_text:s+1+"/"+l}),n}(e.data);var t=b;ue(),function(){y=Ut.min([0,oe[0].columns[0].b]),v=Ut.max([0,oe[0].columns[0].b]);for(var e=0,t=oe.length;e<t;e++)y=Ut.min([y,Ut.min(oe[e].columns,function(e){return console.assert(null!=e.i&&null!=e.e&&null!=e.b&&e.d,"i, e, b and d must be defined"),console.assert(e.i>=0&&e.e<=0,"i must be positive, e must be negative"),Ut.min([e.i,e.e,e.b])})]),v=Ut.max([v,Ut.max(oe[e].columns,function(e){return Ut.max([e.i,e.e,e.b])})]);0===y&&0===v&&(v=100),g=Ut.scale.linear().domain([y,v]).range([d+n,h])}(),t===b?we():_e()}},select:function(e,t){e&&t?(ye(e,t),we()):console.assert(null!=e&&null!=t)}}}();window.addEventListener("resize",function(e){Bt.resize()});var Wt=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).state={start:new Date,end:new Date,balances:null,redraw:null},n.select=n.select.bind(Object(A.a)(Object(A.a)(n))),n.redraw=n.redraw.bind(Object(A.a)(Object(A.a)(n))),e.load(),n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"componentDidMount",value:function(){var e={max_selection_days:400,bindto:this.props.name,select:this.select};this.minibars=Bt,this.minibars.config(e)}},{key:"select",value:function(e,t){this.su=!1,this.props.setDateRange(new Date(e),new Date(t),"rangePicker1")}},{key:"redraw",value:function(){this.minibars.generate(this.props.balances),this.minibars.select(this.props.start,this.props.end)}},{key:"componentWillReceiveProps",value:function(e){this.minibars.generate(e.balances),this.minibars.select(e.start,e.end)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{id:this.props.name}))}}]),t}(r.a.Component);var zt=Object(s.b)(function(e){return{start:e.daterange.s,end:e.daterange.e,balances:e.minibars.balances,redraw:e.minibars.redraw}},function(e){return{load:function(){e(At(0))},setDateRange:function(t,n,a){e(Ft(t,n,a))}}})(Wt),qt=n(25),Gt=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).prevBlock=n.prevBlock.bind(Object(A.a)(Object(A.a)(n))),n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"prevBlock",value:function(){this.props.daterangePrevBlock()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(I.a,{onClick:this.prevBlock},r.a.createElement(qt,{name:"caret-left"})))}}]),t}(r.a.Component);var Qt=Object(s.b)(null,function(e){return{daterangePrevBlock:function(){e(Nt())}}})(Gt),Kt=n(25),Jt=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).nextBlock=n.nextBlock.bind(Object(A.a)(Object(A.a)(n))),n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"nextBlock",value:function(){this.props.daterangeNextBlock()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(I.a,{onClick:this.nextBlock},r.a.createElement(Kt,{name:"caret-right"})))}}]),t}(r.a.Component);var Xt=Object(s.b)(null,function(e){return{daterangeNextBlock:function(){e(Dt())}}})(Jt),Zt=n(45),$t=n.n(Zt),en=n(37),tn=n.n(en),nn=(n(540),{dateLimit:{days:90},showWeekNumbers:!0,autoApply:!0,alwaysShowCalendars:!0,locale:{direction:"ltr",format:"DD.MM.YYYY",separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",fromLabel:"From",toLabel:"To",customRangeLabel:"Custom",daysOfWeek:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],firstDay:1},linkedCalendars:!1,ranges:{"Last 7 Days":[$t()().subtract(6,"days"),$t()()],"Last 30 Days":[$t()().subtract(29,"days"),$t()()],"This Month":[$t()().startOf("month"),$t()().endOf("month")],"Last Month":[$t()().subtract(1,"month").startOf("month"),$t()().subtract(1,"month").endOf("month")]}}),an={singleDatePicker:!0,showDropdowns:!1,showWeekNumbers:!0,alwaysShowCalendars:!0,autoApply:!0,locale:{direction:"ltr",format:"DD.MM.YYYY",separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",fromLabel:"From",toLabel:"To",customRangeLabel:"Custom",daysOfWeek:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],firstDay:1}},rn=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).state={start:e.value?e.value:e.start?e.start:new Date,end:e.value?null:e.end?e.end:new Date},n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.value?(tn()("#"+this.props.pickerName).data("daterangepicker").setStartDate(e.value),tn()("#"+this.props.pickerName).data("daterangepicker").setEndDate(e.value)):e.start&&(tn()("#"+this.props.pickerName).data("daterangepicker").setStartDate(e.start),tn()("#"+this.props.pickerName).data("daterangepicker").setEndDate(e.end))}},{key:"componentDidMount",value:function(){var e=this;"single"===this.props.pickerType&&tn()("#"+this.props.pickerName).daterangepicker(an,function(t){e.props.pickerCallback(t,e.props.pickerName)}),"range"===this.props.pickerType&&tn()("#"+this.props.pickerName).daterangepicker(nn,function(t,n){e.props.pickerCallback(t,n,e.props.pickerName)}),tn()("#"+this.props.pickerName).data("daterangepicker").setStartDate(this.state.start),"range"===this.props.pickerType?tn()("#"+this.props.pickerName).data("daterangepicker").setEndDate(this.state.end):tn()("#"+this.props.pickerName).data("daterangepicker").setEndDate(this.state.start)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("input",{readOnly:!0,disabled:this.props.disabled,autoComplete:"off",onKeyDown:function(e){if(9!==(e.which||e.keyCode))return e.preventDefault(),!1},type:"text",id:this.props.pickerName,className:"form-control",style:{display:"inline",width:"range"===this.props.pickerType?"185px":"100px",backgroundColor:this.props.touched?"lightyellow":this.props.disabled?"transparent":"white"}}))}}]),t}(r.a.Component);rn.defaultProps={componentWillReceiveProps:!1,start:null,end:null,disabled:!1,touched:!1};var sn=Object(s.b)(function(e){return{start:e.daterange.s,end:e.daterange.e}})(rn),ln=n(109);n(557);function cn(e,t){for(var n=0;n<e.length;n++){var a=e[n];if(t(a))return a}return null}var on=n(25),un=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).state={selectedValue:null,items:e.getConstants(e.constants_id)},n.constants_id=e.constants_id,n.onValueChange=n.onValueChange.bind(Object(A.a)(Object(A.a)(n))),n.className=n.className.bind(Object(A.a)(Object(A.a)(n))),n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"onValueChange",value:function(e){return this.setState({selectedValue:e}),this.props.onValueChange(null!=e?e.value:null),this.renderOption(e)}},{key:"componentWillReceiveProps",value:function(e){if(e.constants&&e.constants[this.props.constants_id]){var t=e.constants[this.props.constants_id],n=cn(t,function(t){return t.value===e.selectedValue}),a=t.filter(function(e){return e.valid||e===n});this.setState({selectedValue:n,items:a})}}},{key:"renderOption",value:function(e){if(null!=e)return r.a.createElement("span",{style:{display:"block",whiteSpace:"nowrap"}},r.a.createElement("span",{style:{display:"block",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:"100px"}},r.a.createElement("span",{style:{marginRight:"5px",marginLeft:"5px"}},r.a.createElement(on,{name:"square",style:{color:e.color}})),r.a.createElement("span",null,e.label)))}},{key:"className",value:function(){return this.props.readOnly||this.props.touched?!this.props.readOnly&&this.props.touched?"simpledropdown_touched":this.props.readOnly&&!this.props.touched?"simpledropdown_ro":this.props.readOnly&&this.props.touched?"simpledropdown_ro_touched":void 0:"simpledropdown"}},{key:"render",value:function(){return r.a.createElement(ln.SimpleSelect,{className:this.className(),disabled:this.props.readOnly,style:{width:"150px",border:"none",backgroundColor:"none",backgroundImage:"none"},renderOption:this.renderOption,renderValue:this.renderOption,onValueChange:this.onValueChange,placeholder:this.props.placeholder,options:this.state.items,value:this.state.selectedValue,hideResetButton:!0,cancelKeyboardEventOnSelection:!1})}}]),t}(r.a.Component);un.defaultProps={refreshTime:null,onValueChange:null,touched:!1,readOnly:!1,placeholder:"",constants:null,constants_id:null};var dn=Object(s.b)(function(e){return{refreshTime:e.constants.refreshTime,constants:e.constants.constants}},function(e){return{getConstants:function(t){ee(t,e)}}})(un),hn=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).state={filter:null,checked:!0},n.onFilterChanged=n.onFilterChanged.bind(Object(A.a)(Object(A.a)(n))),n.onCheck=n.onCheck.bind(Object(A.a)(Object(A.a)(n))),n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"onFilterChanged",value:function(e){this.setState({filter:e}),this.props.balances_load(e)}},{key:"onCheck",value:function(e){this.setState({checked:e}),e?this.props.balances_load(0):this.state.filter&&this.props.balances_load(this.state.filter)}},{key:"render",value:function(){var e=r.a.createElement(dn,{readOnly:this.state.checked,onValueChange:this.onFilterChanged,selectedValue:this.state.filter,placeholder:"filter",constants_id:"cat"});return r.a.createElement("div",null,r.a.createElement("span",{style:{display:"inline-flex"}},r.a.createElement("div",{style:{paddingTop:"7px",paddingRight:"5px"}},"All"),r.a.createElement(se,{id:"all",onValueChanged:this.onCheck,checked:this.state.checked}),this.state.checked?null:e))}}]),t}(r.a.Component);var pn=Object(s.b)(null,function(e){return{balances_load:function(t){e(At(t))}}})(hn),fn=n(47),mn=n(25),bn=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).showMinibars=n.showMinibars.bind(Object(A.a)(Object(A.a)(n))),n.state={showMinibars:!1},n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"showMinibars",value:function(){this.setState({showMinibars:!this.state.showMinibars});var e=this;setTimeout(function(){e.props.minibarsRedraw()},0)}},{key:"render",value:function(){var e=this,t=this.state.showMinibars?r.a.createElement("span",{className:"pull-right",style:{paddingLeft:"20px"}},r.a.createElement(pn,null)):null,n=r.a.createElement("div",null,r.a.createElement("div",{style:{display:"inline-flex",whiteSpace:"nowrap",alignItems:"center",fontSize:"23px"}},r.a.createElement(mn,{name:"calendar"}),"-",r.a.createElement(mn,{name:"calendar"}),"\xa0",r.a.createElement("div",{style:{paddingTop:"1px"}},r.a.createElement(Qt,null)),r.a.createElement(sn,{componentWillReceiveProps:!0,pickerName:"rangePicker1",pickerType:"range",pickerCallback:function(t,n,a){e.props.setDateRange(new Date(t),new Date(n))}}),r.a.createElement("div",{style:{paddingTop:"1px"}},r.a.createElement(Xt,null))),r.a.createElement("span",null,r.a.createElement(P.a.Toggle,{componentClass:"button",className:"link-button",onClick:this.showMinibars,style:{textDecoration:"none"}},"\xa0",this.state.showMinibars?r.a.createElement(mn,{name:"caret-up",size:"2x"}):r.a.createElement(mn,{name:"caret-down",size:"2x"}),"\xa0")),r.a.createElement(it,{fetching:this.props.fetching}),t);return r.a.createElement(P.a,{style:{width:"100%",opacity:this.props.fetching?.3:1},id:"minibars-panel",expanded:this.state.showMinibars,onToggle:function(){}},r.a.createElement(fn.a,{query:"(max-width: 604px)"},function(e){return e?r.a.createElement(P.a.Heading,{style:{paddingTop:"3px",paddingBottom:"3px",height:"80px"}},n):r.a.createElement(P.a.Heading,{style:{paddingTop:"3px",paddingBottom:"3px",height:"45px"}},n)}),r.a.createElement(P.a.Collapse,null,r.a.createElement(P.a.Body,null,r.a.createElement(zt,{name:"minibar"}))))}}]),t}(r.a.Component);var yn=Object(s.b)(function(e){return{fetching:e.minibars.fetching}},function(e){return{setDateRange:function(t,n){e(Ft(t,n))},minibarsRedraw:function(){e(Mt())}}})(bn),vn=n(244),gn=n(33),On=function(e,t){return{type:"PIE_REQUEST",payload:{s:e,e:t}}},En=function(e){return{type:"PIE_RESPONSE",payload:{slices:e}}},jn=null;function kn(e){e(On(jn.s,jn.e)),q("pie?ts="+Date.now(),{params:jn},function(t){e(En(t.data))},e)}var Cn=function(e,t){return function(n){jn={s:gn(e,"yyyy-mm-dd"),e:gn(t,"yyyy-mm-dd")},kn(n)}},xn=function(){return function(e){e({type:"PIE_REDRAW",payload:{redraw:(new Date).getTime()}})}},wn=n(33),_n=null,Rn=[],Tn=-1,Sn=function(){return{type:"PAYMENTS_REQUEST"}},Fn=function(e,t){return{type:"PAYMENTS_RESPONSE",payload:{params:_n,queryType:_n.e,payments:e,balances:t,historystack:{last:Tn===Rn.length-1,first:0===Tn}}}},Dn=function(e){return function(t){t(function(e){return{type:"PAYMENTS_UPDATE_REQUEST",payload:{updates:e}}}(e)),G("payments/update",e,function(e){t({type:"PAYMENTS_UPDATE_RESPONSE"}),t(Ln()),t(function(e){console.assert(jn),kn(e)}),t(It()),t(He())},t)}};function Nn(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(Tn<Rn.length-1&&(Rn=Rn.slice(0,Tn+1)),Rn.push(_n),Tn++),e(Sn()),q("payments",{params:_n},function(t){e(Fn(t.data[0],t.data[1]))},e)}var Pn=function(e){return function(t){_n={e:"d",d:wn(e,"yyyy-mm-dd")},Nn(t,!0)}},Vn=function(e,t,n){return function(a){_n={e:"a",a:e,d1:wn(t,"yyyy-mm-dd"),d2:wn(n,"yyyy-mm-dd")},Nn(a,!0)}},An=function(e,t,n){return function(a){_n={e:"c",c:e,d1:wn(t,"yyyy-mm-dd"),d2:wn(n,"yyyy-mm-dd")},Nn(a,!0)}},In=function(e){return function(t){_n={e:"g",g:e},Nn(t,!0)}},Mn=function(e){return function(t){_n={e:"l",ids:e},Nn(t,!0)}},Ln=function(){return function(e){console.assert(_n),Nn(e)}},Hn=function(){return function(e){_n=Rn[--Tn],Nn(e)}},Un=function(){return function(e){_n=Rn[++Tn],Nn(e)}},Yn=function(e,t){return function(n){n(function(e,t){return{type:"LOCK_PAYMENT_REQUEST",payload:{lock_payment_request:e,locked:t}}}(e,t)),q("lock",{params:{id:e,l:t}},function(t){n(function(e,t){return{type:"LOCK_PAYMENT_RESPONSE",payload:{payment:e}}}(e)),console.log("ref"),n(It())},n)}},Bn=function(e){return function(t){t(function(e){return{type:"PAYMENT_SELECTION",payload:{payments:e}}}(e))}},Wn=function(e){return function(t){t(function(e){return{type:"CALC_ADD_REQUEST",payload:{p:e}}}(e))}},zn=n(615),qn=n(616),Gn=n(625),Qn=n(622),Kn=(n(560),function(e){function t(){return Object(_.a)(this,t),Object(T.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){if(null==this.props.logentries)return null;var e=this.props.logentries[0],t=Object(V.a)({},this.props),n={show:t.show,onHide:t.onHide};return r.a.createElement(Qn.a,Object.assign({},n,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:"true",dialogClassName:"modal-90w"}),r.a.createElement(Qn.a.Header,{closeButton:!0},r.a.createElement(Qn.a.Title,{id:"contained-modal-title-vcenter"},"History")),r.a.createElement(Qn.a.Body,null,r.a.createElement(vt,{logEntry:e,singleEntry:!0})),r.a.createElement(Qn.a.Footer,null,r.a.createElement(I.a,{onClick:this.props.onHide},"Close")))}}]),t}(r.a.Component)),Jn=Object(s.b)(function(e){return{logentries:e.auditlog.logentries}})(Kn),Xn=n(238),Zn=n.n(Xn),$n=(n(575),n(25)),ea=function(e){function t(){return Object(_.a)(this,t),Object(T.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){return r.a.createElement($n,{name:"lock",style:{color:"white"}})}}]),t}(r.a.Component),ta=function(e){function t(){return Object(_.a)(this,t),Object(T.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){return r.a.createElement($n,{name:"unlock-alt",style:{color:"white"}})}}]),t}(r.a.Component),na=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).toggleLock=n.toggleLock.bind(Object(A.a)(Object(A.a)(n))),n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"toggleLock",value:function(e){var t=this.props,n=t.field,a=t.index,r=!e.target.checked;this.props.onValueChanged(r,n,a),this.props.lockPayment(this.props.id,r)}},{key:"componentWillReceiveProps",value:function(e){this.setState({checked:e.checked})}},{key:"render",value:function(){var e=this.props,t=e.readOnly,n=e.checked;return r.a.createElement("div",{style:{paddingTop:8}},r.a.createElement(Zn.a,{disabled:t,checked:!n,onChange:this.toggleLock,icons:{checked:r.a.createElement(ta,null),unchecked:r.a.createElement(ea,null)}}))}}]),t}(r.a.Component);na.defaultProps={id:null,onValueChanged:null,checked:!1,readOnly:!1,field:null,index:null};var aa=Object(s.b)(null,function(e){return{lockPayment:function(t,n){e(Yn(t,n))}}})(na),ra=n(627),ia=n(614);var sa=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).state={currencyValue:e.value},n.onChange=n.onChange.bind(Object(A.a)(Object(A.a)(n))),n.handleFocus=n.handleFocus.bind(Object(A.a)(Object(A.a)(n))),n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"handleFocus",value:function(e){e.target.select()}},{key:"onChange",value:function(e){var t=this.props,n=t.onValueChanged,a=t.field,r=t.index,i=t.id,s=function(e){if(!e)return e;"-"!==e&&"+"!==e||(e+="0");var t=e.lastIndexOf("+"),n=e.lastIndexOf("-");return""===(e=e.replace(/[^\d]/g,""))&&(e="0"),(e=""+parseInt(e,10)).length<3&&(e="00".slice(-3+e.length)+e),(t>=n?"+":"-")+e.slice(0,-2)+"."+e.slice(-2)}(e.target.value);this.setState({currencyValue:s}),n(s,a,r),function(e,t){var n=document.getElementById(e);if(null!=n)if(n.createTextRange){var a=n.createTextRange();a.move("character",t),a.select()}else n.selectionStart?(n.focus(),n.setSelectionRange(t,t)):n.focus()}(i,s.length)}},{key:"componentWillReceiveProps",value:function(e){this.setState({currencyValue:e.value})}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,a=t.readOnly,i=t.placeholder,s=t.touched,l=t.fontSize,c=t.linkCb,o=t.popoverText,u=r.a.createElement("div",null,r.a.createElement("input",{onFocus:this.handleFocus,autoComplete:"off",id:n,disabled:a,value:this.state.currencyValue,onChange:this.onChange,placeholder:a?"":i,type:"text",className:"form-control",style:{fontSize:l,textAlign:"right",color:this.state.currencyValue&&"-"===this.state.currencyValue.substr(0,1)?"red":"green",display:"inline",width:"85px",backgroundColor:s?"lightyellow":""}}));if(a)return r.a.createElement(I.a,{className:"link-button",onClick:function(){c(e.state.currencyValue)}},u);if(null==c||null==this.state.currencyValue)return r.a.createElement("span",{style:{display:"inline-flex"}},u);var d=c&&this.state.currencyValue&&this.state.currencyValue.length>0?r.a.createElement(I.a,{className:"link-button",onClick:function(){c(e.state.currencyValue)}},o):null;return r.a.createElement("div",null,r.a.createElement("span",{style:{display:"inline-flex"}},r.a.createElement(ra.a,{trigger:"focus",key:"top",placement:"top",overlay:r.a.createElement(ia.a,{id:"popover_cur_-positioned-".concat(n)},d)},u)))}}]),t}(r.a.Component);sa.defaultProps={id:null,onValueChanged:null,placeholder:"",value:"",readOnly:!1,field:null,index:null,touched:!1,fontSize:"inherit",linkCb:null,popoverText:null};var la=sa,ca=function(e){function t(){return Object(_.a)(this,t),Object(T.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){var e=this.props,t=e.readOnly,n=e.field,a=e.index,i=e.onValueChanged,s=e.placeholder,l=e.touched,c=e.constants_id;return r.a.createElement("div",null,r.a.createElement(dn,{readOnly:t,onValueChange:function(e){i(e,n,a)},selectedValue:this.props.value,placeholder:s,touched:l,constants_id:c}))}}]),t}(r.a.Component);ca.defaultProps={onValueChanged:null,value:null,readOnly:!1,placeholder:"",field:null,index:null,touched:!1,constants_id:null};var oa=ca,ua=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).state={txtValue:e.value},n.onChange=n.onChange.bind(Object(A.a)(Object(A.a)(n))),n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"onChange",value:function(e){var t=this.props,n=t.onValueChanged,a=t.field,r=t.index;this.setState({txtValue:e.target.value}),n(e.target.value,a,r)}},{key:"componentWillReceiveProps",value:function(e){this.setState({txtValue:e.value})}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,a=t.placeholder,i=t.readOnly,s=t.touched,l=t.linkCb,c=t.popoverText,o=t.maxLength,u=r.a.createElement("input",{autoComplete:"off",id:n,value:this.state.txtValue,disabled:i,style:{backgroundColor:s?"lightyellow":""},placeholder:i?"":a,type:"text",onChange:this.onChange,className:"form-control",maxLength:o});if(i&&null!=l)return r.a.createElement(I.a,{className:"link-button",onClick:function(){l(e.state.txtValue)}},u);if(s||null==l||null==this.state.txtValue||0===this.state.txtValue.length)return r.a.createElement("span",{style:{display:"inline-flex"}},u);var d=l&&this.state.txtValue&&this.state.txtValue.length>0?r.a.createElement(I.a,{className:"link-button",onClick:function(){l(e.state.txtValue)}},c):null;return r.a.createElement("div",null,r.a.createElement("span",{style:{display:"inline-flex"}},r.a.createElement(ra.a,{trigger:"focus",key:"top",placement:"top",overlay:r.a.createElement(ia.a,{id:"popover-positioned-".concat(n)},d)},u)))}}]),t}(r.a.Component);ua.defaultProps={id:null,placeholder:"",onValueChanged:null,value:"",readOnly:!1,field:null,index:null,touched:!1,linkCb:null,popoverText:null,maxLength:255};var da=ua,ha=n(33),pa=function(e){function t(){return Object(_.a)(this,t),Object(T.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.onValueChanged,a=e.value,i=e.readOnly,s=e.field,l=e.index,c=e.touched,o=e.linkCb,u=e.popoverText,d=r.a.createElement("div",null,r.a.createElement(sn,{disabled:i,value:a,id:t,pickerName:"picker_d_"+t+l,pickerCallback:function(e){return n(ha(e,"dd.mm.yyyy"),s,l)},pickerType:"single",touched:c,style:{backgroundColor:c?"lightyellow":""}}));if(i&&null!=o)return r.a.createElement(I.a,{className:"link-button",onClick:function(){o(a)}},d);if(c||i||null==o||null==a||0===a.length)return r.a.createElement("span",{style:{display:"inline-flex"}},d);var h=o&&a&&a.length>0?r.a.createElement(I.a,{className:"link-button",onClick:function(){o(a)}},u):null;return r.a.createElement("div",null,r.a.createElement("span",{style:{display:"inline-flex"}},r.a.createElement(ra.a,{trigger:"focus",key:"top",placement:"top",overlay:r.a.createElement(ia.a,{id:"popover-d-positioned-"+t},h)},d)))}}]),t}(r.a.Component);pa.defaultProps={id:null,onValueChanged:null,value:!0,readOnly:!1,field:null,index:null,touched:!1,linkCb:null,popoverText:null};var fa=pa,ma=n(240),ba=n.n(ma);n(586);var ya=n(33),va={DAILY:function(e,t){var n=Ct(ft(e.d),1);e.d=ya(n,"dd.mm.yyyy")},WEEKLY:function(e,t){var n=Ct(ft(e.d),7);e.d=ya(n,"dd.mm.yyyy")},FORTNIGHTLY:function(e,t){var n=Ct(ft(e.d),14);e.d=ya(n,"dd.mm.yyyy")},TWICE_A_MONTH:function(e,t){var n,a=ft(e.d),r=null;n=t,r=0===(n=Number(n))||n&&!(n%2)?Ct(a,14):xt(r=Ct(a,-14),1),e.d=ya(r,"dd.mm.yyyy")},MONTHLY:function(e,t){var n=xt(ft(e.d),1);e.d=ya(n,"dd.mm.yyyy")},EVERY_OTHER_MONTH:function(e,t){var n=xt(ft(e.d),2);e.d=ya(n,"dd.mm.yyyy")},EVERY_3_MONTHS:function(e,t){var n=xt(ft(e.d),3);e.d=ya(n,"dd.mm.yyyy")},EVERY_4_MONTHS:function(e,t){var n=xt(ft(e.d),4);e.d=ya(n,"dd.mm.yyyy")},EVERY_6_MONTHS:function(e,t){var n=xt(ft(e.d),6);e.d=ya(n,"dd.mm.yyyy")},YEARLY:function(e,t){var n=xt(ft(e.d),12);e.d=ya(n,"dd.mm.yyyy")}};var ga=function(e,t,n){va[n](e,t)},Oa=n(33),Ea=["d","b","i","s","g","c","a","descr"],ja={id:null,l:!1,d:Oa(new Date,"dd.mm.yyyy"),i:"+0.00",c:null,a:null,s:!0,g:"",descr:"",b:null},ka={id:null,l:!1,d:Oa(new Date,"dd.mm.yyyy"),i:"+0.00",c:null,a:null,s:!0,g:"",descr:"",b:null},Ca={check:function(e){return null},l:function(e){return null},d:function(e){return null!=e&&""!==e?null:"required"},i:function(e){return""!==e?null:"required"},s:function(e){return null},c:function(e){return null!=e&&""!==e?null:"required"},a:function(e){return null!==e&&""!==e?null:"required"},g:function(e){return null},descr:function(e){return null},b:function(e){return null}};function xa(e,t){var n=function(e,t){var n=[];e&&e.forEach(function(e){n.push(Ra(e,t))});return n}(e,t);return n.forEach(function(e){e.d=Oa(e.d,"dd.mm.yyyy"),e.i=(e.i>=0?"+":"")+ve(e.i)}),n}function wa(e){return e.forEach(function(e){e.i&&(e.i=parseFloat(e.i)),e.d&&(e.d=function(e){var t=e.split("."),n=t[0],a=t[1]-1,r=t[2];return pt(new Date(r,a,n),"yyyy-mm-dd")}(e.d))}),e}function _a(e){return{check:e,id:e,l:e,d:e,i:e,c:e,a:e,s:e,g:e,descr:e,b:e}}function Ra(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{check:t.indexOf(e.id)>-1,index:n,id:e.id,l:e.l,d:e.d,i:e.i,c:e.c,a:e.a,s:e.s,g:e.g,descr:e.descr,b:e.b}}var Ta=[{label:"daily",value:"DAILY"},{label:"weekly",value:"WEEKLY"},{label:"fortnightly",value:"FORTNIGHTLY"},{label:"twice a month",value:"TWICE_A_MONTH"},{label:"monthly",value:"MONTHLY"},{label:"every other month",value:"EVERY_OTHER_MONTH"},{label:"every 3 months",value:"EVERY_3_MONTHS"},{label:"every 4 months",value:"EVERY_4_MONTHS"},{label:"every 6 months",value:"EVERY_6_MONTHS"},{label:"yearly",value:"YEARLY"}];function Sa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{recur:!1,times:1,span:Ta[4]},a={values:[],initial:[],errors:[],touched:[],deleted:[],masked:_a(!1),maskValues:ka,maskErrors:_a(null),sort:null,asc:!0,allChecked:!1,recurring:n};return a.recurring.recur=!1,e.forEach(function(e,n){a.values.push(Ra(e,t,n)),a.initial.push(Ra(e,t)),a.errors.push(_a(null)),a.touched.push(_a(!1)),a.deleted.push(!1)}),a}function Fa(e){return e.d||e.i||e.c||e.a||e.s||e.g||e.descr}function Da(e){return e.splice(0)}var Na=n(25),Pa=n(33),Va=-1,Aa=[],Ia=function(e){function t(e){var n;Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).renderPaymentsHeaderT=function(){return n.state.values&&0!==n.state.values.length?r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:n.thClassName("check")},r.a.createElement(se,{id:"check_all",onValueChanged:n.setValueCheckAllF,checked:n.state.allChecked,readOnly:!1,field:"check_all",index:-2,touched:!1})),r.a.createElement("th",{className:n.thClassName("l")}),n.th("d","Date"),n.drawBalanceF()?n.th("b","Balance",!1):null,n.th("i","Pay"),n.th("s",r.a.createElement(Na,{name:"pie-chart",size:"lg"}),!1),n.th("g",r.a.createElement(Na,{name:"paperclip",size:"lg"})),n.th("c","Issue"),n.th("a","Account"),n.th("descr","Description"),r.a.createElement("th",{className:n.thClassName("deleted")},r.a.createElement(Na,{name:"trash",size:"lg"})),r.a.createElement("th",null))):r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null)))},n.renderControls=function(){return r.a.createElement(P.a,{id:"ctrls-panel",expanded:n.state.recurring.recur,onToggle:function(){}},r.a.createElement(P.a.Heading,null,r.a.createElement(P.a.Title,null,r.a.createElement(I.a,{onClick:function(){return n.resetT()},disabled:n.pristine,bsStyle:n.pristine?"default":"primary"},"Reset"),r.a.createElement(I.a,{onClick:function(){return n.preSubmitT()},disabled:n.pristine||null!=n.errors,bsStyle:n.pristine?"default":"primary"},"Save"),r.a.createElement(I.a,{onClick:function(){return n.addR(!1)}},r.a.createElement(Na,{name:"plus"})),n.state.values.length>0?r.a.createElement(I.a,{onClick:function(){return n.addR()}},"Duplicate last"):null,r.a.createElement("span",{style:{marginTop:"6px"}},r.a.createElement(P.a.Toggle,{componentClass:"button",className:"link-button",onClick:n.setRecurring},n.state.values&&0!==n.state.values.length?" "+(n.state.recurring.recur?"No recur":"Recurring..."):"")))),r.a.createElement(P.a.Collapse,null,r.a.createElement(P.a.Body,null,r.a.createElement("span",{style:{display:"inline-flex"}},r.a.createElement("span",{style:{marginTop:"6px"}},"Repeat last row \xa0"),r.a.createElement(ln.SimpleSelect,{style:{width:"170px"},onValueChange:n.setRecurringSpan,placeholder:"choose span",options:Ta,value:n.state.recurring.span,hideResetButton:!0}),r.a.createElement(ba.a,{id:"recurringTimes",min:1,step:1,precision:0,max:365,value:n.state.recurring.times,onChange:n.setRecurringTimes}),r.a.createElement("span",{style:{marginTop:"6px"}},"\xa0times.\xa0"),r.a.createElement(I.a,{onClick:function(){return n.addR()}},"Ok")))))},n.renderNormalT=function(){return r.a.createElement(M.a,{id:"payments_table",striped:!0,bordered:!0,hover:!0,condensed:!0},n.renderPaymentsHeaderT(),r.a.createElement("tbody",null,n.sortedValues.map(function(e){return n.renderPaymentR(e.index)})))},n.renderPaymentsT=function(e){return n.sortedValues=n.state.values.slice(0),n.state.sort&&n.sortedValues.sort(n.sortersF()),r.a.createElement("div",null,n.renderControls(),n.renderNormalT())},n.showAlert=n.showAlert.bind(Object(A.a)(Object(A.a)(n))),n.showOk=n.showOk.bind(Object(A.a)(Object(A.a)(n))),n.changePropertyF=n.changePropertyF.bind(Object(A.a)(Object(A.a)(n))),n.changePropertyDeletedF=n.changePropertyDeletedF.bind(Object(A.a)(Object(A.a)(n))),n.changePropertyLF=n.changePropertyLF.bind(Object(A.a)(Object(A.a)(n))),n.setValueF=n.setValueF.bind(Object(A.a)(Object(A.a)(n))),n.setValueCheckF=n.setValueCheckF.bind(Object(A.a)(Object(A.a)(n))),n.setValueCheckAllF=n.setValueCheckAllF.bind(Object(A.a)(Object(A.a)(n))),n.setValueMaskF=n.setValueMaskF.bind(Object(A.a)(Object(A.a)(n))),n.setValueMaskCheckF=n.setValueMaskCheckF.bind(Object(A.a)(Object(A.a)(n))),n.validateF=n.validateF.bind(Object(A.a)(Object(A.a)(n))),n.validateMaskF=n.validateMaskF.bind(Object(A.a)(Object(A.a)(n))),n.maskedF=n.maskedF.bind(Object(A.a)(Object(A.a)(n))),n.touchedF=n.touchedF.bind(Object(A.a)(Object(A.a)(n))),n.isDifferentFromInitialF=n.isDifferentFromInitialF.bind(Object(A.a)(Object(A.a)(n))),n.drawBalanceF=n.drawBalanceF.bind(Object(A.a)(Object(A.a)(n))),n.chooseValueF=n.chooseValueF.bind(Object(A.a)(Object(A.a)(n))),n.renderContentF=n.renderContentF.bind(Object(A.a)(Object(A.a)(n))),n.renderDeletedContentF=n.renderDeletedContentF.bind(Object(A.a)(Object(A.a)(n))),n.setSortF=n.setSortF.bind(Object(A.a)(Object(A.a)(n))),n.sortersF=n.sortersF.bind(Object(A.a)(Object(A.a)(n))),n.addR=n.addR.bind(Object(A.a)(Object(A.a)(n))),n.getDefaultR=n.getDefaultR.bind(Object(A.a)(Object(A.a)(n))),n.removeR=n.removeR.bind(Object(A.a)(Object(A.a)(n))),n.setRecurring=n.setRecurring.bind(Object(A.a)(Object(A.a)(n))),n.setRecurringTimes=n.setRecurringTimes.bind(Object(A.a)(Object(A.a)(n))),n.setRecurringSpan=n.setRecurringSpan.bind(Object(A.a)(Object(A.a)(n))),n.validateR=n.validateR.bind(Object(A.a)(Object(A.a)(n))),n.readOnlyR=n.readOnlyR.bind(Object(A.a)(Object(A.a)(n))),n.isPersistedR=n.isPersistedR.bind(Object(A.a)(Object(A.a)(n))),n.disabledCheckR=n.disabledCheckR.bind(Object(A.a)(Object(A.a)(n))),n.renderPaymentR=n.renderPaymentR.bind(Object(A.a)(Object(A.a)(n))),n.resetT=n.resetT.bind(Object(A.a)(Object(A.a)(n))),n.isPristineT=n.isPristineT.bind(Object(A.a)(Object(A.a)(n))),n.hasErrorsT=n.hasErrorsT.bind(Object(A.a)(Object(A.a)(n))),n.preInitT=n.preInitT.bind(Object(A.a)(Object(A.a)(n))),n.preSubmitT=n.preSubmitT.bind(Object(A.a)(Object(A.a)(n))),n.init=n.init.bind(Object(A.a)(Object(A.a)(n))),n.renderPaymentsHeaderT=n.renderPaymentsHeaderT.bind(Object(A.a)(Object(A.a)(n))),n.renderPaymentsT=n.renderPaymentsT.bind(Object(A.a)(Object(A.a)(n))),n.renderNormalT=n.renderNormalT.bind(Object(A.a)(Object(A.a)(n))),n.renderControls=n.renderControls.bind(Object(A.a)(Object(A.a)(n))),n.tdClassName=n.tdClassName.bind(Object(A.a)(Object(A.a)(n))),n.td=n.td.bind(Object(A.a)(Object(A.a)(n))),n.thClassName=n.thClassName.bind(Object(A.a)(Object(A.a)(n))),n.th=n.th.bind(Object(A.a)(Object(A.a)(n))),n.groupLoad=n.groupLoad.bind(Object(A.a)(Object(A.a)(n))),n.dayLoad=n.dayLoad.bind(Object(A.a)(Object(A.a)(n))),n.showHistory=n.showHistory.bind(Object(A.a)(Object(A.a)(n))),n.init();var a=Object(V.a)({},Sa(n.preInitT(e.initPayments),Aa));return n.state=Object(V.a)({},a,{historyShow:!1}),n.state.maskValues.d=Pa(n.props.defaultDate),n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"showAlert",value:function(){this.msg.show("SAVE YOUR CHANGES, OR RESET FIRST!",{time:5e3,type:"success",icon:r.a.createElement("img",{src:"stop.png",alt:"SAVE YOUR CHANGES, OR RESET FIRST!"})})}},{key:"showOk",value:function(){this.msg.show("SAVED SUCCESSFULLY",{time:2e3,type:"success",icon:r.a.createElement("img",{src:"yes.png",alt:"save ok"})})}},{key:"changePropertyF",value:function(e,t,n){if(-1!==n){if(-2===n)return this.validateMaskF(t,e),void this.setValueMaskF(t,e);if(this.isPersistedR(n)){var a=Da(this.state.touched);a[n][t]=this.isDifferentFromInitialF(e,t,n),this.setState({touched:a})}this.state.masked[t]||this.validateF(t,e,n),this.setValueF(e,t,n)}else this.setValueMaskCheckF(t,e)}},{key:"changePropertyDeletedF",value:function(e,t,n){if(this.isPersistedR(n)){this.deleteCount+=e?1:-1;var a=Da(this.state.deleted);a[n]=e,this.setValueCheckF(!1,"check",n),this.setState({deleted:a})}else this.removeR(n)}},{key:"changePropertyLF",value:function(e,t,n){var a=Da(this.state.values);a[n].l=e;var r=Da(this.state.initial);r[n].l=e,this.setState({values:a,initial:r})}},{key:"setValueF",value:function(e,t,n){var a=Da(this.state.values);a[n][t]=e,this.setState({values:a})}},{key:"setValueCheckF",value:function(e,t,n){this.updateCheckedSet(e,n),this.setValueF(e,"check",n),this.props.paymentSelection(Aa.slice(0))}},{key:"setValueCheckAllF",value:function(e,t,n){var a=this,r=this.state.values.slice(0);r.map(function(t){return a.updateCheckedSet(e,t.index,r),null}),this.setState({values:r,allChecked:e}),this.props.paymentSelection(Aa.slice(0))}},{key:"setValueMaskF",value:function(e,t){var n=Object(V.a)({},this.state.maskValues);n[e]=t,this.setState({maskValues:n})}},{key:"setValueMaskCheckF",value:function(e,t){var n=Object(V.a)({},this.state.masked);n[e]=t,this.setState({masked:n}),(n=Object(V.a)({},this.state.maskErrors))[e]=t?Ca[e](this.state.maskValues[e]):null,this.setState({maskErrors:n});var a=Da(this.state.errors);this.state.values.forEach(function(n,r){a[r][e]=t?null:Ca[e](n[e])}),this.setState({errors:a})}},{key:"validateF",value:function(e,t,n){var a=this.state.errors[n][e];if(Ca[e](t)!==a){var r=Da(this.state.errors);r[n][e]=Ca[e](t),this.setState({errors:r})}}},{key:"validateMaskF",value:function(e,t){var n=Object(V.a)({},this.state.maskErrors);n[e]=this.state.masked[e]?Ca[e](t):null,this.setState({maskErrors:n})}},{key:"maskedF",value:function(e,t){return!(e<0||this.state.deleted[e])&&(this.state.masked[t]&&!this.state.values[e].l)}},{key:"touchedF",value:function(e,t){return!(e<0)&&(!this.state.deleted[e]&&(!(this.maskedF(e,t)&&this.isPersistedR(e)&&!this.isDifferentFromInitialF(this.state.maskValues[t],t,e))&&(!!this.maskedF(e,t)||!!this.isPersistedR(e)&&this.state.touched[e][t])))}},{key:"isDifferentFromInitialF",value:function(e,t,n){return e!==this.state.initial[n][t]}},{key:"chooseValueF",value:function(e,t){return this.state.deleted[e]?this.state.initial[e][t]:this.maskedF(e,t)?this.state.maskValues[t]:this.state.values[e][t]}},{key:"renderContentF",value:function(e,t){if(-1===t)return r.a.createElement("div",null,r.a.createElement(se,{id:e+"_mask_check",onValueChanged:this.changePropertyF,checked:this.state.masked[e],readOnly:!1,field:e,index:-1}));if(-2!==t||this.state.masked[e]){var n=null;switch(n=-2===t?this.state.maskValues[e]:this.chooseValueF(t,e),e){case"check":return r.a.createElement("div",null,r.a.createElement(se,{id:"check_"+t,onValueChanged:this.setValueCheckF,checked:n,readOnly:this.disabledCheckR(t),field:"check",index:t,touched:!1}));case"l":return r.a.createElement("div",null,r.a.createElement(aa,{id:this.state.values[t].id,onValueChanged:this.changePropertyLF,checked:n,readOnly:!this.isPersistedR(t)||this.state.deleted[t]||Fa(this.state.masked)||Fa(this.state.touched[t]),field:"l",index:t}));case"d":return r.a.createElement("div",null,r.a.createElement(fa,{id:"d_"+t,onValueChanged:this.changePropertyF,value:n,readOnly:this.readOnlyR(t,"d"),field:"d",index:t,touched:this.touchedF(t,"d"),linkCb:"d"!==this.props.queryType&&-2!==t&&this.isPristineT()?this.dayLoad:null,popoverText:"Show day "+n}));case"b":return r.a.createElement("div",null,r.a.createElement(la,{value:""+this.chooseValueF(t,"b"),field:"b",readOnly:!0,touched:!1,linkCb:-2===t?null:this.props.calculatorAdd}));case"i":return r.a.createElement("div",null,r.a.createElement(la,{id:"i_"+t,onValueChanged:this.changePropertyF,placeholder:"amount",value:n,readOnly:this.readOnlyR(t,"i"),field:"i",index:t,touched:this.touchedF(t,"i"),linkCb:-2===t?null:this.props.calculatorAdd,popoverText:"Add to calculator"}));case"s":return r.a.createElement("div",null,r.a.createElement(se,{id:"s_"+t,onValueChanged:this.changePropertyF,checked:n,readOnly:this.readOnlyR(t,"s"),field:"s",index:t,touched:this.touchedF(t,"s")}));case"g":return r.a.createElement("div",null,r.a.createElement(da,{id:"g_"+t,onValueChanged:this.changePropertyF,value:n,readOnly:this.readOnlyR(t,"g"),field:"g",index:t,touched:this.touchedF(t,"g"),placeholder:"gId",linkCb:"g"!==this.props.queryType&&-2!==t&&this.isPristineT()?this.groupLoad:null,popoverText:'Show all in group "'+n+'"',maxLength:15}));case"c":return r.a.createElement("div",null,r.a.createElement(oa,{onValueChanged:this.changePropertyF,value:n,readOnly:this.readOnlyR(t,e),placeholder:"select",field:"c",index:t,touched:this.touchedF(t,e),constants_id:"cat"}));case"a":return r.a.createElement("div",{style:{display:"inline-flex",whiteSpace:"nowrap"}},r.a.createElement(oa,{onValueChanged:this.changePropertyF,value:n,readOnly:this.readOnlyR(t,e),placeholder:"select",field:"a",index:t,touched:this.touchedF(t,e),constants_id:"acc"}));case"descr":return r.a.createElement("div",null,r.a.createElement(oe,{id:"descr_"+t,onValueChanged:this.changePropertyF,value:n,readOnly:this.readOnlyR(t,"descr"),field:"descr",index:t,touched:this.touchedF(t,"descr"),placeholder:"description",maxLength:50}));default:return console.log("UNKONWN field: "+e),null}}}},{key:"renderDeletedContentF",value:function(e){var t=this;return this.isPersistedR(e)?r.a.createElement("div",null,r.a.createElement(se,{id:"deleted_"+e,onValueChanged:this.changePropertyDeletedF,checked:this.state.deleted[e],readOnly:this.state.values[e].l,field:"deleted",index:e,touched:!1})):r.a.createElement("button",{type:"button",className:"form-control",onClick:function(){return t.changePropertyDeletedF(!0,"deleted",e)}},r.a.createElement(Na,{name:"remove",style:{color:"red"}}))}},{key:"setSortF",value:function(e){this.state.sort&&this.state.sort===e?this.state.sort===e&&this.state.asc?this.setState({asc:!1}):this.setState({sort:null}):this.setState({sort:e,asc:!0})}},{key:"sortersF",value:function(){var e=this,t=this.state.asc?-1:1;switch(this.state.sort){case"i":case"a":case"c":return function(n,a){return t*(e.chooseValueF(a.index,e.state.sort)-e.chooseValueF(n.index,e.state.sort))};case"d":return function(n,a){return t*(ft(e.chooseValueF(a.index,"d")).getTime()-ft(e.chooseValueF(n.index,"d")).getTime())};case"g":return function(n,a){var r=e.chooseValueF(n.index,"g").toUpperCase(),i=e.chooseValueF(a.index,"g").toUpperCase();return t*(r<i?-1:r>i?1:0)};default:return function(e,t){return 0}}}},{key:"addR",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.getDefaultR(e),n=Da(this.state.values),a=Da(this.state.errors),r=1;this.state.recurring.recur&&(r=this.state.recurring.times);for(var i=0;i<r;i++)(t=Ra(t,[])).id=Va--,t.index=n.length,t.l=!1,t.check=!1,this.state.recurring.recur&&ga(t,i,this.state.recurring.span.value),n.push(t),this.sortedValues.push(t),a.push(this.validateR(t));this.setState({recurring:Object(V.a)({},this.state.recurring,{recur:!1}),values:n,errors:a})}},{key:"setRecurring",value:function(){this.setState({recurring:Object(V.a)({},this.state.recurring,{recur:!this.state.recurring.recur})})}},{key:"setRecurringTimes",value:function(e){this.setState({recurring:Object(V.a)({},this.state.recurring,{times:e})})}},{key:"setRecurringSpan",value:function(e){this.setState({recurring:Object(V.a)({},this.state.recurring,{span:e})})}},{key:"getDefaultR",value:function(e){var t=ja;return e&&this.sortedValues.length?t=this.sortedValues[this.sortedValues.length-1]:t.d=Pa(this.props.defaultDate,"dd.mm.yyyy"),Object(V.a)({},t)}},{key:"removeR",value:function(e){this.state.values.splice(e,1);var t=Da(this.state.values);this.state.errors.splice(e,1);for(var n=Da(this.state.errors),a=e;a<t.length;a++)t[a].index--,n[a].index--;this.setState({values:t,errors:n})}},{key:"validateR",value:function(e){var t={};return Ea.forEach(function(n){t[n]=Ca[n](e[n])}),t}},{key:"readOnlyR",value:function(e,t){return!(e<0)&&(this.state.masked[t]||this.state.deleted[e]||this.state.values[e].l)}},{key:"isPersistedR",value:function(e){return this.state.values[e].id>=0}},{key:"disabledCheckR",value:function(e){return!this.isPersistedR(e)||this.state.deleted[e]}},{key:"renderPaymentR",value:function(e){var t=this;return r.a.createElement("tr",{key:e},["check","l"].concat(Object(vn.a)(Ea)).map(function(n){return t.td(e,n)}),r.a.createElement("td",{className:this.tdClassName(e,"deleted")},this.renderDeletedContentF(e)),r.a.createElement("td",null,this.isPersistedR(e)?r.a.createElement(I.a,{variant:"primary",onClick:function(){return t.showHistory(t.chooseValueF(e,"id"))}},r.a.createElement(Na,{name:"history"})):null))}},{key:"resetT",value:function(){var e=Sa(this.state.initial,Aa,this.state.recurring);e.maskValues.d=Pa(this.props.defaultDate,"dd.mm.yyyy"),this.setState(Object(V.a)({},e)),this.init()}},{key:"isPristineT",value:function(){var e=!0;return this.state.touched.forEach(function(t){Ea.forEach(function(n){e=e&&!t[n]})}),e&&this.state.initial.length===this.state.values.length&&!Fa(this.state.masked)&&!this.deleteCount}},{key:"hasErrorsT",value:function(){var e=!1;return this.state.errors.forEach(function(t){e=e||Fa(t)}),e||Fa(this.state.maskErrors)}},{key:"preInitT",value:function(e){return xa(e,Aa)}},{key:"preSubmitT",value:function(){var e=this,t=[];this.state.values.forEach(function(n,a){if(!e.isPersistedR(a)){var r={};Ea.forEach(function(t){r[t]=e.chooseValueF(a,t)}),t.push(r)}});var n=[];this.state.deleted.forEach(function(t,a){t&&n.push(e.state.values[a].id)});var a=[];this.state.values.forEach(function(t,n){if(e.isPersistedR(n)){var r={};Ea.forEach(function(a){e.touchedF(n,a)&&(r.id=t.id,r[a]=e.chooseValueF(n,a))}),Object.keys(r).length>0&&a.push(r)}});var r={created:wa(t),deleted:n,modified:wa(a)};this.pristine=null,this.props.update(r),this.showOk()}},{key:"init",value:function(){this.deleteCount=0,this.pristine=null,this.errors=null,this.allChecked=!1}},{key:"tdClassName",value:function(e,t){return t+"_cell"+(this.isPersistedR(e)?"":" newRow")+(this.state.deleted[e]?" deleted":"")+(this.state.values[e].check?" selected":"")+(this.state.errors[e][t]?" error":"")}},{key:"drawBalanceF",value:function(){return"a"===this.props.queryType&&this.pristine}},{key:"td",value:function(e,t){if("b"!==t||this.drawBalanceF())return r.a.createElement("td",{key:e+"_"+t,className:this.tdClassName(e,t)},this.renderContentF(t,e))}},{key:"thClassName",value:function(e){return e+"_header"+(this.state.maskErrors[e]?" error":"")+(Fa(this.state.masked)?" header_tall":"")}},{key:"th",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]))return r.a.createElement("th",{className:this.thClassName(e)},r.a.createElement("div",null,r.a.createElement("span",{style:{display:"flex"}},r.a.createElement("div",{style:{marginTop:8,textDecoration:"none"},className:"link-button"},null!==n?n:""))));var a=r.a.createElement(Na,{name:this.state.asc?"sort-asc":"sort-desc"}),i=r.a.createElement("div",null,this.state.sort===e?a:""),s=r.a.createElement("div",{style:{marginTop:8}},r.a.createElement("button",{type:"button",className:"link-button",onClick:function(){t.setSortF(e)}},n));return r.a.createElement("th",{className:this.thClassName(e)},r.a.createElement("div",null,r.a.createElement("span",{style:{display:"flex"}},r.a.createElement("div",{style:{marginTop:8,paddingRight:3}},i),null!==n?s:"","\xa0",this.renderContentF(e,-1))),this.renderContentF(e,-2))}},{key:"componentWillReceiveProps",value:function(e){this.init();var t=Object(V.a)({},Sa(this.preInitT(e.initPayments),Aa));this.state.maskValues.d=Pa(e.defaultDate,"dd.mm.yyyy"),this.setState(Object(V.a)({},t))}},{key:"updateCheckedSet",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!(t<0||this.disabledCheckR(t))){var a=Aa.indexOf(this.state.values[t].id);e&&a<0&&Aa.push(this.state.values[t].id),!e&&a>-1&&Aa.splice(a,1),n&&(n[t].check=e)}}},{key:"groupLoad",value:function(e){this.pristine&&e&&e.length>0&&this.props.groupLoad(e)}},{key:"dayLoad",value:function(e){this.pristine&&e&&e.length>0&&this.props.dayLoad(ft(e))}},{key:"showHistory",value:function(e){this.props.historyLoad(e),this.setState({historyShow:!0})}},{key:"render",value:function(){var e=this;return this.pristine=this.isPristineT(),this.errors=this.hasErrorsT(),r.a.createElement("div",null,r.a.createElement(be.a,Object.assign({ref:function(t){return e.msg=t}},ye)),r.a.createElement(fn.a,{query:"(max-width: 734px)"},function(t){return t?e.renderPaymentsT("narrow"):e.renderPaymentsT("wide")}),r.a.createElement(Jn,{show:this.state.historyShow,onHide:function(){return e.setState({historyShow:!1})}}),r.a.createElement(zn.a,null,r.a.createElement(qn.a,null,"Copyright"),r.a.createElement(Gn.a.Static,null,"jhupli@gmail.com")))}}]),t}(r.a.Component);Ia.defaultProps={initPayments:[],queryType:null};var Ma=Object(s.b)(null,function(e){return{update:function(t){e(Dn(t))},paymentSelection:function(t){e(Bn(t))},groupLoad:function(t){e(In(t))},dayLoad:function(t){e(Pn(t))},historyLoad:function(t){e(lt(t))},calculatorAdd:function(t){e(Wn(t))}}})(Ia),La=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).state={payments:[],balances:[]},n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){return r.a.createElement(Ma,{initPayments:this.props.payments,queryType:this.props.queryType,defaultDate:this.props.defaultDate})}}]),t}(r.a.Component);La.defaultProps={defaultDate:new Date};var Ha=Object(s.b)(function(e){return{queryType:e.payments.queryType,payments:e.payments.payments,balances:e.payments.balances}})(La),Ua=n(617),Ya=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).list=n.list.bind(Object(A.a)(Object(A.a)(n))),n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"list",value:function(){this.props.listLoad(this.props.payments)}},{key:"render",value:function(){return r.a.createElement(I.a,{onClick:this.list},r.a.createElement(Ua.a,null,this.props.payments.length))}}]),t}(r.a.Component);Ya.defaultProps={payments:[]};var Ba=Object(s.b)(function(e){return{payments:e.payment.payments}},function(e){return{listLoad:function(t){e(Mn(t))}}})(Ya),Wa=n(33);function za(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t){var i=Wa(e,"yyyymmdd")+"T00",s=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}(t[0],function(e){return i===e});if(s<0)return null;var l=[];return t.forEach(function(e,t){if(1===t&&l.push(r.a.createElement("tr",{className:"c3-tooltip-name--data2",key:-1},r.a.createElement("td",{className:"name"},r.a.createElement("span",{style:{backgroundColor:"green"}})),r.a.createElement("td",{className:"value"},ve(e[s])))),2===t&&l.push(r.a.createElement("tr",{className:"c3-tooltip-name--data2",key:-2},r.a.createElement("td",{className:"name"},r.a.createElement("span",{style:{backgroundColor:"red"}})),r.a.createElement("td",{className:"value"},ve(e[s])))),t>=3){var a=cn(n.acc,function(t){return e[0]===""+t.value});l.push(r.a.createElement("tr",{className:"c3-tooltip-name--data2",key:a.value},r.a.createElement("td",{className:"name"},r.a.createElement("span",{style:{backgroundColor:a.color}})),r.a.createElement("td",{className:"value"},ve(e[s]))))}}),r.a.createElement("table",{className:"c3-tooltip"},r.a.createElement("tbody",null,a?r.a.createElement("th",{colSpan:"2"},Wa(e,"dd.mm.yyyy ddd")):null,l))}}var qa=function(){return function(e){e({type:"NEXTDAY",payload:{nextday:(new Date).getTime()}})}},Ga=function(){return function(e){e({type:"PREVDAY",payload:{prevday:(new Date).getTime()}})}},Qa=function(){return function(e){e({type:"TODAY",payload:{today:(new Date).getTime()}})}},Ka=n(25),Ja=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).prevDay=n.prevDay.bind(Object(A.a)(Object(A.a)(n))),n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"prevDay",value:function(){this.props.chartPrevDay()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(I.a,{onClick:this.prevDay},r.a.createElement(Ka,{name:"caret-left"})))}}]),t}(r.a.Component);var Xa=Object(s.b)(null,function(e){return{chartPrevDay:function(){e(Ga())}}})(Ja),Za=n(25),$a=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).nextDay=n.nextDay.bind(Object(A.a)(Object(A.a)(n))),n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"nextDay",value:function(){this.props.chartNextDay()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(I.a,{onClick:this.nextDay},r.a.createElement(Za,{name:"caret-right"})))}}]),t}(r.a.Component);var er=Object(s.b)(null,function(e){return{chartNextDay:function(){e(qa())}}})($a),tr=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).today=n.today.bind(Object(A.a)(Object(A.a)(n))),n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"today",value:function(){this.props.chartToday()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(I.a,{onClick:this.today},"Today"))}}]),t}(r.a.Component);var nr=Object(s.b)(null,function(e){return{chartToday:function(){e(Qa())}}})(tr),ar=(n(588),n(25)),rr=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).changeValue=n.changeValue.bind(Object(A.a)(Object(A.a)(n))),n.newRow=n.newRow.bind(Object(A.a)(Object(A.a)(n))),n.clear=n.clear.bind(Object(A.a)(Object(A.a)(n))),n.state={rows:[]},n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"changeValue",value:function(e,t,n){console.log("changePropertyF: "+e+" index:"+n);var a=this.state.rows.slice();a[n]=e,this.setState({rows:a})}},{key:"newRow",value:function(){var e=this.state.rows.slice();e.push("0.00"),this.setState({rows:e})}},{key:"componentWillReceiveProps",value:function(e){if(e.ts!==this.props.ts){var t=this.state.rows.slice();t.push(e.p),this.setState({rows:t})}}},{key:"clear",value:function(){this.setState({rows:[]})}},{key:"render",value:function(){var e=this,t=0;return this.state.rows.map(function(e){return t+=Number(e),null}),r.a.createElement("div",null,r.a.createElement(P.a,null,r.a.createElement(P.a.Heading,{style:{padding:"5px",height:"30px",fontSize:"15px"}},r.a.createElement("span",{className:"pull-right",style:{display:"inline-flex"}},ve(t))),r.a.createElement(P.a.Body,{style:{padding:"2px"}},0===this.state.rows.length?null:r.a.createElement(M.a,{id:"calc_table",style:{marginBottom:"10px"},striped:!0,hover:!0,condensed:!0},r.a.createElement("tbody",{style:{border:"none"}},this.state.rows.map(function(t,n){return r.a.createElement("tr",{key:"calr"+n},r.a.createElement("td",{style:{border:"none",padding:"0px",margin:"0px"}},r.a.createElement(re,{id:"calcf",onValueChanged:e.changeValue,placeholder:"amount",value:t,readOnly:!1,field:"calc",index:n,touched:!1})))}))),r.a.createElement("span",{className:"pull-right",style:{display:"inline-flex",whiteSpace:"nowrap",marginLeft:"1px"}},r.a.createElement(I.a,{onClick:this.newRow},r.a.createElement(ar,{name:"plus"})),0===this.state.rows.length?null:r.a.createElement(I.a,{style:{fontStyle:"italic",fontWeight:"bold"},onClick:this.clear},"C")))))}}]),t}(r.a.Component),ir=Object(s.b)(function(e){return{p:e.calculator.p,ts:e.calculator.ts}})(rr),sr=n(33),lr=n(25),cr=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).state={accs:e.getConstants("acc"),cats:e.getConstants("cat"),refreshTime:null,start:null,end:null},n.defaultDate=new Date,n.prevHistory=n.prevHistory.bind(Object(A.a)(Object(A.a)(n))),n.nextHistory=n.nextHistory.bind(Object(A.a)(Object(A.a)(n))),n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"componentWillReceiveProps",value:function(e){if(e.constants&&e.constants.acc&&this.setState({accs:e.constants.acc}),e.constants&&e.constants.cat&&this.setState({accs:e.constants.cat}),null==this.state.start&&null!=e.start)this.setState({start:e.start,end:e.end});else if(null!=this.state.start&&null!=e.start&&(this.state.start.getTime()!=e.start.getTime()||this.state.end.getTime()!=e.end.getTime()))switch(this.setState({start:e.start,end:e.end}),this.props.queryType){case"d":this.props.dayLoad(this.props.params.d);break;case"a":this.props.accountLoad(this.props.params.a,e.start,e.end);break;case"c":this.props.categoryLoad(this.props.params.c,e.start,e.end)}}},{key:"prevHistory",value:function(){this.props.prevInHistory()}},{key:"nextHistory",value:function(){this.props.nextInHistory()}},{key:"render",value:function(){var e=this,t="";switch(this.props.queryType){case"d":t=r.a.createElement("span",{style:{display:"inline-flex",whiteSpace:"nowrap",alignItems:"center",marginRight:"5px",marginLeft:"5px"}},r.a.createElement(Xa,null),r.a.createElement("div",{style:{marginRight:"5px",marginLeft:"5px"}},sr(this.props.params.d,"dd.mm.yyyy ddd")),r.a.createElement(er,null)),this.defaultDate=this.props.params.d;break;case"a":var n=cn(this.props.constants.acc,function(t){return e.props.params.a===""+t.value});t=r.a.createElement("span",null,r.a.createElement("span",{style:{marginRight:"5px",marginLeft:"5px"}},"Account : ",r.a.createElement(lr,{name:"square",style:{color:n.color}})),r.a.createElement("span",null,n.label));break;case"c":var a=cn(this.props.constants.cat,function(t){return e.props.params.c===""+t.value});t=r.a.createElement("span",null,r.a.createElement("span",{style:{marginRight:"5px",marginLeft:"5px"}},"Issue : ",r.a.createElement(lr,{name:"square",style:{color:a.color}})),r.a.createElement("span",null,a.label));break;case"g":t=r.a.createElement("span",null,"\xa0",r.a.createElement(lr,{name:"paperclip",size:"lg"}),"  ",this.props.params.g);break;case"l":t=r.a.createElement("span",null,"\xa0",r.a.createElement(lr,{name:"check-square",size:"lg"}),"  ",this.props.params.g);break;default:t=""}var i=null;"d"===this.props.queryType&&this.props.curves&&null!==(i=za(this.props.params.d,this.props.curves,this.props.constants))&&(i=r.a.createElement("div",{style:{paddingBottom:"4px"}},i));var s=null==this.props.historystack||null==this.props.historystack.first||this.props.historystack.first,l=null==this.props.historystack||null==this.props.historystack.last||this.props.historystack.last,c=r.a.createElement(P.a.Heading,{style:{paddingTop:"5px",paddingBottom:"3px",height:"45px"}},r.a.createElement("div",{style:{display:"inline-flex",whiteSpace:"nowrap",alignItems:"center",fontSize:"23px"}},r.a.createElement(lr,{name:"th-list"}),"\xa0",r.a.createElement(Ba,null),r.a.createElement("span",{style:{fontSize:"15px"}},t),r.a.createElement(it,{fetching:this.props.fetching})),r.a.createElement("span",{className:"pull-right",style:{display:"inline-flex"}},r.a.createElement(nr,null),r.a.createElement(I.a,{style:{borderRadius:"20px",height:"35px",paddingTop:"2px",color:s?"gray":"darkblue"},onClick:this.prevHistory,disabled:s},r.a.createElement(lr,{name:"arrow-circle-left",size:"2x",color:"blue"})),r.a.createElement(I.a,{style:{borderRadius:"20px",height:"35px",paddingTop:"2px",color:l?"gray":"darkblue"},disabled:l,onClick:this.nextHistory},r.a.createElement(lr,{name:"arrow-circle-right",size:"2x",color:"blue"})))),o=r.a.createElement(P.a.Heading,{style:{paddingTop:"5px",paddingBottom:"3px",height:"80px"}},r.a.createElement("div",{style:{display:"inline-flex",whiteSpace:"nowrap",alignItems:"center",fontSize:"23px"}},r.a.createElement(lr,{name:"th-list"}),"\xa0",r.a.createElement(Ba,null),r.a.createElement("span",{style:{fontSize:"15px"}},t),r.a.createElement(Ba,null),r.a.createElement(it,{fetching:this.props.fetching})),r.a.createElement("span",{style:{display:"inline-flex"}},r.a.createElement(nr,null),r.a.createElement(I.a,{style:{borderRadius:"20px",height:"35px",paddingTop:"2px",color:s?"gray":"darkblue"},onClick:this.prevHistory,disabled:s},r.a.createElement(lr,{name:"arrow-circle-left",size:"2x",color:"blue"})),r.a.createElement(I.a,{style:{borderRadius:"20px",height:"35px",paddingTop:"2px",color:l?"gray":"darkblue"},disabled:l,onClick:this.nextHistory},r.a.createElement(lr,{name:"arrow-circle-right",size:"2x",color:"blue"}))));return r.a.createElement("div",null,r.a.createElement(P.a,{style:{width:"100%",opacity:this.props.fetching?.3:1}},r.a.createElement(fn.a,{query:"(max-width: 432px)"},function(e){return e?o:c}),r.a.createElement(P.a.Body,null,r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{style:{width:"100%",verticalAlign:"top"}},r.a.createElement(Ha,{defaultDate:this.defaultDate})),r.a.createElement("td",{style:{width:"30px",verticalAlign:"top",paddingLeft:"4px"}},i,r.a.createElement(ir,null))))))))}}]),t}(r.a.Component);var or=Object(s.b)(function(e){return{fetching:e.payments.fetching,queryType:e.payments.queryType,historystack:e.payments.historystack,params:e.payments.params,refreshTime:e.constants.refreshTime,constants:e.constants.constants,curves:e.chart.curves,start:e.daterange.s,end:e.daterange.e}},function(e){return{getConstants:function(t){ee(t,e)},prevInHistory:function(){e(Hn())},nextInHistory:function(){e(Un())},dayLoad:function(t){e(Pn(t))},accountLoad:function(t,n,a){e(Vn(t,n,a))},categoryLoad:function(t,n,a){e(An(t,n,a))}}})(cr),ur=n(83),dr=n.n(ur),hr=n(241),pr=n.n(hr),fr=(n(591),n(103)),mr=n(33),br=-1,yr=!1,vr=function(e){function t(e){var n;Object(_.a)(this,t),n=Object(T.a)(this,Object(S.a)(t).call(this,e));var a=Object(A.a)(Object(A.a)(n));return n.state={start:null,end:null,curves:null,constants:e.getConstants("acc"),refreshTime:null,selectedType:"",nextday:null,prevday:null,today:null,redraw:null},n.boundingRect=null,n.hahlo_ix=null,n.hahlo=null,n.draw=n.draw.bind(Object(A.a)(Object(A.a)(n))),n.dateselect=n.dateselect.bind(Object(A.a)(Object(A.a)(n))),n.paint_dayselection=n.paint_dayselection.bind(Object(A.a)(Object(A.a)(n))),n.nextday=n.nextday.bind(Object(A.a)(Object(A.a)(n))),n.prevday=n.prevday.bind(Object(A.a)(Object(A.a)(n))),n.today=n.today.bind(Object(A.a)(Object(A.a)(n))),n.redraw=n.redraw.bind(Object(A.a)(Object(A.a)(n))),n.legendnames=n.legendnames.bind(Object(A.a)(Object(A.a)(n))),n.onmouseover=n.onmouseover.bind(Object(A.a)(Object(A.a)(n))),n.onmouseover_account=n.onmouseover_account.bind(Object(A.a)(Object(A.a)(n))),n.onmouseout=n.onmouseout.bind(Object(A.a)(Object(A.a)(n))),n.find_ix=n.find_ix.bind(Object(A.a)(Object(A.a)(n))),n.chartDatetoDate=n.chartDatetoDate.bind(Object(A.a)(Object(A.a)(n))),n.tooltip=n.tooltip.bind(Object(A.a)(Object(A.a)(n))),n.c3onRendered=n.c3onRendered.bind(Object(A.a)(Object(A.a)(n))),n.timer=null,n.chart_config={onrendered:n.c3onRendered,bindto:"#chart",grid:{x:{show:!0},y:{show:!0,lines:[{value:0}]}},tooltip:{grouped:!0,contents:function(e,t,n,r){return a.tooltip(e)}},data:{x:"x",onmouseover:function(e){yr&&a.onmouseover(e)},onclick:n.onmouseover,xFormat:"%Y%m%dT%H",columns:null,transition:{duration:500},names:{},colors:{},types:{},type:"bar",groups:[["E","I"]],selection:{}},axis:{x:{type:"timeseries",tick:{culling:{max:10},format:function(e){return mr(e,"dd.mm")}}}},legend:{item:{onclick:function(e){a.onmouseover_account(e)},onmouseover:function(e){!this.transiting&&this.isTargetToShow(e)&&this.api.focus(e),yr&&a.onmouseover_account(e)}}}},n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"tooltip",value:function(e){var t=za(e[0].x,this.props.curves,this.props.constants,!0);return pr.a.renderToStaticMarkup(t)}},{key:"onmouseout",value:function(){this.timer&&clearTimeout(this.timer)}},{key:"onmouseover",value:function(e){var t=this;if(yr){if("I"===e.id&&0!==wt(e.x,this.selectedDate)){this.timer&&clearTimeout(this.timer);this.timer=setTimeout(function(){t.dateselect(e.x)},300)}}else this.dateselect(e.x)}},{key:"chartDatetoDate",value:function(e){var t=e.substring(0,4),n=e.substring(4,6)-1,a=e.substring(6,8);return new Date(t,n,a)}},{key:"find_ix",value:function(e){return this.chart_config.data.columns?wt(this.chartDatetoDate(this.chart_config.data.columns[0][1]),e):null}},{key:"nextday",value:function(){this.selectedDate&&this.dateselect(Ct(this.selectedDate,1))}},{key:"prevday",value:function(){this.selectedDate&&this.dateselect(Ct(this.selectedDate,-1))}},{key:"today",value:function(){var e=new Date;this.props.daterangeToday(),this.dateselect(e)}},{key:"redraw",value:function(){this.draw()}},{key:"onmouseover_account",value:function(e){var t=this;if("I"!==e&&"E"!==e){var n=this;this.timer=setTimeout(function(){t.props.accountLoad(e,n.props.start,n.props.end)},300)}}},{key:"dateselect",value:function(e){this.selectedDate=e;var t=this.find_ix(e);null!==t&&-1===t&&(this.props.daterangePrevBlock(),t=this.chart_config.data.columns[0].length-2),null!=t&&t===this.chart_config.data.columns[0].length-1&&(this.props.daterangeNextBlock(),t=0),this.props.dayLoad(e,t),this.paint_dayselection()}},{key:"paint_dayselection",value:function(){if(null!=this.hahlo_ix){var e=mr(Ct(this.selectedDate,-1),"yyyymmdd")+"T20",t=mr(this.selectedDate,"yyyymmdd")+"T4";this.chart_config.regions[this.hahlo_ix].start=e,this.chart_config.regions[this.hahlo_ix].end=t,dr.a.generate(this.chart_config)}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"chart",onMouseOut:function(){return e.onmouseout()}})}},{key:"draw",value:function(){if(this.boundingRect=document.getElementById("chart").getBoundingClientRect(),this.chart_config.data.columns){if(!this.chart_config.regions){this.chart_config.regions=[];for(var e=1;e<this.chart_config.data.columns[0].length;e++)for(var t=3;t<this.chart_config.data.columns.length;t++){var n=mr(Ct(this.chartDatetoDate(this.chart_config.data.columns[0][e]),-1),"yyyymmdd")+"T12",a=mr(this.chartDatetoDate(this.chart_config.data.columns[0][e]),"yyyymmdd")+"T12";this.chart_config.regions.push({start:n,end:a,class:this.chart_config.data.columns[t][e]<0?"red":"white"})}if(this.selectedDate){this.hahlo_ix=this.chart_config.regions.length;var r=mr(Ct(this.selectedDate,-1),"yyyymmdd")+"T20",i=mr(this.selectedDate,"yyyymmdd")+"T4";this.chart_config.regions.push({start:r,end:i,class:"gray"})}}dr.a.generate(this.chart_config)}}},{key:"c3onRendered",value:function(){var e=this;this.chart_config.data.columns[0].forEach(function(t,n){if(n>0){var a=fr.selectAll("#chart").select(".c3-event-rect-"+(n-1)),r=e.chartDatetoDate(t);a[0][0].onclick=function(){e.dateselect(r)}}})}},{key:"componentWillReceiveProps",value:function(e){if(e.nextday!==this.props.nextday&&this.nextday(),e.prevday!==this.props.prevday&&this.prevday(),e.today!==this.props.today&&this.today(),e.redraw!==this.props.redraw&&this.redraw(),e.selectedType!==this.props.selectedType&&(br=-1),"d"===e.selectedType&&(this.selectedDate=e.params.d,this.paint_dayselection()),e.constants&&e.constants[this.props.constants_id]){var t=e.constants[this.props.constants_id],n=cn(t,function(t){return t.value===e.selectedValue}),a=t.filter(function(e){return e.valid||e===n});this.setState({selectedValue:n,items:a})}if(this.state.start!=e.start||this.state.end!=e.end)this.setState({start:e.start,end:e.end}),this.props.chartLoad(e.start,e.end);else if((e.curves!==this.props.curves||e.refreshTime!==this.props.refreshTime)&&(this.chart_config.data.names={},this.chart_config.data.types={},this.chart_config.data.colors={},this.chart_config.data.columns=e.curves,this.chart_config.regions=null,this.legendnames(e.curves,e.constants),this.chart_config.data.colors.I="green",this.chart_config.data.colors.E="red",e.curves)){for(var r=function(e){return s===""+e.value},i=3;i<e.curves.length;i++){var s=e.curves[i][0],l=cn(e.constants.acc,r);this.chart_config.data.colors[s]=l.color,this.chart_config.data.types[s]="spline"}this.draw()}}},{key:"legendnames",value:function(e,t){if(this.chart_config.data.names.I="Income",this.chart_config.data.names.E="Exp",e)for(var n=function(e){return r===""+e.value},a=3;a<e.length;a++){var r=e[a][0],i=cn(t.acc,n);this.chart_config.data.names[r]=i.label}}}]),t}(r.a.Component);var gr=Object(s.b)(function(e){return{start:e.daterange.s,end:e.daterange.e,curves:e.chart.curves,nextday:e.day.nextday,prevday:e.day.prevday,today:e.day.today,redraw:e.chart.redraw,refreshTime:e.constants.refreshTime,constants:e.constants.constants,selectedType:e.payments.queryType,params:e.payments.params}},function(e){return{chartLoad:function(t,n){br=-1,e(Le(t,n))},dayLoad:function(t,n){n!==br&&(br=n,e(Pn(t)))},accountLoad:function(t,n,a){t!==br&&(br=t,e(Vn(t,n,a)))},getConstants:function(t){ee(t,e)},daterangeToday:function(){e(Pt())},daterangeNextBlock:function(){e(Dt())},daterangePrevBlock:function(){e(Nt())},setDateRange:function(t,n){e(Ft(t,n))}}})(vr),Or=function(e){function t(){return Object(_.a)(this,t),Object(T.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(P.a,{style:{opacity:this.props.fetching?.3:1}},r.a.createElement(P.a.Body,null,r.a.createElement(gr,null))))}}]),t}(r.a.Component),Er=Object(s.b)(function(e){return{fetching:e.chart.fetching,start:e.daterange.s,end:e.daterange.e}})(Or),jr={startDate:Ct(new Date,-10),endDate:Ct(new Date,10)},kr=(n(593),n(103)),Cr=!1,xr={},wr=function(e){function t(e){var n;Object(_.a)(this,t),n=Object(T.a)(this,Object(S.a)(t).call(this,e));var a=Object(A.a)(Object(A.a)(n));return n.state={constants:e.getConstants("cat"),refreshTime:null,redraw:null},n.draw=n.draw.bind(Object(A.a)(Object(A.a)(n))),n.redraw=n.redraw.bind(Object(A.a)(Object(A.a)(n))),n.onmouseover=n.onmouseover.bind(Object(A.a)(Object(A.a)(n))),n.onmouseout=n.onmouseout.bind(Object(A.a)(Object(A.a)(n))),n.c3onRendered=n.c3onRendered.bind(Object(A.a)(Object(A.a)(n))),n.d3onMouseI=n.d3onMouseI.bind(Object(A.a)(Object(A.a)(n))),n.d3onMouseOutI=n.d3onMouseOutI.bind(Object(A.a)(Object(A.a)(n))),n.d3onMouseE=n.d3onMouseE.bind(Object(A.a)(Object(A.a)(n))),n.d3onMouseOutE=n.d3onMouseOutE.bind(Object(A.a)(Object(A.a)(n))),n.getBoudingRect=n.getBoudingRect.bind(Object(A.a)(Object(A.a)(n))),n.timer=null,n.chart_config={onrendered:n.c3onRendered,sum_i:0,sum_e:0,bindto:"#pie",tooltip:{format:{value:function(e,t,n){return"p"===n.substr(0,1)?e+"  ("+ve(100*e/a.chart_config.sum_i)+"%)":-e+"  ("+ve(100*-e/a.chart_config.sum_e)+"%)"}}},data:{names:{},columns:[],colors:{},order:null,onclick:function(e){a.onmouseover(e.id)},onmouseover:function(e){Cr&&a.onmouseover(e.id)},type:"pie"},pie:{label:{format:function(e,t,n){return xr[n]}}},legend:{show:!0,item:{onclick:function(e){a.onmouseover(e)},onmouseover:function(e){!this.transiting&&this.isTargetToShow(e)&&this.api.focus(e),Cr&&a.onmouseover(e)}}}},n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"onmouseout",value:function(){this.timer&&clearTimeout(this.timer)}},{key:"onmouseover",value:function(e){var t=this;this.timer=setTimeout(function(){t.props.categoryLoad(e.substring(1),t.props.start,t.props.end)},300)}},{key:"getBoudingRect",value:function(){var e=document.getElementById(this.chart_config.bindto.substring(1)).getBoundingClientRect(),t=document.documentElement,n=(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0),a=(window.pageYOffset||t.scrollTop)-(t.clientTop||0);return{left:n+e.left,top:a+e.top}}},{key:"d3onMouseI",value:function(){var e=this.getBoudingRect();kr.select("#incomes").style({display:"inline",left:-60+e.left+"px",top:150+e.top+"px"})}},{key:"d3onMouseOutI",value:function(){kr.select("#incomes").style({display:"none"})}},{key:"d3onMouseE",value:function(){var e=this.getBoudingRect();kr.select("#expences").style({display:"inline",left:e.left+"px",top:150+e.top+"px"})}},{key:"d3onMouseOutE",value:function(){kr.select("#expences").style({display:"none"})}},{key:"c3onRendered",value:function(){var e=this.lessThan700?this.lessThan450?8:20:40,t=this.chart_config.sum_i-this.chart_config.sum_e;if(0!==t){var n=-this.chart_config.sum_e/t*2*Math.PI,a=kr.svg.arc().innerRadius(0).outerRadius(e).startAngle(0).endAngle(n),r=kr.svg.arc().innerRadius(0).outerRadius(e).startAngle(n).endAngle(2*Math.PI),i=kr.svg.arc().innerRadius(e).outerRadius(e+1).startAngle(0).endAngle(2*Math.PI),s=kr.selectAll("#pie").select(".c3-chart-arcs");s.append("svg:path").attr("id","arc-minus").style("stroke-width",0).attr("d",a).on({click:this.d3onMouseE,mouseover:this.d3onMouseE,mouseout:this.d3onMouseOutE}),s.append("svg:path").attr("id","arc-plus").style("stroke-width",0).attr("d",r).on({click:this.d3onMouseI,mouseover:this.d3onMouseI,mouseout:this.d3onMouseOutI}),s.append("svg:path").attr("id","arc-space").style("stroke-width",0).attr("d",i)}}},{key:"draw",value:function(){dr.a.generate(this.chart_config)}},{key:"redraw",value:function(){this.draw()}},{key:"componentWillReceiveProps",value:function(e){if(this.props.start!==e.start||this.props.end!==e.end)this.props.pieLoad(e.start,e.end);else{var t={},n=[],a=0,r=0,i=null;e.slices&&(e.slices.forEach(function(s){var l=cn(e.constants.cat,function(e){return s.c===e.value});s.sl<0?(r+=s.sl,i="n"+s.c,xr[i]=l.label,t[i]=l.color,n.push([i,-s.sl])):(a+=s.sl,i="p"+s.c,xr[i]=l.label,t[i]=l.color,n.push([i,s.sl]))}),this.chart_config.sum_i=a,this.chart_config.sum_e=r,this.chart_config.data.names=xr,this.chart_config.data.colors=t,this.chart_config.data.columns=n,this.draw())}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(fn.a,{query:"(max-width: 699px)"},function(t){return e.lessThan700=t}),r.a.createElement(fn.a,{query:"(max-width: 449px)"},function(t){return e.lessThan450=t}),r.a.createElement("div",{id:"pie",onMouseOut:function(){return e.onmouseout()}}),r.a.createElement("table",{id:"incomes",className:"c3-tooltip",style:{display:"none",position:"absolute"}},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{style:{backgroundColor:"green"}})," Income total"),r.a.createElement("td",null,ve(this.chart_config.sum_i))))),r.a.createElement("table",{id:"expences",className:"c3-tooltip",style:{display:"none",position:"absolute"}},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{style:{backgroundColor:"red"}})," Expences total"),r.a.createElement("td",null,ve(this.chart_config.sum_e))))))}}]),t}(r.a.Component);wr.defaultProps={start:jr.startDate,end:jr.endDate,slices:null};var _r=Object(s.b)(function(e){return{start:e.daterange.s,end:e.daterange.e,slices:e.pie.slices,refreshTime:e.constants.refreshTime,redraw:e.pie.redraw,constants:e.constants.constants}},function(e){return{pieLoad:function(t,n){e(Cn(t,n))},categoryLoad:function(t,n,a){e(An(t,n,a))},getConstants:function(t){ee(t,e)}}})(wr),Rr=function(e){function t(){return Object(_.a)(this,t),Object(T.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(P.a,{style:{opacity:this.props.fetching?.3:1}},r.a.createElement(P.a.Body,null,r.a.createElement(_r,null))))}}]),t}(r.a.Component),Tr=Object(s.b)(function(e){return{fetching:e.pie.fetching,start:e.daterange.s,end:e.daterange.e}})(Rr),Sr=function(e){return function(t){"c"===e&&t(ne()),"a"===e&&t(Be()),"l"===e&&t(lt()),t(function(e){return{type:"SHOW_VIEW",payload:{view:e}}}(e))}},Fr=function(){return r.a.createElement(rt,null)},Dr=function(){return r.a.createElement(Ne,null)},Nr=function(){return r.a.createElement(kt,null)},Pr=function(e){function t(){return Object(_.a)(this,t),Object(T.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(R.a)(t,[{key:"componentWillReceiveProps",value:function(e){"main"!==this.props.view&&"main"===e.view&&(this.props.minibarsRedraw(),this.props.chartRedraw(),this.props.pieRedraw())}},{key:"render",value:function(){var e=r.a.createElement("div",null,r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(yn,null)),r.a.createElement("div",{style:{width:"100%"}},r.a.createElement("div",{style:{width:"100%",display:"inline-flex",whiteSpace:"nowrap"}},r.a.createElement("div",{style:{width:"75%",paddingRight:"2px"}},r.a.createElement(Er,null)),r.a.createElement("div",{style:{width:"25%",paddingLeft:"2px"}},r.a.createElement(Tr,null)))),r.a.createElement(or,null));return r.a.createElement("div",{style:{padding:"15px"}},r.a.createElement("div",{style:{display:"main"===this.props.view?"":"none"}},e),r.a.createElement("div",{style:{display:"a"===this.props.view?"":"none"}},r.a.createElement(Fr,null)),r.a.createElement("div",{style:{display:"c"===this.props.view?"":"none"}},r.a.createElement(Dr,null)),r.a.createElement("div",{style:{display:"l"===this.props.view?"":"none"}},r.a.createElement(Nr,null)))}}]),t}(r.a.Component);Pr.defaultProps={view:"main"};var Vr=Object(s.b)(function(e){return{view:e.navi.view}},function(e){return{showView:function(t){e(Sr(t))},chartRedraw:function(){e(Ue())},pieRedraw:function(){e(xn())},minibarsRedraw:function(){e(Mt())}}})(Pr),Ar=n(618),Ir=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).dismiss=n.dismiss.bind(Object(A.a)(Object(A.a)(n))),n.show=n.show.bind(Object(A.a)(Object(A.a)(n))),n.state={show:!1},n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"dismiss",value:function(){this.setState({show:!1})}},{key:"show",value:function(){this.setState({show:!0})}},{key:"componentWillReceiveProps",value:function(e){e.when!==this.props.when&&this.show()}},{key:"render",value:function(){if(!this.state.show)return null;var e=this.props,t=e.status,n=e.msg;return r.a.createElement(Ar.a,{bsStyle:"danger",onDismiss:this.dismiss},r.a.createElement("h4",null,"We've got an error!"),"Server returned:",r.a.createElement("ul",null,r.a.createElement("li",null,"Status: ",t),r.a.createElement("li",null,"Message: ",n)),r.a.createElement("hr",null),r.a.createElement("p",null,r.a.createElement(I.a,{onClick:this.dismiss},"Close")))}}]),t}(r.a.Component);Ir.defaultProps={when:0};var Mr=Object(s.b)(function(e){return{status:e.errorMessage.status,msg:e.errorMessage.msg,when:e.errorMessage.when}})(Ir),Lr=n(624),Hr=n(619),Ur=n(623),Yr=n(620),Br=function(e){return{type:"VERSIONINFO_RESPONSE",payload:{version:e}}},Wr=function(){return function(e){e({type:"VERSIONINFO_REQUEST"}),H.a.get(B+"version?ts="+Date.now(),{port:8080}).then(function(t){e(Br(t.data))}).catch(function(t){e(Br("Unavailable"))})}},zr=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).props.versionInfo(),n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.version)}}]),t}(r.a.Component);var qr=Object(s.b)(function(e){return{version:e.versionInfo.version}},function(e){return{versionInfo:function(){e(Wr())}}})(zr),Gr=n(626),Qr=(n(595),function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).generatedOk=n.generatedOk.bind(Object(A.a)(Object(A.a)(n))),n.copy=n.copy.bind(Object(A.a)(Object(A.a)(n))),n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"copy",value:function(){var e=document.getElementById("groupid");e.select(),e.setSelectionRange(0,99999),document.execCommand("copy")}},{key:"generatedOk",value:function(){this.msg.show("COPIED ON CLIPBOARD",{time:2e3,type:"success",icon:r.a.createElement("img",{src:"yes.png",alt:"save ok"})})}},{key:"render",value:function(){var e=this,t=Object(V.a)({},this.props),n={show:t.show,onHide:t.onHide};return r.a.createElement("div",null,r.a.createElement(be.a,Object.assign({ref:function(t){return e.msg=t}},ye)),r.a.createElement(Qn.a,Object.assign({},n,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:"true",dialogClassName:"modal-20w"}),r.a.createElement(Qn.a.Header,{closeButton:!0},r.a.createElement(Qn.a.Title,{id:"contained-modal-title-vcenter"},"Unused group-id")),r.a.createElement(Qn.a.Body,null,r.a.createElement(zn.a,null,r.a.createElement(Gr.a,null,r.a.createElement(Gn.a,{type:"text",defaultValue:this.props.g,id:"groupid"}),r.a.createElement(Gr.a.Button,null,r.a.createElement(I.a,{onClick:function(){e.copy(),e.props.onHide(),e.generatedOk()}},"Copy"))))),r.a.createElement(Qn.a.Footer,null,r.a.createElement(I.a,{onClick:this.props.onHide,bsStyle:"primary"},"Close"))))}}]),t}(r.a.Component)),Kr=Object(s.b)(function(e){return{}})(Qr),Jr=function(){return function(e){e({type:"NEW_GROUP_REQUEST"}),z("group/newid",null,function(t){e({type:"NEW_GROUP_RESPONSE",payload:{g:t.data}})},e)}},Xr=(n(597),function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).generateGroup=n.generateGroup.bind(Object(A.a)(Object(A.a)(n))),n.showGropId=n.showGropId.bind(Object(A.a)(Object(A.a)(n))),n.state={groupIdShow:!1},n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"generateGroup",value:function(){this.props.newGroup()}},{key:"componentWillReceiveProps",value:function(e){e.g!==this.props.g&&this.showGropId()}},{key:"showGropId",value:function(){this.setState({groupIdShow:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(be.a,Object.assign({ref:function(t){return e.msg=t}},ye)),r.a.createElement(Lr.a,{style:{marginBottom:"0px"}},r.a.createElement(Lr.a.Header,null,r.a.createElement(Lr.a.Brand,null,r.a.createElement("span",{style:{display:"inline-flex",whiteSpace:"nowrap"}},"Onassis\xa0",r.a.createElement(qr,null))),r.a.createElement(Lr.a.Toggle,null)),r.a.createElement(Lr.a.Collapse,null,r.a.createElement(Hr.a,null,r.a.createElement(Ur.a,{eventKey:3,title:"View",id:"basic-nav-dropdown"},r.a.createElement(Yr.a,{eventKey:3.1,onSelect:function(t){e.props.showView("main")}},"main"===this.props.view?"X":""," Main"),r.a.createElement(Yr.a,{eventKey:3.2,onSelect:function(t){e.props.showView("c")}},"c"===this.props.view?"X":""," Issues"),r.a.createElement(Yr.a,{eventKey:3.3,onSelect:function(t){e.props.showView("a")}},"a"===this.props.view?"X":""," Accounts"),r.a.createElement(Yr.a,{divider:!0}),r.a.createElement(Yr.a,{eventKey:3.4,onSelect:function(t){e.props.showView("l")}},"l"===this.props.view?"X":""," Logs")),r.a.createElement(Ur.a,{eventKey:4,title:"Util",id:"basic-nav-dropdown"},r.a.createElement(Yr.a,{eventKey:4.1,onSelect:function(t){e.generateGroup()}},"Generate unused groupid"))))),r.a.createElement(Kr,{g:this.props.g,show:this.state.groupIdShow,onHide:function(){return e.setState({groupIdShow:!1})}}))}}]),t}(r.a.Component));Xr.defaultProps={view:"main"};var Zr=Object(s.b)(function(e){return{view:e.navi.view,g:e.group.g}},function(e){return{showView:function(t){e(Sr(t))},newGroup:function(){e(Jr())}}})(Xr),$r=function(e){return{type:"PING_RESPONSE",payload:{up:e}}},ei=function(){return function(e){e({type:"PING_REQUEST"}),H.a.get(B+"ping?ts="+Date.now(),{port:8080}).then(function(t){e($r(!0))}).catch(function(t){e($r(!1))})}},ti=function(e){function t(e){var n;return Object(_.a)(this,t),(n=Object(T.a)(this,Object(S.a)(t).call(this,e))).timer=null,n}return Object(F.a)(t,e),Object(R.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.timer=setInterval(function(){e.props.ping()},5e3)}},{key:"render",value:function(){if(!this.props.show)return null;return r.a.createElement("div",{style:{position:"fixed",top:0,bottom:0,left:0,right:0,backgroundColor:"rgba(0,0,0,0.3)",padding:50,zIndex:1e3}},r.a.createElement("div",{style:{backgroundColor:"#fff",borderRadius:5,maxWidth:500,minHeight:300,margin:"0 auto",padding:30}},"Waiting for service to be available..."))}}]),t}(r.a.Component);ti.defaultProps={show:!1};var ni=Object(s.b)(function(e){return{show:0!==e.ping.length&&!e.ping.up}},function(e){return{ping:function(){e(ei())}}})(ti),ai=function(e){return r.a.createElement("div",null,r.a.createElement(N.a,{handleKeys:["shift+left","left","shift+right","right"],onKeyEvent:function(t,n){switch(t){case"shift+left":e.daterange_prev_block();break;case"left":e.prev_day();break;case"shift+right":e.daterange_next_block();break;case"right":e.next_day()}}}))},ri=function(e){function t(){return Object(_.a)(this,t),Object(T.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(R.a)(t,[{key:"componentDidMount",value:function(){this.props.today()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ai,{daterange_prev_block:this.props.daterange_prev_block,daterange_next_block:this.props.daterange_next_block,prev_day:this.props.prev_day,next_day:this.props.next_day}),r.a.createElement(ni,null),r.a.createElement(Zr,null),r.a.createElement(Mr,null),r.a.createElement(Vr,null))}}]),t}(r.a.Component);var ii=Object(s.b)(null,function(e){return{today:function(){e(Qa())},prev_day:function(){e(Ga())},next_day:function(){e(qa())},daterange_prev_block:function(){e(Nt())},daterange_next_block:function(){e(Dt())}}})(ri),si=n(243),li=[c.a],ci=Object(l.createStore)(w,Object(si.composeWithDevTools)(l.applyMiddleware.apply(void 0,li)));window.reduxStore=ci,Object(i.render)(r.a.createElement(s.a,{store:ci},r.a.createElement(ii,null)),document.getElementById("root"))}},[[245,2,1]]]);
//# sourceMappingURL=main.88227393.chunk.js.map