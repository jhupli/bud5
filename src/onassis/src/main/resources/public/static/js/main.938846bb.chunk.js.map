{"version":3,"sources":["components/minibars/helpers.js","reducers/ping.js","reducers/daterange.js","reducers/minibars.js","reducers/chart.js","reducers/pie.js","reducers/payments.js","reducers/payment.js","reducers/constants.js","reducers/accounts.js","reducers/categories.js","reducers/navi.js","reducers/auditlog.js","reducers/errorMessage.js","reducers/group.js","reducers/calculator.js","reducers/day.js","reducers/versionInfo.js","reducers/index.js","actions/errorMessage.js","actions/axios.js","actions/constants.js","actions/categories.js","components/editorFields/CurrencyField.js","components/editorFields/CheckboxField.js","components/editorFields/TextField.js","components/editorFields/ColorField.js","util/alertoptions.js","util/currency.js","components/categoriesEditor/constants.js","components/categoriesEditor/CategoriesEditor.js","components/categories/categories.js","actions/chart.js","actions/accounts.js","components/accountsEditor/constants.js","components/accountsEditor/AccountsEditor.js","components/accounts/accounts.js","components/main/Spinner.js","actions/auditlog.js","components/logs/buttons.js","util/fiDate.js","components/logs/logCommons.js","components/logs/logEntry.js","components/logs/auditlogTable.js","components/logs/auditlog.js","components/logs/logs.js","util/addDays.js","actions/daterange.js","actions/minibars.js","components/minibars/minibars_d3.js","components/minibars/chunkdata.js","components/minibars/minibars.js","components/minibars/buttons/buttonL.js","components/minibars/buttons/buttonR.js","components/datepicker/datepicker.js","util/findInArray.js","components/dropdown/dropdown.js","components/constantfilter/ConstantFilter.js","components/main/RangePanel.js","actions/pie.js","actions/payments.js","actions/payment.js","actions/calculator.js","components/history/HistoryModal.js","components/editorFields/LockField.js","components/editorFields/CurrencyFieldPopover.js","components/editorFields/DropdownField.js","components/editorFields/TextFieldPopover.js","components/editorFields/DateFieldPopover.js","util/math.js","components/paymentsEditor/recurrent.js","components/paymentsEditor/constants.js","components/paymentsEditor/PaymentsEditor.js","components/payments/payments.js","components/paymentSelection/paymentSelection.js","util/tooltip.js","actions/day.js","components/day/buttonL.js","components/day/buttonR.js","components/day/buttonToday.js","components/calculator/calculator.js","components/main/DetailsPanel.js","components/chart/chart.js","components/main/ChartPanel.js","util/initials.js","components/pie/pie.js","components/main/PiePanel.js","actions/navi.js","components/main/Content.js","components/main/ErrorMessage.js","actions/versionInfo.js","components/versionInfo/versionInfo.js","components/groupid/GroupId.js","actions/group.js","components/navi/MenuBar.js","actions/ping.js","components/ping/ping.js","components/main/Onassis.js","index.js"],"names":["dates","convert","d","constructor","Date","Array","Number","String","year","month","date","NaN","compare","a","b","isFinite","this","valueOf","inRange","start","end","module","exports","reducer","state","arguments","length","undefined","action","type","Object","assign","up","payload","s","e","fetching","balances","redraw","curves","nextday","prevday","today","slices","queryType","params","payments","historystack","payment","lock_payment_request","locked","refreshTime","constants","accounts","categories","view","logentries","firstpage","lastpage","status","msg","when","g","p","ts","now","version","rootReducer","combineReducers","ping","daterange","minibars","chart","pie","navi","auditlog","errorMessage","group","calculator","day","versionInfo","showError","dispatch","showErrorAction","show_error","error","response","data","error_message","message","HOST","url","document","createElement","href","parseUrl","URL","hostname","_contextUrl","ctx_path","axios_get","f","contextUrl","axios","get","then","catch","axios_get_params","axios_post","post","constantsRefreshAction","getTime","invalidate","id","get_constants","request","done","res","json","JSON","parse","getBody","update","updates","categoriesUpdateRequestAction","load","CurrencyField","props","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","currencyValue","value","onChange","bind","assertThisInitialized","handleFocus","event","target","select","_this$props","onValueChanged","field","index","newCurrencyValue","plus","lastIndexOf","minus","replace","parseInt","slice","normalizeCurrency","setState","nextprops","_this$props2","readOnly","placeholder","touched","fontSize","react_default","autoFocus","onFocus","autoComplete","disabled","className","style","textAlign","color","substr","display","width","backgroundColor","React","Component","defaultProps","CheckboxField","checked","name","borderColor","FontAwesome","require","TextField","txtValue","_this2","linkCb","maxLength","button","Button","bsSize","onClick","ColorField","handleClick","displayColorPicker","handleClose","handleChange","hex","styles","reactCSS","default","height","borderRadius","background","swatch","padding","boxShadow","cursor","popover","position","zIndex","cover","top","right","bottom","left","react_color_lib","alertOptions","offset","theme","time","transition","currencyFormat","c","parseFloat","Math","round","toFixed","fields","defaultValues","i","active","descr","validators","preInitFormat","copy","forEach","push","copyCategory","deepCopy","preSubmitFormat","copyObject","category","initState","values","initial","errors","deleted","sort","asc","copyArray","array","splice","tempId","CategoriesEditor","renderCategoriesT","sortedValues","sortersF","Panel","Heading","Title","resetT","pristine","bsStyle","preSubmitT","addR","Body","Table","striped","bordered","hover","condensed","thClassName","th","CategoriesEditor_FontAwesome","size","map","renderCategoryR","showOk","changePropertyF","changePropertyDeletedF","setValueF","validateF","touchedF","isDifferentFromInitialF","chooseValueF","renderContentF","renderDeletedContentF","setSortF","getDefaultR","removeR","validateR","readOnlyR","isPersistedR","isPristineT","hasErrorsT","preInitT","init","tdClassName","td","objectSpread","initCategories","deleteCount","original","row","editorFields_CurrencyField","editorFields_CheckboxField","editorFields_TextField","editorFields_ColorField","console","log","_this3","inv","textA","toUpperCase","textB","defaults","valuesCopy","errorsCopy","last","l","check","values_copy","errors_copy","ix","v","_this4","key","initialCategories","show","icon","src","alt","_this5","created","modified","keys","stringify","allChecked","_this6","label","arrow","sortField","labelField","marginTop","paddingRight","_this7","dist_default","ref","connect","Categories","paddingTop","paddingBottom","alignItems","components_categoriesEditor_CategoriesEditor","store","dateFormat","chartRequestAction","chartResponseAction","chart_load","chart_refresh","assert","chart_redraw","accountsUpdateRequestAction","credit","copyAccount","account","AccountsEditor","renderAccountsT","AccountsEditor_FontAwesome","renderAccountR","initAccounts","toConsumableArray","initialAccounts","Accounts","components_accountsEditor_AccountsEditor","Spinner","auditlogResponseAction","entries","fp","lp","lastPage","PAGE_SIZE","pop","next","prev","firstPage","shift","Buttons","hs","rownr","hd","first","buttons_FontAwesome","toDateFi","fiDate","parts","split","fiDateTimeMillis","millis","getDate","m","getMonth","h","getHours","mi","getMinutes","sec","getSeconds","mspart","getMilliseconds","getFullYear","toDBFormatFi","toFiDBFormat","DBDate","op","dc","c_descr","a_descr","LogEntry","renderLogHeaderT","renderLogR","r","concat","ret","indexOf","singleEntry","logEntry","AuditLogTable","renderLogEntry","AuditLog","main_Spinner","buttons","auditlogTable","Logs","components_logs_auditlog","addDays","days","result","setDate","addMonths","months","setMonth","daydiff","d1","d2","dt1","dt2","floor","UTC","isFirstAndLastOfSameMonth","daysInMonth","getYear","prev_s","prev_e","set_daterange","setDateRangeAction","daterange_next_block","diff","daterange_prev_block","set_todayrange","setFullYear","setHours","prev_cat","balances_load","cat","balance","balancesResponseAction","balances_refresh","minibars_redraw","d3","div_border_width","column_width","line_width","b_line_width","leadin_width","leadin_x","top_margin","datearea_height","center_margin","month_height","bottom_margin","datearea_y","center_margin_y","month_y","bottom_margin_y","month_markers","miny","maxy","scale","max_selection_days","FORMAT_DATE","FORMAT_MONTH","FORMAT_MONTH_YEAR","COLOR_INCOME_NEGATIV","COLOR_INCOME_POSITIV","COLOR_BALANCE","COLOR_DAY_BACKGROUND_NORMAL","COLOR_DAY_BACKGROUND_UNDER_LIMITS","COLOR_DAY_BACKGROUND_SELECTED","COLOR_DAY_BACKGROUND_FOCUS","COLOR_MONTH_BACKGROUND_NORMAL_ODD","COLOR_MONTH_BACKGROUND_NORMAL_EVEN","COLOR_MONTH_TEXT","COLOR_UNLOCKED","COLOR_MONTH_SEPARATOR_LINE","bindto","slot_width","col_per_slot_ratio","cb_select","_DIV","_TIP_DIV","_TIP_I_DIV","_DAY_TEXT","_B_TEXT","_B_COLOR","_I_TEXT","_LEADIN","_LEADIN_ZERO","_LEADIN_ZERO_TEXT","_MAX_TEXT","_MIN_TEXT","_MONTH","_BG","_I","_E","_B","_UNLOCKED","_LINE_B_PREV","_LINE_B_NEXT","_LINE_ZERO","init_changeables","columns","left_month","monthId","right_month","monthMarkers","dateId","bgColor","smallestb","bgNormal","monthColor","roundNumberText","number","num","toPrecision","roundNumber","prefix","formatPrefix","symbol","show_tip","mid","bg","getElementById","getBoundingClientRect","doc","documentElement","offsetRect","window","pageYOffset","scrollTop","clientTop","text","iColor","normalize","_s","min","_e","max","_MS_PER_DAY","dateDiffInDays","utc1","utc2","body","clicks","click","abs","attr","mouseover","mouseout","hide_tip","create","bindTo","clicks_month","s_date","e_date","minibar_div","append","float","background-color","border-style","border-width","border-color","margin-top","tbody","pointer-events","colspan","tr2","tr1","minibar_leadin_svg","x1","x2","y1","y2","stroke","stroke-width","x","y","text-anchor","font-family","font-size","fill","minibar_svg","on","selectAll","enter","prev_b","next_b","cx","cy","leadin","updateMonth","date_id","datum","nullData","len","recreate","remove","resize","config","generate","provideddata","daydata","balances_given","idaydata","lendaydata","monthDays","dayArray","data_i","m_i","y_i","d_i","z","zlen","range_text","z0","zlen0","ax","axlen","ixlen","prevm","z1","zlen1","unshift","nextm","z2","zlen2","chunk_rawdata","prev_month_markers","linear","domain","range","init_scales","start_","end_","addEventListener","Minibars","minibarconfig","su","setDateRange","nextProps","ButtonL","prevBlock","daterangePrevBlock","buttonL_FontAwesome","ButtonR","nextBlock","daterangeNextBlock","buttonR_FontAwesome","dateRange_pickeroptions","dateLimit","showWeekNumbers","autoApply","alwaysShowCalendars","locale","direction","format","separator","applyLabel","cancelLabel","fromLabel","toLabel","customRangeLabel","daysOfWeek","monthNames","firstDay","linkedCalendars","ranges","Last 7 Days","moment","subtract","Last 30 Days","This Month","startOf","endOf","Last Month","dateSingle_pickeroptions","singleDatePicker","showDropdowns","DatePicker","$","pickerName","setStartDate","setEndDate","pickerType","daterangepicker","pickerCallback","onKeyDown","which","keyCode","preventDefault","componentWillReceiveProps","findInArray","booleanfunction","item","Dropdown","selectedValue","items","getConstants","constants_id","onValueChange","onOpenChange","vchanged","opened","renderOption","open","cbDblClick","selectedItem","validConstants","onlyValid","filter","valid","dropdown_FontAwesome","marginRight","whiteSpace","textOverflow","overflow","maxWidth","dropDown","border","backgroundImage","renderValue","options","hideResetButton","cancelKeyboardEventOnSelection","ConstantFilter","onFilterChanged","onCheck","dd","dropdown","RangePanel","showMinibars","that","setTimeout","minibarsRedraw","ctrls","paddingLeft","constantfilter_ConstantFilter","header","RangePanel_FontAwesome","buttonL","datepicker","buttonR","Toggle","componentClass","textDecoration","opacity","expanded","onToggle","react_media","query","matches","Collapse","minibars_minibars","pieRequestAction","pieResponseAction","pie_load","pie_redraw","history","current","paymentsRequestAction","paymentsResponseAction","paymentsUpdateRequestAction","payments_refresh","day_load","account_load","category_load","group_load","list_load","ids","prev_in_history","next_in_history","lock_payment","lockPaymentRequestAction","lockPaymentResponseAction","payment_selection","paymentSelectionAction","calc_add","calcAddRequestAction","HistoryModal","onHide","Modal","aria-labelledby","centered","dialogClassName","Header","closeButton","Footer","Lock","LockField_FontAwesome","Unlock","LockField","toggleLock","lockPayment","component_default","icons","LockField_Unlock","unchecked","LockField_Lock","elemId","caretPos","elem","createTextRange","move","selectionStart","focus","setSelectionRange","setCaretPosition","popoverText","inputField","linkButton","OverlayTrigger","trigger","placement","overlay","Popover","DropdownField","DateField","datePickerField","isEven","n","_addDays","date1","_addMonths","DAILY","iteration","WEEKLY","FORTNIGHTLY","TWICE_A_MONTH","MONTHLY","EVERY_OTHER_MONTH","EVERY_3_MONTHS","EVERY_4_MONTHS","EVERY_6_MONTHS","YEARLY","recurrent","span","initialMaskValues","checkedList","copyPayment","recurSpans","recurring","recur","times","masked","maskValues","maskErrors","oneIsTrue","checkedSet","PaymentsEditor","renderPaymentsHeaderT","setValueCheckAllF","PaymentsEditor_FontAwesome","drawBalanceF","renderControls","setRecurring","setRecurringSpan","react_numeric_input_default","step","precision","setRecurringTimes","renderNormalT","renderPaymentR","renderPaymentsT","showAlert","changePropertyLF","setValueCheckF","setValueMaskF","setValueMaskCheckF","maskedF","disabledCheckR","maskedCopy","validateT","groupLoad","dayLoad","showHistory","initPayments","historyShow","defaultDate","c_cbDblClick","a_cbDblClick","initialCopy","updateCheckedSet","paymentSelection","set","errorR","rcopy","categoryLoad","accountLoad","editorFields_LockField","DateFieldPopover","CurrencyFieldPopover","calculatorAdd","TextFieldPopover","editorFields_DropdownField","copyLast","count","variant","initialPayments","_this8","_this9","pos","grp","historyLoad","_this10","history_HistoryModal","FormGroup","ControlLabel","FormControl","Static","history_load","Payments","components_paymentsEditor_PaymentsEditor","PaymentSelection","list","listLoad","sum","Badge","accountsTooltipTable","dt","showdate","findIndexInArray","trs","tooltip_FontAwesome","marginLeft","acc2","colSpan","next_day","prev_day","prevDay","chartPrevDay","day_buttonL_FontAwesome","nextDay","chartNextDay","day_buttonR_FontAwesome","ButtonToday","chartToday","Calculator","changeValue","newRow","clear","rows","marginBottom","margin","calculator_FontAwesome","fontStyle","fontWeight","DetailsPanel","accs","cats","prevHistory","nextHistory","prevInHistory","nextInHistory","info","day_buttonL","day_buttonR","acc","DetailsPanel_FontAwesome","a_table","hstackfirst","hstacklast","headerNormal","paymentSelection_paymentSelection","buttonToday","headerNarrow","verticalAlign","payments_payments","calculator_calculator","selectedDayOrAccount","SELECTONHOVER","Chart","selectedType","boundingRect","hahlo_ix","hahlo","draw","dateselect","paint_dayselection","legendnames","onmouseover","onmouseover_account","onmouseout","find_ix","chartDatetoDate","tooltip","c3onRendered","timer","chart_config","onrendered","grid","lines","grouped","contents","defaultTitleFormat","defaultValueFormat","onclick","xFormat","duration","names","colors","types","groups","selection","axis","tick","culling","legend","transiting","isTargetToShow","api","ReactDOMServer","renderToStaticMarkup","clearTimeout","selectedDate","substring","daterangeToday","alku","loppu","regions","c3","onMouseOut","class","alku1","loppu1","el","svg","chartLoad","ChartPanel","chart_chart","initials","startDate","endDate","Pie","d3onMouseI","d3onMouseOutI","d3onMouseE","d3onMouseOutE","getBoudingRect","sum_i","sum_e","ratio","order","br","pageXOffset","scrollLeft","clientLeft","OUTER_ARC","lessThan700","lessThan450","total","middlepoint","PI","arc_minus","arc","innerRadius","outerRadius","startAngle","endAngle","arc_plus","arc_space","pieLoad","sl","PiePanel","components_pie_pie","show_view","loadcategories","loadaccounts","loadauditlog","naviShowViewRequestAction","Acc","accounts_accounts","Cat","categories_categories","Log","logs","Content","chartRedraw","pieRedraw","main","main_RangePanel","main_PiePanel","main_ChartPanel","main_DetailsPanel","Content_Acc","Content_Cat","Content_Log","showView","ErrorMessage","dismiss","Alert","onDismiss","VersionInfoResponseAction","port","VersionInfo","GroupId","generatedOk","copyText","execCommand","InputGroup","defaultValue","new_group","MenuBar","generateGroup","showGropId","groupIdShow","newGroup","Navbar","Brand","components_versionInfo_versionInfo","Nav","NavDropdown","eventKey","title","MenuItem","onSelect","divider","groupid_GroupId","PingResponseAction","Ping","setInterval","minHeight","Keydetect","react_keyboard_event_handler_default","handleKeys","onKeyEvent","Onassis","Onassis_Keydetect","components_ping_ping","navi_MenuBar","main_ErrorMessage","main_Content","middleware","thunk","createStore","composeWithDevTools","applyMiddleware","apply","reduxStore","render","es","main_Onassis"],"mappings":"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","file":"static/js/main.938846bb.chunk.js","sourcesContent":["var dates = {\n    convert:function(d) {\n        // Converts the date in d to a date-object. The input can be:\n        //   a date object: returned without modification\n        //  an array      : Interpreted as [year,month,day]. NOTE: month is 0-11.\n        //   a number     : Interpreted as number of milliseconds\n        //                  since 1 Jan 1970 (a timestamp) \n        //   a string     : Any format supported by the javascript engine, like\n        //                  \"YYYY/MM/DD\", \"MM/DD/YYYY\", \"Jan 31 2009\" etc.\n        //  an object     : Interpreted as an object with year, month and date\n        //                  attributes.  **NOTE** month is 0-11.\n        return (\n            d.constructor === Date ? d :\n            d.constructor === Array ? new Date(d[0],d[1],d[2]) :\n            d.constructor === Number ? new Date(d) :\n            d.constructor === String ? new Date(d) :\n            typeof d === \"object\" ? new Date(d.year,d.month,d.date) :\n            NaN\n        );\n    },\n    compare:function(a,b) {\n        // Compare two dates (could be of any type supported by the convert\n        // function above) and returns:\n        //  -1 : if a < b\n        //   0 : if a = b\n        //   1 : if a > b\n        // NaN : if a or b is an illegal date\n        // NOTE: The code inside isFinite does an assignment (=).\n        return (\n            isFinite(a=this.convert(a).valueOf()) &&\n            isFinite(b=this.convert(b).valueOf()) ?\n            (a>b)-(a<b) :\n            NaN\n        );\n    },\n    inRange:function(d,start,end) {\n        // Checks if date in d is between dates in start and end.\n        // Returns a boolean or NaN:\n        //    true  : if d is between start and end (inclusive)\n        //    false : if d is before start or after end\n        //    NaN   : if one or more of the dates is illegal.\n        // NOTE: The code inside isFinite does an assignment (=).\n       return (\n            isFinite(d=this.convert(d).valueOf()) &&\n            isFinite(start=this.convert(start).valueOf()) &&\n            isFinite(end=this.convert(end).valueOf()) ?\n            start <= d && d <= end :\n            NaN\n        );\n    }\n}\n\nmodule.exports = dates;","const reducer = (state = [], action) => {\n // console.log(\"ping reducer: \"+action.type)\n  switch (action.type) {\n    case 'PING_RESPONSE':\n    \t//console.log(\"handling PING_RESPONSE\")\n        return Object.assign({}, state, {\n            up: action.payload.up,\n          })        \n    default:\n      return state\n  }\n}\nexport default reducer","const reducer = (state = [], action) => {\n  //console.log(\"dateRange reducer: \"+action.type)\n  switch (action.type) {\n    case 'DATE_RANGE_SELECTED':\n      //console.log(\"handling DATE_RANGE_SELECTED\")\n      return Object.assign({}, state, {\n          s: action.payload.s,\n          e: action.payload.e\n        })\n    default:\n      return state\n  }\n}\nexport default reducer","const reducer = (state = [], action) => {\n  //console.log(\"minibars reducer: \"+action.type)\n  switch (action.type) {\n    case 'MINIBARS_REQUEST':\n      //console.log(\"handling MINIBARS_REQUEST\")\n      return Object.assign({}, state, {\n         fetching: true\n    })\n    case 'MINIBARS_RESPONSE':\n//        console.log(\"handling MINIBARS_RESPONSE\")\n        return Object.assign({}, state, {\n            balances: action.payload.balances,\n            fetching: false\n          }) \n    case 'MINIBARS_REDRAW':\n        //console.log(\"handling MINIBARS_REDRAW\")\n        return Object.assign({}, state, {\n            redraw: action.payload.redraw,\n        })\n    default:\n      return state\n  }\n}\nexport default reducer","const reducer = (state = [], action) => {\n  //console.log(\"chart reducer: \"+action.type)\n  switch (action.type) {\n    case 'CHART_REQUEST':\n      return Object.assign({}, state, {\n         fetching: true\n    })\n    case 'CHART_RESPONSE':\n        return Object.assign({}, state, {\n            curves: action.payload.curves,\n            fetching: false\n    }) \n    case 'CHART_NEXTDAY':\n        //console.log(\"handling CHART_NEXTDAY\")\n        return Object.assign({}, state, {\n            nextday: action.payload.nextday,\n          })\n    case 'CHART_PREVDAY':\n        //console.log(\"handling CHART_PREVDAY\")\n        return Object.assign({}, state, {\n            prevday: action.payload.prevday,\n          })  \n    case 'CHART_TODAY':\n        //console.log(\"handling CHART_TODAY\")\n        return Object.assign({}, state, {\n            today: action.payload.today,\n          })\n    case 'CHART_REDRAW':\n        //console.log(\"handling CHART_REDRAW\")\n        return Object.assign({}, state, {\n            redraw: action.payload.redraw,\n        })\n    default:\n      return state\n  }\n}\nexport default reducer","const reducer = (state = [], action) => {\n // console.log(\"pie reducer: \"+action.type)\n  switch (action.type) {\n    case 'PIE_REQUEST':\n      //console.log(\"handling PIE_REQUEST\")\n      return Object.assign({}, state, {\n         fetching: true\n    })\n    case 'PIE_RESPONSE':\n        //console.log(\"handling PIE_RESPONSE\")\n        return Object.assign({}, state, {\n            slices: action.payload.slices,\n            fetching: false\n          })\n    case 'PIE_REDRAW':\n        //console.log(\"handling PIE_REDRAW\")\n        return Object.assign({}, state, {\n            redraw: action.payload.redraw,\n        })\n    default:\n      return state\n  }\n}\nexport default reducer","const reducer = (state = [], action) => {\n  //console.log(\"payments reducer: \"+action.type)\n  switch (action.type) {\n    case \"PAYMENTS_REQUEST\":\n    case \"PAYMENTS_UPDATE_REQUEST\":\n      return Object.assign({}, state, {\n         fetching: true\n    })\n    case \"PAYMENTS_RESPONSE\":\n      //console.log(action)\n      return Object.assign({}, state, {\n    \t fetching: false,\n    \t    queryType: action.payload.queryType,\n    \t    params: action.payload.params,\n         payments: action.payload.payments,\n         balances: action.payload.balances,\n         historystack: action.payload.historystack\n       })\n    default:\n      return state\n  }\n}\n\nexport default reducer","const reducer = (state = [], action) => {\n  //console.log(\"payment reducer: \"+action.type)\n  switch (action.type) {\n    case 'LOCK_PAYMENT_RESPONSE':\n     // console.log(\"handling LOCK_PAYMENT_RESPONSE\")\n      return Object.assign({}, state, {\n    \t  payment: action.payload.payment,\n        //locked: action.payload.locked\n       })\n    case 'LOCK_PAYMENT_REQUEST':\n       // console.log(\"handling LOCK_PAYMENT_REQUEST\")\n        return Object.assign({}, state, {\n      \tlock_payment_request: action.payload.lock_payment_request,\n          locked: action.payload.locked\n         })       \n    case 'PAYMENT_SELECTION':\n        //console.log(\"handling PAYMENT_SELECTION\")\n        return Object.assign({}, state, {\n        \tpayments: action.payload.payments\n        }) \n    default:\n      return state\n  }\n}\n\nexport default reducer","const reducer = (state = [], action) => {\n // console.log(\"constants reducer: \"+action.type)\n  switch (action.type) {\n    case \"CONSTANTS_REFRESH\":\n      //console.log(\"handling CONSTANTS_REFRESH\")\n      return Object.assign({}, state, {\n    \t refreshTime : action.payload.refreshTime,\n         constants: action.payload.constants\n       })\n       \n    default:\n      return state\n  }\n}\n\nexport default reducer","const reducer = (state = [], action) => {\n // console.log(\"accounts reducer: \"+action.type)\n  switch (action.type) {\n    case \"ACCOUNTS_REQUEST\":\n      //console.log(\"handling ACCOUNTS_REQUEST\")\n      return Object.assign({}, state, {\n         fetching: true\n    })\n    case \"ACCOUNTS_RESPONSE\":\n      //console.log(\"handling ACCOUNTS_RESPONSE\")\n      return Object.assign({}, state, {\n    \t fetching: false,\n         accounts: action.payload.accounts,\n       })\n    default:\n      return state\n  }\n}\n\nexport default reducer","const reducer = (state = [], action) => {\n // console.log(\"accounts reducer: \"+action.type)\n  switch (action.type) {\n    case \"CATEGORIES_REQUEST\":\n      //console.log(\"handling CATEGORIES_REQUEST\")\n      return Object.assign({}, state, {\n         fetching: true\n    })\n    case \"CATEGORIES_RESPONSE\":\n      //console.log(\"handling CATEGORIES_RESPONSE\")\n      return Object.assign({}, state, {\n    \t fetching: false,\n         categories: action.payload.categories,\n       })\n    default:\n      return state\n  }\n}\n\nexport default reducer","const reducer = (state = [], action) => {\n // console.log(\"chart reducer: \"+action.type)\n  switch (action.type) {\n    case 'SHOW_VIEW':\n        //console.log(\"handling SHOW_VIEW\")\n        return Object.assign({}, state, {\n            view: action.payload.view,\n          })        \n    default:\n      return state\n  }\n}\nexport default reducer","const reducer = (state = [], action) => {\n // console.log(\"accounts reducer: \"+action.type)\n  switch (action.type) {\n    case \"AUDITLOG_REQUEST\":\n      //console.log(\"handling AUDITLOG_REQUEST\")\n      return Object.assign({}, state, {\n         fetching: true\n    })\n    case \"AUDITLOG_RESPONSE\":\n      //console.log(\"handling AUDITLOG_RESPONSE\")\n      return Object.assign({}, state, {\n    \t fetching: false,\n         logentries: action.payload.logentries,\n         firstpage: action.payload.firstpage,\n         lastpage: action.payload.lastpage\n       })\n    default:\n      return state\n  }\n}\n\nexport default reducer","const reducer = (state = [], action) => {\n    switch (action.type) {\n\n\t    case 'SHOW_ERROR':\n\t        return Object.assign({}, state, {\n\t            status: action.payload.status,\n\t            msg: action.payload.msg,\n\t            when: action.payload.when\n\t        })\n\t        \n\t    default:\n\t        return state\n    }\n}\n\nexport default reducer","const reducer = (state = [], action) => {\n // console.log(\"group reducer: \"+action.type)\n  switch (action.type) {\n    case \"NEW_GROUP_REQUEST\":\n      //console.log(\"handling NEW_GROUP_REQUEST\")\n      return Object.assign({}, state, {\n         fetching: true\n    })\n    case \"NEW_GROUP_RESPONSE\":\n      //console.log(\"handling NEW_GROUP_RESPONSE\")\n      return Object.assign({}, state, {\n    \t fetching: false,\n         g: action.payload.g,\n       })\n    default:\n      return state\n  }\n}\n\nexport default reducer","const reducer = (state = [], action) => {\n // console.log(\"group reducer: \"+action.type)\n  switch (action.type) {\n    case \"CALC_ADD_REQUEST\":\n      //console.log(\"handling CALC_ADD_REQUEST\")\n      return Object.assign({}, state, {\n         p: action.payload.p,\n         ts: Date.now()\n       })\n    default:\n      return state\n  }\n}\n\nexport default reducer","const reducer = (state = [], action) => {\n  switch (action.type) {\n    case 'NEXTDAY':\n        return Object.assign({}, state, {\n            nextday: action.payload.nextday,\n          })\n    case 'PREVDAY':\n        return Object.assign({}, state, {\n            prevday: action.payload.prevday,\n          })  \n    case 'TODAY':\n        return Object.assign({}, state, {\n            today: action.payload.today,\n          })\n    default:\n      return state\n  }\n}\nexport default reducer","const reducer = (state = [], action) => {\n // console.log(\"versionInfo reducer: \"+action.type)\n  switch (action.type) {\n    case 'VERSIONINFO_RESPONSE':\n    \t//console.log(\"handling VERSIONINFO_RESPONSE\")\n        return Object.assign({}, state, {\n            version: action.payload.version\n          })        \n    default:\n      return state\n  }\n}\nexport default reducer","import { combineReducers } from 'redux'\n\nimport ping from './ping'\nimport daterange from './daterange'\nimport minibars from './minibars'\nimport chart from './chart'\nimport pie from './pie'\nimport payments from './payments'\nimport payment from './payment'\nimport constants from './constants'\nimport accounts from './accounts'\nimport categories from './categories'\nimport navi from './navi'\nimport auditlog from './auditlog'\nimport errorMessage from './errorMessage'\nimport group from './group'\nimport calculator from './calculator'\nimport day from './day'\nimport versionInfo from './versionInfo'\n\nconst rootReducer = combineReducers({\n  ping,\n  daterange,\n  minibars,\n  chart,\n  pie,\n  payments,\n  payment,\n  constants,\n  accounts,\n  categories,\n  navi,\n  auditlog,\n  errorMessage ,\n  group,\n  calculator,\n  day,\n  versionInfo\n})\n\nexport default rootReducer","const showErrorAction = (status, msg, when) => ({\n    type: 'SHOW_ERROR',\n    payload: {\n        \"status\": status,\n        \"msg\": msg,\n        \"when\": when\n    }\n})\n\nconst showError = (status, msg) => (\n    (dispatch) => {\n        dispatch(showErrorAction(status, msg, Date.now()))\n    }\n)\n\nconst show_error = (error, dispatch) => {\n    if (error.response && error.response.data) {\n        dispatch(showError(error.response.status, error.response.data.error_message))\n    } else {\n        dispatch(showError('not known', error.message))\n    }\n}\n\nexport {\n    show_error\n}","import axios from 'axios';\nimport { show_error } from './errorMessage'\n//const HOST = 'http://localhost:8080/'\n\nfunction parseUrl( url ) {\n    var a = document.createElement('a');\n    a.href = url;\n    return a;\n}\n\nvar HOST = 'http://'+parseUrl(document.URL).hostname + ':8080/'\n\nfunction _contextUrl(ctx_path, params) {\n  return ctx_path + '?' + (null == params ? \"\" : params + '&') + 'ts=' + Date.now()\n}\n\nfunction axios_get(ctx_path, params, f, dispatch) {\n  var contextUrl = _contextUrl(ctx_path, params)\n\taxios.get(HOST + contextUrl)\n            .then(f)\n            .catch(error => { show_error(error, dispatch) })\t\t\n}\n\nfunction axios_get_params(ctx_path, params, f, dispatch) {\n  var contextUrl = _contextUrl(ctx_path, null)\n\taxios.get(HOST + contextUrl, params)\n            .then(f)\n            .catch(error => { show_error(error, dispatch) })\t\n}\n\nfunction axios_post(ctx_path, payload, f, dispatch) {\n\taxios.post(HOST + ctx_path, payload)\n            .then(f)\n            .catch(error => { show_error(error, dispatch) })\t\n}\n\n\nexport {HOST, axios_get, axios_get_params, axios_post}","import {HOST} from './axios';\n//var request = require('sync-request');\nimport request from 'then-request';\n\nconst CONSTANTS_REFRESH = 'CONSTANTS_REFRESH'\nconst constantsRefreshAction = (constants) => ({\n    type: CONSTANTS_REFRESH,\n    payload: {\n    \t\"refreshTime\" : (new Date()).getTime(),\n        \"constants\": constants\n    }\n})\n\nvar constants = {}\nvar fetching = {}\n\nconst invalidate = (id, dispatch) => {\n\tconstants[id] = null\n\tfetching[id] = null\n\tget_constants(id, dispatch)\n}\n\n// async function defined\nasync function makeSynchronousRequest(id) {\n\ttry {\n\t\t// http_promise is a Promise\n\t\t// \"response_body\" will hold the response if the Promise is resolved\n\t\tlet res = await request('GET', HOST + 'constants?id=' + id + '&ts='+Date.now());\n\t\tdebugger;\n\t\t//return res\n\t}\n\tcatch(e) {\n\t\t// if the Promise is rejected\n\t\tconsole.error(e);\n\t}\n}\n/*const get_constants = (id, dispatch) => {\n\t    if(!constants[id]) {\n\t    \tvar res = request('GET', HOST + 'constants?id=' + id + '&ts='+Date.now());\n\t    \t//TODO what if fails?\n\t    \tvar json = JSON.parse(res.getBody('utf8'));\n\t        constants[id] = json\n\t    }\n\t    dispatch(constantsRefreshAction(constants))\n\t    return null;\n}*/\nconst get_constants = (id, dispatch) => {\n        //console.log(\"GET: \"+ id);\n\t    if(!constants[id] && !fetching[id] ) {\n\t        fetching[id] = true;\n\t        //console.log(\"FETCHING START: \"+ id);\n\t    \t//var res = request('GET', HOST + 'constants?id=' + id + '&ts='+Date.now());\n            //var res = makeSynchronousRequest(id);\n\t    \trequest('GET', HOST + 'constants?id=' + id + '&ts='+Date.now()).done((res) => {\n\t    \t  //console.log(\"FETCHIN END: \"+ id);\n\t    \t  //debugger\n              //console.log(res.getBody());\n              var json = JSON.parse(res.getBody('utf8'));\n              constants[id] = json\n              dispatch(constantsRefreshAction(constants))\n            });\n\t    } else {\n\t        //console.log(\"IS OR FETCHING: \"+ id);\n\t        if(constants[id]) {\n\t            //console.log(\"FOUND: \" + id);\n\t            dispatch(constantsRefreshAction(constants))\n\t            return null;\n\t        }\n\t        //console.log(\"SKIP: \" + id);\n\t        return null;\n\t    }\n}\n \nexport {\n    get_constants,\n    invalidate\n}","import {axios_get, axios_post} from './axios';\nimport { invalidate } from './constants'\n\nconst CATEGORY = 'cat'\n\t\nconst CATEGORIES_REQUEST = 'CATEGORIES_REQUEST'\nconst categoriesRequestAction = () => ({\n    type: CATEGORIES_REQUEST\n})\n\nconst CATEGORIES_RESPONSE = 'CATEGORIES_RESPONSE'\nconst categoriesResponseAction = (categories) => ({\n    type: CATEGORIES_RESPONSE,\n    payload: {\n        \"categories\": categories\n    }\n})\n\nconst CATEGORIES_UPDATE_REQUEST = 'CATEGORIES_UPDATE_REQUEST'\nconst categoriesUpdateRequestAction = (updates) => ({\n    type: CATEGORIES_UPDATE_REQUEST,\n    payload: {\n    \t\"updates\": updates\n    }\n})\n\nconst CATEGORIES_UPDATE_RESPONSE = 'CATEGORIES_UPDATE_RESPONSE'\nconst categoriesUpdateResponseAction = () => ({\n    \ttype: CATEGORIES_UPDATE_RESPONSE\n})\n\nconst update = (updates) => (\n    (dispatch) => {\n        dispatch(categoriesUpdateRequestAction(updates))\n        axios_post('cat/update', updates,\n            (response) => {\n               dispatch(categoriesUpdateResponseAction())\n               dispatch(load())\n               invalidate(CATEGORY, dispatch)\n            },\n            dispatch\n        )\n    }\n )\n\n const load = () => (\n    (dispatch) => {\n        dispatch(categoriesRequestAction())\n        axios_get('cat/list',\n            null,\n            response => {\n               dispatch(categoriesResponseAction(response.data))\n            },\n            dispatch\n        )\n    }\n )\n \nexport {\n\tCATEGORY,\n    load,\n    update\n}","import React from 'react';\n\nconst normalizeCurrency = value => {\n    if (!value) {\n        return value\n    }\n    if (value === \"-\" || value === \"+\") {\n        value += \"0\"\n    }\n    var plus = value.lastIndexOf('+');\n    var minus = value.lastIndexOf('-');\n\n    value = value.replace(/[^\\d]/g, '')\n    if (value === \"\") {\n        value = \"0\"\n    }\n    value = \"\" + parseInt(value, 10);\n    if (value.length < 3) {\n        value = \"00\".slice(-3 + value.length) + value\n    }\n\n    var res = (plus >= minus ? '+' : '-') + value.slice(0, -2) + \".\" + value.slice(-2)\n    return res;\n}\n\nclass CurrencyField extends React.Component {\n\n\tconstructor(props) {\n        super(props)\n        this.state = {\n        \tcurrencyValue : props.value\n        }\n\t\tthis.onChange = this.onChange.bind(this)\n\t\tthis.handleFocus = this.handleFocus.bind(this)\n\t\t\n\t\t\n    }\n\t\n\thandleFocus(event) {\n\t\t  event.target.select();\n\t}\n\n\tonChange(e) {\n\t\t\n\t\tconst {onValueChanged, field, index} = this.props\n\t\tvar newCurrencyValue = normalizeCurrency(e.target.value)\n\t\tthis.setState({\n\t\t\tcurrencyValue : newCurrencyValue\n\t\t})\n\t\tonValueChanged(newCurrencyValue, field, index)\n\n\t}\n\t\n\tcomponentWillReceiveProps(nextprops) {\n\t\tthis.setState({\n\t\t\tcurrencyValue : nextprops.value\n\t\t})\n\t}\n\t\n\trender() {\n\t\tconst {id, readOnly, placeholder, touched, fontSize} = this.props\n\n\t\treturn (\n\t    <div>\n\t\t\t<input\n        autoFocus\n\t\t\t  onFocus={this.handleFocus}\n\t\t\t  autoComplete='off'\n\t\t\t  id={id}\n\t\t\t  disabled={readOnly}\n\t\t\t  value={this.state.currencyValue}\n\t\t\t  onChange={this.onChange}\n\t          placeholder={readOnly ? '' : placeholder}  \n\t          type=\"text\"\n\t          className=\"form-control\" \n\t    \t  style={{\n\t    \t\t  'fontSize': fontSize,\n\t    \t\t  'textAlign': 'right', \n\t    \t\t  //'color' : this.state.currencyValue && this.state.currencyValue.startsWith('-') ? 'red' : 'green',\n\t    \t\t  'color' : this.state.currencyValue && (this.state.currencyValue.substr(0,1) === '-') ? 'red' : 'green',\n\t    \t\t  'display': 'inline',\n\t    \t\t  'width': '85px',\n\t    \t\t  'backgroundColor' : (touched ? 'lightyellow' : '')\n\t    \t  }} \n\t      />\n\t    </div>) \n\t}\t\n}\n\nCurrencyField.defaultProps = {\n\t\tid: null,\n\t\tonValueChanged: null,\n\t\tplaceholder : '',\n\t\tvalue : '',\n\t\treadOnly : false,\n\t\tfield: null,\n\t\tindex: null,\n\t\ttouched: false,\n\t\tfontSize: 'inherit'\n}\n\nexport default CurrencyField","import React from 'react'\nimport './checkbox.css'\n\nclass CheckboxField extends React.Component {\n\trender() {\n\t\tconst {id, readOnly, field, index, onValueChanged, touched, checked} = this.props\n\t\treturn(\n\t\t<div>\n\t\t\t<span style = {{display: \"flex\", width: '20px'}}>\n\t\t\t\t<div >\n\t\t\t\t\t<input \n\t\t\t\t\t\tname = {id}\n\t\t\t\t\t\ttype = 'checkbox' \n\t\t\t\t\t\tdisabled = {readOnly}\n\t\t\t\t\t    id = {id}  \n\t\t\t\t\t\tchecked = {checked}\n\n\t\t\t\t\t\tonChange = {(e) => onValueChanged(e.target.checked, field, index)}\n\t\t\t\t\t\tstyle = { readOnly ? {backgroundColor: 'lightgray', borderColor: 'lightgray'} : \n\t\t\t\t\t\t\t         (touched ? {backgroundColor: 'darkKhaki', borderColor: 'darkKhaki'} : {})}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</span>\n\t\t</div>)\n\t}\t\n}\n\nCheckboxField.defaultProps = {\n\t\tid : null,\n\t\tonValueChanged : null,\n\t\tchecked : true,\n\t\treadOnly : false,\n\t\tfield : null,\n\t\tindex : null,\n\t\ttouched: false\n}\n\nexport default CheckboxField","import React from 'react';\nimport {Button} from 'react-bootstrap'\nvar FontAwesome = require('react-fontawesome');\n\nclass TextField extends React.Component {\n\n\tconstructor(props) {\n        super(props)\n        this.state = {\n        \ttxtValue : props.value\n        }\n        this.onChange = this.onChange.bind(this)\n    }\n\t\n\tonChange(e) {\n\t\tconst {onValueChanged, field, index} = this.props\n\t\tthis.setState({\n\t\t\ttxtValue : e.target.value\n\t\t})\n\t\tonValueChanged(e.target.value, field, index)\n\t}\n\n\tcomponentWillReceiveProps(nextprops) {\n\t\tthis.setState({\n\t\t\ttxtValue : nextprops.value\n\t\t})\n\t}\n\t\n\trender() {\n\t\tconst {id, placeholder, readOnly, touched, linkCb, maxLength} = this.props\n\t\t\n\t\tvar button = linkCb && this.state.txtValue && this.state.txtValue.length > 0?\n\t\t\t\t<Button bsSize=\"small\" onClick={ () => {\n\t\t\t\t\tlinkCb(this.state.txtValue)}\n\t\t\t\t}>\n\t\t\t\t<FontAwesome name='caret-right' />\n      \t\t\t</Button>\n\t\t:\n\t\tnull\n\t\t\n\t\treturn(\n\t    <div>\n\t    \t<span style={{display: \"inline-flex\"}}>\n\t    \t<input \n\t    \t\tmaxLength={maxLength}\n\t    \t    id={id}\n\t    \t\tvalue={this.state.txtValue}\n\t    \t    disabled={readOnly}\n\t    \t    style={{'backgroundColor' : (touched ? 'lightyellow' : '')}}\n\t    \t\tplaceholder={readOnly ? '' : placeholder} \n\t    \t\ttype=\"text\" \n\t    \t\tautoComplete='off'\n\t    \t\tonChange={this.onChange}\n\t    \t\tclassName=\"form-control\"\n\t    \t/>\n\t    \t{button}\n\t    \t</span>\n\t    </div>)\n\t}\t\n}\n\nTextField.defaultProps = {\n\t\tid: null,\n\t\tplaceholder: '',\n\t\tonValueChanged: null,\n\t\tvalue : '',\n\t\treadOnly : false,\n\t\tfield: null,\n\t\tindex: null,\n\t\ttouched: false,\n\t\tlinkCb: null,\n\t\tmaxLength: 255\n}\n\nexport default TextField","\nimport React from 'react'\nimport reactCSS from 'reactcss'\nimport { SketchPicker } from 'react-color'\n\nclass ColorField extends React.Component {\n\tconstructor(props) {\n        super(props)\n        this.state = {\n        \tdisplayColorPicker: false,\n        \tcolor: props.color\n        }\n    }\n\t\n\tcomponentWillReceiveProps(nextprops) {\n\t\tthis.setState({\n\t\t\tcolor : nextprops.color\n\t\t})\n\t}\n\n\thandleClick = () => {\n\t\tif (!this.props.readOnly )\n\t\tthis.setState({ displayColorPicker: !this.state.displayColorPicker })\n\t};\n\t\n\thandleClose = () => {\n\t    this.setState({ displayColorPicker: false })\n\t};\n\n\thandleChange = (color) => {\n\t  const {onValueChanged, field, index} = this.props\n\t  this.setState({ \n\t\t  color: color.hex,\n\t      displayColorPicker: !this.state.displayColorPicker\n\t  })\n\t  onValueChanged(color.hex, field, index)\n   }\n\n  render() {\n\n    const styles = reactCSS({\n      'default': {\n        color: {\n          width: '28px',\n          height: '24px',\n          borderRadius: '4px',\n          background: this.state.color\n        },\n        swatch: {\n          padding: '5px',\n          background: (this.props.touched ? 'lightyellow' : '#fff'),\n          borderRadius: '4px',\n          boxShadow: '0 0 0 1px rgba(0,0,0,' + (this.props.readOnly ? '0' : '.1')+ ')',\n          display: 'inline-block',\n          cursor: (this.props.readOnly ? '' : 'pointer'),\n        },\n        popover: {\n          position: 'relative',\n          zIndex: '2',\n        },\n        cover: {\n          position: 'fixed',\n          top: '0px',\n          right: '0px',\n          bottom: '0px',\n          left: '0px',\n        },\n      },\n    });\n\n    return (\n      <div>\n        <div style={ styles.swatch } onClick={ this.handleClick }>\n          \t<div style={ styles.color } />\n        </div>\n        { this.state.displayColorPicker ? \n        \t\t<div style={ styles.popover }>\n          \t\t\t<div style={ styles.cover } \n          \t\t\t\tonClick={ this.handleClose }\n          \t\t\t/>\n          \t\t\t<SketchPicker \n          \t\t\t\tcolor={ this.state.color } \n          \t\t\t\tonChange={ this.handleChange } \n          \t\t\t/>\n          \t\t</div> \n          : null \n        }\n      </div>\n    )\n  }\n}\n\nColorField.defaultProps = {\n\t\tid: null,\n\t\tonValueChanged: null,\n\t\tcolor : 'red',\n\t\treadOnly : false,\n\t\tfield: null,\n\t\tindex: null,\n\t\ttouched: false,\n}\n\nexport default ColorField","var alertOptions = {\n\t\t\t    offset: 14,\n\t\t\t    position: 'bottom right',\n\t\t\t    theme: 'light',\n\t\t\t    time: 5000,\n\t\t\t    transition: 'scale'\n\t\t\t  }\n\t\t  \t\t\t  \nexport  default alertOptions","// c represents currency\nfunction currencyFormat(c) {\n\treturn parseFloat(Math.round(c* 100) / 100).toFixed(2)\n}\n\nexport default currencyFormat","import currencyFormat  from '../../util/currency'\n\nconst fields = ['color','descr','i','active']\n\nconst defaultValues = {\n\tid: null,\n\ti: \"+0.00\",\n\tactive: true,\n\tdescr: '',\n\tcolor: 'blue'\n}\n\nconst validators = {\n\t'i': (value) => {\n\t\t\treturn null\n\t\t  },\n\t'active': (value) => {\n\t\t\treturn null\n\t\t },\n\t'descr':  (value) => {\n\t\t\treturn (value !== '') ? null : 'required'\n\t\t  },\n\t'color': (value) => {\n\t\t\treturn (value !== '') ? null : 'required'\n\t\t  }\n}\n\nfunction preInitFormat(categories) {\n\tvar copy = deepCopy(categories)\n\tcopy.forEach((c) => {\n\t\t// 2 -> +2.00\n\t\tc.i =  (c.i >=0 ? '+' : '') + currencyFormat(c.i)\n\t})\n\treturn copy\n}\n\nfunction preSubmitFormat(payments) {\n\tpayments.forEach( (p) => {\n\t\tif(p.i) {\n\t\t\t// \"+2.00\" -> 2\n\t\t\tp.i =  parseFloat(p.i)\n\t\t\t//p.i_initial = parseFloat(p.i_initial)\n\t\t }\n\t})\n\treturn payments\n}\n\n\nfunction copyObject(b) {\n\treturn {\n\t\tid: b,\n\t\ti: b,\n\t\tactive: b,\n\t\tdescr: b,\n\t\tcolor: b\n\t}\n}\n\nfunction copyCategory(category, index = null) {\n\treturn {\n\t\t'index': index,\n\t\tid: category.id,\n\t\ti: category.i,\n\t\tactive: category.active,\n\t\tdescr: category.descr,\n\t\tcolor: category.color\n\t}\n}\n\nfunction  deepCopy(payments) {\n\tvar copy = []\n\tpayments.forEach(\n\t\t(p) => {copy.push(copyCategory(p))}\n\t)\n\treturn copy\n}\n\nfunction initState(categories) {\n\tvar copy = {\n\t\tvalues : [],\n\t\tinitial : [],\n\t\terrors : [],\n\t\ttouched : [],\n\t\tdeleted : [],\n\t\tsort: null,\n\t\tasc: true\n\t}\n\tcategories.forEach((p, index) => {\n\t\tcopy.values.push(copyCategory(p, index))\n\t\tcopy.initial.push(copyCategory(p))\n\t\tcopy.errors.push(copyObject(null))\n\t\tcopy.touched.push(copyObject(false))\n\t\tcopy.deleted.push(false)\n\t})\n\treturn copy\n}\n\nfunction oneIsTrue(row) {\n\tvar ret =\n\t\trow.i ||\n\t\trow.active ||\n\t\trow.descr ||\n\t\trow.color \n\treturn ret\n}\n\nfunction activeIsRo(row) {\n\tvar ret =\n\t\trow.i ||\n\t\trow.descr ||\n\t\trow.color \n\treturn ret\n}\nfunction copyArray(array) {\n\treturn array.splice(0)\n}\n\nexport {\n\tfields,\n\tinitState,\n\tdefaultValues,\n\tvalidators,\n\tpreInitFormat,\n\tpreSubmitFormat,\n\toneIsTrue,\n\tcopyArray,\n\tactiveIsRo\n}","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Table, Panel, Button } from 'react-bootstrap';\n\nimport { update } from '../../actions/categories'\n\nimport CurrencyField from '../editorFields/CurrencyField'\nimport CheckboxField from '../editorFields/CheckboxField'\nimport TextField from '../editorFields/TextField'\nimport ColorField from '../editorFields/ColorField'\n\nimport './CategoriesEditor.css'\nimport '../../customMultiSelect.css'\n\n\nimport AlertContainer from 'react-alert'\nimport alertOptions from '../../util/alertoptions'\n\n\n//import { withMedia } from 'react-media-query-hoc';\n\nimport {\n\t\tfields,\n\t\tinitState,\n\t\tdefaultValues, \n\t\tvalidators,\n\t\tpreInitFormat,\n\t\tpreSubmitFormat,\n\t\toneIsTrue,\n\t\tcopyArray,\n\t\tactiveIsRo\n} from './constants'\n\nvar FontAwesome = require('react-fontawesome')\n\nvar tempId = -1\n\nclass CategoriesEditor extends React.Component {\n    constructor(props) {\n        super(props)\n        //postfix -abbr. F = Field, R = Row, T = Table\n        this.showOk = this.showOk.bind(this)\n        //Field related:\n        \n        //callbacks from uicomponents for updating model (state)\n        this.changePropertyF = this.changePropertyF.bind(this)\n        this.changePropertyDeletedF = this.changePropertyDeletedF.bind(this)\n        \n        //set state values:\n        this.setValueF = this.setValueF.bind(this)\n        \n        //validate:\n        this.validateF = this.validateF.bind(this)\n        \n        //some field related util;\n        this.touchedF = this.touchedF.bind(this) //dirty?\n        this.isDifferentFromInitialF = this.isDifferentFromInitialF.bind(this)        \n\n        //choose right value for render\n        this.chooseValueF = this.chooseValueF.bind(this)\n\n        //render\n        this.renderContentF = this.renderContentF.bind(this)\n        this.renderDeletedContentF = this.renderDeletedContentF.bind(this)\n        \n        //sort\n        this.setSortF = this.setSortF.bind(this)\n        this.sortersF = this.sortersF.bind(this)\n        \n        //Row related:\n        \n        //add/remove\n        this.addR = this.addR.bind(this)\n        this.getDefaultR = this.getDefaultR.bind(this) //choose values for new row\n        this.removeR = this.removeR.bind(this)\n\n        //validate\n        this.validateR = this.validateR.bind(this)\n        this.readOnlyR = this.readOnlyR.bind(this)\n        \n        //utils\n        this.isPersistedR = this.isPersistedR.bind(this)\n\n        //render\n        this.renderCategoryR = this.renderCategoryR.bind(this)\n\n        //Table related:\n        this.resetT =  this.resetT.bind(this)\n        //util\n        this.isPristineT = this.isPristineT.bind(this)\n        this.hasErrorsT = this.hasErrorsT.bind(this)\n        \n        //format input/output\n        this.preInitT = this.preInitT.bind(this)\n        this.preSubmitT = this.preSubmitT.bind(this)\n        \n        //init constants\n        this.init =  this.init.bind(this)\n        //render\n        this.renderCategoriesT = this.renderCategoriesT.bind(this)\n\n        //css and stuff\n        this.tdClassName = this.tdClassName.bind(this)\n        this.td = this.td.bind(this)\n        this.thClassName = this.thClassName.bind(this)\n        this.th = this.th.bind(this)\n        \n        this.init()\n        this.state = {...initState(this.preInitT(props.initCategories))}\n    }\n\n    changePropertyF(value, field, index) {\n    \t//touch\n\t\tif (this.isPersistedR(index)) { //new rows do not get 'touched' (unless masked)\n\t\t\tvar copy = copyArray(this.state.touched)\n\t\t\tcopy[index][field] = this.isDifferentFromInitialF(value, field, index)\n\t\t\tthis.setState({touched : copy})\n\t\t}\n\t\t\n\t\t//validate\n\t\tthis.validateF(field, value, index)\n\n    \tthis.setValueF(value, field, index)\n    }\n    \n    changePropertyDeletedF(value, field, index) {\n    \tif(this.isPersistedR(index)) { //if it has id, let backend remove: mark as deleted\n    \t\tthis.deleteCount += (value ? 1 : -1)\n    \t\tvar copy = copyArray(this.state.deleted)\n    \t\tcopy[index] = value\n    \t\tthis.setState({deleted : copy})\n    \t} else {\n    \t\tthis.removeR(index) //if newly created, just remove it\n    \t}\n    }\n    \n\tsetValueF(value, field, index) {\n\t\tvar copy = copyArray(this.state.values)\n\t\tcopy[index][field] = value\n\t\tthis.setState({values : copy})\n\t}\n\n\tvalidateF(field, value, index) {\n\t\tvar original = this.state.errors[index][field]\n\t\tvar result = validators[field](value) \n\t\tif( result !== original ) {\n\t\t\tvar copy = copyArray(this.state.errors)\n\t\t\tcopy[index][field] = validators[field](value) \n\t\t\tthis.setState({errors : copy})\n\t\t}\n\t}\n\t\n\ttouchedF(index, field) {\n\t\tif(index<0) return false //mask-controls are never touched (-1 = checkbox -2 = mask value)\n\t\tif(this.state.deleted[index]) return false \t//to be deleted: not touched\n\t\tif(!this.isPersistedR(index)) return false \t//this is a new row: not touched and not masked\n\t\treturn this.state.touched[index][field]\n\t}\n\t\n\tisDifferentFromInitialF(value, field, index) {\n\t\treturn (value !== this.state.initial[index][field])\n\t}\n\n\tchooseValueF(index, field) {\n\t\tif(this.state.deleted[index]) return this.state.initial[index][field] //show initial values if to be deleted\n\t\treturn this.state.values[index][field] \n\t}\n\t\n\trenderContentF(field, index) {\n     \t\n    \tvar  value = this.chooseValueF(index, field)\n    \t\n    \tswitch(field) {\n    \tcase 'i' :\n\t\t\t\t\treturn(\n\t\t\t\t  \t<div>\n\t\t\t\t  \t\t<CurrencyField \n\t\t\t\t\t  \t\tid = {'icat_'+index}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\tplaceholder = 'amount'\n\t\t\t\t\t  \t\tvalue = {value}\n\t\t\t\t\t  \t\treadOnly = {this.readOnlyR(index, 'i')}\n\t\t\t\t  \t\t\tfield = 'i'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, 'i')}\n\t\t\t\t\t  \t/>\n\t\t\t\t    </div>)\n    \tcase 'active' :\n\t\t\t\t\treturn(\n\t\t\t\t  \t<div>\n\t\t\t\t  \t\t<CheckboxField \n\t\t\t\t\t  \t\tid = {'activecat_' + index}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\tchecked = {value}\n\t\t\t\t\t  \t\treadOnly = {this.isPersistedR(index) && activeIsRo(this.state.touched[index])}\n\t\t\t\t  \t\t\tfield = 'active'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, 'active')}\n\t\t\t\t\t  \t/>\n\t\t\t\t    </div>)\t\t\t\t\t    \n    \tcase 'descr' :\n\t\t\t\t\treturn(\n\t\t\t\t  \t<div>\n\t\t\t\t  \t\t<TextField \n\t\t\t\t\t  \t\tid = {'descrcat_'+index}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\tvalue = {value}\n\t\t\t\t\t  \t\treadOnly = {this.readOnlyR(index, 'descr')}\n\t\t\t\t  \t\t\tfield = 'descr'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, 'descr')}\n\t\t\t\t  \t\t\tplaceholder = 'name'\n\t\t\t\t  \t\t\tmaxLength = {20}\n\t\t\t\t\t  \t/>\n\t\t\t\t    </div>)\n    \tcase 'color' :\n\t\t\t\t\treturn(\n\t\t\t\t  \t<div>\n\t\t\t\t  \t\t<ColorField \n\t\t\t\t\t  \t\tid = {'colorcat_'+index}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\tcolor = {value}\n\t\t\t\t\t  \t\treadOnly = {this.readOnlyR(index, 'color')}\n\t\t\t\t  \t\t\tfield = 'color'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, 'color')}\n\t\t\t\t\t  \t/>\n\t\t\t\t    </div>)\n\t\tdefault: console.log('UNKONWN field: '+field)\n\t\t\t  \t   return null\n    \t}\n    }\n\t\n\trenderDeletedContentF(index) {\n\t\tif(!this.isPersistedR(index)) { \n\t\t\treturn(\n\t\t\t<button \n\t\t  \t\ttype=\"button\" \n\t\t  \t\tclassName=\"form-control\"  \n\t\t  \t\tonClick={() => this.changePropertyDeletedF(true, 'deleted', index)}>\n\t\t  \t\t<FontAwesome name = 'remove' style = {{'color': 'red'}}/>\n\t\t    </button>)\n\t\t}\n\t  \treturn\t\n\t\t/*return(\n\t  \t<div>\n\t  \t\t<CheckboxField \n\t\t  \t\tid = {'deletedcat_'+index}\n\t\t  \t\tonValueChanged = {this.changePropertyDeletedF}\n\t\t  \t\tchecked = {this.state.deleted[index]}\n\t  \t\t\tfield = 'deleted'\n\t  \t\t\tindex = {index}\n\t  \t\t\ttouched = {false}\n\t\t  \t/>\n\t    </div>)*/\n\t}\n\t\t\n\tsetSortF(field) {\n\t\t//console.log(field)\n\t\tif(!this.state.sort || this.state.sort !==field) {\n\t\t\tthis.setState({\n\t\t\t\tsort : field,\n\t\t\t\tasc : true\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t\tif(this.state.sort === field && this.state.asc) {\n\t\t\tthis.setState({\n\t\t\t\tasc : false\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t\tthis.setState({\n\t\t\tsort : null\n\t\t})\n\t\treturn\n\t}\n\n\tsortersF() {\n\t\tvar inv = this.state.asc ? -1 : 1\n\t\tswitch(this.state.sort) {\n\t\tcase 'i': \n\t\t\treturn (a, b) => {\n\t\t\t\treturn inv * \n\t\t\t\t(this.chooseValueF(b.index,this.state.sort) - this.chooseValueF(a.index,this.state.sort))\n\t\t\t}\n\t\tcase 'descr':\n\t\t\treturn (a, b) => {\n\t\t\t\t var textA = this.chooseValueF(a.index,'descr').toUpperCase()\n\t\t\t\t var textB = this.chooseValueF(b.index,'descr').toUpperCase()\n\t\t\t\t return inv * \n\t\t\t\t ((textA < textB) ? -1 : (textA > textB) ? 1 : 0)\n\t\t\t}\n\t\tcase 'active':\n\t\t\treturn (a, b) => {\n\t\t\t\t return inv * (a.active && b.active ? 0 : (a.active? 1 : -1))\n\t\t\t}\n\t\tdefault: return (a, b) => {return 0}\n\t\t}\n\t}\n\t\n\taddR() {\n    \tvar defaults = this.getDefaultR()\n    \tvar valuesCopy = copyArray(this.state.values)\n    \tvaluesCopy.push(defaults)\n    \t//valuesCopy.splice(valuesCopy.length + 1, 0, defaults);\n    \tthis.sortedValues.push(defaults)\n    \t//this.sortedValues.splice(this.sortedValues.length + 1, 0, defaults);\n    \t\n    \t\n    \tvar errorsCopy = copyArray(this.state.errors)\n    \terrorsCopy.push(this.validateR(defaults))\n    \t//errorsCopy.splice(errorsCopy.length + 1, 0, this.validateR(defaults));\n    \t\n    \tthis.setState({\n    \t\t    \tvalues : valuesCopy,\n    \t\t    \terrors : errorsCopy,\n    \t})\n    }\n\t    \n\tgetDefaultR() {\n\t\tvar last = defaultValues\n\t\tif (this.sortedValues.length){\n\t\t\tlast = this.sortedValues[this.sortedValues.length - 1]\n\t\t}\n\n\t\tvar res = {...last}\n\t\tres.index = this.state.values.length\n\t\tres.id = tempId--\n\t\tres.l = false\n\t\tres.check = false\n\t\treturn res\n\t}\n    \n    removeR(index) {\n    \tthis.state.values.splice(index, 1)\n        var values_copy = copyArray(this.state.values)\n        this.state.errors.splice(index, 1)\n    \tvar errors_copy = copyArray(this.state.errors)\n\n    \t//reindex:\n    \tfor(var ix=index ; ix<values_copy.length ;ix++) {\n    \t\tvalues_copy[ix].index--\n    \t\terrors_copy[ix].index--\n    \t}\n    \tthis.setState({\n    \t\t    \tvalues : values_copy,\n    \t\t    \terrors : errors_copy,\n    \t})\n    }\n    \n    validateR(v) {\n\t   var res = {}\n\t   fields.forEach( (field) => {\n\t\t   \tres[field] = validators[field](v[field])\n    \t})\n    \treturn res\n    }\n    \n    readOnlyR(index, field) {\n\t\treturn this.state.deleted[index] || //marked as to be deleted?\t\t\t\n\t\t\t   \t   (!this.state.values[index].active && this.isPersistedR(index))\n\t}\n    \n    isPersistedR(index) {\n\t\treturn this.state.values[index].id >=0\n\t}\n    \n    renderCategoryR(index) {\n    \treturn(\n    \t<tr key={index}>\n        {/*{[...fields].map( (f) => {*/}\n        {['color','descr','active'].map( (f) => {\n\t \t\t\treturn this.td(index, f) \n\t \t\t})}\n\t \t\t\n\t      \t<td className={this.tdClassName(index, 'deleted')}>\n\t      \t\t{this.renderDeletedContentF(index)}\n\t      \t</td>\n\t      \t\n\t\t</tr>)\n    }\n    \n\tresetT() {\n\t\tvar state = initState(this.state.initial)\n\t\tthis.setState({...state})\n\t\tthis.init()\n\t}\n\t\n\tisPristineT() {\n\t\tvar pristine = true\n    \tthis.state.touched.forEach( (v) => {\n    \t\tfields.forEach( (f) => {\n    \t\t\tpristine = pristine && !v[f]\n    \t\t})\n    \t})\n    \treturn pristine &&\n    \t\t   (this.state.initial.length === this.state.values.length) && \n    \t       !this.deleteCount \n\t}\n\t\n\thasErrorsT() {\n\t\tvar errors = false\n    \tthis.state.errors.forEach( (v) => {\n    \t\terrors = errors || oneIsTrue(v) \n    \t})\n    \treturn errors\n\t}\n\t\n\tpreInitT(initialCategories) {\n\t\treturn preInitFormat(initialCategories)\n\t}\n\t\n\tshowOk() {\n\t\tthis.msg.show('SAVED SUCCESSFULLY', {\n\t      time: 2000,\n\t      type: 'success',\n\t      icon: <img src=\"yes.png\" alt=\"save ok\"/>\n\t    })\n\t }\n\t\n\tpreSubmitT() {\n\t\tvar created = []\n\t\tthis.state.values.forEach((v,index) => {\n\t\t\tif(!this.isPersistedR(index)) {\n\t\t\t\tvar p={}\n\t\t\t\tfields.forEach( (field) =>\n\t\t\t\t{\n\t\t\t\t\t p[field] = this.chooseValueF(index, field)\n\t\t\t\t})\n\t\t\t\tcreated.push(p)\n\t\t\t}\n\t\t}) \n\t\t\n\t\tvar deleted = []\n\t\tthis.state.deleted.forEach((v,i) => {\n\t\t\tif(v) {\n\t\t\t\tdeleted.push(this.state.values[i].id)\n\t\t\t} \n\t\t})\n\t\t\n\t\tvar modified = []\n\t\t//for(var index=0; index<this.state.values.length; index++) {\n\t\tthis.state.values.forEach( (v, index) => {\n\t\t\tif(this.isPersistedR(index)) {\n\t\t\t\tvar p={}\n\t\t\t\tfields.forEach((field) => {\n\t\t\t\t\t if(this.touchedF(index, field)) {\n\t\t\t\t\t\t p.id = v.id\n\t\t\t\t\t\t p[field] = this.chooseValueF(index, field)\n\t\t\t\t\t }\n\t\t\t\t })\n\t\t\t\t if(Object.keys(p).length > 0){\n\t\t\t\t\t modified.push(p)\n\t\t\t\t }\n\t\t\t}\n\t\t})\n\n\t\tvar updates = {\n\t\t\t\t'created' : preSubmitFormat(created),\n\t\t\t\t'deleted' : deleted,\n\t\t\t\t'modified' : preSubmitFormat(modified)\n\t\t}\n\t\tconsole.log(JSON.stringify(updates,null,4))\n\t\t//\"submit\"\n\t\tthis.pristine = null\n\t\tthis.props.update(updates)\n\t}\n\n    init() {\n        this.deleteCount = 0\n        this.pristine = null\n        this.errors = null\n        this.allChecked = false\n    }\n\n\trenderCategoriesT = () => {\n\t\tthis.sortedValues = this.state.values.slice(0)\n\t\tif (this.state.sort) this.sortedValues.sort(this.sortersF())\n\t\t\n\t\treturn (\n\t\t<div>\n\t\t<Panel id=\"accs-panel\" >\n          <Panel.Heading >\n            <Panel.Title >\n\t\t\t\t\t<Button onClick={() => this.resetT()} disabled={this.pristine} bsStyle={this.pristine ? \"default\":\"primary\"} >Reset</Button>\n\t\t\t\t\t<Button onClick={() => this.preSubmitT()} disabled={this.pristine || (this.errors != null)} bsStyle={this.pristine ? \"default\":\"primary\"}>Save</Button>\n\t\t\t\t\t<Button onClick={() => this.addR()}>Add</Button>\n\t\t\t</Panel.Title >\n\t\t </Panel.Heading >\t\n\t\t <Panel.Body>\n\t\t\t<Table id=\"categories_table\" striped bordered hover condensed>\n\t\t\t\t<thead>\n\t\t\t  \t\t<tr>\n\t\t\t  \t\t\t<th className={this.thClassName('color')} />\n\t\t\t  \t\t\t{this.th('descr', 'Name')}\n\t\t\t  \t\t\t{/*this.th('i', 'Default')*/}\n\t\t\t  \t\t\t{this.th('active', 'Active')}\n\t\t\t  \t\t\t\n\t\t\t  \t\t\t<th className={this.thClassName('deleted')}>\n\t\t\t  \t\t\t\t<FontAwesome name='trash'  size='lg' />\n\t\t\t  \t\t\t</th>\n\t\t\t  \t\t\t\n\t\t\t\t\t</tr>\t\t\t\t  \t\t\t\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t  \t{this.sortedValues.map((p) => this.renderCategoryR(p.index))}\n\t\t\t\t</tbody>\n\t\t\t</Table>\n\t\t</Panel.Body>\n\t\t</Panel >\n\t\t</div>)\n\t}\n\t\t\n\ttdClassName(index, field) {\n\t\treturn field + '_cell' + \n\t\t\t   (!this.isPersistedR(index) ? ' newRow' : '') +\n\t\t\t   (this.state.deleted[index] ? ' deleted' : '') +\n\t\t\t   (this.state.errors[index][field] ? ' error' : '')\n\t}\n\t\n\ttd(index, field) {\n\t\treturn (\n\t\t<td key={index+'_'+field} className={this.tdClassName(index, field)}>\n\t\t      {this.renderContentF(field, index)}\t\n\t\t</td>)\n\t}\n\t\n\tthClassName(field) {\n\t\treturn field + '_header' \n\t}\n\t\n\t\n\tth(field, label = null) {\n\t\tvar arrow = (<FontAwesome name = {this.state.asc ? 'sort-asc' : 'sort-desc'} />)\n\n\t\tvar sortField = (<div>{this.state.sort === field ? arrow : ''}</div>)\n\t\t\n\t\tvar labelField = (\n\t\t\t\t<div  style={{marginTop: 8}}>\n  \t\t\t\t\t<button  type=\"button\" className=\"link-button\" onClick={() => {this.setSortF(field)}}>\n  \t\t\t\t\t\t{label}\n  \t\t\t\t\t</button>\n\t\t  \t\t</div>)\n\t\treturn(\n\t\t<th className={this.thClassName(field)}>\n  \t\t\t<div>\n\t  \t\t\t<span style={{display: \"flex\"}}>\t\t\t  \t\t\t\t\t\t\n\t  \t\t\t\t<div style={{marginTop: 8, paddingRight: 3}}>\n\t  \t\t\t\t\t{sortField}\n\t  \t\t\t\t</div>\n\t  \t\t\t\t{label !== null ? labelField : ''}\n\t  \t\t\t</span>\n\t  \t\t</div>\n\t\t</th>)\n\t}\n\t\n\tcomponentWillReceiveProps(nextprops) {\n\t\tif( !this.isPristineT()  && this.pristine == null) { //just saved\n\t\t\tthis.showOk()\n\t\t}\n\t\n\t\tthis.init()\n\t\tthis.setState(\n\t\t\t\t{...initState(this.preInitT(nextprops.initCategories))}\n\t\t)\n\t}\n\t\n\trender() {\n\t\tthis.pristine = this.isPristineT()\n\t\tthis.errors = this.hasErrorsT()\n\t\treturn(\n\t\t\t<div>\n\t        \t\t<AlertContainer ref={a => this.msg = a} {...alertOptions} />\n\t\t\t\t\t{this.renderCategoriesT()}\n\t\n\t\t   </div>\n\t\t)\n\t}\n}\n\nCategoriesEditor.defaultProps = {\n\t\tinitCategories: []\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return({\n        update: (updates) => {\n            dispatch(update(updates))\n        }\n    })\n}\n\nexport default connect(null, mapDispatchToProps)(CategoriesEditor)\n\n\n","import React from 'react';\nimport { connect } from 'react-redux'\nimport { Panel } from 'react-bootstrap'\nimport CategoriesEditor from '../categoriesEditor/CategoriesEditor'\n\nclass Categories extends React.Component {\n\trender() {\n\t\treturn(\n\t\t\t<div>\n\t\t\t  <Panel >\n\t\t\t  \t<Panel.Heading style={{paddingTop: \"4px\", paddingBottom: \"3px\", height: \"45px\", fontSize: \"23px\"}}>\n\t\t\t\t  \t<span style={{display: \"flow-root\", alignItems: \"center\"}}>\n\t\t\t\t  \t\tIssues\n\t\t\t\t  \t</span>\n\t\t\t  \t</Panel.Heading>\n\t\t\t  \t<Panel.Body>\t\t\t\t\t\n\t\t\t\t\t<CategoriesEditor initCategories={this.props.categories} />\n\t\t\t\t</Panel.Body>\n\t\t\t  </Panel>\n\t\t\t</div>\n\t\t\t)\n\t}\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        categories: store.categories.categories\n    }\n}\n\nexport default connect(mapStateToProps)(Categories)\n","import {axios_get_params} from './axios';\n\nvar dateFormat = require('dateformat');\n\nconst CHART_REQUEST = 'CHART_REQUEST'\nconst chartRequestAction = (s, e) => ({\n    type: CHART_REQUEST,\n    payload: {\n        's': s,\n        'e': e\n    }\n})\n\nconst CHART_RESPONSE = 'CHART_RESPONSE'\nconst chartResponseAction = (response) => (\n  { \n\ttype: CHART_RESPONSE,\n    payload: \n    \t{\n    \t\tcurves : response\n    \t} \n  }\n)\n\nconst CHART_REDRAW = 'CHART_REDRAW'\nconst chartRedrawAction = () => (\n  { \n\ttype: CHART_REDRAW,\n    payload: \n    \t{\n    \t\tredraw : (new Date()).getTime() //only signal\n    \t} \n  }\n)\n\nvar params = null\n\nfunction get(dispatch) {\n    dispatch(chartRequestAction(params.s, params.e))\n    axios_get_params('chart',\n    \t\t\t\t{params: params},\n\t\t\t\t    response => {\n\t\t\t  \t\t  dispatch(chartResponseAction(response.data))\n\t\t\t\t    },\n\t\t\t\t    dispatch\n\t)\n\n}\n\nconst chart_load = (s, e) => (\n  (dispatch) => {\n\t  params = {\n\t\t\t  's': dateFormat(s, \"yyyy-mm-dd\"),\n\t\t\t  'e': dateFormat(e, \"yyyy-mm-dd\")\n\t  }\n\t  get(dispatch)\n    }\n)\n\n\nconst chart_refresh = () => (\n    (dispatch) => {\n        console.assert(params)\n        get(dispatch)\n    }\n)\n\nconst chart_redraw = () => (\n    (dispatch) => {\n    \tdispatch(chartRedrawAction())\n    }\n)\n\n\nexport {\n\tchart_load,\n\tchart_refresh,\n\tchart_redraw\n}\n","import {axios_get, axios_post} from './axios';\nimport { chart_refresh } from './chart'\nimport { invalidate } from './constants'\n\nconst ACCOUNT = 'acc'\n\t\nconst ACCOUNTS_REQUEST = 'ACCOUNTS_REQUEST'\nconst accountsRequestAction = () => ({\n    type: ACCOUNTS_REQUEST\n})\n\nconst ACCOUNTS_RESPONSE = 'ACCOUNTS_RESPONSE'\nconst accountsResponseAction = (accounts) => ({\n    type: ACCOUNTS_RESPONSE,\n    payload: {\n        \"accounts\": accounts\n    }\n})\n\nconst ACCOUNTS_UPDATE_REQUEST = 'ACCOUNTS_UPDATE_REQUEST'\nconst accountsUpdateRequestAction = (updates) => ({\n    type: ACCOUNTS_UPDATE_REQUEST,\n    payload: {\n    \t\"updates\": updates\n    }\n})\n\nconst ACCOUNTS_UPDATE_RESPONSE = 'ACCOUNTS_UPDATE_RESPONSE'\nconst accountsUpdateResponseAction = () => ({\n    \ttype: ACCOUNTS_UPDATE_RESPONSE\n})\n\nconst update = (updates) => (\n    (dispatch) => {\n        dispatch(accountsUpdateRequestAction(updates))\n        axios_post('acc/update', updates,\n            response => {\n               dispatch(accountsUpdateResponseAction())\n               dispatch(load())\n               invalidate(ACCOUNT, dispatch)\n               dispatch(chart_refresh())\n            },\n            dispatch\n        )\n    }\n )\n\n const load = () => (\n    (dispatch) => {\n        dispatch(accountsRequestAction())\n        axios_get('acc/list',\n          null,\n            response => {\n               dispatch(accountsResponseAction(response.data))\n            },\n            dispatch\n        )\n    }\n )\n \nexport {\n\tACCOUNT,\n    load,\n    update\n}","const fields = ['color','descr', 'credit', 'active']\n\nconst defaultValues = {\n\tid: null,\n\tcredit: 0,\n\tactive: true,\n\tdescr: '',\n\tcolor: 'blue'\n}\n\nconst validators = {\n\t'credit': (value) => {\n\t\t\treturn null\n\t\t  },\n\t'active': (value) => {\n\t\t\treturn null\n\t\t },\n\t'descr':  (value) => {\n\t\t\treturn (value !== '') ? null : 'required'\n\t\t  },\n\t'color': (value) => {\n\t\t\treturn (value !== '') ? null : 'required'\n\t\t  }\n}\n\nfunction preInitFormat(accounts) {\n\treturn deepCopy(accounts)\n}\n\nfunction preSubmitFormat(payments) {\n\treturn payments\n}\n\n\nfunction copyObject(b) {\n\treturn {\n\t\tid: b,\n\t\tcredit: b,\n\t\tactive: b,\n\t\tdescr: b,\n\t\tcolor: b\n\t}\n}\n\nfunction copyAccount(account, index = null) {\n\treturn {\n\t\t'index': index,\n\t\tid: account.id,\n\t\tcredit: account.credit,\n\t\tactive: account.active,\n\t\tdescr: account.descr,\n\t\tcolor: account.color\n\t}\n}\n\nfunction  deepCopy(accounts) {\n\tvar copy = []\n\taccounts.forEach(\n\t\t(p) => {copy.push(copyAccount(p))}\n\t)\n\treturn copy\n}\n\nfunction initState(accounts) {\n\tvar copy = {\n\t\tvalues : [],\n\t\tinitial : [],\n\t\terrors : [],\n\t\ttouched : [],\n\t\tdeleted : [],\n\t\tsort: null,\n\t\tasc: true\n\t}\n\taccounts.forEach((p, index) => {\n\t\tcopy.values.push(copyAccount(p, index))\n\t\tcopy.initial.push(copyAccount(p))\n\t\tcopy.errors.push(copyObject(null))\n\t\tcopy.touched.push(copyObject(false))\n\t\tcopy.deleted.push(false)\n\t})\n\treturn copy\n}\n\nfunction oneIsTrue(row) {\n\tvar ret =\n\t\trow.credit ||\n\t\trow.active ||\n\t\trow.descr ||\n\t\trow.color \n\treturn ret\n}\n\nfunction activeIsRo(row) {\n\tvar ret =\n\t\trow.credit ||\n\t\trow.descr ||\n\t\trow.color \n\treturn ret\n}\nfunction copyArray(array) {\n\treturn array.splice(0)\n}\n\nexport {\n\tfields,\n\tinitState,\n\tdefaultValues,\n\tvalidators,\n\tpreInitFormat,\n\tpreSubmitFormat,\n\toneIsTrue,\n\tcopyArray,\n\tactiveIsRo\n}","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Table, Panel, Button } from 'react-bootstrap';\n\nimport { update } from '../../actions/accounts'\n\nimport CheckboxField from '../editorFields/CheckboxField'\nimport TextField from '../editorFields/TextField'\nimport ColorField from '../editorFields/ColorField'\n\nimport './AccountsEditor.css'\nimport '../../customMultiSelect.css'\n\nimport AlertContainer from 'react-alert'\nimport alertOptions from '../../util/alertoptions'\n\n//import { withMedia } from 'react-media-query-hoc';\n\nimport {\n\t\tfields,\n\t\tinitState,\n\t\tdefaultValues,\n//\t\tinitialMaskValues, \n\t\tvalidators,\n\t\tpreInitFormat,\n\t\tpreSubmitFormat,\n\t\toneIsTrue,\n\t\tcopyArray,\n\t\tactiveIsRo\n} from './constants'\n\nvar FontAwesome = require('react-fontawesome')\n\nvar tempId = -1\n\nclass AccountsEditor extends React.Component {\n    constructor(props) {\n        super(props)\n        this.showOk = this.showOk.bind(this)\n        //postfix -abbr. F = Field, R = Row, T = Table\n        \n        //Field related:\n        \n        //callbacks from uicomponents for updating model (state)\n        this.changePropertyF = this.changePropertyF.bind(this)\n        this.changePropertyDeletedF = this.changePropertyDeletedF.bind(this)\n        \n        //set state values:\n        this.setValueF = this.setValueF.bind(this)\n        \n        //validate:\n        this.validateF = this.validateF.bind(this)\n        \n        //some field related util;\n        this.touchedF = this.touchedF.bind(this) //dirty?\n        this.isDifferentFromInitialF = this.isDifferentFromInitialF.bind(this)        \n\n        //choose right value for render\n        this.chooseValueF = this.chooseValueF.bind(this)\n\n        //render\n        this.renderContentF = this.renderContentF.bind(this)\n        this.renderDeletedContentF = this.renderDeletedContentF.bind(this)\n        \n        //sort\n        this.setSortF = this.setSortF.bind(this)\n        this.sortersF = this.sortersF.bind(this)\n        \n        //Row related:\n        \n        //add/remove\n        this.addR = this.addR.bind(this)\n        this.getDefaultR = this.getDefaultR.bind(this) //choose values for new row\n        this.removeR = this.removeR.bind(this)\n\n        //validate\n        this.validateR = this.validateR.bind(this)\n        this.readOnlyR = this.readOnlyR.bind(this)\n        \n        //utils\n        this.isPersistedR = this.isPersistedR.bind(this)\n\n        //render\n        this.renderAccountR = this.renderAccountR.bind(this)\n\n        //Table related:\n        this.resetT =  this.resetT.bind(this)\n        //util\n        this.isPristineT = this.isPristineT.bind(this)\n        this.hasErrorsT = this.hasErrorsT.bind(this)\n        \n        //format input/output\n        this.preInitT = this.preInitT.bind(this)\n        this.preSubmitT = this.preSubmitT.bind(this)\n        \n        //init constants\n        this.init =  this.init.bind(this)\n        //render\n        this.renderAccountsT = this.renderAccountsT.bind(this)\n\n        //css and stuff\n        this.tdClassName = this.tdClassName.bind(this)\n        this.td = this.td.bind(this)\n        this.thClassName = this.thClassName.bind(this)\n        this.th = this.th.bind(this)\n        \n        this.init()\n        this.state = {...initState(this.preInitT(props.initAccounts))}\n    }\n\n    changePropertyF(value, field, index) {\n    \t//touch\n\t\tif (this.isPersistedR(index)) { //new rows do not get 'touched' (unless masked)\n\t\t\tvar copy = copyArray(this.state.touched)\n\t\t\tcopy[index][field] = this.isDifferentFromInitialF(value, field, index)\n\t\t\tthis.setState({touched : copy})\n\t\t}\n\t\t\n\t\t//validate\n\t\tthis.validateF(field, value, index)\n\n    \tthis.setValueF(value, field, index)\n    }\n    \n    changePropertyDeletedF(value, field, index) {\n    \tif(this.isPersistedR(index)) { //if it has id, let backend remove: mark as deleted\n    \t\tthis.deleteCount += (value ? 1 : -1)\n    \t\tvar copy = copyArray(this.state.deleted)\n    \t\tcopy[index] = value\n    \t\tthis.setState({deleted : copy})\n    \t} else {\n    \t\tthis.removeR(index) //if newly created, just remove it\n    \t}\n    }\n    \n\tsetValueF(value, field, index) {\n\t\tvar copy = copyArray(this.state.values)\n\t\tcopy[index][field] = value\n\t\tthis.setState({values : copy})\n\t}\n\n\tvalidateF(field, value, index) {\n\t\tvar original = this.state.errors[index][field]\n\t\tvar result = validators[field](value) \n\t\tif( result !== original ) {\n\t\t\tvar copy = copyArray(this.state.errors)\n\t\t\tcopy[index][field] = validators[field](value) \n\t\t\tthis.setState({errors : copy})\n\t\t}\n\t}\n\t\n\ttouchedF(index, field) {\n\t\tif(index<0) return false //mask-controls are never touched (-1 = checkbox -2 = mask value)\n\t\tif(this.state.deleted[index]) return false \t//to be deleted: not touched\n\t\tif(!this.isPersistedR(index)) return false \t//this is a new row: not touched and not masked\n\t\treturn this.state.touched[index][field]\n\t}\n\t\n\tisDifferentFromInitialF(value, field, index) {\n\t\treturn (value !== this.state.initial[index][field])\n\t}\n\n\tchooseValueF(index, field) {\n\t\tif(this.state.deleted[index]) return this.state.initial[index][field] //show initial values if to be deleted\n\t\treturn this.state.values[index][field] \n\t}\n\t\n\trenderContentF(field, index) {\n     \t\n    \tvar  value = this.chooseValueF(index, field)\n    \t\n    \tswitch(field) {\n    \tcase 'credit' :\n    \t            if(this.isPersistedR(index)) {\n    \t                if(!value) {\n    \t                    return null;\n    \t                }else{\n    \t                    return(\n    \t                    <FontAwesome name='credit-card' size='lg' />\n    \t                    )\n    \t                }\n    \t            }\n\n\t\t\t\t\treturn(\n\t\t\t\t\t<div>\n\t\t\t\t  \t\t<CheckboxField\n\t\t\t\t\t  \t\tid = {'creditacc_' + index}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\tchecked = {value}\n\t\t\t\t\t  \t\treadOnly = {this.readOnlyR(index, 'credit')}\n\t\t\t\t  \t\t\tfield = 'credit'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, 'credit')}\n\t\t\t\t\t  \t/>\n\t\t\t\t    </div>)\n    \tcase 'active' :\n\t\t\t\t\treturn(\n\t\t\t\t  \t<div>\n\t\t\t\t  \t\t<CheckboxField \n\t\t\t\t\t  \t\tid = {'activeacc_' + index}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\tchecked = {value}\n\t\t\t\t\t  \t\treadOnly = {this.isPersistedR(index) && activeIsRo(this.state.touched[index])}\n\t\t\t\t  \t\t\tfield = 'active'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, 'active')}\n\t\t\t\t\t  \t/>\n\t\t\t\t    </div>)\t\t\t\t\t    \n    \tcase 'descr' :\n\t\t\t\t\treturn(\n\t\t\t\t  \t<div>\n\t\t\t\t  \t\t<TextField \n\t\t\t\t\t  \t\tid = {'descracc_'+index}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\tvalue = {value}\n\t\t\t\t\t  \t\treadOnly = {this.readOnlyR(index, 'descr')}\n\t\t\t\t  \t\t\tfield = 'descr'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, 'descr')}\n\t\t\t\t  \t\t\tplaceholder = 'name'\n\t\t\t\t  \t\t\tmaxLength = {20}\n\t\t\t\t\t  \t/>\n\t\t\t\t    </div>)\n    \tcase 'color' :\n\t\t\t\t\treturn(\n\t\t\t\t  \t<div>\n\t\t\t\t  \t\t<ColorField \n\t\t\t\t\t  \t\tid = {'coloracc_'+index}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\tcolor = {value}\n\t\t\t\t\t  \t\treadOnly = {this.readOnlyR(index, 'color')}\n\t\t\t\t  \t\t\tfield = 'color'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, 'color')}\n\t\t\t\t\t  \t/>\n\t\t\t\t    </div>)\n\t\tdefault: console.log('UNKONWN field: '+field)\n\t\t\t  \t   return null\n    \t}\n    }\n\t\n\trenderDeletedContentF(index) {\n\t\tif(!this.isPersistedR(index)) { \n\t\t\treturn(\n\t\t\t<button \n\t\t  \t\ttype=\"button\" \n\t\t  \t\tclassName=\"form-control\"  \n\t\t  \t\tonClick={() => this.changePropertyDeletedF(true, 'deleted', index)}>\n\t\t  \t\t<FontAwesome name = 'remove' style = {{'color': 'red'}}/>\n\t\t    </button>)\n\t\t}\n\t  \treturn \n\t\t/*return(\n\t  \t<div>\n\t  \t\t<CheckboxField \n\t\t  \t\tid = {'deletedacc_'+index}\n\t\t  \t\tonValueChanged = {this.changePropertyDeletedF}\n\t\t  \t\tchecked = {this.state.deleted[index]}\n\t  \t\t\tfield = 'deleted'\n\t  \t\t\tindex = {index}\n\t  \t\t\ttouched = {false}\n\t\t  \t/>\n\t    </div>)*/\n\t}\n\t\t\n\tsetSortF(field) {\n\t\tif(!this.state.sort || this.state.sort !==field) {\n\t\t\tthis.setState({\n\t\t\t\tsort : field,\n\t\t\t\tasc : true\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t\tif(this.state.sort === field && this.state.asc) {\n\t\t\tthis.setState({\n\t\t\t\tasc : false\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t\tthis.setState({\n\t\t\tsort : null\n\t\t})\n\t\treturn\n\t}\n\n\tsortersF() {\n\t\tvar inv = this.state.asc ? -1 : 1\n\t\tswitch(this.state.sort) {\n\t\tcase 'i': \n\t\t\treturn (a, b) => {\n\t\t\t\treturn inv * \n\t\t\t\t(this.chooseValueF(b.index,this.state.sort) - this.chooseValueF(a.index,this.state.sort))\n\t\t\t}\n\t\tcase 'descr':\n\t\t\treturn (a, b) => {\n\t\t\t\t var textA = this.chooseValueF(a.index,'descr').toUpperCase()\n\t\t\t\t var textB = this.chooseValueF(b.index,'descr').toUpperCase()\n\t\t\t\t return inv * \n\t\t\t\t ((textA < textB) ? -1 : (textA > textB) ? 1 : 0)\n\t\t\t}\n\t\tcase 'credit':\n\t\t\treturn (a, b) => {\n\t\t\t\t return inv * (a.credit && b.credit ? 0 : (a.credit? 1 : -1))\n\t\t\t}\n\t\tcase 'active':\n\t\t\treturn (a, b) => {\n\t\t\t\t return inv * (a.active && b.active ? 0 : (a.active? 1 : -1))\n\t\t\t}\n\t\tdefault: return (a, b) => {return 0}\n\t\t}\n\t\t\n\t}\n\t\n\taddR() {\n    \tvar defaults = this.getDefaultR()\n    \tvar valuesCopy = copyArray(this.state.values)\n    \tvaluesCopy.push(defaults)\n    \tthis.sortedValues.push(defaults)\n\n    \tvar errorsCopy = copyArray(this.state.errors)\n    \terrorsCopy.push(this.validateR(defaults))    \t\n    \tthis.setState({\n    \t\t    \tvalues : valuesCopy,\n    \t\t    \terrors : errorsCopy,\n    \t})\n    }\n\t    \n\tgetDefaultR() {\n\t\tvar last = defaultValues\n\t\tif (this.sortedValues.length){\n\t\t\tlast = this.sortedValues[this.sortedValues.length - 1]\n\t\t}\n\n\t\tvar res = {...last}\n\t\tres.index = this.state.values.length\n\t\tres.id = tempId--\n\t\tres.l = false\n\t\tres.check = false\n\t\treturn res\n\t}\n    \n    removeR(index) {\n    \tthis.state.values.splice(index, 1)\n        var values_copy = copyArray(this.state.values)\n        this.state.errors.splice(index, 1)\n    \tvar errors_copy = copyArray(this.state.errors)\n\n    \t//reindex:\n    \tfor(var ix=index ; ix<values_copy.length ;ix++) {\n    \t\tvalues_copy[ix].index--\n    \t\terrors_copy[ix].index--\n    \t}\n    \tthis.setState({\n    \t\t    \tvalues : values_copy,\n    \t\t    \terrors : errors_copy,\n    \t})\n    }\n    \n    validateR(v) {\n\t   var res = {}\n\t   fields.forEach( (field) => {\n\t\t   \tres[field] = validators[field](v[field])\n    \t})\n    \treturn res\n    }\n    \n    readOnlyR(index, field) {\n\t\treturn this.state.deleted[index] || //marked as to be deleted?\t\t\t\n\t\t\t   \t   (!this.state.values[index].active && this.isPersistedR(index))\n\t}\n    \n    isPersistedR(index) {\n\t\treturn this.state.values[index].id >=0\n\t}\n    \n    renderAccountR(index) {\n    \treturn(\n    \t<tr key={index}>\n        {[...fields].map( (f) => {\n\t \t\t\treturn this.td(index, f) \n\t \t\t})}\n\t \t\t\n\t      \t<td className={this.tdClassName(index, 'deleted')}>\n\t      \t\t{this.renderDeletedContentF(index)}\n\t      \t</td>\n\t      \t\n\t\t</tr>)\n    }\n    \n\tresetT() {\n\t\tvar state = initState(this.state.initial)\n\t\tthis.setState({...state})\n\t\tthis.init()\n\t}\n\t\n\tisPristineT() {\n\t\tvar pristine = true\n    \tthis.state.touched.forEach( (v) => {\n    \t\tfields.forEach( (f) => {\n    \t\t\tpristine = pristine && !v[f]\n    \t\t})\n    \t})\n    \treturn pristine &&\n    \t\t   (this.state.initial.length === this.state.values.length) && \n    \t       !this.deleteCount \n\t}\n\t\n\thasErrorsT() {\n\t\tvar errors = false\n    \tthis.state.errors.forEach( (v) => {\n    \t\terrors = errors || oneIsTrue(v) \n    \t})\n    \treturn errors\n\t}\n\t\n\tpreInitT(initialAccounts) {\n\t\treturn preInitFormat(initialAccounts)\n\t}\n\t\n\tshowOk() {\n\t\tthis.msg.show('SAVED SUCCESSFULLY', {\n\t      time: 2000,\n\t      type: 'success',\n\t      icon: <img src=\"yes.png\" alt=\"save ok\" />\n\t    })\n\t }\n\t\n\tpreSubmitT() {\n\t\tvar created = []\n\t\tthis.state.values.forEach((v,index) => {\n\t\t\tif(!this.isPersistedR(index)) {\n\t\t\t\tvar p={}\n\t\t\t\tfields.forEach( (field) =>\n\t\t\t\t{\n\t\t\t\t\t p[field] = this.chooseValueF(index, field)\n\t\t\t\t})\n\t\t\t\tcreated.push(p)\n\t\t\t}\n\t\t}) \n\t\t\n\t\tvar deleted = []\n\t\tthis.state.deleted.forEach((v,i) => {\n\t\t\tif(v) {\n\t\t\t\tdeleted.push(this.state.values[i].id)\n\t\t\t} \n\t\t})\n\t\t\n\t\tvar modified = []\n\t\t//for(var index=0; index<this.state.values.length; index++) {\n\t\tthis.state.values.forEach( (v, index) => {\n\t\t\tif(this.isPersistedR(index)) {\n\t\t\t\tvar p={}\n\t\t\t\tfields.forEach((field) => {\n\t\t\t\t\t if(this.touchedF(index, field)) {\n\t\t\t\t\t\t p.id = v.id\n\t\t\t\t\t\t p[field] = this.chooseValueF(index, field)\n\t\t\t\t\t }\n\t\t\t\t })\n\t\t\t\t if(Object.keys(p).length > 0){\n\t\t\t\t\t modified.push(p)\n\t\t\t\t }\n\t\t\t}\n\t\t})\n\n\t\tvar updates = {\n\t\t\t\t'created' : preSubmitFormat(created),\n\t\t\t\t'deleted' : deleted,\n\t\t\t\t'modified' : preSubmitFormat(modified)\n\t\t}\n\t\t//console.log(JSON.stringify(updates,null,4))\n\t\t//\"submit\"\n\t\tthis.pristine = null\n\t\tthis.props.update(updates)\n\t}\n\n    init() {\n        this.deleteCount = 0\n        this.pristine = null\n        this.errors = null\n        this.allChecked = false\n    }\n\n\trenderAccountsT = () => {\n\t\tthis.sortedValues = this.state.values.slice(0)\n\t\tif (this.state.sort) this.sortedValues.sort(this.sortersF())\n\t\t\n\t\treturn (\n\t\t<div>\n\t\t<Panel id=\"accs-panel\" >\n          <Panel.Heading >\n            <Panel.Title >\n\t\t\t\t\t<Button onClick={() => this.resetT()} disabled={this.pristine} bsStyle={this.pristine ? \"default\":\"primary\"}>Reset</Button>\n\t\t\t\t\t<Button onClick={() => this.preSubmitT()} disabled={this.pristine || (this.errors != null)} bsStyle={this.pristine ? \"default\":\"primary\"}>Save</Button>\n\t\t\t\t\t<Button onClick={() => this.addR()}>Add</Button>\n\t\t\t</Panel.Title >\n\t\t </Panel.Heading >\t\n\t\t <Panel.Body>\n\t\t\t<Table id=\"accounts_table\" striped bordered hover condensed>\n\t\t\t\t<thead>\n\t\t\t  \t\t<tr>\n\t\t\t  \t\t\t<th className={this.thClassName('color')} />\n\t\t\t  \t\t\t{this.th('descr', 'Name')}\n\t\t\t  \t\t\t{this.th('credit', 'Credit')}\n\t\t\t  \t\t\t{this.th('active', 'Active')}\n\t\t\t  \t\t\t{\n\t\t\t  \t\t\t<th className={this.thClassName('deleted')}>\n\t\t\t  \t\t\t\t<FontAwesome name='trash'  size='lg' />\n\t\t\t  \t\t\t</th>\n\t\t\t  \t\t\t}\n\t\t\t\t\t</tr>\t\t\t\t  \t\t\t\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t  \t{this.sortedValues.map((p) => this.renderAccountR(p.index))}\n\t\t\t\t</tbody>\n\t\t\t</Table>\n\t\t</Panel.Body>\n\t\t</Panel >\n\t\t</div>)\n\t}\n\t\t\n\ttdClassName(index, field) {\n\t\treturn field + '_cell' + \n\t\t\t   (!this.isPersistedR(index) ? ' newRow' : '') +\n\t\t\t   (this.state.deleted[index] ? ' deleted' : '') +\n\t\t\t   (this.state.errors[index][field] ? ' error' : '')\n\t}\n\t\n\ttd(index, field) {\n\t\treturn (\n\t\t<td key={index+'_'+field} className={this.tdClassName(index, field)}>\n\t\t      {this.renderContentF(field, index)}\t\n\t\t</td>)\n\t}\n\t\n\tthClassName(field) {\n\t\treturn field + '_header' \n\t}\n\t\n\t\n\tth(field, label = null) {\n\t\tvar arrow = (<FontAwesome name = {this.state.asc ? 'sort-asc' : 'sort-desc'} />)\n\n\t\tvar sortField = (<div>{this.state.sort === field ? arrow : ''}</div>)\n\t\t\n\t\tvar labelField = (\n\t\t\t\t<div  style={{marginTop: 8}}>\n  \t\t\t\t\t<button  type=\"button\" className=\"link-button\" onClick={() => {this.setSortF(field)}}>\n  \t\t\t\t\t\t{label}\n  \t\t\t\t\t</button>\n\t\t  \t\t</div>)\n\t\treturn(\n\t\t<th className={this.thClassName(field)}>\n  \t\t\t<div>\n\t  \t\t\t<span style={{display: \"flex\"}}>\t\t\t  \t\t\t\t\t\t\n\t  \t\t\t\t<div style={{marginTop: 8, paddingRight: 3}}>\n\t  \t\t\t\t\t{sortField}\n\t  \t\t\t\t</div>\n\t  \t\t\t\t{label !== null ? labelField : ''}\n\t  \t\t\t</span>\n\t  \t\t</div>\n\t\t</th>)\n\t}\n\t\n\tcomponentWillReceiveProps(nextprops) {\n\t\tif( !this.isPristineT()  && this.pristine == null) { //just saved\n\t\t\tthis.showOk()\n\t\t}\t\n\t\n\t\tthis.init()\n\t\tthis.setState(\n\t\t\t\t{...initState(this.preInitT(nextprops.initAccounts))}\n\t\t)\n\t}\n\t\n\trender() {\n\t\tthis.pristine = this.isPristineT()\n\t\tthis.errors = this.hasErrorsT()\n\t\treturn(\n\t\t\t<div>\n\t        \t\t<AlertContainer ref={a => this.msg = a} {...alertOptions} />\n\t\t\t\t\t{this.renderAccountsT()}\n\t\t   </div>\n\t\t)\n\t}\n}\n\nAccountsEditor.defaultProps = {\n\t\tinitAccounts: []\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return({\n        update: (updates) => {\n            dispatch(update(updates))\n        }\n    })\n}\n\n//export default connect(null, mapDispatchToProps)(withMedia(AccountsEditor))\nexport default connect(null, mapDispatchToProps)(AccountsEditor)\n\n\n","import React from 'react';\nimport { connect } from 'react-redux'\nimport { Panel } from 'react-bootstrap'\nimport AccountsEditor from '../accountsEditor/AccountsEditor'\n\n/*\n * package test;\n\npublic class Test {\n\n\tpublic static void main(String[] args) {\n\t\t// TODO Auto-generated method stub\n\t\tString format = \"%-24.24s|%-8.8s|%-11.11s|%15.15s|%-10.10s|%-10.10s|%-8.8s|%-1.1s|%s\";\n\t\tString forma2 = \"%-24.24s+%-8.8s+%-11.11s+%15.15s+%-10.10s+%-10.10s+%-8.8s+%-1.1s+%s\";\n\t\tSystem.out.println(String.format(format, \"id : 100\",\"crud\",\"date\",\"sum\",\"category\",\"account\",\"group\",\"s\",\"descr\"));\n\t\tSystem.out.println(String.format(format, \"------------------------\",\"--------\",\"-----------\",\"---------------\",\"----------\",\"----------\",\"--------\",\"-\",\"-----\"));\n\t\tSystem.out.println(String.format(format, \"\",\"Updated\",\"88.88.8888\",\"-88888888.88\",\"5\",\"6\",\"7\",\"8\",\"9\"));\n\t\tSystem.out.println(String.format(format, \"2018-06-05 15:20:02.024\",\"Updated\",\"88.88.8888\",\"-88888888.88\",\"ananasakm\",\"rukkanen\",\"joulu\",\"X\",\"tm nyton sellaista hrnlr\"));\n\t\tSystem.out.println(String.format(format, \"\",\"Updated\",\"88.88.8888\",\"-88888888.88\",\"5\",\"6\",\"7\",\"8\",\"9\"));\n//\t\t\t\t\"2018-06-05 15:20:02.024\"\n//\t\t\t\t 123456789012345678901234567890\n\t}\n\n}\n */\n\nclass Accounts extends React.Component {\n\tconstructor(props) {\n\t    super(props);\n\t    this.state = {\n\t        accounts: []\n\t    }\n\t    //this.props.accountsLoad() //loaded as needed\n\t}\n\t\n\trender() {\n\t\treturn(\n\t\t\t<div>\n\t\t\t  <Panel >\n\t\t\t  \t<Panel.Heading style={{paddingTop: \"4px\", paddingBottom: \"3px\", height: \"45px\", fontSize: \"23px\"}}>\n\t\t\t\t  \t<span style={{display: \"flow-root\", alignItems: \"center\"}}>\n\t\t\t\t  \t\tAccounts \n\t\t\t\t  \t</span>\n\t\t\t  \t</Panel.Heading>\n\t\t\t  \t<Panel.Body>\t\t\t\t\t\n\t\t\t\t\t<AccountsEditor initAccounts={this.props.accounts} />\n\t\t\t\t</Panel.Body>\n\t\t\t  </Panel>\n\t\t\t</div>\n\t\t\t)\n\t}\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        accounts: store.accounts.accounts\n    }\n}\n\nexport default connect(mapStateToProps)(Accounts)\n","import React from 'react' //  Main React library\nvar FontAwesome = require('react-fontawesome');\n\nclass Spinner extends React.Component{\n\trender(){\n\t\treturn null\n\t\tvar spin = <FontAwesome name='spinner' spin />\n\t\t//console.log(\"fetch:\"+this.props.fetching)\n\t\treturn(this.props.fetching ? spin : '')\t\t\t\t\t\n\t\t\n\t}\n}\n\nexport default Spinner\n","import {axios_get} from './axios';\n\t\nconst AUDITLOG_REQUEST = 'AUDITLOG_REQUEST'\nconst auditlogRequestAction = () => ({\n    type: AUDITLOG_REQUEST\n})\n\nconst AUDITLOG_RESPONSE = 'AUDITLOG_RESPONSE'\nconst auditlogResponseAction = (entries, fp, lp) => ({\n    type: AUDITLOG_RESPONSE,\n    payload: {\n        \"logentries\": entries,\n        \"firstpage\": fp,\n        \"lastpage\": lp\n    }\n})\n\nconst PAGE_SIZE = 50\n//NOTE Backend should return always PAGE_SIZE + 1 so, we can detect last/first -page\n const load = (id) => (\n    (dispatch) => {\n        dispatch(auditlogRequestAction())\n        axios_get('history',\n          (null != id ? 'id=' + id  : ''),\n           response => {\n        \t   var lastPage = true\n               if(response.data.length === (PAGE_SIZE + 1)) {\n            \t   lastPage = false\n            \t   response.data.pop()\n               }\n               dispatch(auditlogResponseAction(response.data, true, lastPage))\n           },\n           dispatch\n       )\n    }\n )\n\nconst next = (s) => (\n    (dispatch) => {\n        dispatch(auditlogRequestAction(s))\n        axios_get('history',\n          's='+s,\n            response  => {\n               var lastPage = true\n               if(response.data.length === (PAGE_SIZE + 1)) {\n            \t   lastPage = false\n            \t   response.data.pop()\n               }\n               dispatch(auditlogResponseAction(response.data, false, lastPage))\n            },\n            dispatch\n        )\n    }\n )\n \n const prev = (e) => (\n\t(dispatch) => {\n        dispatch(auditlogRequestAction(e))\n        axios_get('history',\n          'e='+e,\n            response => {\n               var firstPage = true\n               if(response.data.length === (PAGE_SIZE + 1)) {\n            \t   firstPage = false\n            \t   response.data.shift()\n               }\n               dispatch(auditlogResponseAction(response.data, firstPage, false))\n            },\n            dispatch\n        )\n    }\n )\n\nexport {\n    load,\n    next,\n    prev\n}","import React from 'react' //  Main React library\nimport { Button } from 'react-bootstrap';\nimport { connect } from 'react-redux'\nimport { next, prev } from '../../actions/auditlog'\nvar FontAwesome = require('react-fontawesome');\n\nclass Buttons extends React.Component{\n\tconstructor(props) {\n\t    super(props)\n\t    this.next = this.next.bind(this)\n\t    this.prev = this.prev.bind(this)\n\t}\n\t\n\tnext() {\n\t\tif(!this.props.logentries || this.props.logentries.length === 0) return\n\t\tvar last = this.props.logentries[this.props.logentries.length - 1]\n\t\tvar s = last.hs[last.rownr].hd\n\t\tthis.props.next(s)\n\t}\n\n\tprev() {\n\t\tif(!this.props.logentries || this.props.logentries.length === 0) return\n\t\tvar first = this.props.logentries[0]\n\t\tvar e = first.hs[first.rownr].hd\n\t\tthis.props.prev(e)\n\t}\n\t\n\trender(){\n\t    return (\n\t    <div>\n\t\t    <Button onClick={this.prev} disabled={this.props.firstpage} >\n\t\t     \t<FontAwesome name='caret-left' />\n\t\t     </Button>\n\t\t     <Button onClick={this.next} disabled={this.props.lastpage}>\n\t\t     \t<FontAwesome name='caret-right'/>\n\t\t     </Button>\n\t\t     <Button href=\"http://localhost:8080/log\">\n\t\t     \t<FontAwesome name='download'/>\n\t\t     </Button>\n\t    </div>\n\t    )\n\t}\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        logentries: store.auditlog.logentries,\n        firstpage: store.auditlog.firstpage,\n        lastpage: store.auditlog.lastpage\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return ({\n        next: (s) => {\n            dispatch(next(s))\n        },\n        prev: (e) => {\n            dispatch(prev(e))\n        }\n    })\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Buttons)\n","\nvar dateFormat = require('dateformat');\n\n// fiDate represents date in fi-format (string)\nfunction toDateFi(fiDate) {\n\t\tvar parts = fiDate.split(\".\");\n\t\tvar day = parts[0]\n\t\tvar month = parts[1] - 1\n\t\tvar year = parts[2]\n\t\treturn new Date(year, month, day)\n}\n\nfunction fiDateTimeMillis(millis) {\n\t\t//TODO: any more elegant ways?\n\t\tvar d = new Date(millis)\n\t\t\n\t\tvar day = '00' + d.getDate()\n\t\tday = day.substr(day.length - 2)\n\t\t\n\t\tvar m = '00' + (d.getMonth()+1) \n\t\tm = m.substr(m.length - 2)\n\t\t\n\t\tvar h = '00' + d.getHours()\n\t\th = h.substr(h.length - 2)\n\n\t\tvar mi = '00' + d.getMinutes()\n\t\tmi = mi.substr(mi.length - 2)\n\t\t\n\t\tvar sec = '00' + d.getSeconds()\n\t\tsec = sec.substr(sec.length - 2)\n\t\t\n\t\tvar mspart = '000' + d.getMilliseconds()\n\t\tmspart = mspart.substr(mspart.length - 3)\n\t\tvar r =\n\t\tday + '.' +\n\t\tm + '.' +\n\t\td.getFullYear() + ' ' +\n\t\th + ':' +\n\t\tmi + ':'+\n\t\tsec + '.' +\n\t\tmspart \n\t\treturn r\n}\n\nfunction toDBFormatFi(fiDate) {\n\t\tvar parts = fiDate.split(\".\");\n\t\tvar day = parts[0]\n\t\tvar month = parts[1] - 1\n\t\tvar year = parts[2]\n\t\treturn dateFormat(new Date(year, month, day), \"yyyy-mm-dd\")\n}\n\nfunction toDateDB(DBDate) {\n\t\tvar parts = DBDate.split(\"-\");\n\t\tvar day = parts[2]\n\t\tvar month = parts[1] - 1\n\t\tvar year = parts[0]\n\t\treturn new Date(year, month, day)\n}\n\nfunction toFiDBFormat(DBDate) {\n\t\tvar parts = DBDate.split(\"-\");\n\t\tvar day = parts[2]\n\t\tvar month = parts[1] - 1\n\t\tvar year = parts[0]\n\t\treturn dateFormat(new Date(year, month, day), \"dd.mm.yyyy\")\n}\n\nexport {toDateFi, toDBFormatFi, fiDateTimeMillis, toFiDBFormat, toDateDB}","\nimport {fiDateTimeMillis, toFiDBFormat} from '../../util/fiDate'\nimport currencyFormat  from '../../util/currency'\n\nfunction chooseValueF(p, field) {\n\t\t//'w','o','d','i','s','g','c','a','descr'\n    \tswitch(field) {\n\t    \tcase 'w' : return fiDateTimeMillis(p.hd)\n\t    \tcase 'op' : {\n\t    \t\tswitch(p.op) {\n\t    \t\tcase 'C' : return 'creation'\n\t    \t\tcase 'U' : return 'modification'\n\t    \t\tcase 'D' : return 'deletion'\n\t    \t\tdefault : console.log('UNKONWN op:' + p.op)\n\t    \t\t\t\t  return null\n\t    \t\t}\n\t    \t}\n        case 'dc' : return toFiDBFormat(p.dc)\n\t    \tcase 'd' : return toFiDBFormat(p.d)\n\t    \tcase 'i' : return currencyFormat(p.i)\n\t    \tcase 's' : return p.s ? 'X' : '-'\n\t    \tcase 'g' : return p.g\n\t    \tcase 'c' : return p.c_descr\n\t    \tcase 'a' : return p.a_descr\n\t    \tcase 'descr' : return p.descr\n\t    \tdefault : console.log('UNKONWN field: '+field)\n\t    \t\t\treturn null\n    \t}\n    \t\n\t}\n\nexport {chooseValueF}","import React from 'react';\nimport { Table } from 'react-bootstrap';\nimport {chooseValueF} from './logCommons'\n\nconst fields = ['i', 's', 'c', 'dc', 'a', 'd', 'g', 'descr']\n\nclass LogEntry extends React.Component {\n\t\t\n\tconstructor(props) {\n\t    super(props);\n\n\t    //render\n        this.renderLogHeaderT = this.renderLogHeaderT.bind(this)\n        this.renderLogR = this.renderLogR.bind(this)\n\n        //render\n        this.renderContentF = this.renderContentF.bind(this)\n        \n        //css and stuff\n        this.tdClassName = this.tdClassName.bind(this)\n        this.td = this.td.bind(this)\n        this.thClassName = this.thClassName.bind(this)\n        this.th = this.th.bind(this)\n        \n\t}\n\t\n\trenderContentF(value) {\n\t\t\treturn(\t\t\n\t\t\t<div>\n\t\t\t  \t{value}\n\t\t    </div>)\n    }\n\t\n\tthClassName(field) {\n\t\treturn field + '_header' \n\t}\n\t\n\tth(field, label = null) {\n\t\tvar labelField = (\n\t\t\t<div >\n\t\t\t\t\t{label}\n\t  \t\t</div>)\n\n\t\treturn(\n\t\t<th className={this.thClassName(field)}>\n  \t\t\t<div>\n\t  \t\t\t<span style={{display: \"flex\"}}>\t\t\t  \t\t\t\t\t\t\n\t  \t\t\t\t{label !== null ? labelField : ''}\n\t  \t\t\t</span>\n\t  \t\t</div>\n\t\t</th>)\n\t}\n\n\trenderLogR(r, index) {\n\t\treturn(\n    \t<tr key={r.hs[index].id+'_'+r.hs[index].rownr}>\n\t \t\t{['w','op', ...fields].map( (f) => { \n\t \t\t\treturn this.td(r, index, f) \n\t \t\t})}\n\t\t</tr>)\n    }\n\t\n\ttdClassName(r, index, field) {\n\t\tvar ret = field + '_cell' \n\t\tif(r.hs[index].op === 'U' \n\t\t   && (fields.indexOf(field) > -1) \n\t\t   && r.hs[index][field] !== r.hs[index - 1][field]) {\n\t\t\tret += ' updatedRow'\n\t\t}\n\t\t\n\t\tif(index === r.rownr || this.props.singleEntry) {\n\t\t\tret += ' actualRow'\n\t\t}\n\t\treturn ret\n\t}\n\t\n\n\t\n\ttd(r, index, field) {\n\t\tvar value = chooseValueF(r.hs[index], field)\n\t\treturn (\n\t\t<td key={r.hs[index].id + '_' + index+'_'+field} className={this.tdClassName(r, index, field)}>\n\t\t      \t\t{this.renderContentF(value)}\t\n\t\t</td>)\n\t}\n\t\n\trenderLogHeaderT = () => {\n    \treturn (\n\t\t<thead>\n\t  \t\t<tr>\n\n\t  \t\t\t{this.th('w', 'When')}\n\t  \t\t\t{this.th('op','What')}\n          {this.th('i', 'Pay')}\n          {this.th('s', 's')}\n          {this.th('c', 'Issue')}\n          {this.th('dc', 'Date')}\n          {this.th('a', 'Account')}\n\t  \t\t\t{this.th('d', 'Date')}\n\t  \t\t\t{this.th('g', 'Ref')}\n\t  \t\t\t{this.th('descr', 'Desc.')}\n\t\t\t</tr>\t\t\t\t  \t\t\t\n\t\t</thead>)\n    }\n\t\n\trender() {\n\t\tif(this.props.logEntry == null) return null\n\t\tvar r = this.props.logEntry\n\t\treturn(\n\t\t\t\t\t<Table id=\"auditlog_table\" key={'al_table_'+r.id} striped bordered hover condensed>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.renderLogHeaderT()\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t  \t{\n\t\t\t\t\t\t  \t\tr.hs.map((p, ix) => { return this.renderLogR(r, ix) })\n\t\t\t\t\t\t  \t}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</Table>\n\t\t)\n\t}\n}\n\nexport default LogEntry\n","import React from 'react';\nimport { Panel } from 'react-bootstrap';\nimport {fiDateTimeMillis} from '../../util/fiDate'\nimport LogEntry from './logEntry'\nimport {chooseValueF} from './logCommons'\n\nclass AuditLogTable extends React.Component {\n\tconstructor(props) {\n\t    super(props);\n\n\t    //render\n\t    this.renderLogEntry = this.renderLogEntry.bind(this)\n\t}\n\t\n\trenderLogEntry(r) {\n\t\tif(r.rownr < 0) return null\n\t\t\n\t\treturn (\n\t\t\n\t\t<Panel key={'al_panel_'+r.hs[0].id+'_'+r.rownr} >\n\t\t\t<Panel.Heading >\n\t\t\t\t<Panel.Title >\n\t            \t{chooseValueF(r.hs[r.rownr], 'op')} at { fiDateTimeMillis(r.hs[r.rownr].hd) } ( id: {r.hs[0].id} )\n\t\t\t\t</Panel.Title >\n            </Panel.Heading >\n\t\t\t <Panel.Body>\n\t\t\t \t<LogEntry logEntry={r} />\n\t\t\t</Panel.Body>\n\t\t</Panel >\n\t\t\n\t\t)\n\t}\n\t\n\trender() {\n\t\tvar entries = this.props.logentries || []\n\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t{entries.map((r) => this.renderLogEntry(r))}\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default AuditLogTable\n","import React from 'react';\nimport { connect } from 'react-redux'\nimport { Panel } from 'react-bootstrap';\n\nimport './auditlog.css'\nimport Spinner from '../main/Spinner'\nimport Buttons from './buttons'\nimport AuditLogTable from './auditlogTable'\n\nclass AuditLog extends React.Component {\n\t\n\trender() {\n\t\t\n\t\tvar entries = this.props.logentries || []\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t<div>\n\t\t\t\t\t<Panel>\n\t\t\t\t\t  \t<Panel.Heading style={{paddingTop: \"6px\", paddingBottom: \"3px\", height: \"45px\", fontSize: \"23px\"}}>\n\t\t\t\t\t  \t\tAudit Log <Spinner fetching={this.props.fetching} />\n\t\t\t\t\t  \t\t\t<span className=\"pull-right\">\n\t\t\t\t\t\t  \t\t\t<Buttons />\n\t\t\t\t\t\t  \t    </span>\n\t\t\t\t\t  \t</Panel.Heading>\n\t\t\t\t\t </Panel>\n\t\t\t\t </div>\n\t\t\t\t<AuditLogTable logentries={entries} />\n\t\t\t\t<div>\n\t\t\t\t\t<Panel>\n\t\t\t\t\t  \t<Panel.Heading style={{paddingTop: \"6px\", paddingBottom: \"3px\", height: \"45px\", fontSize: \"23px\"}}>\n\t\t\t\t\t  \t\t\t<span className=\"pull-right\">\n\t\t\t\t\t\t  \t\t\t<Buttons />\n\t\t\t\t\t\t  \t    </span>\n\t\t\t\t\t  \t</Panel.Heading>\n\t\t\t\t\t </Panel>\n\t\t\t\t </div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        logentries: store.auditlog.logentries,\n        fetching: store.auditlog.fetching\n    }\n}\n\nexport default connect(mapStateToProps)(AuditLog)\n","import React from 'react';\nimport { connect } from 'react-redux'\nimport AuditLog from './auditlog'\n\nclass Logs extends React.Component {\n\trender() {\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t<AuditLog logentries={this.props.auditlog} />\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = (store) => {\n    return {\n    \t//TODO\n        auditlog: store.auditlog.logentries\n    }\n}\n\nexport default connect(mapStateToProps)(Logs)\n","function addDays(date, days) {\n  var result = new Date(date);\n  result.setDate(result.getDate() + days);\n  return result;\n}\n\nfunction addMonths(date, months) {\n\tvar result = new Date(date);\n\tresult.setMonth(result.getMonth() + months);\n  return result;\t\n}\n\nfunction daydiff(d1, d2) {\n\tvar dt1 = new Date(d1);\n\tvar dt2 = new Date(d2);\n\treturn Math.floor((Date.UTC(dt2.getFullYear(), dt2.getMonth(), dt2.getDate()) - Date.UTC(dt1.getFullYear(), dt1.getMonth(), dt1.getDate()) ) /(1000 * 60 * 60 * 24));\n}\n\nfunction isFirstAndLastOfSameMonth(d1, d2) {\n\tvar result = \n\t\td1.getDate() === 1 &&\n\t\td1.getMonth() === d2.getMonth() &&\n\t\td1.getFullYear() === d2.getFullYear() &&\n\t\td2.getDate() === daysInMonth(d1.getMonth(), d1.getYear())\n\treturn result;\n\t\n}\n\nfunction daysInMonth (month, year) {// month is 0-based\n    return new Date(year, month + 1, 0).getDate();\n}\n\nexport {addDays, addMonths, daydiff, isFirstAndLastOfSameMonth, daysInMonth}","import {addDays, addMonths, daydiff, isFirstAndLastOfSameMonth, daysInMonth} from '../util/addDays'\n\nconst DATE_RANGE_SELECTED = 'DATE_RANGE_SELECTED'\nconst setDateRangeAction = (s, e, name) => ({\n    type: DATE_RANGE_SELECTED,\n    payload: {\n        's': s,\n        'e': e\n    }\n})\n\nvar prev_s, prev_e\n\nconst set_daterange = (s, e) => (\n    (dispatch) => {\n    \tprev_s = s\n    \tprev_e = e\n        dispatch(setDateRangeAction(s, e))\n    }\n)\n\n\nconst daterange_next_block = () => (\n    (dispatch) => {\n    \t//if it is a even month so will be the next month be even\n    \tif ( isFirstAndLastOfSameMonth(prev_s, prev_e) ) {\n    \t\tvar s = addMonths(prev_s, 1)\n    \t\tvar e = new Date(s)\n    \t\ts.setDate(1)\n    \t\te.setDate(daysInMonth(e.getMonth(), e.getYear()))\n    \t\tdispatch(set_daterange(s, e))\n    \t\treturn\n    \t\t\n    \t}\n    \tvar diff = daydiff(prev_s, prev_e)\n    \tdispatch(set_daterange(addDays(prev_s, diff + 1), addDays(prev_e, diff + 1)))\n    }\n)\n\nconst daterange_prev_block = () => (\n    (dispatch) => {\n    \t//if it is a even month so will be the preious month be even\n    \tif ( isFirstAndLastOfSameMonth(prev_s, prev_e) ) {\n    \t\tvar s = addMonths(prev_s, -1)\n    \t\tvar e = new Date(s)\n    \t\ts.setDate(1)\n    \t\te.setDate(daysInMonth(e.getMonth(), e.getYear()))\n    \t\tdispatch(set_daterange(s, e))\n    \t\treturn\n    \t}\n    \tvar diff = daydiff(prev_e, prev_s)\n    \tdispatch(set_daterange(addDays(prev_s, diff - 1), addDays(prev_e, diff - 1)))\n    }\n)\n\nconst set_todayrange = () => (\n    (dispatch) => {\n    \t\tvar s = new Date(0)\n    \t\tvar today = new Date()\n    \t\ts.setFullYear(today.getFullYear())\n    \t\ts.setMonth(today.getMonth())\n    \t\ts.setDate(1)\n    \t\ts.setHours(0);\n    \t\tvar e = new Date(s)\n    \t\te.setDate(daysInMonth(e.getMonth(), e.getYear()))\n    \t\tdispatch(set_daterange(s, e))\n    }\n)\n\nexport {\n    set_daterange,\n    set_todayrange,\n    daterange_prev_block,\n    daterange_next_block\n    \n}","import {axios_get_params} from './axios';\n\nconst MINIBARS_REQUEST = 'MINIBARS_REQUEST'\nconst balancesRequestAction = () => ({\n    type: MINIBARS_REQUEST,\n    payload: null\n})\n\nconst MINIBARS_RESPONSE = 'MINIBARS_RESPONSE'\nconst balancesResponseAction = (response) => ({\n    type: MINIBARS_RESPONSE,\n    payload: {\n        balances: response\n    }\n})\n\nconst MINIBARS_REDRAW = 'MINIBARS_REDRAW'\nconst minibarsRedrawAction = () => (\n  { \n\ttype: MINIBARS_REDRAW,\n    payload: \n    \t{\n    \t\tredraw : (new Date()).getTime() //only signal\n    \t} \n  }\n)\n\nvar prev_cat = 0\n\nconst balances_load = (cat) => (\n    (dispatch) => {\n    \tprev_cat = cat\n        dispatch(balancesRequestAction())\n        axios_get_params('minibars',\n        \t\t{ \n        \t\t\tparams: {\"cat\": cat}\n        \t\t},\n        \t\tresponse => {\n//                console.log(response);\n        \t\t\tvar ret = {\n        \t\t\t\t\t\"data\": response.data,\n        \t\t\t\t\tbalance: 0\n        \t\t\t}\n        \t\t\tdispatch(balancesResponseAction(ret))\n        \t\t},\n        \t\tdispatch\n        )\n    }\n)\n\n\nconst balances_refresh = () => (\n\tbalances_load(prev_cat)\n)\n\nconst minibars_redraw = () => (\n    (dispatch) => {\n    \tdispatch(minibarsRedrawAction())\n    }\n)\nexport {\n    balances_load,\n    balances_refresh,\n    minibars_redraw\n}","import { chunk_rawdata } from './chunkdata'\n\n//var chunk_rawdata = require('./chunkdata');\nvar dates = require('./helpers');\n\n\n\nvar dateFormat = require('dateformat');\nvar d3 = require('d3');\n\nfunction currencyFormat(c) {\n\treturn parseFloat(Math.round(c* 100) / 100).toFixed(2)\n}\n\nvar minibars = (function() {\n\t//date:\n  var FORMAT_DATE = \"dd.mm.yyyy ddd\"\n  var FORMAT_MONTH = \"mmm\"\n  var FORMAT_MONTH_YEAR = \"mmm yyyy\"\n  //colors:\n  var COLOR_INCOME_NEGATIV = \"red\"\n  var COLOR_INCOME_POSITIV = \"green\"\n  var COLOR_BALANCE = \"blue\"\n\n  var COLOR_DAY_BACKGROUND_NORMAL = \"white\"\n  var COLOR_DAY_BACKGROUND_UNDER_LIMITS = \"pink\"\n  var COLOR_DAY_BACKGROUND_SELECTED = \"gray\"\n  var COLOR_DAY_BACKGROUND_FOCUS = \"cadetblue\"\n\n  var COLOR_MONTH_BACKGROUND_NORMAL_ODD = \"lightblue\"\n  var COLOR_MONTH_BACKGROUND_NORMAL_EVEN = \"lightblue\"\n  var COLOR_MONTH_TEXT = \"black\"\n  var COLOR_UNLOCKED = \"lightgray\"\n\t  \n  var COLOR_MONTH_SEPARATOR_LINE = \"lightblue\"\n\n  //name of the element to bind to\n  var bindto = null\n  \n  //widths\n  var div_border_width\n  var column_width\n  var slot_width = 3\n  var line_width\n  var b_line_width\n\n  //leadin = rowstart in which the min and max are shown\n  var leadin_width\n\n  var col_per_slot_ratio = 0.8\n\n  //x-coords\n  var leadin_x\n\n  //heights\n  var top_margin\n  var datearea_height\n  var center_margin\n  var month_height\n  var bottom_margin\n\n  //y-coords\n  var datearea_y\n  var center_margin_y\n  var month_y\n  var bottom_margin_y\n  var height\n\n  \n  //min/max -months shown\n  var month_markers\n  \n\n  var miny, maxy\n  var scale\n\n  //date range selection\n  var start = null;\n  var end = null;\n\n  //callback\n  var cb_select = null;\n  //var dataprovider = null;\n\n  var max_selection_days\n\n  //default values\n  function init(config) {\n    if (!bindto) {\n      console.assert(config.bindto, \"bindto is mandatory\")\n      bindto = config.bindto\n    } else {\n      console.assert(!config.bindto || bindto === config.bindto, \"bindto can be defined only once\")\n    }\n  \n    //widths\n    div_border_width = config.div_border_width ||div_border_width || 0\n    leadin_width =  config.leadin_width || leadin_width || 45\n    line_width = config.line_width || line_width || 1\n    b_line_width = config.b_line_width || b_line_width || 0.2\n\n    //heights\n    top_margin = config.top_margin || top_margin || 10\n    datearea_height = config.datearea_height || datearea_height || 80\n    center_margin = config.center_margin || center_margin || 0 \n    month_height = config.month_height || month_height || 20\n    bottom_margin = config.bottom_margin || bottom_margin || 3 \n\n    //y-coords\n    datearea_y = top_margin\n\n    center_margin_y = datearea_y + datearea_height\n    month_y = center_margin_y + center_margin\n    bottom_margin_y = month_y + month_height\n    height = bottom_margin_y + bottom_margin\n\n    //callbacks\n    cb_select = config.select\n    //dataprovider = config.dataprovider\n    max_selection_days =  config.max_selection_days || 90\n    \n    month_markers = \"NONE\"\n  }\n\n  //id constants\n  var _DIV = \"_div_minibar\"\n  var _TIP_DIV = \"_tip_div_minibar\"\n  var _TIP_I_DIV = \"_tip_i_div_minibar\"\n  var _DAY_TEXT = \"_day_text\"\n  var _B_TEXT = \"_b_text\"\n  var _B_COLOR = \"_b_color\"\n  var _I_TEXT = \"_i_text\"\n  var _LEADIN = \"_leadin_minibar\"\n  var _LEADIN_ZERO = \"_zero_leadin_minibar\"\n  var _LEADIN_ZERO_TEXT = \"_zero_leadin_text_minibar\"\n  var _MAX_TEXT = \"_max_text_minibar\"\n  var _MIN_TEXT = \"_min_text_minibar\"\n  var _MONTH = \"_month_minibar\"\n  var _BG = \"_slot_bg_minibar\"\n  var _I = \"_i_minibar\"\n  var _E = \"_e_minibar\"\n  var _B = \"_b_minibar\"\n  var _UNLOCKED = \"_b_unlocked\"\n  var _LINE_B_PREV = \"_b_prev_minibar\"\n  var _LINE_B_NEXT = \"_b_next_minibar\"\n  var _LINE_ZERO = \"_zero_minibar\"\n\n  var months = null;\n  //init min and max for all\n  function init_scales() {\n  \n    miny = d3.min([0, months[0].columns[0].b])\n    maxy = d3.max([0, months[0].columns[0].b])\n\n    for (var ix = 0, len = months.length; ix < len; ix++) {\n      miny = d3.min([miny, d3.min(months[ix].columns, function(d) {\n        console.assert((null != d.i) && (null != d.e) && (null != d.b) && d.d , \"i, e, b and d must be defined\")\n        console.assert((d.i >= 0) && (d.e <=0 ), \"i must be positive, e must be negative\")\n        return d3.min([d.i, d.e, d.b]) \n      })])\n      maxy = d3.max([maxy, d3.max(months[ix].columns, function(d) {\n        return d3.max([d.i, d.e, d.b]) \n      })])\n    }\n    if(miny === 0 && maxy === 0) {maxy = 100}\n    scale = d3.scale.linear().domain([miny, maxy]).range([datearea_y + line_width, center_margin_y])\n\n    //miny_text = roundNumberText(miny)\n    //maxy_text  = roundNumberText(maxy)\n\n    //leadin_x = null\n  }\n\n//properties that may change dynamically in addition to basic data (ie. by update)\nfunction init_changeables() {\n  //widths\n  column_width = slot_width * col_per_slot_ratio\n\n  //min/max -months shown (used to decide wheter to create or update)\n  month_markers = monthMarkers()\n  \n  leadin_x = null\n}\n\n//helpers\nfunction dateId(day) {\n  return \"_\" + bindto + \"_\" + day.getDate() + \"_\" + (day.getMonth()+1) + \"_\" + day.getFullYear()\n}\n\nfunction monthId(day) {\n  return \"_\" + bindto + \"_\" + (day.getMonth() + 1) + \"_\" + day.getFullYear()\n}\n\nfunction bgColor(data) {\n  if (start && !end && !dates.compare(data.d, start)) {\n    return COLOR_DAY_BACKGROUND_FOCUS\n  }\n  if (withinSelection(data)) {\n    return COLOR_DAY_BACKGROUND_SELECTED\n  }\n  //return COLOR_DAY_BACKGROUND_NORMAL\n  return bgNormal(data)\n}\n\n/*function getNormalColorByDateOnly(day) {\n\tvar first_month = months[0].columns[0].d.getMonth()\n\tvar index_m = day.getMonth() - first_month\n\tvar index_d = day.getDate() - 1\n\treturn bgNormal(months[index_m].columns[index_d])\n}*/\n\nfunction bgNormal(data) {\n\tif( data.smallestb < 0 ) {\n\t\treturn COLOR_DAY_BACKGROUND_UNDER_LIMITS\n\t}\n\treturn COLOR_DAY_BACKGROUND_NORMAL\n}\n\nfunction iColor(data) {\n  return ((data.i + data.e) < 0) ? COLOR_INCOME_NEGATIV : COLOR_INCOME_POSITIV\n}\n\nfunction monthColor(day) {\n  return day.getMonth() % 2 ? COLOR_MONTH_BACKGROUND_NORMAL_EVEN : COLOR_MONTH_BACKGROUND_NORMAL_ODD\n}\n\nfunction mouseover_month(day) {\n  var point = d3.select('#' + monthId(day) + _MONTH)\n  point.attr(\"fill\", COLOR_DAY_BACKGROUND_FOCUS)\n}\n\nfunction mouseout_month(day) {\n  var point = d3.select('#' + monthId(day) + _MONTH)\n  point.attr(\"fill\", monthColor(day))\n}\n\nfunction click_month(s_date, e_date) {\n  /*if (start) {\n    var point = d3.select('#'+dateId(start) + _BG)\n    point.attr(\"fill\", getNormalColorByDateOnly(start))\n  }*/\n  start = s_date\n  end = e_date\n  //normalize_selection()\n  update() //jh\n  cb_select(start, end)\n  \n}\n\nfunction getmonthtext(date) {\n  if(date.getMonth() === 0) {\n\t  return dateFormat(date, FORMAT_MONTH_YEAR)\n  } else {\n\t  return dateFormat(date, FORMAT_MONTH)\n  }\n}\n\nfunction monthMarkers() {\n  //min/max -months\n  console.assert(months[0].columns[0].d, \"d must be defined\")\n  console.assert(months[months.length-1].columns[0].d, \"d must be defined\")\n\n  var left_month = monthId(months[0].columns[0].d)\n  var right_month = monthId(months[months.length-1].columns[0].d)\n\n  return left_month+\"-\"+right_month\n}\n\nfunction roundNumber(number) {\n\t  return Math.round(number).toPrecision(3)\n}\n\nfunction roundNumberText(number) {\n  var num = roundNumber(number)\n  var prefix = d3.formatPrefix(num);\n  return  \"\" + prefix.scale(num) + (prefix.symbol ===  \"y\" ? \"\" : prefix.symbol)\n}\n\nfunction withinSelection(d) {\n  return (start && end && d.d && dates.inRange(d.d, start, end))\n}\n\nfunction show_tip(data) {\n  var mid = monthId(data.d)\n  var bg = document.getElementById(dateId(data.d) + _BG).getBoundingClientRect()\n  var doc = document.documentElement;\n//  var left = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n  var top = (window.pageYOffset || doc.scrollTop)  - (doc.clientTop || 0);\n  //console.log('top=' + top)\n  var offsetRect = {left:0, 'top': -top} //document.getElementsByClassName(\"col-md-12\")[0].getBoundingClientRect()\n  //console.log(\"offsetRect:\" + offsetRect.left)\n  d3.select('#' + mid + _TIP_I_DIV).style(\"display\", (data.i === 0 && data.e === 0) ? \"none\" : \"table-row\")\n  d3.select('#' + mid + _TIP_DIV)\n  .style(\n    {\"display\": \"inline\",\n      \"left\" : (bg.left - offsetRect.left + slot_width) + \"px\",\n      \"top\" : (bg.top - offsetRect.top) + (0.75 * datearea_height) + \"px\",\n      \"position\" : \"absolute\"\n    })\n  d3.select(\"#\" + mid +_DAY_TEXT).text(dateFormat(data.d,FORMAT_DATE))\n  d3.select(\"#\" + mid +_B_TEXT).text(currencyFormat(data.b))\n  d3.select(\"#\" + mid +_B_COLOR).style(\"background-color\", iColor(data))\n  d3.select(\"#\" + mid +_I_TEXT).text((currencyFormat(data.i + data.e)))\n}\n\nfunction hide_tip(data) {\n  d3.select('#'+monthId(data.d) +_TIP_DIV).style(\"display\", \"none\")\n}\n\n\nfunction select(start_, end_) {\n  //console.log(\"select!\")\n  if (!start_ || !end_ ) {\n\t  console.assert(null != start_ && null != end_) \n\t  return\n  }\n  normalize(start_,end_) \n  \n  //console.log(\"select\")\n  //console.log(\"start:\" + start)\n  //console.log(\"end:\" + end)\n  \n  update() //jh\n  \n  //normalize_selection()\n}\n\nfunction normalize(s,e) {\n\t  var _s = d3.min([s, e])\n\t  var _e = d3.max([s, e])\n\t  start = _s\n\t  end = _e\n}\nfunction mouseover(data, i) {\n  ////console.log(\"mouseover\")\n  show_tip(data, i)\n  var point = d3.select('#' + dateId(data.d) +_BG)\n  point.attr(\"fill\", COLOR_DAY_BACKGROUND_FOCUS)\n  if (start && !end && Math.abs(dateDiffInDays(start, data.d)) > max_selection_days) {\n    cursor(\"not-allowed\")\n  } else if (start && !end) {\n    cursor(\"col-resize\")\n  } else {\n    cursor(\"pointer\")\n  }\n}\n\nfunction mouseout(data) {\n  ////console.log(\"mouseout\")\n  hide_tip(data)\n  var point = d3.select('#' + dateId(data.d) +_BG)\n  point.attr(\"fill\", bgColor(data))\n  //cursor(data, \"default\")\n}\n\nvar _MS_PER_DAY = 1000 * 60 * 60 * 24;\n\n// a and b are javascript Date objects\nfunction dateDiffInDays(a, b) {\n  // Discard the time and time-zone information.\n  var utc1 = Date.UTC(a.getFullYear(), a.getMonth(), a.getDate());\n  var utc2 = Date.UTC(b.getFullYear(), b.getMonth(), b.getDate());\n\n  return Math.floor((utc2 - utc1) / _MS_PER_DAY);\n}\n\n/*var prev_start = null\nvar prev_end = null\nfunction normalize_selection() {\n  var _s = d3.min([start, end])\n  var _e = d3.max([start, end])\n  start = _s\n  end = _e\n  colorRange(prev_start, prev_end, getNormalColorByDateOnly)\n  prev_start = start\n  prev_end = end\n\n  colorRange(start, end, () => {return COLOR_DAY_BACKGROUND_SELECTED})\n<<<<<<< HEAD\n}\n=======\n}*/\n\n\nfunction cursor(cursor) {\n  document.body.style.cursor = cursor\n}\n\nfunction click(data) {\n  if (start == null || (start && end)) {\n    start = data.d\n    end = null\n    cursor(\"col-resize\")\n    update() //jh\n    \n    //colorRange(prev_start, prev_end, getNormalColorByDateOnly)\n  } else if (end  == null) {\n    if (start && Math.abs(dateDiffInDays(start, data.d)) > max_selection_days) {\n      return;\n    }\n    end = data.d\n    cursor(\"pointer\")\n    normalize(start,end) \n    update() //jh\n    //normalize_selection()\n    cb_select(start, end)\n  }\n  ////console.log(\"s:\" + start + \" e:\" + end)\n  show_tip(data)\n  d3.select('#' + dateId(data.d) + _BG).attr(\"fill\", COLOR_DAY_BACKGROUND_FOCUS)\n}\n\nvar clicks = \n  {\n\t  \"click\": click,\n\t  \"mouseover\": mouseover,\n\t  \"mouseout\": mouseout\n  }\n\nfunction create(month) {\n  var mid = monthId(month.columns[0].d)\n  var width = month.columns.length * slot_width + line_width\n  var bindTo = d3.select('#' + bindto)\n  //console.log(\"div_width:\" + width );\n  var clicks_month =\n  {\n        \"click\": function() {click_month(month.columns[0].d, month.columns[month.columns.length - 1].d)},\n        \"mouseover\": function() {mouseover_month(month.columns[0].d)},\n        \"mouseout\": function() {mouseout_month(month.columns[0].d)}\n  }\n  \n  var minibar_div =\n    bindTo\n    .append(\"div\")\n    .attr(\"id\", mid +_DIV)\n    .style({\n      \"width\": width  + \"px\",\n      \"height\": height + \"px\",\n      \"float\": \"left\",\n      \"background-color\": \"white\",\n      \"border-style\": \"solid\",       \n      \"border-width\": div_border_width + \"px\",\n      \"border-color\": \"magenta\",\n      \"margin-top\": \"5px\" })\n    \n  var tip_div =\n  bindTo\n  .append(\"div\")\n  .attr(\"id\", mid +_TIP_DIV)\n  .style({\n      \"display\": \"none\",\n      \"position\": \"absolute\",\n      \"pointer-events\": \"none\",\n      \"top\": \"0px\",\n      \"left\": \"0px\"})\n  .append(\"table\")\n  .attr(\"class\",\"c3-tooltip\")\n\n  var tbody =\n  tip_div\n  .append(\"tbody\")\n\n  tbody.append(\"tr\").append(\"th\").attr(\n    { \"id\": mid +_DAY_TEXT,\n      \"colspan\":\"2\"}).text(\"CCC\")\n\n  var tr2 = tbody.append(\"tr\").attr(\"class\",\"c3-tooltip-name--data2\")\n  tr2.append(\"td\").attr(\"class\",\"name\").append(\"span\").style(\"background-color\", COLOR_BALANCE)\n  tr2.append(\"td\").attr(\"class\",\"value\").attr(\"id\", mid +_B_TEXT).text(\"\")\n\n  var tr1 = tbody.append(\"tr\").attr(\"id\", mid +_TIP_I_DIV).attr(\"class\",\"c3-tooltip-name--data1\")\n  tr1.append(\"td\").attr(\"class\",\"name\").append(\"span\").attr(\"id\", mid +_B_COLOR).style(\"background-color\", \"white\")\n  tr1.append(\"td\").attr(\"class\",\"value\").attr(\"id\", mid +_I_TEXT).text(\"\")\n\n  var minibar_leadin_svg = minibar_div\n    .append(\"svg\")\n    .attr({\n      \"id\": mid + _LEADIN,\n      \"width\": \"0px\",\n      \"height\": height })\n\n  minibar_leadin_svg\n    .append(\"line\")\n    .attr({\n    \"x1\" : leadin_width - (0.5 * line_width),\n    \"x2\" : leadin_width - (0.5 * line_width),\n    \"y1\": datearea_y,\n    \"y2\": bottom_margin_y,\n    \"stroke\": COLOR_MONTH_SEPARATOR_LINE,\n    \"stroke-width\": line_width\n    }) \n\n  minibar_leadin_svg\n  .append(\"line\")\n  .attr({\n    \"id\": mid + _LEADIN_ZERO,\n    \"x1\" : leadin_width - 7,\n    \"x2\" : leadin_width,\n    \"y1\": center_margin_y - scale(0) + top_margin + line_width,\n    \"y2\": center_margin_y - scale(0) + top_margin + line_width,\n    \"stroke\": \"black\",\n    \"stroke-width\": b_line_width\n  })\n\n  minibar_leadin_svg\n  .append(\"text\")\n        //.text(maxy_text)\n        .text('')\n        .attr({\n          \"id\": mid + _MAX_TEXT,\n          \"x\": leadin_width - 10,\n          \"y\": datearea_y + 12,\n          \"text-anchor\": \"end\",\n          \"font-family\": \"sans-serif\",\n          \"font-size\": \"12px\",\n          \"fill\": \"black\"\n        })\n\n  minibar_leadin_svg\n  .append(\"text\")\n        //.text(miny_text)\n  \t\t.text('')\n        .attr({\n          \"id\": mid + _MIN_TEXT,\n          \"x\": leadin_width - 10,\n          \"y\": center_margin_y  ,\n          \"text-anchor\": \"end\",\n          \"font-family\": \"sans-serif\",\n          \"font-size\": \"12px\",\n          \"fill\": \"black\"\n        })\n  //console.log(\"minibar_div.width = \" + width)\n  var minibar_svg = minibar_div\n    .append(\"svg\")\n    .style({\n        \"cursor\": \"inherit\"\n    })\n    .attr({ \n      \"width\": width,\n      \"height\": height,\n      \"fill\" : \"red\" })\n    .on({\n      \"mouseout\" : function() {cursor(\"default\")}\n    })\n\n  \n  minibar_svg\n    .append(\"rect\")\n    .attr({\n      \"id\": mid + _MONTH,\n      \"y\": month_y,\n      \"x\": 0,\n      \"width\": width - line_width,\n      \"height\" : month_height,\n      \"fill\" : monthColor(month.columns[0].d)\n    }).style(\"cursor\", \"pointer\")\n    .on(clicks_month)\n\n  minibar_svg\n  .append(\"text\")\n        .text(getmonthtext(month.columns[0].d))\n        .attr({\n          \"x\": 3,\n          \"y\": month_y + 15,\n          \"text-anchor\": \"start\",\n          \"font-family\": \"sans-serif\",\n          \"font-size\": \"12px\",\n          \"fill\": COLOR_MONTH_TEXT\n        }).style(\"cursor\", \"pointer\")\n        .on(clicks_month)\n        \n    minibar_svg\n    .selectAll()\n    .data(month.columns)\n    .enter()    \n    .append(\"rect\")\n    .attr({\n      \"id\": function(d) { \n        console.assert(d.d, \"d must be defined\")\n        return dateId(d.d) + _BG },\n      \"x\" : function(d, ix) {\n        ////console.log(\"x:\"+ (ix * slot_width))\n        return (ix * slot_width)},\n      \"y\": datearea_y,\n      \"width\": slot_width,\n      \"height\": datearea_height,\n      \"fill\": function(d) {return bgColor(d)}\n    })/*.style(\"cursor\", \"pointer\") */\n    .on(clicks)\n\n    minibar_svg\n    .selectAll()\n    .data(month.columns)\n    .enter()    \n    .append(\"rect\")\n    .attr({\n      \"id\": function(d) { return dateId(d.d) + _I },\n      \"x\" : function(d, ix){ return ((ix + (1 - col_per_slot_ratio) / 2) * slot_width)},\n      \"y\": function(d) { return  center_margin_y - scale(d.i) + top_margin + line_width },\n      \"width\": column_width,\n      \"height\": function(d) { return scale(d.i) - scale(0) },\n      \"fill\": COLOR_INCOME_POSITIV\n    })//.style(\"cursor\", \"pointer\")\n    .on(clicks)\n  \n    minibar_svg\n    .selectAll()\n    .data(month.columns)\n    .enter()    \n    .append(\"rect\")\n    .attr({\n      \"id\": function(d) { return dateId(d.d) + _E },\n      \"x\" : function(d, ix){ return ((ix + (1 - col_per_slot_ratio) / 2) * slot_width)},\n      \"y\": center_margin_y - scale(0) + top_margin + line_width,\n      \"width\": column_width,\n      \"height\": function(d) { return scale(0) - scale(d.e)},\n      \"fill\": COLOR_INCOME_NEGATIV\n    })//.style(\"cursor\", \"pointer\")\n    .on(clicks)\n    \n   minibar_svg\n    .selectAll()\n    .data(month.columns)\n    .enter()    \n    .append(\"line\")\n    .attr({\n      \"id\": function(d) { return dateId(d.d) + _LINE_ZERO },\n      \"x1\" : function(d, ix){ return (ix * slot_width)},\n      \"x2\" : function(d, ix) { return ((ix+1) * slot_width)},\n      \"y1\": center_margin_y - scale(0) + top_margin + line_width,\n      \"y2\": center_margin_y - scale(0) + top_margin + line_width,\n      \"stroke\": \"black\",\n      \"stroke-width\": b_line_width\n    })/*.style(\"cursor\", \"pointer\")*/\n    .on(clicks)\n\n   minibar_svg\n    .selectAll()\n    .data(month.columns)\n    .enter()    \n    .append(\"line\")\n    .attr({\n      \"id\": function(d){ return dateId(d.d) + _LINE_B_PREV},\n      \"x1\" : function(d, ix){ return (ix-(null != d.prev_b ? 0.5 : -0.5)) * slot_width},\n      \"x2\" : function(d, ix){ return (ix+0.5) * slot_width},\n      \"y1\": function(d){\n        return center_margin_y - scale(null != d.prev_b ? d.prev_b : d.b) + top_margin + line_width},\n      \"y2\": function(d, ix) {\n        return center_margin_y - scale(d.b) + top_margin + line_width},\n      \"stroke\": COLOR_BALANCE,\n      \"stroke-width\": b_line_width\n    })/*.style(\"cursor\", \"pointer\") */\n    .on(clicks)\n    \n\n    minibar_svg\n    .selectAll()\n    .data(month.columns)\n    .enter()    \n    .append(\"line\")\n    .attr({\n      \"id\": function(d){ return dateId(d.d) + _LINE_B_NEXT},\n      \"x1\" : function(d, ix){ return (ix+0.5) * slot_width },\n      \"x2\" : function(d, ix){ return (ix+(null != d.next_b ? 1.5 : 0.5)) * slot_width},\n      \"y1\": function(d) {\n        return center_margin_y - scale(d.b) + top_margin + line_width},\n      \"y2\": function(d, ix){\n        return center_margin_y - scale(null != d.next_b ? d.next_b : d.b) + top_margin + line_width},\n      \"stroke\": COLOR_BALANCE,\n      \"stroke-width\": b_line_width\n    })/*.style(\"cursor\", \"pointer\") */\n    .on(clicks)\n\n    if (slot_width > 4) {\n      minibar_svg\n      .selectAll()\n      .data(month.columns)\n      .enter()    \n      .append(\"circle\")\n      .style(\"shape-rendering\",\"auto\")\n      .attr({\n        \"id\": function(d) { return dateId(d.d) + _B},\n        \"cx\" : function(d, ix){ return ((ix + 0.5) * slot_width)},\n        \"cy\": function(d) { return center_margin_y - scale(d.b) + top_margin + line_width },\n        \"r\": 1.5, //slot_width / 6,\n        \"fill\": COLOR_BALANCE,\n      })\n      .on(clicks)\n    }\n\n   minibar_svg\n      .selectAll()\n      .data(month.columns)\n      .enter()    \n      .append(\"circle\")\n      .style(\"shape-rendering\",\"auto\")\n      .attr({\n        \"id\": function(d) { return dateId(d.d) + _UNLOCKED},\n        \"cx\" : function(d, ix){ return ((ix + 0.5) * slot_width)},\n        \"cy\": function(d) { return top_margin - 4},\n        \"r\": 1.5, //slot_width / 6,\n        \"fill\": function(d) { return d.l ? COLOR_UNLOCKED : 'white' }\n      }).on(clicks)\n  \n    minibar_svg\n    .append(\"line\")\n    .attr({\n      \"x1\" : -2,\n      \"x2\" : width + 2,\n      \"y1\" : datearea_y + (0.5*line_width),\n      \"y2\" : datearea_y + (0.5*line_width),\n      \"stroke\": COLOR_MONTH_SEPARATOR_LINE,\n      \"stroke-width\": line_width\n    })\n\n    minibar_svg\n    .append(\"line\")\n    .attr({\n      x1 : width - (0.5 * line_width),\n      x2 : width - (0.5 * line_width),\n      \"y1\" : datearea_y,\n      \"y2\" : bottom_margin_y,\n      \"stroke\": COLOR_MONTH_SEPARATOR_LINE,\n      \"stroke-width\": line_width\n    })\n\n} //create(config)\n\nfunction leadin(month) {\n  var mid = monthId(month.columns[0].d)\n  var e = document.getElementById(mid +_DIV)\n  var x = e.getBoundingClientRect().left\n  //var first = false\n  \n  var width = month.columns.length * slot_width +  line_width\n  if( !leadin_x ) { //init lead_in x\n\t  //console.log(\"first!\")  \n    leadin_x = x\n    //first = true\n  }\n  //console.log(\"x:\"+x+\" leadin:\"+leadin_x+\" add:\"+ (leadin_x === x ? leadin_width : 0))\n  /*d3.select('#' + mid +_DIV)\n  .style({\n    \"width\": width + (leadin_x === x ? leadin_width : 0) + \"px\"\n  })\n\n  d3.select('#' + mid + _LEADIN)\n  .attr({\n    \"width\": (leadin_x === x ? leadin_width : 0) + \"px\",\n  })*/\n  d3.select('#' + mid +_DIV)\n  .style({\n    \"width\": width + (x <= leadin_x ? leadin_width : 0) + \"px\"\n  })\n\n  d3.select('#' + mid + _LEADIN)\n  .attr({\n    \"width\": (x <= leadin_x ? leadin_width : 0) + \"px\",\n  })\n  \n // if (first) {\n\t  d3.select('#' + mid + _MAX_TEXT)\n\t  .text(roundNumberText(maxy))\n\t\n\t  d3.select('#' + mid + _MIN_TEXT)\n\t  .text(roundNumberText(miny)) \n  //}\n}\n\nfunction updateMonth(month) {\n  ////console.log(\"update\")\n  var mid = monthId(month.columns[0].d)\n  d3.select('#' + mid + _LEADIN_ZERO)\n    .transition()\n    .attr({\n      \"y1\": center_margin_y - scale(0) + top_margin + line_width,\n      \"y2\": center_margin_y - scale(0) + top_margin + line_width\n    })\n  d3.select('#' + mid + _LEADIN_ZERO_TEXT)\n    .transition()\n    .attr({\n      \"y\": center_margin_y - scale(0) + 3 + top_margin + line_width,\n    })\n\n  //for (var ix = 0, len = month.columns.length; ix < len; ix++) {\n  month.columns.forEach( m => {\n    var date_id = dateId(m.d)\n\n    d3.select('#' + date_id + _I)\n      .datum(function(d) {\n        d.i =  m.i\n        d.e =  m.e\n        d.b =  m.b\n        d.smallestb =  m.smallestb\n        d.prev_b =  m.prev_b\n        d.next_b =  m.next_b\n        d.l =  m.l\n        return d\n      })\n      .transition()\n      .attr({\n        \"y\": function(d) {\n          return center_margin_y - scale(d.i) + top_margin + line_width\n        },\n        \"height\": function(d) {    \n          return  scale(d.i) - scale(0)  \n        }\n      }\n    )\n    \n   d3.select('#' + date_id + _BG)\n      .transition()\n      .attr({\n      \"fill\": function(d) {return bgColor(d)}\n    })\n    \n    \n    d3.select('#' + date_id + _E)\n      .transition()\n      .attr({\n        \"y\": center_margin_y - scale(0) + top_margin + line_width,\n        \"height\":  function(d) { return scale(0) - scale(d.e)  \n        }\n      }\n    )\n    \n    d3.select('#' + date_id + _B)\n      .transition()\n      .attr({\n        \"cy\": function(d) { \n          return center_margin_y - scale(d.b) + top_margin + line_width\n        }  \n      })\n\n     d3.select('#' + date_id + _UNLOCKED)\n      .transition()\n      .attr({\n    \t  \"fill\": function(d) {\n    \t\t  return d.l ? COLOR_UNLOCKED : 'white' } \n      })\n      \n    d3.select('#' + date_id + _LINE_ZERO)\n      .transition()\n      .attr({\n        \"y1\": center_margin_y - scale(0) + top_margin + line_width,\n        \"y2\": center_margin_y - scale(0) + top_margin + line_width\n      })\n\n\n    d3.select('#' + date_id + _LINE_B_PREV)\n      .transition()\n      .attr({\n        \"y1\": function(d) {\n          return center_margin_y - scale(null != d.prev_b ? d.prev_b : d.b) + top_margin + line_width\n        },\n        \"y2\": function(d) {\n          return center_margin_y - scale(d.b) + top_margin + line_width\n        }\n      })\n\n    d3.select('#' + date_id +  _LINE_B_NEXT)\n      .transition()\n      .attr({\n        \"y1\": function(d) {\n          return center_margin_y - scale(d.b) + top_margin + line_width\n        },\n        \"y2\": function(d) {\n          return center_margin_y - scale(null != d.next_b ? d.next_b : d.b) + top_margin + line_width\n        }\n      })\n  })\n} //updateMonth(month)\n\n\n\n\nfunction resize() {\n\t// slot_width = 3;\n\tinit_changeables()\n\t//init_scales()\n\trecreate()\n}\n\nfunction config(config) {\n//  //console.log(\"config\")\n  if(!bindto) {\n\t  console.assert(config, \"not a valid config\")\n\t  init(config)\n  }\n  //dataprovider = config.dataprovider\n // fetchData()\n}\n\n/*function fetchData() {\n  //console.log(\"fetchData\")\n  dataprovider(fetchdataCb)\n}*/\n\nconst nullData = \n{\n\tbalance : 0,\n\tdata : \n\t[\n\t\t{\n\t\t\t//d: (new Date).getFullYear() + \"-\" + ((new Date).getMonth() + 1) + \"-01\",\n\t\t\td:new Date(),\n\t\t\tb:0, \n\t\t\te:0, \n\t\t\ti:0,\n\t\t\tsmallestb: 0,\n\t\t\tl: false,\n\t\t}\n\t]\n}\n\n\nfunction generate(provideddata) {\n\tif (!provideddata || !provideddata.data) return\n\t  if (!provideddata.data.length) {\n\t\t  provideddata = nullData\t \n\t  }\n\t  //console.log(\"generate\")\n\t  console.assert(bindto, \"config must be called first!\")\n\t  //console.log(provideddata)\n\t  //months = chunk_rawdata(provideddata.data, provideddata.balance)\n\t  months = chunk_rawdata(provideddata.data)\n\t  var prev_month_markers = month_markers;\n\t  //slot_width = calculateSlotWidth()\n\n\t  init_changeables()\n\t  init_scales()\n\t  if ( prev_month_markers === month_markers ) {\n\t\t  update()\n\t  } else {\n\t\t  recreate()\n\t  }\n\t  /*if(start == null && end == null) {\n\t\t  select(initials.startDate, initials.endDate)\n\t  }*/\n}\n\nfunction update() {\n  if(!months) return\n  for (var ix = 0, len = months.length; ix < len; ix++) {\n\t    updateMonth(months[ix])\n\t    leadin(months[ix])\n\t}\n}\n\nfunction recreate() {\n\t  d3.select('#'+bindto).selectAll(\"div\").remove()\n\t  for (var ix = 0, len = months.length; ix < len; ix++) {\n\t    create(months[ix])\n\t    leadin(months[ix])\n\t  }\n}\n/*\nvar p_cursor\nfunction fetchAllMonths() {\n  //console.log(\"fetchAllMonths\")\n  p_cursor = document.body.style.cursor\n  //cursor(wait)\n  dataprovider(dataCb)\n}\n\nfunction dataCb(provideddata) {\n\t  cursor(p_cursor)\n\t  //console.log(\"dataCb\")\n\t  //console.log(provideddata)\n\t  months = chunk_rawdata(provideddata.data, provideddata.balance)\n\t  resizeMonths();\n\t}\n\nfunction resizeMonths() {\n  //console.log(\"resizeMonths\")\n  slot_width = calculateSlotWidth()\n  init_changeables()\n  init_scales()\n  d3.select('#'+bindto).selectAll(\"div\").remove()\n  for (var ix = 0, len = months.length; ix < len; ix++) {\n    create(months[ix])\n    leadin(months[ix])\n  }\n}\n\nfunction refresh() {\n  //console.log(\"refresh\")\n  dataprovider(refreshCb)\n}\n\nfunction refreshCb(provideddata) {\n  months = chunk_rawdata(provideddata.data, provideddata.balance)\n  init_scales()\n  for (var ix = 0, len = months.length; ix < len; ix++) {\n    updateMonth(months[ix])\n    leadin(months[ix])\n  }\n}*/\n\n/*function add(date, ie) {\n  //console.log(\"add \" +date )\n  console.assert(date && null != ie, \"add cannot have null params\")\n  if(dates.compare(date, months[0].columns[0].d ) < 0  || dates.compare(date, months[months.length-1].columns[months[months.length-1].columns.length-1].d ) > 0) {\n    fetchAllMonths()\n  } else  {\n    var found = false;\n    for (var ix1 = 0, len1 = months.length; ix1 < len1; ix1++) {\n      var month = months[ix1]\n      for (var ix2 = 0, len2 = month.columns.length; ix2 < len2; ix2++) {\n        if (!found && (dateDiffInDays(date, month.columns[ix2].d) == -1)) {\n            month.columns[ix2].next_b += ie\n        }\n        if (!found && (dateDiffInDays(date, month.columns[ix2].d) == 0)) {\n            month.columns[ix2].i += ie\n            month.columns[ix2].b += ie\n            month.columns[ix2].next_b += ie\n            found = true\n        } else if (found) {\n          month.columns[ix2].prev_b += ie\n          month.columns[ix2].b += ie\n          if (month.columns[ix2].next_b) {\n            month.columns[ix2].next_b += ie\n          }\n        }\n      }\n    }\n    refresh()\n  }\n}*/\n\n\nreturn {\n  //\t\"refresh\" : refresh,\n    \"resize\" : resize,\n    //\"add\" : add,\n    \"config\" : config,\n    \"generate\" : generate,\n    \"select\" : select\n}\n})()\n\nwindow.addEventListener(\"resize\", function(e) {\n  minibars.resize()\n});\n\nexport {minibars}\n//module.exports = minibars;\n","//produces array of objects containing\n//months in input and dates of each month and more...\n\nfunction chunk_rawdata(daydata) {\n  // (I) loop daydata (must be ascending by date and date is unique) (var i)\n  //  - (II) for each dates (var data_i) construct array of dates for that month - if needed. (var dayArray)\n  //  - (III) update the corresponding array index data (var data_i) to data of that date (var dayArray)\n  //  - (IV) add to each day balances of previous and next days\n  //  - (V) add empty month to the beginning and end\n\t\n\t\n  // if account == -1, we must calculate balances ourselves (i.e denotes that category filter is on)\n  var balances_given = (daydata[0].a !== -1);\n\t\n  //trivial checks\n\n  var r = []; //return value\n  if (!daydata || !daydata.length) {\n    return r\n  }\n\n  //convert date-strings to date\n  if (typeof daydata[0].d  === \"string\") {\n\t  for (var idaydata = 0, lendaydata = daydata.length; idaydata < lendaydata; idaydata++) {\n\t\t  daydata[idaydata].d = new Date(daydata[idaydata].d)\n\t  }\n  }\n\n  //returns the # of days of month (m is 0-based)\n  function monthDays(m , y){\n    return (new Date(y, m + 1, 0)).getDate();\n  }\n\n  //init the main loop vars\n  console.assert(daydata[0].d, \"d is mandatory\")\n  var m = daydata[0].d.getMonth() - 1\n  var y = daydata[0].d.getFullYear()\n  var d = daydata[0].d.getDate() - 1\n  var b = 0\n  var smallestb = 0\n  var dayArray = null\n\n  //main loop (I)\n  for (var i = 0, len = daydata.length; i < len; i++) {\n    var data_i = daydata[i]\n    console.assert(data_i.d, \"d is mandatory\")\n    var m_i = data_i.d.getMonth()\n    var y_i = data_i.d.getFullYear()\n    var d_i = data_i.d.getDate()\n    \n    console.assert(\n      m_i >= 0 \n      && m_i < 12 \n      && d_i >0 \n      && d_i <= 31 \n      && (y * (12 * 31) + m * 31 + d) < (y_i * (12 * 31) + m_i * 31 + d_i),\n     \"input array must be ascending\")\n    d = d_i\n    while (m !== m_i || y !== y_i) {\n      //(II)\n      //a new month encountered: construct empty array for that month and the months before\n      m++\n      if (m === 12) {\n        y++\n        m=0\n      }\n      //array constructor\n      dayArray = []\n      for(var z=1, zlen = monthDays(m,y); z <= zlen; z++) {\n        dayArray.push(\n          { \n            \"i\": 0,\n            \"e\": 0,\n            \"d\": new Date(y, m, z),\n            \"b\": b,\n            \"smallestb\": smallestb,\n            \"l\": false\n          }\n        )\n      }\n\n      r.push({\n        \"columns\": dayArray,\n        \"range_text\": (m + 1) + \"/\" + y\n      })\n    }\n    // (III)  \n    //balances\n    //balances prior to day are set in array constructor\n    \n    console.assert(null != data_i.b, \"b is mandatory\")\n    console.assert(null != data_i.smallestb, \"smallestb is mandatory\")\n    console.assert(null != data_i.i, \"i is mandatory\")\n    console.assert(data_i.i >= 0, \"i must be positive\")\n    console.assert(null != data_i.e, \"e is mandatory\")\n    console.assert(data_i.e <= 0, \"i must be negative\")\n    console.assert(null != data_i.l, \"l is mandatory\")\n    \n    //calculate balance\n    if( !balances_given ) {\n    \tb = Math.round((b + data_i.i + data_i.e) * 100) / 100\n    \tsmallestb = b\n    } else {\n    \tb =  data_i.b\n    \tsmallestb = data_i.smallestb\n    }\n    \n    //fill up the array from this date  till end of month with balance\n    for(var z0 = data_i.d.getDate(), zlen0 = dayArray.length; z0 < zlen0; z0++) {\n       dayArray[z0].b = b\n       dayArray[z0].smallestb = smallestb\n    }\n    //update i, e and balance in array\n    dayArray[data_i.d.getDate()-1].i = data_i.i\n    dayArray[data_i.d.getDate()-1].e = data_i.e\n    dayArray[data_i.d.getDate()-1].b = b \n    dayArray[data_i.d.getDate()-1].smallestb = smallestb\n    dayArray[data_i.d.getDate()-1].l = data_i.l\n  }\n  \n  //(IV) add to each day balances of previous and next days\n  for(var ax = 0, axlen = r.length; ax < axlen; ax++) {\n    for( var ix = 0, ixlen = r[ax].columns.length; ix < ixlen; ix++) {\n      var data = r[ax].columns[ix]\n      if (!ax && !ix) {\n        data.prev_b = null;\n      } else if((ax + 1) === axlen && (ix + 1) === ixlen) {\n        data.next_b = null;\n      } else if(!ix) {\n        data.prev_b = r[ax - 1].columns[r[ax - 1].columns.length - 1].b\n      } else if((ix + 1) === ixlen) {\n        data.next_b = r[ax + 1].columns[0].b\n      } \n      if (typeof data.prev_b === \"undefined\") {\n        data.prev_b = r[ax].columns[ix - 1].b\n      }\n      if (typeof data.next_b === \"undefined\") {\n        data.next_b = r[ax].columns[ix + 1].b       \n      }\n    }  \n  }\n  \n  //  - (V) add empty month to the beginning and end\n dayArray = []\n var prevm = new Date(r[0].columns[0].d)\n prevm.setMonth(prevm.getMonth()-1);\n m = prevm.getMonth()\n y = prevm.getFullYear()\n for(var z1=1, zlen1 = monthDays(m, y); z1 <= zlen1; z1++) {\n        dayArray.push(\n          { \n            \"i\": 0,\n            \"e\": 0,\n            \"d\": new Date(y, m, z1),\n            \"b\": 0,\n            \"smallestb\": 0,\n            \"l\": false\n          }\n        )\n  }\n  r.unshift({\n    \"columns\": dayArray,\n    \"range_text\": (m + 1) + \"/\" + y\n  })\n\n dayArray = []\n var last = r[r.length-1].columns[r[r.length-1].columns.length-1]\n last.next_b = last.b\n var nextm = new Date(last.d)\n nextm.setDate(1)\n nextm.setMonth(nextm.getMonth() + 1);\n\n m = nextm.getMonth()\n y = nextm.getFullYear()\n for(var z2=1, zlen2 = monthDays(m, y); z2 <= zlen2; z2++) {\n\t \n        dayArray.push(\n          { \n            \"i\": 0,\n            \"e\": 0,\n            \"d\": new Date(y, m, z2),\n            \"b\": last.b,\n            \"smallestb\": last.smallestb,\n            \"prev_b\": last.b,\n            \"next_b\": last.b,\n            \"l\": false\n          }\n        )\n  }\n dayArray[dayArray.length -1].next_b = null\n  r.push({\n    \"columns\": dayArray,\n    \"range_text\": (m + 1) + \"/\" + y\n  })\n\n  return r;\n}\n\nexport {chunk_rawdata}\n","import React from 'react';\n\nimport {balances_load} from '../../actions/minibars'\nimport {set_daterange} from '../../actions/daterange'\nimport '../../../node_modules/c3/c3.min.css'\n\nimport { connect } from 'react-redux'\nimport { minibars } from './minibars_d3'\n\nclass Minibars extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    \t\tstart: new Date(),\n    \t\tend: new Date(),\n    \t\tbalances: null,\n    \t\tredraw: null\n    }\n    // This binding is necessary to make `this` work in the callback\n    this.select = this.select.bind(this);\n    this.redraw = this.redraw.bind(this);\n    props.load();\n  }\n  \n  componentDidMount() {\n\t  var minibarconfig = {\n\t\t\t  \tmax_selection_days: 400,\n\t\t\t    bindto: this.props.name,\n\t\t\t    select: this.select,\n\t\t\t}  \n\t  \n\t  this.minibars = minibars;\n\t  this.minibars.config(minibarconfig);\n  }\n  \n  select(start, end) {\n\t  this.su = false;\n      this.props.setDateRange(new Date(start), new Date(end), \"rangePicker1\")\n  }\n  \n  redraw() {\n\t  this.minibars.generate(this.props.balances)\n\t  this.minibars.select(this.props.start, this.props.end)\n  }\n  \n  componentWillReceiveProps(nextProps){\n\t  this.minibars.generate(nextProps.balances)\n\t  this.minibars.select(nextProps.start, nextProps.end)\n  }\n\n  render() {\n    return (\n    \t<div>\n\t        <div id={this.props.name} />\n        </div>\n    );\n  }\n  \n}\n\nconst mapStateToProps = (store) => {\n\t  return {\n  \t\tstart: store.daterange.s,\n\t\tend: store.daterange.e,\n\t\tbalances: store.minibars.balances,\n\t\tredraw: store.minibars.redraw,\n\t  }\n  }\n\nfunction mapDispatchToProps(dispatch) {\n    return({\n        load: () => {\n        \tdispatch(balances_load(0)) //all\n        },\n        setDateRange: (s, e, name) => {\n        \tdispatch(set_daterange(s, e, name)) \n        }\n    })\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(Minibars)\n","import React from 'react' //  Main React library\nimport { Button } from 'react-bootstrap';\nimport { connect } from 'react-redux'\n\nimport { daterange_prev_block } from '../../../actions/daterange'\nvar FontAwesome = require('react-fontawesome');\n\nclass ButtonL extends React.Component{\n\tconstructor(props) {\n\t    super(props)\n\t    this.prevBlock = this.prevBlock.bind(this)\n\t}\n\t\n\tprevBlock() {\n\t\tthis.props.daterangePrevBlock()\n\t}\n\t\n\trender(){\n\t    return (\n\t    <div>\n\t     <Button onClick={this.prevBlock}>\n\t     \t<FontAwesome name='caret-left' />\n\t     </Button>\n\t    </div>\n\t    )\n\t}\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return ({\n        daterangePrevBlock: () => {\n            dispatch(daterange_prev_block())\n        }\n    })\n}\n\nexport default connect(null, mapDispatchToProps)(ButtonL)\n","import React from 'react' //  Main React library\nimport { Button } from 'react-bootstrap';\nimport { connect } from 'react-redux'\n\nimport { daterange_next_block } from '../../../actions/daterange'\nvar FontAwesome = require('react-fontawesome');\n\nclass ButtonR extends React.Component{\n\tconstructor(props) {\n\t    super(props)\n\t    this.nextBlock = this.nextBlock.bind(this)\n\t}\n\t\n\tnextBlock() {\n\t\tthis.props.daterangeNextBlock()\n\t}\n\t\n\trender(){\n\t    return (\n\t    <div>\n\t     <Button onClick={this.nextBlock}>\n\t     \t<FontAwesome name='caret-right' />\n\t     </Button>\n\t    </div>\n\t    )\n\t}\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return ({\n        daterangeNextBlock: () => {\n            dispatch(daterange_next_block())\n        }\n    })\n}\n\nexport default connect(null, mapDispatchToProps)(ButtonR)\n","import React from 'react';\nimport moment from 'moment';\nimport $ from 'jquery';\n// eslint-disable-next-line\nimport daterangepicker from 'daterangepicker';\nimport { connect } from 'react-redux'\n\n/*\n * Note: this must be included:\n    <link rel=\"stylesheet\" type=\"text/css\" media=\"all\" href=\"%PUBLIC_URL%/daterangepicker/daterangepicker.css\" />\n */\n\nvar dateRange_pickeroptions = {\n\t    \"dateLimit\": {\n\t        \"days\": 90\n\t    },\n\t    \"showWeekNumbers\": true,\n\t    \"autoApply\": true,\n\t    \"alwaysShowCalendars\": true,\n\t    \"locale\": {\n\t      \"direction\": \"ltr\",\n\t      \"format\": \"DD.MM.YYYY\",\n\t      \"separator\": \" - \",\n\t      \"applyLabel\": \"Apply\",\n\t      \"cancelLabel\": \"Cancel\",\n\t      \"fromLabel\": \"From\",\n\t      \"toLabel\": \"To\",\n\t      \"customRangeLabel\": \"Custom\",\n\t      \"daysOfWeek\": [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"],\n\t      \"monthNames\": [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n\t      \"firstDay\": 1\n\t    },\n\t    \"linkedCalendars\": false,\n\t    //\"startDate\": new Date(),\n\t    //\"endDate\": new Date(),\n\t    \"ranges\": {\n\t        'Last 7 Days': [moment().subtract(6, 'days'), moment()],\n\t        'Last 30 Days': [moment().subtract(29, 'days'), moment()],\n\t        'This Month': [moment().startOf('month'), moment().endOf('month')],\n\t        'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]\n\t     }\n\t  }\n\n\tvar dateSingle_pickeroptions = {\n\t        \"singleDatePicker\": true,\n\t        \"showDropdowns\": false,\n\t\t    \"showWeekNumbers\": true,\n\t\t    \"alwaysShowCalendars\": true,\n\t\t    \"autoApply\": true,\n\t\t    \"locale\": {\n\t\t      \"direction\": \"ltr\",\n\t\t      \"format\": \"DD.MM.YYYY\",\n\t\t      \"separator\": \" - \",\n\t\t      \"applyLabel\": \"Apply\",\n\t\t      \"cancelLabel\": \"Cancel\",\n\t\t      \"fromLabel\": \"From\",\n\t\t      \"toLabel\": \"To\",\n\t\t      \"customRangeLabel\": \"Custom\",\n\t\t      \"daysOfWeek\": [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"],\n\t\t      \"monthNames\": [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n\t\t      \"firstDay\": 1\n\t\t    },\n\t\t //   \"startDate\": new Date()\n\t\t  }\nclass DatePicker extends React.Component {\n   constructor(props) {\n\t    super(props);\n\t    this.state = {\n\t    \t\tstart: props.value ? props.value : props.start ? props.start : new Date(),\n\t    \t\tend: props.value ? null : props.end ? props.end : new Date()\n\t    }\n  }\n  \n  componentWillReceiveProps(nextProps){\n\t    //console.log('componentWillReceiveProps' + this.props.componentWillReceiveProps)\n\t    if(nextProps.value) {\n\t    \t//console.log(\"VALUE=\" + nextProps.value)\n\t    \t$('#' + this.props.pickerName).data('daterangepicker').setStartDate(nextProps.value)\n\t    \t$('#' + this.props.pickerName).data('daterangepicker').setEndDate(nextProps.value)\n\t    } else if (nextProps.start) {\n\t    \t  //console.log(\"START=\" + nextProps.start)\n\t\t\t  $('#' + this.props.pickerName).data('daterangepicker').setStartDate(nextProps.start)\n\t\t\t  $('#' + this.props.pickerName).data('daterangepicker').setEndDate(nextProps.end)\n\t  \t} \n  }\n   \n  componentDidMount() {\n\t  //new:\n\t\tif(this.props.pickerType === \"single\") {\n\t\t\t$('#' + this.props.pickerName).daterangepicker(\n\t\t\t\t\tdateSingle_pickeroptions, \n\t\t\t\t\t(start) =>  {\n\t\t\t\t\t\t//console.log('New single date selected: ' + start.format('MM.DD.YYYY'));\n\t\t\t\t\t\tthis.props.pickerCallback(start, this.props.pickerName)\n\t\t\t\t\t}\n\t\t\t)\n\t\t}\n\t\tif(this.props.pickerType === \"range\") {\n\t\t\t$('#' + this.props.pickerName).daterangepicker(\n\t\t\t\t\t  dateRange_pickeroptions, \n\t\t\t\t\t  (start, end) => { \n\t\t\t\t\t\t\t//console.log('New date range selected: ' + start.format('MM.DD.YYYY')+ \" - \" + end.format('MM.DD.YYYY'));\n\t\t\t\t\t\t\tthis.props.pickerCallback(start, end, this.props.pickerName)\n\t\t\t\t    }\n\t\t\t  )\n\t\t}\n\t\t$('#' + this.props.pickerName).data('daterangepicker').setStartDate(this.state.start)\n\t\tif (this.props.pickerType === \"range\") {\n\t\t\t$('#' + this.props.pickerName).data('daterangepicker').setEndDate(this.state.end)\n\t\t} else {\n\t\t\t$('#' + this.props.pickerName).data('daterangepicker').setEndDate(this.state.start)\t\n\t\t}\n\n  }\n  render() {\n    return (\n    \t\t<div>\n    \t\t\t<input readOnly\n    \t\t\t\tdisabled = {this.props.disabled}\n    \t\t\t\tautoComplete='off'\n    \t\t\t\tonKeyDown={function(e) { \n    \t\t\t\t\tvar char = e.which || e.keyCode;\n    \t\t\t\t\tif( char !== 9) {\n    \t\t\t\t\t\te.preventDefault(); return false;\n    \t\t\t\t\t}\n    \t\t\t\t}} \n    \t\t\t\ttype=\"text\" \n    \t\t\t\tid={this.props.pickerName} \n    \t\t\t\tclassName=\"form-control\" \n    \t\t\t\tstyle={{\n    \t\t\t\t\t\tdisplay: 'inline', \n    \t\t\t\t\t\twidth: this.props.pickerType === 'range' ? '185px' : '100px',\n    \t\t\t\t\t\t'backgroundColor' : (this.props.touched ? 'lightyellow' : this.props.disabled ? 'transparent' : 'white')\n    \t\t\t\t}}/>\n    \t\t</div>\n    );\n  }\n}\n\nDatePicker.defaultProps = {\n\t\tcomponentWillReceiveProps: false,\n\t    start: null, //initials.startDate,\n\t    end: null, //initials.endDate,\n\t    disabled: false,\n\t    touched: false\n}\n\nconst mapStateToProps = (store) => {\n\t  return {\n  \t\tstart: store.daterange.s,\n\t\tend: store.daterange.e\n\t  }\n  }\n\nexport default connect(mapStateToProps)(DatePicker)\n\n//module.exports = connect(mapStateToProps)(DatePicker)\n\n","//because IE11 does not support .find!!!\nfunction findInArray(array, booleanfunction) {\n  if(null == array) {\n    console.error(\"array should not be null\")\n    return null\n  }\n  for(var i=0; i<array.length; i++) {\n\t  var item = array[i]\n\t  if(booleanfunction(item)) return item \n  }\n  return null;\n}\n\n//because IE11 does not support .find!!!\nfunction findIndexInArray(array, booleanfunction) {\n  for(var i=0; i<array.length; i++) {\n\t  var item = array[i]\n\t  if(booleanfunction(item)) return i \n  }\n  return -1;\n}\nexport {findInArray, findIndexInArray}","import React from 'react';\nimport {SimpleSelect} from 'react-selectize'\nimport 'react-selectize/themes/index.css'\nimport { get_constants } from '../../actions/constants'\nimport { connect } from 'react-redux'\nimport { findInArray } from '../../util/findInArray'\nimport {Button} from 'react-bootstrap'\n\nvar FontAwesome = require('react-fontawesome');\n\nconst width = 150\n\nclass Dropdown extends React.Component {\n\tconstructor(props) {\n\t    super(props);\n\t    this.state = {\n\t    \t\tselectedValue : null,\n\t    \t\t'items' :  props.getConstants(props.constants_id) // return null, but launches fetch\n\t    \t\t\n\t    }\n\t    this.constants_id = props.constants_id\n\t    this.onValueChange = this.onValueChange.bind(this);\n\t    this.className = this.className.bind(this);\n\t    this.onOpenChange = this.onOpenChange.bind(this);\n\n\t    this.vchanged = false;\n\t    this.opened = false;\n\t}\n\t\n\tonValueChange(item) {\n        this.vchanged = true;\n    \tthis.setState( {\n\t    \t\tselectedValue : item\n\t    })\n\t    this.props.onValueChange(item != null? item.value : null)\n    \treturn this.renderOption(item)\n    }\n\n    onOpenChange(open) {\n            /*console.log(\"----------------\")\n            console.log(this.state.selectedValue.label+ \" open =\" + open)\n            console.log(this.state.selectedValue.label+ \" vchanged =\" + this.vchanged)\n            console.log(this.state.selectedValue.label+ \" opened =\" + this.opened)*/\n            //console.log(open)\n\n            if(null != this.props.cbDblClick && (open==null || (!open && this.opened)) && !this.vchanged) {\n                this.props.cbDblClick(this.state.selectedValue)\n            }\n            //This is hack, onOpenChange will be called when not even opened, we'll make sure user has clicked the list open\n            this.opened = open;\n            this.vchanged = false;\n    }\n\t\n    componentWillReceiveProps(nextProps){\n    \tif( nextProps.constants && nextProps.constants[this.props.constants_id]) {\n    \t\tvar constants = nextProps.constants[this.props.constants_id]\n    \t\tvar selectedItem = findInArray( constants,  c => { return c.value === nextProps.selectedValue} )\n\t    \t/*var selectedItem = constants.find( c => { return c.value === nextProps.selectedValue })*/\n\t    \tvar validConstants = null;\n\t    \tif( this.props.onlyValid ) {\n\t    \t    validConstants = constants.filter(  c => { return (c.valid || c === selectedItem) })\n\t    \t} else {\n\t    \t    validConstants = constants\n\t    \t}\n\t    \tthis.setState({\n\t\t    \t\tselectedValue : selectedItem,\n\t\t    \t\t'items' : validConstants\t\t\n\t\t    })\n    \t}\n    }\n\n\trenderOption(item) {\t\t\n\t\tif(item == null) {\n\t\t\treturn\n\t\t}\n\n\t\tvar icon = null;\n\t\tif(item.icon) {\n\t\t  icon = \t(<span><FontAwesome name = {item.icon} style = {{'color': 'black', 'marginRight':'3px'}} /></span>)\n    }\n    \treturn (\n\t\t\t<span style={{\n\t \t\t\t\t display: 'contents',\n\t \t\t\t\t whiteSpace: 'nowrap',\n\t\t\t}}>\n\t\t\t\t<span style={{\n\t \t\t\t\t display: 'block', \n\t\t\t\t\t textOverflow: 'ellipsis',\n\t\t\t\t\t overflow: 'hidden',\n\t\t\t\t\t whiteSpace: 'nowrap',\n\t\t\t\t\t maxWidth: (width-50)+'px'\n\t    \t\t}}>\n\t\t\t\t\t<span >\n\n\t\t\t\t\t\t<FontAwesome name = 'square' style = {{'color': item.color, 'marginRight':'5px'}} />\n\n            {icon}\n\t\t\t\t\t</span>\n\t    \t\t\t<span >\n\n\t    \t\t\t\t{item.label}\n\n\t    \t\t\t</span>\n\t    \t\t</span>\n\n\t\t\t</span>\n    \t)    \t\n    }\n\t\n\tclassName() {\n\t\tif(!this.props.readOnly && !this.props.touched) return 'simpledropdown'\n\t\tif(!this.props.readOnly && this.props.touched) return 'simpledropdown_touched'\n\t\tif(this.props.readOnly && !this.props.touched) return 'simpledropdown_ro'\n\t\tif(this.props.readOnly && this.props.touched) return 'simpledropdown_ro_touched'\n\t\t\n\t}\n\t\n\trender() {\n\t    /*https://github.com/selectize/selectize.js/blob/HEAD/docs/api.md*/\n\n\t    var dropDown = \t\t<SimpleSelect\n                       \t\t\tclassName={this.className()}\n                       \t\t\tdisabled={this.props.readOnly}\n                       \t\t    style={{\n                       \t\t    \twidth: width+'px',\n                       \t\t    \tborder: 'none',\n                       \t\t    \tbackgroundColor: 'none',\n                       \t\t    \tbackgroundImage: 'none'\n                       \t\t    }}\n                       \t\t\trenderOption={this.renderOption}\n                       \t\t\trenderValue={this.renderOption}\n                       \t\t\tonValueChange={this.onValueChange}\n                       \t        placeholder={this.props.placeholder}\n                       \t        options = {this.state.items}\n                       \t\t\tvalue = {this.state.selectedValue}\n                       \t\t\thideResetButton = {true}\n                       \t\t\tcancelKeyboardEventOnSelection = {false}\n                       \t\t\tonOpenChange = {this.onOpenChange}\n                       \t\t/>\n        if(null == this.props.cbDblClick) {\n            return dropDown\n        }\n\t\treturn (\n        <Button className=\"link-button\" onClick={ () => {this.onOpenChange(null)} } >\n            {dropDown}\n\t\t</Button>)\n\t}\n}\n\nDropdown.defaultProps = {\n\t\trefreshTime: null,\n\t\tonValueChange: null,\n\t    touched: false,\n\t    readOnly: false,\n\t    placeholder: '',\n\t    constants: null,\n\t    constants_id: null,\n\t    onlyValid: true,\n\t    cbDblClick: null\n}\n\nconst mapStateToProps = (store) => {\n    return {\n    \trefreshTime:  store.constants.refreshTime,\n        constants: store.constants.constants\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return({\n        getConstants: (id) => {\n        \tget_constants(id, dispatch)\n        }\n    })\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(Dropdown)\n","import React from 'react';\nimport { connect } from 'react-redux'\nimport { balances_load } from '../../actions/minibars'\nimport Dropdown from '../dropdown/dropdown'\nimport CheckboxField from '../editorFields/CheckboxField'\n\nclass ConstantFilter extends React.Component {\n\tconstructor(props) {\n\t    super(props);\n\t    this.state = {\n\t    \tfilter: null,\n\t    \tchecked: true\n\t    }\n\t    this.onFilterChanged = this.onFilterChanged.bind(this);\n\t    this.onCheck = this.onCheck.bind(this);\n  \t}\n\t  \n\tonFilterChanged(e) {\n\t\tthis.setState(\n\t\t\t\t{\n\t\t\t\t\tfilter: e\n\t\t\t\t})\n\t\tthis.props.balances_load(e)\n\t}\n\t\n\tonCheck(e) {\n\t\tthis.setState(\n\t\t\t\t{\n\t\t\t\t\tchecked: e\n\t\t\t\t})\n\t\tif(e) {\n\t\t\tthis.props.balances_load(0)\n\t\t} else if(this.state.filter) {\n\t\t\tthis.props.balances_load(this.state.filter)\n\t\t}\n\t}\n\t\n\t\n\trender() {\t\n\t\tvar dd = \t<Dropdown\n\t\t                onlyValid = {false}\n\t\t\t    \t\treadOnly = {this.state.checked}\n\t\t\t    \t\tonValueChange={ this.onFilterChanged } \n\t\t\t    \t\tselectedValue={this.state.filter}\n\t\t\t    \t\tplaceholder='filter'\n\t\t\t    \t\tconstants_id='cat'\n\t\t\t    \t/>\n\t\treturn(\n\t    <div>\n\t\t    <span style={{display: \"inline-flex\"}}>\n\t\t    \t<div style={{paddingTop: \"7px\", paddingRight: \"5px\"}}>\n\t\t    \tAll \n\t\t    \t</div>\n\t\t    \t<CheckboxField\n\t\t    \t\t\tid = 'all'\n\t\t\t\t  \t\tonValueChanged = {this.onCheck}\n\t\t\t\t  \t\tchecked = {this.state.checked}\n\t\t\t\t/>\n\t\t    \t{ !this.state.checked ? dd : null }\n\t\t    </span>\n\t    </div>)\n\t}\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return({\n        balances_load: (e) => {\n        \tdispatch(balances_load(e)) \n        }\n    })\n}\n\nexport default connect(null, mapDispatchToProps)(ConstantFilter)\n","import React from 'react' //  Main React library\nimport { Panel } from 'react-bootstrap';\nimport { set_daterange } from '../../actions/daterange'\nimport { minibars_redraw } from '../../actions/minibars'\n\nimport Minibars from '../minibars/minibars'\nimport ButtonL from '../minibars/buttons/buttonL'\nimport ButtonR from '../minibars/buttons/buttonR'\n\nimport DatePicker from '../datepicker/datepicker'\n\nimport ConstantFilter from '../constantfilter/ConstantFilter'\n\nimport { connect } from 'react-redux'\n\nimport Spinner from './Spinner'\n\nimport Media from 'react-media';\n\nvar FontAwesome = require('react-fontawesome');\n\n\nclass RangePanel extends React.Component{\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.showMinibars = this.showMinibars.bind(this)\n\t\tthis.state = {\n\t\t\tshowMinibars: false\n\t\t}\n\t}\n\t\n\tshowMinibars() {\n\t\tthis.setState({\n\t\t\tshowMinibars : !this.state.showMinibars\n    \t})\n    \tvar that = this\n\t\tvar f = () => {\n\t    \t\t\tthat.props.minibarsRedraw()\n\t    }\n\t    //console.log(\"FIRE:\")\n\t    setTimeout(f, 0)\n\t}\n\n\trender(){\n\t\t/*\n\t\treturn(\n\t\t<div>\n\t\t\t<Panel style={{width: '100%'}}>\n\t\t\t  \t<Panel.Heading style={{paddingTop: \"3px\", paddingBottom: \"3px\", height: \"45px\"}}>\n\t\t\t  \t\t<div style={{\"display\": \"inline-flex\", \"whiteSpace\": \"nowrap\", \"alignItems\": \"center\", fontSize: \"23px\"}}>\n\t\t              \t\t  <FontAwesome name='calendar' />-<FontAwesome name='calendar' />&nbsp;\n\t\t\t\t              <DatePicker componentWillReceiveProps = {true} pickerName=\"rangePicker1\" pickerType=\"range\"\n\t\t\t\t\t              pickerCallback=\n\t\t\t\t\t              \t{(start, end, name) => {this.props.setDateRange(new Date(start), new Date(end))}}\n\t\t\t\t              />&nbsp;<Spinner fetching={this.props.fetching} /> \n\t\t               </div>\n\t\t\t\t       <span className=\"pull-right\" style={{paddingLeft: \"20px\"}}>  \n\t\t\t\t       \t\t<ConstantFilter />\n\t\t\t\t      </span>\n\t\t\t\t      <span className=\"pull-right\">\n\t\t\t\t  \t\t\t<Buttons />\n\t\t\t\t  \t  </span>\n\t\t\t  \t\n\t\t\t  \t</Panel.Heading>\n\t\t\t  \t<Panel.Body>\n\t\t\t  \t\t<Minibars name=\"minibar\"/>\n\t\t\t  \t\t{this.props.children}\n\t\t\t\t</Panel.Body>\n\t\t\t  </Panel>\n\t\t</div>\n\t\t)*/\n\t\t\n\n\t\tvar ctrls = this.state.showMinibars ?\n\t\t\t\t       <span className=\"pull-right\" style={{paddingLeft: \"20px\"}}>  \n\t\t\t\t       \t\t<ConstantFilter />\n\t\t\t\t       </span>\n\t\t\t\t  \t :\n\t\t\t\t  \t   null\n\t\t\t//451\n\t\tvar header =\n\t\t\t      <div>\n\t\t\t  \t\t   <div style={{\"display\": \"inline-flex\", \"whiteSpace\": \"nowrap\", \"alignItems\": \"center\", fontSize: \"23px\"}}>\n\t                      <FontAwesome name='calendar' />-<FontAwesome name='calendar' />&nbsp;\n\t                      \t<div style={{paddingTop: \"1px\"}}>\n\t                      \t\t<ButtonL  />\n\t                      \t</div>\n\t\t\t\t\t        <DatePicker componentWillReceiveProps = {true} pickerName=\"rangePicker1\" pickerType=\"range\"\n\t\t\t\t\t              pickerCallback={(start, end, name) => {this.props.setDateRange(new Date(start), new Date(end))}}\n\t\t\t\t\t        />\n\t\t\t\t\t        <div style={{paddingTop: \"1px\"}}>\n\t                        \t<ButtonR />\n\t                       </div>\n\t\n\t                     </div>\n\t\t\t             <span>\n\t\t\t\t\t\t\t\t<Panel.Toggle componentClass=\"button\" className=\"link-button\" onClick={this.showMinibars} style={{textDecoration: 'none'}}>&nbsp;\n\t\t\t\t\t\t\t\t\t{ (this.state.showMinibars ? <FontAwesome name='caret-up' size='2x' /> : <FontAwesome name='caret-down' size='2x' />) }&nbsp;\n\t\t\t            \t\t</Panel.Toggle>\n\t\t\t            </span><Spinner fetching={this.props.fetching} />\n\t\t           {ctrls}\n\t\t         </div>\n\t\t\t\n\t\treturn(\n\t\t<Panel style={{width: '100%', opacity: this.props.fetching ? 0.3 : 1 }} id=\"minibars-panel\" expanded={this.state.showMinibars} onToggle={() => {}}  >\n         \n\t\t\t\t<Media query=\"(max-width: 604px)\">\n\t\t\t          {matches =>\n\t\t\t            matches ? (\n\t\t\t              \t\t  <Panel.Heading style={{paddingTop: \"3px\", paddingBottom: \"3px\", height: \"80px\"}}>\n\t\t\t              \t\t  \t{header}\n\t\t\t              \t\t </Panel.Heading>\n\t\t\t            ) : (\n\t\t\t             \t\t  <Panel.Heading style={{paddingTop: \"3px\", paddingBottom: \"3px\", height: \"45px\"}}>\n\t\t\t             \t\t  \t{header}\n          \t\t\t\t\t\t </Panel.Heading>\n\t\t\t            )\n\t\t\t          }\n    \t\t\t</Media>\n\t\t\n\n          <Panel.Collapse>\n            <Panel.Body >\n            \t<Minibars name=\"minibar\" />\n            </Panel.Body>\n          </Panel.Collapse>\n        </Panel>)\n        \n\t}\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return ({\n        'setDateRange': (start, end) => {\n            dispatch(set_daterange(start, end))\n        },\n        minibarsRedraw: () => {\n            dispatch(minibars_redraw())\n        }\n    })\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        fetching: store.minibars.fetching\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RangePanel)\n\t\t\t\t\t\t","import { axios_get_params } from './axios'\nvar dateFormat = require('dateformat')\n\nconst PIE_REQUEST = 'PIE_REQUEST'\nconst pieRequestAction = (s, e) => ({\n    type: PIE_REQUEST,\n    payload: {\n        's': s,\n        'e': e\n    }\n})\n\n  \nconst PIE_RESPONSE = 'PIE_RESPONSE'\nconst pieResponseAction = (response) => (\n  { \n\ttype: PIE_RESPONSE,\n    payload: \n    \t{\n    \t\tslices : response\n    \t} \n  }\n)\n\nconst PIE_REDRAW = 'PIE_REDRAW'\nconst pieRedrawAction = () => (\n  { \n\ttype: PIE_REDRAW,\n    payload: \n    \t{\n    \t\tredraw : (new Date()).getTime() //only signal\n    \t} \n  }\n)\n\nvar params = null\n\nfunction get(dispatch) {\n    dispatch(pieRequestAction(params.s, params.e));\n    axios_get_params('pie?ts='+Date.now(), \n    \t\t{\t\t  \n\t\t  \t\tparams: params\n    \t\t},\n    \t\tresponse => {\n    \t\t\t// console.log(response);\n    \t\t\tdispatch(pieResponseAction(response.data))\n    \t\t},\n    \t\tdispatch\n\t  )\n}\n\nconst pie_load = (s, e) => (\n  (dispatch) => {\n\t  params = {\n\t\t\t  's': dateFormat(s, \"yyyy-mm-dd\"),\n\t\t\t  'e': dateFormat(e, \"yyyy-mm-dd\")\n\t  }\n\t  get(dispatch)\n    }\n)\n\nconst pie_refresh = () => (\n    (dispatch) => {\n        console.assert(params)\n        get(dispatch)\n    }\n)\n\nconst pie_redraw = () => (\n    (dispatch) => {\n    \tdispatch(pieRedrawAction())\n    }\n)\nexport {\n\tpie_load,\n\tpie_refresh,\n\tpie_redraw\n}\n","import { axios_get_params, axios_post } from './axios';\nimport { balances_refresh } from '../actions/minibars'\nimport { chart_refresh } from '../actions/chart'\nimport { pie_refresh } from '../actions/pie'\n\nvar dateFormat = require('dateformat');\n\nvar params = null //cache for refresh\nvar history = [] //day/account..  selection history\nvar current = -1;\n\n\nconst PAYMENTS_REQUEST = 'PAYMENTS_REQUEST'\nconst paymentsRequestAction = () => ({\n    type: PAYMENTS_REQUEST\n})\n\nconst PAYMENTS_RESPONSE = 'PAYMENTS_RESPONSE'\nconst paymentsResponseAction = (payments, balances) => ({\n    type: PAYMENTS_RESPONSE,\n    payload: {\n    \t\"params\" : params,\n    \t\"queryType\" : params.e,\n      \"payments\": payments,\n      \"balances\": balances,\n      \"historystack\": {\n    \t                 \"last\": current === history.length - 1,\n                         \"first\": current === 0,\n                      }\n    }\n})\n\n\nconst PAYMENTS_UPDATE_REQUEST = 'PAYMENTS_UPDATE_REQUEST'\nconst paymentsUpdateRequestAction = (updates) => ({\n    type: PAYMENTS_UPDATE_REQUEST,\n    payload: {\n    \t\"updates\": updates\n    }\n})\n\nconst PAYMENTS_UPDATE_RESPONSE = 'PAYMENTS_UPDATE_RESPONSE'\nconst paymentsUpdateResponseAction = () => ({\n    \ttype: PAYMENTS_UPDATE_RESPONSE\n})\n\nconst update = (updates) => (\n    (dispatch) => {\n        dispatch(paymentsUpdateRequestAction(updates))\n        axios_post('payments/update', \n        \t\tupdates,\n        \t\tresponse => {\n        \t\t\tdispatch(paymentsUpdateResponseAction())\n        \t\t\t//thn kaikki refrhesit, jotka update aiheuttaa\n                    //refresh pie and minibars\n        \t\t\tdispatch(payments_refresh())\n        \t\t\tdispatch(pie_refresh())\n        \t\t\tdispatch(balances_refresh())\n        \t\t\tdispatch(chart_refresh())\n        \t\t},\n        \t\tdispatch\n        )\n    }\n )\n\n\nfunction make_history() {\n  if(current < history.length - 1) {\n\t  history = history.slice(0, current + 1)\n  }\n  history.push(params)\n  current++\n}\n\n\n\nfunction get(dispatch, historify = false) {\n    if(historify) {\n      make_history()\n    }\n    //history.forEach(x => console.log(x))\n   \t//console.log(\"---current:\" + current)\n    dispatch(paymentsRequestAction())\n    axios_get_params('payments',\n    \t\t{\n        \t\t\"params\": params\n    \t\t},\n    \t\t(response) => {\n    \t\t\tdispatch(paymentsResponseAction(response.data[0], response.data[1]))\n    \t\t},\n    \t\tdispatch\n    )\n}\n\nconst day_load = (d) => (\n    (dispatch) => {\n        params = {\n            \"e\": \"d\",\n            \"d\": dateFormat(d, \"yyyy-mm-dd\")\n        }\n        get(dispatch, true)\n    }\n)\n\nconst account_load = (a, d1, d2) => (\n    (dispatch) => {\n        params = {\n            \"e\": \"a\",\n            \"a\": a,\n            \"d1\": dateFormat(d1, \"yyyy-mm-dd\"),\n            \"d2\": dateFormat(d2, \"yyyy-mm-dd\")\n        }\n        get(dispatch, true)\n    }\n)\n\nconst category_load = (c, d1, d2) => (\n    (dispatch) => {\n        params = {\n            \"e\": \"c\",\n            \"c\": c,\n            \"d1\": dateFormat(d1, \"yyyy-mm-dd\"),\n            \"d2\": dateFormat(d2, \"yyyy-mm-dd\")\n        }\n        get(dispatch, true)\n    }\n)\n\nconst group_load = (g) => (\n    (dispatch) => {\n        params = {\n            \"e\": \"g\",\n            \"g\": g\n        }\n        get(dispatch, true)\n    }\n)\n\nconst list_load = (ids) => (\n    (dispatch) => {\n        params = {\n            \"e\": \"l\",\n            \"ids\": ids\n        }\n        get(dispatch, true)\n    }\n)\n\nconst payments_refresh = () => (\n    (dispatch) => {\n        console.assert(params)\n        get(dispatch)\n    }\n)\n\nconst prev_in_history = () => (\n  (dispatch) => {\n      current--\n      params = history[current]\n      get(dispatch)\n  }\n)\n\nconst next_in_history = () => (\n  (dispatch) => {\n      current++\n      params = history[current]\n      get(dispatch)\n  }\n)\n\nexport {\n    prev_in_history,\n    next_in_history,\n    day_load,\n    account_load,\n    category_load,\n    group_load,\n    list_load,\n    payments_refresh,\n    update\n}","import {axios_get_params} from './axios';\nimport { balances_refresh } from '../actions/minibars'\n\nconst LOCK_PAYMENT_REQUEST = 'LOCK_PAYMENT_REQUEST'\nconst lockPaymentRequestAction = (lock_payment_request, locked) => {\n    return {\n        type: LOCK_PAYMENT_REQUEST,\n        payload: {\n            lock_payment_request: lock_payment_request,\n            locked: locked\n        }\n    }\n}\n\nconst LOCK_PAYMENT_RESPONSE = 'LOCK_PAYMENT_RESPONSE'\nconst lockPaymentResponseAction = (payment, locked) => {\n    return {\n        type: LOCK_PAYMENT_RESPONSE,\n        payload: {\n            payment: payment\n        }\n    }\n}\n\nconst lock_payment = (payment, locked) => (\n    (dispatch) => {\n        dispatch(lockPaymentRequestAction(payment, locked))\n        axios_get_params('lock',\n        \t\t{\n                \tparams: {\n                \t\t\"id\": payment,\n                \t\t\"l\": locked\n                \t}\n        \t\t},\n        \t\tresponse => {\n        \t\t\tdispatch(lockPaymentResponseAction(payment, locked))\n        \t\t\tconsole.log('ref')\n        \t\t\tdispatch(balances_refresh())\n                //DO NOT dispatch(payments_refresh()) : it will refresh possibly unsubmitted payments, \n                \n        \t\t},\n        \t\tdispatch\n        )\n    }\n )\n    \nconst PAYMENT_SELECTION = 'PAYMENT_SELECTION'\nconst paymentSelectionAction = (payments) => {\n    return {\n        type: PAYMENT_SELECTION,\n        payload: {\n            \"payments\": payments\n        }\n    }\n}\n\nconst payment_selection = (payments) => (\n    (dispatch) => {\n        dispatch(paymentSelectionAction(payments))\n    }\n)\n\n export {\n    lock_payment,\n    payment_selection\n}","const CALC_ADD_REQUEST = 'CALC_ADD_REQUEST'\nconst calcAddRequestAction = (p) => ({\n    type: CALC_ADD_REQUEST,\n    payload: {\n        \"p\": p\n    }\n})\n\n const calc_add = (p) => (\n    (dispatch) => {\n        dispatch(calcAddRequestAction(p))\n    }\n )\n \nexport {\n    calc_add\n}","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Button, Modal } from 'react-bootstrap';\nimport LogEntry from '../logs/logEntry'\nimport './style.css'\n\nclass HistoryModal extends React.Component {\n  render() {\n\tif(this.props.logentries == null) return null\n  var r = this.props.logentries[0]\n\n  var {show, onHide} = {...this.props}\n\tvar props = {show, onHide}\n\treturn (\n\n      <Modal\n        {...props}\n        size=\"lg\"\n        aria-labelledby=\"contained-modal-title-vcenter\"\n        centered=\"true\"\n        dialogClassName=\"modal-90w\"\n      >\n        <Modal.Header closeButton>\n          <Modal.Title id=\"contained-modal-title-vcenter\">\n            History\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n        \t<LogEntry logEntry={r} singleEntry={true}/>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button onClick={this.props.onHide}>Close</Button>\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        logentries: store.auditlog.logentries,\n        //fetching: store.auditlog.fetching\n    }\n}\n\nexport default connect(mapStateToProps)(HistoryModal)","import Toggle from 'react-toggle'\nimport React from 'react';\nimport { lock_payment } from '../../actions/payment'\nimport { connect } from 'react-redux'\n\nimport './toggle.css'\n\nvar FontAwesome = require('react-fontawesome')\n\n\n\nclass Lock extends React.Component {\n\trender() {\n\t\treturn <FontAwesome name='lock' style={{ 'color':'white' }}/>\n\t}\n}\n\nclass Unlock extends React.Component {\n\trender() {\n\t\treturn <FontAwesome name='unlock-alt' style={{ 'color':'white' }}/>\n\t}\n}\n\nclass LockField extends React.Component {\n\t  constructor(props) {\n\t\t    super(props);\n\t\t    this.toggleLock = this.toggleLock.bind(this);\n\t  }\n\t  \n\t  toggleLock(e) {\n\t\t  \tconst {field, index} = this.props\n\t\t\tvar locked = !e.target.checked;\n\t\t\tthis.props.onValueChanged(locked, field, index )\n\t\t\tthis.props.lockPayment(this.props.id, locked)\n\t  }\n\t  \n\t  componentWillReceiveProps(nextProps){\n\t\t  this.setState({\n\t        checked : nextProps.checked,\n\t\t  })\n\t  }\n\t  render() {\n\t\tconst {readOnly, checked} = this.props\n\n\t    return (\n\t    <div style={{paddingTop: 8}}>\n\t\t\t<Toggle\n\t\t\t\tdisabled = {readOnly}\n\t\t\t    checked = {!checked}\n\t    \t\tonChange = {this.toggleLock}\n\t    \t\ticons={{\n\t    \t\t      checked: <Unlock />,\n\t    \t\t      unchecked: <Lock />,\n\t    \t\t}}\t\n\t\t\t/>\n\t    </div>)\n\t  }\n\t}\n\nLockField.defaultProps = {\n\t\tid: null,\n\t\tonValueChanged: null,\n\t\tchecked : false,\n\t\treadOnly : false,\n\t\tfield: null,\n\t\tindex: null,\n}\n\n\nfunction mapDispatchToProps(dispatch) {\n    return({\n        lockPayment: (id, locked) => {\n        \tdispatch(lock_payment(id, locked)) \n        }\n    })\n}\n\nexport default connect(null, mapDispatchToProps)(LockField)\n","import React from 'react';\nimport {Button, OverlayTrigger, Popover} from 'react-bootstrap'\n\nfunction setCaretPosition(elemId, caretPos) {\n    var elem = document.getElementById(elemId);\n\n    if(elem != null) {\n        if(elem.createTextRange) {\n            var range = elem.createTextRange();\n            range.move('character', caretPos);\n            range.select();\n        }\n        else {\n            if(elem.selectionStart) {\n                elem.focus();\n                elem.setSelectionRange(caretPos, caretPos);\n            }\n            else\n                elem.focus();\n        }\n    }\n}\n\nconst normalizeCurrency = value => {\n    if (!value) {\n        return value\n    }\n    if (value === \"-\" || value === \"+\") {\n        value += \"0\"\n    }\n    var plus = value.lastIndexOf('+');\n    var minus = value.lastIndexOf('-');\n\n    value = value.replace(/[^\\d]/g, '')\n    if (value === \"\") {\n        value = \"0\"\n    }\n    value = \"\" + parseInt(value, 10);\n    if (value.length < 3) {\n        value = \"00\".slice(-3 + value.length) + value\n    }\n\n    var res = (plus >= minus ? '+' : '-') + value.slice(0, -2) + \".\" + value.slice(-2)\n    return res;\n}\n\nclass CurrencyField extends React.Component {\n\n\tconstructor(props) {\n        super(props)\n        this.state = {\n        \tcurrencyValue : props.value\n        }\n\t\tthis.onChange = this.onChange.bind(this)\n\t\tthis.handleFocus = this.handleFocus.bind(this)\n\t\t\n\t\t\n    }\n\t\n\thandleFocus(event) {\n\t\t event.target.select();\n\t}\n\n\tonChange(e) {\n\t\t\n\t\tconst {onValueChanged, field, index, id} = this.props\n\t\tvar newCurrencyValue = normalizeCurrency(e.target.value)\n\t\tthis.setState({\n\t\t\tcurrencyValue : newCurrencyValue\n\t\t})\n\t\tonValueChanged(newCurrencyValue, field, index)\n\t\tsetCaretPosition(id, newCurrencyValue.length)\n\t\t\n\t}\n\t\n\t/*onChange(e) {\n\t\t\n\t\tconst {onValueChanged, field, index} = this.props\n\t\t//var newCurrencyValue = normalizeCurrency(e.target.value)\n\t\tthis.setState({\n\t\t\tcurrencyValue : e.target.value\n\t\t})\n\t\tonValueChanged(e.target.value, field, index)\n\n\t}*/\n\tcomponentWillReceiveProps(nextprops) {\n\t\tthis.setState({\n\t\t\tcurrencyValue : nextprops.value\n\t\t})\n\t}\n\t\n\trender() {\n\t\tconst {id, readOnly, placeholder, touched, fontSize, linkCb, popoverText} = this.props\n\t\tvar inputField =\t\t\t\n\t    <div>\n\t\t\t<input\n\t\t\t  onFocus={this.handleFocus}\n\t\t\t  autoComplete='off'\n\t\t\t  id={id}\n\t\t\t  disabled={readOnly}\n\t\t\t  value={this.state.currencyValue}\n\t\t\t  onChange={this.onChange}\n\t          placeholder={readOnly ? '' : placeholder}  \n\t          type=\"text\"\n\t          className=\"form-control\" \n\t    \t  style={{\n\t    \t\t  'fontSize': fontSize,\n\t    \t\t  'textAlign': 'right', \n\t    \t\t  //'color' : this.state.currencyValue && this.state.currencyValue.startsWith('-') ? 'red' : 'green',\n\t    \t\t  'color' : this.state.currencyValue && (this.state.currencyValue.substr(0,1) === '-') ? 'red' : 'green',\n\t    \t\t  'display': 'inline',\n\t    \t\t  'width': '85px',\n\t    \t\t  'backgroundColor' : (touched ? 'lightyellow' : '')\n\t    \t  }} \n\t      />\n\t    </div>\n\n\t\tif(readOnly) {\n\t    \treturn(\n\t    \t<Button className=\"link-button\" onClick={ () => {linkCb(this.state.currencyValue)} } >\n\t\t\t\t{inputField}\n\t\t\t</Button>)\n\t    } else if( \n//\t    \t\ttouched ||\n\t    \t\t linkCb == null \n\t    \t\t|| this.state.currencyValue == null \n\t    \t\t//|| this.state.currencyValue.length === 0)\n\t    \t\t){\n\t\t    return (\n\t    \t<span style={{display: \"inline-flex\"}}>\n\t\t\t\t\t{inputField}\n\t    \t</span>)\n\t    \n\t    } else {\n\t\t    var linkButton = linkCb && this.state.currencyValue && this.state.currencyValue.length > 0?\n\t\t\t<Button className=\"link-button\" onClick={ () => {\n\t\t\t\tlinkCb(this.state.currencyValue)}\n\t\t\t}>\n\t\t\t\t{popoverText}\n\t\t\t</Button>\n\t\t\t:\n\t\t\tnull\n\t\t\t\n\t\t\t\n\t\t\treturn(\n\t\t\t    <div>\n\t\t\t    \t<span style={{display: \"inline-flex\"}}>\n\t\t\t\t\t\t<OverlayTrigger trigger='focus' key=\"top\" placement=\"top\"\n\t\t\t\t\t\t  overlay={\n\t\t\t\t\t\t    <Popover\n\t\t\t\t\t\t      id={`popover_cur_-positioned-${id}`}>\n\t\t\t\t\t\t    \t{linkButton}\n\t\t\t\t\t\t    </Popover>\n\t\t\t\t\t\t  }>\t    \t\n\t\t\t\t\t\t\t{inputField}\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t    \t</span>\n\t\t\t    </div>)\n\t    }\n\t}\t\n}\n\nCurrencyField.defaultProps = {\n\t\tid: null,\n\t\tonValueChanged: null,\n\t\tplaceholder : '',\n\t\tvalue : '',\n\t\treadOnly : false,\n\t\tfield: null,\n\t\tindex: null,\n\t\ttouched: false,\n\t\tfontSize: 'inherit',\n\t\tlinkCb: null,\n\t\tpopoverText: null\n}\n\nexport default CurrencyField","import React from 'react';\nimport Dropdown from '../dropdown/dropdown'\n\nclass DropdownField extends React.Component {\n\trender() {\n\t\tconst {readOnly, field, index, onValueChanged, placeholder, touched, constants_id, cbDblClick} = this.props\n\t\n\t\treturn(\n\t    <div>\n\t    \t<Dropdown \n\t    \t    readOnly={readOnly}\n\t    \t\tonValueChange={ (e) => {\n\t    \t\t\tonValueChanged(e, field, index ) \n\t    \t\t}} \n\t    \t\tselectedValue={this.props.value}\n\t    \t\tplaceholder={placeholder}\n\t    \t\ttouched={touched}\n\t    \t\tconstants_id={constants_id}\n\t    \t\tcbDblClick = {cbDblClick}\n\t    \t/>\n\t    </div>)\n\t}\t\n}\n\nDropdownField.defaultProps = {\n\t\tonValueChanged: null,\n\t\tvalue : null,\n\t\treadOnly : false,\n\t\tplaceholder : '',\n\t\tfield: null,\n\t\tindex: null,\n\t\ttouched: false,\n\t\tconstants_id: null,\n\t\tcbDblClick: null\n}\n\nexport default DropdownField\n\n","import React from 'react';\nimport {Button, OverlayTrigger, Popover} from 'react-bootstrap'\n\nclass TextField extends React.Component {\n\n\tconstructor(props) {\n        super(props)\n        this.state = {\n        \ttxtValue : props.value\n        }\n        this.onChange = this.onChange.bind(this)\n    }\n\t\n\tonChange(e) {\n\t\tconst {onValueChanged, field, index} = this.props\n\t\tthis.setState({\n\t\t\ttxtValue : e.target.value\n\t\t})\n\t\tonValueChanged(e.target.value, field, index)\n\t}\n\n\tcomponentWillReceiveProps(nextprops) {\n\t\tthis.setState({\n\t\t\ttxtValue : nextprops.value\n\t\t})\n\t}\n\t\n\trender() {\n\t\tconst {id, placeholder, readOnly, touched, linkCb, popoverText, maxLength} = this.props\n\t\t\n\t\tvar inputField = \n\t\t<input \n\t\t\t\tautoComplete='off'\n\t    \t    id={id}\n\t    \t\tvalue={this.state.txtValue}\n\t    \t    disabled={readOnly}\n\t    \t    style={{'backgroundColor' : (touched ? 'lightyellow' : '')}}\n\t    \t\tplaceholder={readOnly ? '' : placeholder} \n\t    \t\ttype=\"text\" \n\t    \t\tonChange={this.onChange}\n\t    \t\tclassName=\"form-control\"\n\t    \t\tmaxLength={maxLength}\n\t    />\n\t\n\t    if(readOnly && linkCb != null ) {\n\t    \t\n\t    \treturn(\n\t    \t<Button className=\"link-button\" onClick={ () => {linkCb(this.state.txtValue)} } >\n\t\t\t\t{inputField}\n\t\t\t</Button>)\n\t\t\t\n\t    } else if( touched \n\t    \t\t|| linkCb == null \n\t    \t\t|| this.state.txtValue == null \n\t    \t\t|| this.state.txtValue.length === 0) {\n\t    \t\t\n\t\t    return (\n\t    \t<span style={{display: \"inline-flex\"}}>\n\t\t\t\t\t{inputField}\n\t    \t</span>)\n\t    \n\t    } else {\n\t    \t\n\t\t\tvar linkButton = linkCb && this.state.txtValue && this.state.txtValue.length > 0?\n\t\t\t\t\t<Button className=\"link-button\" onClick={ () => {\n\t\t\t\t\t\tlinkCb(this.state.txtValue)}\n\t\t\t\t\t}>\n\t\t\t\t\t\t{popoverText}\n\t      \t\t\t</Button>\n\t\t\t:\n\t\t\tnull\n\t\t\t\n\t\t\treturn(\n\t\t    <div>\n\t\t    \t<span style={{display: \"inline-flex\"}}>\n\t\t\t\t\t<OverlayTrigger trigger='focus' key=\"top\" placement=\"top\"\n\t\t\t\t\t  overlay={\n\t\t\t\t\t    <Popover\n\t\t\t\t\t      id={`popover-positioned-${id}`}>\n\t\t\t\t\t    \t{linkButton}\n\t\t\t\t\t    </Popover>\n\t\t\t\t\t  }>\t    \t\n\t\t\t\t\t\t{inputField}\n\t\t\t\t\t</OverlayTrigger>\n\t\t    \t</span>\n\t\t    </div>)\n\t    }\n\t}\t\n}\n\nTextField.defaultProps = {\n\t\tid: null,\n\t\tplaceholder: '',\n\t\tonValueChanged: null,\n\t\tvalue : '',\n\t\treadOnly : false,\n\t\tfield: null,\n\t\tindex: null,\n\t\ttouched: false,\n\t\tlinkCb: null,\n\t\tpopoverText: null,\n\t\tmaxLength: 255\n}\n\nexport default TextField","import React from 'react';\nimport DatePicker from '../datepicker/datepicker'\nimport {Button, OverlayTrigger, Popover} from 'react-bootstrap'\n\nvar dateFormat = require('dateformat');\n\nclass DateField extends React.Component {\n\trender() {\n\n\t\tconst {id, onValueChanged, value, readOnly, field, index, touched, linkCb, popoverText} = this.props\n\t\tvar datePickerField =\n\t\t<div>\n\t    \t<DatePicker \n\t    \t    disabled={readOnly}\n\t    \t\tvalue={value}\n\t    \t\tid={id}\n\t    \t\tpickerName={'picker_d_' + id + index}\n\t    \t \tpickerCallback={(d) => onValueChanged(dateFormat(d, \"dd.mm.yyyy\"), field, index)}\n\t    \t \tpickerType=\"single\"\n\t    \t \ttouched = {touched}\n\t    \t \tstyle={{\n\t    \t\t  'backgroundColor' : (touched ? 'lightyellow' : '')\n\t    \t \t}}\n\t    \t />\n\t    </div>\n\t    \t\n\t    if(readOnly && linkCb != null) {\n\t    \t\n\t    \treturn(\n\t    \t<Button className=\"link-button\" onClick={ () => {linkCb(value)} } >\n\t\t\t\t{datePickerField}\n\t\t\t</Button>)\n\t\t\t\n\t    } else if( touched \n\t    \t\t|| readOnly\n\t    \t\t|| linkCb == null \n\t    \t\t|| value == null \n\t    \t\t|| value.length === 0) {\n\t    \t\t    \t\t\n\t\t    return (\n\t    \t<span style={{display: \"inline-flex\"}}>\n\t\t\t\t\t{datePickerField}\n\t    \t</span>)\n\t    \t\n\t    } else {\n\t\t\tvar linkButton = linkCb && value && value.length > 0?\n\t\t\t\t\t<Button className=\"link-button\" onClick={ () => {linkCb(value)}\n\t\t\t\t\t}>\n\t\t\t\t\t\t{popoverText}\n\t      \t\t\t</Button>\n\t\t\t:\n\t\t\tnull\n\t\t\t\n\t\t\treturn(\n\t\t    <div>\n\t\t    \t<span style={{display: \"inline-flex\"}} >\n\t\t\t\t\t<OverlayTrigger trigger='focus' key=\"top\" placement=\"top\"\n\t\t\t\t\t  overlay={\n\t\t\t\t\t    <Popover \n\t\t\t\t\t      id={'popover-d-positioned-'+id}>\n\t\t\t\t\t    \t{linkButton}\n\t\t\t\t\t    </Popover>\n\t\t\t\t\t  }>\t    \t\n\t\t\t\t\t\t{datePickerField}\n\t\t\t\t\t</OverlayTrigger>\n\t\t    \t</span>\n\t\t    </div>)\n\t    }\n\t}\t\n}\n\nDateField.defaultProps = {\n\t\tid: null,\n\t\tonValueChanged: null,\n\t\tvalue : true,\n\t\treadOnly : false,\n\t\tfield: null,\n\t\tindex: null,\n\t\ttouched: false,\n\t\tlinkCb: null,\n\t\tpopoverText: null\n}\n\nexport default DateField","function isEven(n) {\n  n = Number(n);\n  return n === 0 || !!(n && !(n%2));\n}\n\nexport {isEven}","import {toDateFi} from '../../util/fiDate'\nimport {addDays, addMonths} from '../../util/addDays'\nimport {isEven} from '../../util/math'\n\nvar dateFormat = require('dateformat')\n\nfunction _addDays(d, days) {\n    var date = toDateFi(d)\n    var date1 = addDays(date, days)\n    return dateFormat(date1, \"dd.mm.yyyy\")\n}\n\nfunction _addMonths(d, months) {\n  var date = toDateFi(d)\n  var date1 = addMonths(date, months)\n  return dateFormat(date1, \"dd.mm.yyyy\")\n}\n\nvar f = {\n\t\"DAILY\" : (payment, iteration) => {\n    payment.d = _addDays(payment.d, 1)\n    payment.dc = _addDays(payment.dc, 1)\n\t},\n\t\"WEEKLY\" : (payment, iteration) => {\n    payment.d = _addDays(payment.d, 7)\n    payment.dc = _addDays(payment.dc, 7)\n\t},\n\t\"FORTNIGHTLY\" : (payment, iteration) => {\n    payment.d = _addDays(payment.d, 14)\n    payment.dc = _addDays(payment.dc, 14)\n\t},\n\t\"TWICE_A_MONTH\" : (payment, iteration) => {\n\t\tvar date = toDateFi(payment.d)\n\t\tvar date1 = null\n\t\tif(isEven(iteration)) {\n\t\t\tdate1 = addDays(date, 14)\n\t\t} else {\n\t\t\tdate1 = addDays(date, -14)\n\t\t\tdate1 = addMonths(date1, 1)\n\t\t}\n\t\tpayment.d = dateFormat(date1, \"dd.mm.yyyy\")\n\n    date = toDateFi(payment.dc)\n    date1 = null\n    if(isEven(iteration)) {\n      date1 = addDays(date, 14)\n    } else {\n      date1 = addDays(date, -14)\n      date1 = addMonths(date1, 1)\n    }\n    payment.dc = dateFormat(date1, \"dd.mm.yyyy\")\n\t},\n\t\"MONTHLY\" : (payment, iteration) => {\n\t\tpayment.d = _addMonths(payment.d, 1)\n    payment.dc = _addMonths(payment.dc, 1)\n\t},\n\t\"EVERY_OTHER_MONTH\" : (payment, iteration) => {\n    payment.d = _addMonths(payment.d, 2)\n    payment.dc = _addMonths(payment.dc, 2)\n\t},\n\t\"EVERY_3_MONTHS\" : (payment, iteration) => {\n    payment.d = _addMonths(payment.d, 3)\n    payment.dc = _addMonths(payment.dc, 3)\n\t},\n\t\"EVERY_4_MONTHS\" : (payment, iteration) => {\n    payment.d = _addMonths(payment.d, 4)\n    payment.dc = _addMonths(payment.dc, 4)\n  },\n\t\"EVERY_6_MONTHS\" : (payment, iteration) => {\n    payment.d = _addMonths(payment.d, 6)\n    payment.dc = _addMonths(payment.dc, 6)\n\t},\n\t\"YEARLY\" : (payment, iteration) => {\n    payment.d = _addMonths(payment.d, 12)\n    payment.dc = _addMonths(payment.dc, 12)\n\t}\n}\n\nfunction recurrent(payment, iteration, span) {\n\tf[span](payment, iteration)\n}\n\nexport default recurrent","import {toDBFormatFi, toDateFi} from '../../util/fiDate'\nimport currencyFormat  from '../../util/currency'\nimport {daydiff} from  '../../util/addDays'\n\nvar dateFormat = require('dateformat')\n\nconst fields = ['d','dc','b','i','s','g','c','a','descr']\n\nconst defaultValues = {\n\tid: null,\n\tl: false ,\n\td: dateFormat(new Date(), \"dd.mm.yyyy\"),\n  dc: dateFormat(new Date(), \"dd.mm.yyyy\"),\n\ti: \"+0.00\",\n\tc: null,\n\ta: null,\n\ts: true,\n\tg: \"\",\n\tdescr: \"\",\n\tb: null\n}\n\nconst initialMaskValues = {\n\tid: null,\n\tl: false,\n\td: dateFormat(new Date(), 'dd.mm.yyyy'),\n  dc: dateFormat(new Date(), 'dd.mm.yyyy'),\n\ti: '+0.00',\n\tc: null,\n\ta: null,\n\ts: true,\n\tg: '',\n\tdescr: '',\n\tb: null\n}\n\nconst \tvalidators = {\n\t'check': (value) => {\n\t\t\treturn null\n\t\t  },\n\t'l': (value) => {\n\t\t\treturn null\n\t\t  },\n\t'd': (value, values) => {\n      let diff = daydiff(toDateFi(value), toDateFi(values.dc));\n\t\t\treturn (value != null && value !== '' && diff <= 0) ? null : 'required'\n\t\t  },\n  'dc': (value, values) => {\n      let diff = daydiff(toDateFi(value), toDateFi(values.d));\n      return (value != null && value !== '' && diff >= 0) ? null : 'required'\n    },\n\t'i':  (value) => {\n\t\t\treturn (value !== '') ? null : 'required'\n\t\t  },\n\t's': (value) => {\n\t\t\treturn null\n\t\t  },\n\t'c': (value) => {\n\t\t\treturn (value != null && value !== '') ? null : 'required'\n\t\t  },\n\t'a': (value) => {\n\t\t\treturn (value !== null && value !== '') ? null : 'required'\n\t\t  },\n\t'g': (value) => {\n\t\t\treturn null\n\t\t  },\n\t'descr': (value) => {\n\t\t\treturn null\n\t\t  },\n\t'b': (value) => {\n\t\t\treturn null\n\t\t  }\n}\n\nfunction preInitFormat(payments, checkedList) {\n\tvar copy = deepCopy(payments, checkedList)\n\tcopy.forEach((p) => {\n\t\t// 2006-12-31 -> 31.12.2005\n\t\tp.d = dateFormat(p.d, \"dd.mm.yyyy\")\n    p.dc = dateFormat(p.dc, \"dd.mm.yyyy\")\n\t\t// 2 -> +2.00\n\t\tp.i =  (p.i >=0 ? '+' : '') + currencyFormat(p.i)\n\t})\n\treturn copy\n}\n\nfunction preSubmitFormat(payments) {\n\tpayments.forEach( (p) => {\n\t\tif(p.i) {\n\t\t\t// \"+2.00\" -> 2\n\t\t\tp.i =  parseFloat(p.i)\n\t\t\t//p.i_initial = parseFloat(p.i_initial)\n\t\t }\n\t\t if(p.d) {\n\t\t\t// \"1.12.2001\" -> \"2001-12-01\"\n\t\t\tp.d = toDBFormatFi(p.d)\n\t\t\t//p.d_initial = toDBFormatFi(p.d_initial)\n\t\t }\n    if(p.dc) {\n      // \"1.12.2001\" -> \"2001-12-01\"\n      p.dc = toDBFormatFi(p.dc)\n      //p.d_initial = toDBFormatFi(p.d_initial)\n    }\n\t})\n\treturn payments\n}\n\n\nfunction copyObject(b) {\n\treturn {\n\t\tcheck: b,\n\t\tid: b,\n\t\tl: b,\n\t\td: b,\n    dc: b,\n\t\ti: b,\n\t\tc: b,\n\t\ta: b,\n\t\ts: b,\n\t\tg: b,\n\t\tdescr: b,\n\t\t\"b\": b\n\t}\n}\n\nfunction copyPayment(payment, checkedList, index = null) {\n\treturn {\n\t\tcheck: checkedList.map( e => {return e.id} ).indexOf(payment.id) > -1,\n\t\tindex: index,\n\t\tid: payment.id,\n\t\tl: payment.l,\n\t\td: payment.d,\n    dc: payment.dc,\n\t\ti: payment.i,\n\t\tc: payment.c,\n\t\ta: payment.a,\n\t\ts: payment.s,\n\t\tg: payment.g,\n\t\tdescr: payment.descr,\n\t\tb: payment.b\n\t}\n}\n\nfunction  deepCopy(payments, checkedList) {\n\tvar copy = []\n\tif(payments) {\n        payments.forEach(\n            (p) => {copy.push(copyPayment(p, checkedList))}\n        )\n\t}\n\treturn copy\n}\n\nconst recurSpans = [\n\t{label: \"daily\", value: \"DAILY\"},\n\t{label: \"weekly\", value: \"WEEKLY\"},\n\t{label: \"fortnightly\", value: \"FORTNIGHTLY\"},\n\t{label: \"twice a month\", value: \"TWICE_A_MONTH\"},\n\t{label: \"monthly\", value: \"MONTHLY\"},\n\t{label: \"every other month\", value: \"EVERY_OTHER_MONTH\"},\n\t{label: \"every 3 months\", value: \"EVERY_3_MONTHS\"},\n\t{label: \"every 4 months\", value: \"EVERY_4_MONTHS\"},\n\t{label: \"every 6 months\", value: \"EVERY_6_MONTHS\"},\n\t{label: \"yearly\", value: \"YEARLY\"},\n\t];\n\nfunction initState(payments, checkedList, recurring = { recur: false, times: 1, span: recurSpans[4]} ) {\n\tvar copy = {\n\t\tvalues : [],\n\t\tinitial : [],\n\t\terrors : [],\n\t\ttouched : [],\n\t\tdeleted : [],\n\t\tmasked : copyObject(false),\n\t\tmaskValues : initialMaskValues,\n\t\tmaskErrors : copyObject(null),\n\t\tsort: null,\n\t\tasc: true,\n\t\tallChecked: false,\n\t\trecurring : recurring,\n\t}\n\tcopy.recurring.recur = false\n\t\n\tpayments.forEach((p, index) => {\n\t\tcopy.values.push(copyPayment(p, checkedList, index))\n\t\tcopy.initial.push(copyPayment(p, checkedList))\n\t\tcopy.errors.push(copyObject(null))\n\t\tcopy.touched.push(copyObject(false))\n\t\tcopy.deleted.push(false)\n\t})\n\treturn copy\n}\n\nfunction oneIsTrue(row) {\n\tvar ret =\n\t\trow.d ||\n    row.dc ||\n\t\trow.i ||\n\t\trow.c ||\n\t\trow.a ||\n\t\trow.s ||\n\t\trow.g ||\n\t\trow.descr\n\t\t\n\treturn ret\n}\n\nfunction copyArray(array) {\n\treturn array.splice(0)\n}\n\nexport {\n\tfields,\n\tinitState,\n\tdefaultValues,\n\tinitialMaskValues, \n\tvalidators,\n\tpreInitFormat,\n\tpreSubmitFormat,\n\toneIsTrue,\n\tcopyArray,\n\trecurSpans,\n\tcopyPayment\n}","import React from 'react'\nimport { connect } from 'react-redux'\n\nimport { update, category_load } from '../../actions/payments'\nimport { payment_selection } from '../../actions/payment'\nimport { CATEGORY } from '../../actions/categories'\nimport { ACCOUNT } from '../../actions/accounts'\nimport { load as history_load } from '../../actions/auditlog'\nimport { calc_add } from '../../actions/calculator'\n\nimport { Table, Panel, Button, FormGroup, ControlLabel, FormControl } from 'react-bootstrap'\n\nimport HistoryModal from '../history/HistoryModal'\n\nimport LockField from '../editorFields/LockField'\nimport CurrencyField from '../editorFields/CurrencyFieldPopover'\nimport CheckboxField from '../editorFields/CheckboxField'\nimport DropdownField from '../editorFields/DropdownField'\nimport TextField from '../editorFields/TextField'\nimport TextFieldPopover from '../editorFields/TextFieldPopover'\nimport DateFieldPopover from '../editorFields/DateFieldPopover'\n\nimport NumericInput from 'react-numeric-input';\nimport alertOptions from '../../util/alertoptions'\n\nimport './PaymentsEditor.css'\nimport '../../customMultiSelect.css'\n\nimport { group_load } from '../../actions/payments'\nimport { day_load, account_load } from '../../actions/payments'\n\nimport {SimpleSelect} from 'react-selectize'\n\nimport {toDateFi} from '../../util/fiDate'\n\nimport recurrent from './recurrent'\n\nimport AlertContainer from 'react-alert'\n\nimport Media from 'react-media';\n\nimport {\n\t\tfields,\n\t\tinitState,\n\t\tdefaultValues,\n\t\tvalidators,\n\t\tpreInitFormat,\n\t\tpreSubmitFormat,\n\t\toneIsTrue,\n\t\tcopyArray,\n\t\trecurSpans,\n\t\tcopyPayment\n} from './constants'\n\nvar FontAwesome = require('react-fontawesome')\nvar dateFormat = require('dateformat');\n\nvar tempId = -1\nvar checkedSet = []\n\nclass PaymentsEditor extends React.Component {\n\n\tconstructor(props) {\n        super(props)\n        this.showAlert = this.showAlert.bind(this)\n        this.showOk = this.showOk.bind(this)\n        //postfix -abbr. F = Field, R = Row, T = Table\n        \n        //Field related:\n        \n        //callbacks from uicomponents for updating model (state)\n        this.changePropertyF = this.changePropertyF.bind(this)\n        this.changePropertyDeletedF = this.changePropertyDeletedF.bind(this)\n        this.changePropertyLF = this.changePropertyLF.bind(this)\n        \n        //set state values:\n        this.setValueF = this.setValueF.bind(this)\n        this.setValueCheckF = this.setValueCheckF.bind(this)\n        this.setValueCheckAllF = this.setValueCheckAllF.bind(this)\n        this.setValueMaskF = this.setValueMaskF.bind(this)\n        this.setValueMaskCheckF = this.setValueMaskCheckF.bind(this)\n        \n        //validate:\n        this.validateF = this.validateF.bind(this)\n        //this.validateF = this.validateF.bind(this) //validates the whole row\n        //this.validateMaskF = this.validateMaskF.bind(this)\n        \n        //some field related util;\n        this.maskedF = this.maskedF.bind(this) //is field masked \n        this.touchedF = this.touchedF.bind(this) //dirty?\n        this.isDifferentFromInitialF = this.isDifferentFromInitialF.bind(this)        \n        this.drawBalanceF = this.drawBalanceF.bind(this)\n        \n        //choose right value for render\n        this.chooseValueF = this.chooseValueF.bind(this)\n\n        //render\n        this.renderContentF = this.renderContentF.bind(this)\n        this.renderDeletedContentF = this.renderDeletedContentF.bind(this)\n        \n        //sort\n        this.setSortF = this.setSortF.bind(this)\n        this.sortersF = this.sortersF.bind(this)\n        \n        //Row related:\n        \n        //add/remove\n        this.addR = this.addR.bind(this)\n        this.getDefaultR = this.getDefaultR.bind(this) //choose values for new row\n        this.removeR = this.removeR.bind(this)\n        this.setRecurring = this.setRecurring.bind(this)\n        this.setRecurringTimes = this.setRecurringTimes.bind(this)\n        this.setRecurringSpan = this.setRecurringSpan.bind(this)\n        \n        //validate\n        this.validateR = this.validateR.bind(this)\n        this.readOnlyR = this.readOnlyR.bind(this)\n        \n        //utils\n        this.isPersistedR = this.isPersistedR.bind(this)\n        this.disabledCheckR = this.disabledCheckR.bind(this) //row selection disabled\n        this.maskedCopy = this.maskedCopy.bind(this) //row selection disabled\n\n        //render\n        this.renderPaymentR = this.renderPaymentR.bind(this)\n\n        //Table related:\n        this.resetT =  this.resetT.bind(this)\n        this.validateT =  this.validateT.bind(this)\n        //util\n        this.isPristineT = this.isPristineT.bind(this)\n        this.hasErrorsT = this.hasErrorsT.bind(this)\n        \n        //format input/output\n        this.preInitT = this.preInitT.bind(this)\n        this.preSubmitT = this.preSubmitT.bind(this)\n        \n        //init constants\n        this.init =  this.init.bind(this)\n        //render\n        this.renderPaymentsHeaderT = this.renderPaymentsHeaderT.bind(this)\n        this.renderPaymentsT = this.renderPaymentsT.bind(this)\n        \n        this.renderNormalT = this.renderNormalT.bind(this)\n        /*this.renderNarrowT = this.renderNarrowT.bind(this)*/\n        \n        //save, new and rest aso\n        this.renderControls = this.renderControls.bind(this)\n        \n        //css and stuff\n        this.tdClassName = this.tdClassName.bind(this)\n        this.td = this.td.bind(this)\n        this.thClassName = this.thClassName.bind(this)\n        this.th = this.th.bind(this)\n        \n        this.groupLoad = this.groupLoad.bind(this)\n        this.dayLoad = this.dayLoad.bind(this)\n        this.showHistory = this.showHistory.bind(this)\n        \n        this.init()\n        var state = {...initState(this.preInitT(props.initPayments), checkedSet)}\n\n        this.state = {...state, historyShow: false}\n        this.state.maskValues.d = dateFormat(this.props.defaultDate)\n\n        //Gui gimmicks:\n        this.c_cbDblClick = this.c_cbDblClick.bind(this)\n        this.a_cbDblClick = this.a_cbDblClick.bind(this)\n    }\n\t\n\tshowAlert() {\n\t\tthis.msg.show('SAVE YOUR CHANGES, OR RESET FIRST!', {\n\t      time: 5000,\n\t      type: 'success',\n\t      icon: <img src=\"stop.png\" alt=\"SAVE YOUR CHANGES, OR RESET FIRST!\"/>\n\t    })\n\t }\n\n\tshowOk() {\n\t\tthis.msg.show('SAVED SUCCESSFULLY', {\n\t      time: 2000,\n\t      type: 'success',\n\t      icon: <img src=\"yes.png\" alt=\"save ok\" />\n\t    })\n\t }\n\t\n    changePropertyF(value, field, index) {\n    \tif(index === -1){ //mask checkbox\n    \t\tthis.setValueMaskCheckF(field, value)\n    \t\treturn\n    \t}\n    \t\n    \tif(index === -2){ //mask value\n    \t\t//this.validateMaskF(field, value)\n    \t\tthis.setValueMaskF(field, value)\n    \t\treturn\n    \t}\n    \t\n        //touch\n      if (this.isPersistedR(index)) { //new rows do not get 'touched' (unless masked)\n        var copy = copyArray(this.state.touched)\n        copy[index][field] = this.isDifferentFromInitialF(value, field, index)\n        //when dc changes will change d to the same value\n        /*if(field === 'dc') {\n          copy[index]['d'] = this.isDifferentFromInitialF(value, 'd', index)\n        }*/\n        this.setState({touched : copy})\n      }\n\n      //validate\n      if(!this.state.masked[field]) { //do not validate masked fields\n        this.validateF(field, value, index)\n        //this.validateT(field, value)\n      }\n      this.setValueF(value, field, index)\n      //when dc changes will change d to the same value\n      /*if(field === 'dc') {\n            this.setValueF(value, 'd', index)\n      }*/\n    }\n    \n    changePropertyDeletedF(value, field, index) {\n    \tif(this.isPersistedR(index)) { //if it has id, let backend remove: mark as deleted\n    \t\tthis.deleteCount += (value ? 1 : -1)\n    \t\tvar copy = copyArray(this.state.deleted)\n    \t\tcopy[index] = value\n    \t\tthis.setValueCheckF( false, 'check', index)\n    \t\tthis.setState({deleted : copy})\n    \t} else {\n    \t\tthis.removeR(index) //if newly created, just remove it\n    \t}\n    }\n    \n\tchangePropertyLF(value, field, index) { //updated on-the-fly (ie. lock-field), so don't set touched, set initial\n\t\tvar valuesCopy = copyArray(this.state.values)\n\t\tvaluesCopy[index].l = value\n\t\tvar initialCopy = copyArray(this.state.initial)\n\t\tinitialCopy[index].l = value\n\t\tthis.setState({\n\t\t\tvalues : valuesCopy,\n\t\t\tinitial : initialCopy\n\t\t})\n\t}\n\n\tsetValueF(value, field, index) {\n\t\tvar copy = copyArray(this.state.values)\n\t\tcopy[index][field] = value\n\t\tthis.setState({values : copy})\n\t}\n\n\tsetValueCheckF(value, field, index) {\n\t\tthis.updateCheckedSet(value, index)\n\t\tthis.setValueF(value, 'check', index)\n\t\tthis.props.paymentSelection(checkedSet.slice(0))  //broadcast\n\t}\n\t\n\tsetValueCheckAllF(value, field, index) {\n\t\tvar copy = this.state.values.slice(0)\n\t\tcopy.map( (v) => { \n\t\t\tthis.updateCheckedSet(value, v.index, copy)\n\t\t\treturn null\n\t\t})\n\t\tthis.setState({\n\t\t\tvalues: copy,\n\t\t\tallChecked : value\n\t\t})\n\t\tthis.props.paymentSelection(checkedSet.slice(0))\n\t}\n\t\n\tsetValueMaskF(field, value) {\n\t\tvar copy = {...this.state.maskValues}\n\t\tcopy[field] = value\n\t\tthis.setState({maskValues : copy})\n        this.validateT(field, null, copy)\n\t}\n\t\n\tsetValueMaskCheckF(field, set) {\n\t\t  var copy = {...this.state.masked}\n\t\tcopy[field] = set\n\t\tthis.setState({masked : copy})\n\n        this.validateT(field, copy)\n\t\t//clear/set errors of existing maskValues\n\t\t/*copy = {...this.state.maskErrors}\n\t\tcopy[field] = !set ? null : validators[field](this.state.maskValues[field], this.state.maskValues)\n\t\tthis.setState({maskErrors : copy}) */\n\n\n\t\t//clear/set errors of existing values masked\n\t\t/*var copy2 = copyArray(this.state.errors)\n\t\tthis.state.values.forEach( (v, index) => {\n\t\t  var value = set ? this.state.maskValues[field] : v[field]\n\t\t\tcopy2[index][field] = validators[field](value, this.state.values[index])\n\t\t})\n\t\tthis.setState({errors : copy2})*/\n\t}\n\n  validateF(field, value, index) {\n    var copy = this.maskedCopy(field, index)\n\n    copy[field] = value;\n    var errorR = this.validateR(copy)\n    var copy = copyArray(this.state.errors)\n    copy[index] = errorR;\n    this.setState({errors : copy})\n  }\n\n  maskedCopy(field, index, masked = null, maskValues = null) {\n    if(null == masked) {\n      masked= this.state.masked;\n    }\n    if(null == maskValues) {\n      maskValues= this.state.maskValues;\n    }\n    var copy = copyPayment(this.state.values[index], [])\n    fields.map(f => {\n      if(masked[f]  && !this.state.values[index].l && !this.state.deleted[index]) {\n        copy[f] = maskValues[f]\n      }\n    })\n    return copy\n  }\n\n  validateT(field, masked = null, maskValues = null) {\n    var copy = copyArray(this.state.errors)\n        this.state.values.map( (r, index) =>  {\n        var rcopy = this.maskedCopy(field, index, masked, maskValues)\n        var errorR = this.validateR(rcopy)\n        copy[index] = errorR\n    })\n    this.setState({errors : copy})\n  }\n\n\tmaskedF(index, field) {\n\t\tif(index<0 || this.state.deleted[index]) return false\n\t\treturn this.state.masked[field] && !this.state.values[index].l\n\t}\n\t\t\n\ttouchedF(index, field) {\n\t\tif(index<0) return false //mask-controls are never touched (-1 = checkbox -2 = mask value)\n\t\tif(this.state.deleted[index]) return false \t//to be deleted: not touched\n\t\tif(this.maskedF(index, field) && \n\t\t   this.isPersistedR(index) && \n\t\t   !this.isDifferentFromInitialF(this.state.maskValues[field], field, index)) return false //if masked and different: it is touched\n\t\tif(this.maskedF(index, field)) return true\n\t\tif(!this.isPersistedR(index)) return false \t//this is a new row: not touched and not masked\n\t\treturn this.state.touched[index][field]\n\t}\n\t\n\tisDifferentFromInitialF(value, field, index) {\n\t\treturn (value !== this.state.initial[index][field])\n\t}\n\n\tchooseValueF(index, field) {\n\t\tif(this.state.deleted[index]) return this.state.initial[index][field] //show initial values if to be deleted\n\t\treturn this.maskedF(index, field) ? this.state.maskValues[field] : this.state.values[index][field] \n\t}\n\n\tc_cbDblClick(c) {\n        if(this.isPristineT()) {\n            this.props.categoryLoad('' + c.value, this.props.start, this.props.end)\n        }\n\t}\n\n    a_cbDblClick(a) {\n        if(this.isPristineT()) {\n            this.props.accountLoad('' + a.value, this.props.start, this.props.end)\n        }\n    }\n\n\trenderContentF(field, index) {\n    \tif(index === -1) {//mask -checkbox\n    \t\treturn(\n\t    \t<div>\n\t\t  \t\t<CheckboxField \n\t\t\t  \t\tid = {field + '_mask_check'}\n\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t  \t\tchecked = {this.state.masked[field]}\n\t\t\t  \t\treadOnly = {false}\n\t\t  \t\t\tfield = {field}\n\t\t  \t\t\tindex = {-1}\n\t\t\t  \t/>\n\t\t    </div>)\n    \t}\n\n    \tif(index === -2 && !this.state.masked[field]) return //draw maskValue only if masked\n    \t\n    \tvar  value = null\n    \tif(index === -2) { //mask value\n    \t\tvalue = this.state.maskValues[field]\n    \t} else {\n    \t   value = this.chooseValueF(index, field)\n    \t}\n    \t\n    \tswitch(field) {\n    \tcase 'check' :\n    \t\t\t\treturn(\n\t\t\t\t  \t<div>\n\t\t\t\t  \t\t<CheckboxField \n\t\t\t\t\t  \t\tid = {'check_' + index}\n\t\t\t\t\t  \t\tonValueChanged = {this.setValueCheckF}\n\t\t\t\t\t  \t\tchecked = {value}\n\t\t\t\t\t  \t\treadOnly = {this.disabledCheckR(index)}\n\t\t\t\t  \t\t\tfield = 'check'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {false}\n\t\t\t\t\t  \t/>\n\t\t\t\t    </div>)\n    \tcase 'l' :\n\t\t\t\t\treturn(\n\t\t\t\t  \t<div>\n\t\t\t\t  \t\t<LockField \n\t\t\t\t\t  \t\tid = {this.state.values[index].id}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyLF}\n\t\t\t\t\t  \t\tchecked = {value}\n\t\t\t\t\t  \t\treadOnly = {\n\t\t\t\t  \t\t\t\t!this.isPersistedR(index) \n\t\t\t\t  \t\t\t\t|| this.state.deleted[index] \n\t\t\t\t\t  \t\t\t|| oneIsTrue(this.state.masked)\n\t\t\t\t\t  \t\t\t|| oneIsTrue(this.state.touched[index])\n\t\t\t\t\t  \t\t}\n\t\t\t\t  \t\t\tfield = 'l'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t\t  \t/>\n\t\t\t\t    </div>)\t\t\t\t\t    \n    \tcase 'd' :\n\t\t\t\t\treturn(\t\t\n\t\t\t\t\t<div>\n\t\t\t\t    \t<DateFieldPopover \n\t\t\t\t    \t\tid = {'d_'+index}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\tvalue = {value}\n\t\t\t\t\t  \t\treadOnly = {this.readOnlyR(index, 'd')}\n\t\t\t\t  \t\t\tfield = 'd'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, 'd')}\n\t\t\t\t    \t\tlinkCb = {this.props.queryType === 'd' || index === -2 || !this.isPristineT() ? null : this.dayLoad}\n\t\t\t\t  \t\t\tpopoverText = {'Show day ' + value }\n\t\t\t\t    \t />\n\t\t\t\t    </div>)\n        case 'dc' :\n          return(\n            <div>\n              <DateFieldPopover\n                id = {'dc_'+index}\n                onValueChanged = {this.changePropertyF}\n                value = {value}\n                readOnly = {this.readOnlyR(index, 'dc')}\n                field = 'dc'\n                index = {index}\n                touched = {this.touchedF(index, 'dc')}\n                linkCb = {this.props.queryType === 'dc' || index === -2 || !this.isPristineT() ? null : this.dayLoad}\n                popoverText = {'Show day ' + value }\n              />\n            </div>)\n    \tcase 'b' :  return(\n    \t\t\t\t<div>\n     \t\t\t\t\t<CurrencyField \n\t\t\t\t\t\t  \t\tvalue = {'' + this.chooseValueF(index, 'b')}\n\t\t\t\t\t  \t\t\tfield = 'b'\n\t\t\t\t\t\t  \t\treadOnly = {true}\n\t\t\t\t\t  \t\t\ttouched = {false}\n\t\t\t\t  \t\t\t\tlinkCb = {index === -2 ? null : this.props.calculatorAdd}\n\t\t\t\t\t\t />\t\n     \t\t\t\t</div>)\n    \tcase 'i' :\n\t\t\t\t\treturn(\n\t\t\t\t  \t<div>\n\t\t\t\t  \t\t<CurrencyField \n\t\t\t\t\t  \t\tid = {'i_'+index}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\tplaceholder = 'amount'\n\t\t\t\t\t  \t\tvalue = {value}\n\t\t\t\t\t  \t\treadOnly = {this.readOnlyR(index, 'i')}\n\t\t\t\t  \t\t\tfield = 'i'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, 'i')}\n\t\t\t\t  \t\t\tlinkCb = {index === -2 ? null : this.props.calculatorAdd}\n\t\t\t\t  \t\t\tpopoverText = 'Add to calculator'\n\t\t\t\t\t  \t/>\n\t\t\t\t    </div>)\n    \tcase 's' :\n\t\t\t\t\treturn(\n\t\t\t\t  \t<div>\n\t\t\t\t  \t\t<CheckboxField \n\t\t\t\t\t  \t\tid = {'s_' + index}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\tchecked = {value}\n\t\t\t\t\t  \t\treadOnly = {this.readOnlyR(index, 's')}\n\t\t\t\t  \t\t\tfield = 's'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, 's')}\n\t\t\t\t\t  \t/>\n\t\t\t\t    </div>)\t\t\t\t\t    \n    \tcase 'g' :\n\t\t\t\t\treturn(\n\t\t\t\t  \t<div>\n\t\t\t\t  \t\t<TextFieldPopover \n\t\t\t\t\t  \t\tid = {'g_'+index}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\tvalue = {value}\n\t\t\t\t\t  \t\treadOnly = {this.readOnlyR(index, 'g')}\n\t\t\t\t  \t\t\tfield = 'g'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, 'g')}\n\t\t\t\t  \t\t\tplaceholder = 'gId'\n\t\t\t\t  \t\t\tlinkCb = {this.props.queryType === 'g' || index === -2 || !this.isPristineT() ? null : this.groupLoad}\n\t\t\t\t  \t\t\tpopoverText = {'Show all in group \"' + value + '\"'}\n\t\t\t\t  \t\t\tmaxLength = {15}\n\t\t\t\t\t  \t/>\n\t\t\t\t    </div>)\n     \tcase 'c' :\n\t\t\t\t\treturn(\n\t\t\t\t  \t<div>\n\t\t\t\t  \t\t<DropdownField \n\t\t\t\t  \t\t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t  \t\t\tvalue = {value}\n\t\t\t\t  \t\t\treadOnly = {this.readOnlyR(index, field)}\n\t\t\t\t  \t\t\tplaceholder = 'select'\n\t\t\t\t  \t\t\tfield = 'c'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, field)}\n\t\t\t\t  \t\t\tconstants_id = {CATEGORY}\n\t\t\t\t  \t\t\tcbDblClick = { this.isPristineT() ? this.c_cbDblClick : null }\n\t\t\t\t\t  \t/>\n\t\t\t\t    </div>)\n     \tcase 'a' :\n \t\t\t\t\treturn(\n\t\t\t\t\t  \t<div style={{\"display\": \"inline-flex\", \"whiteSpace\": \"nowrap\"}}>\n\t\t\t\t\t  \t\t<DropdownField \n\t\t\t\t\t  \t\t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\t\tvalue = {value}\n\t\t\t\t\t  \t\t\treadOnly = {this.readOnlyR(index, field)}\n\t\t\t\t\t  \t\t\tplaceholder = 'select'\n\t\t\t\t\t  \t\t\tfield = 'a'\n\t\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t\t  \t\t\ttouched = {this.touchedF(index, field)}\n\t\t\t\t\t  \t\t\tconstants_id = {ACCOUNT}\n\t\t\t\t\t  \t\t\tcbDblClick = { this.isPristineT() ? this.a_cbDblClick : null }\n\t\t\t\t\t\t  \t/>\n\t\t\t\t\t    </div>)\n     \tcase 'descr' :\n\t\t\t\t\treturn(\n\t\t\t\t  \t<div>\n\t\t\t\t  \t\t<TextField \n\t\t\t\t\t  \t\tid = {'descr_'+index}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\tvalue = {value}\n\t\t\t\t\t  \t\treadOnly = {this.readOnlyR(index, 'descr')}\n\t\t\t\t  \t\t\tfield = 'descr'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, 'descr')}\n\t\t\t\t  \t\t\tplaceholder = 'description'\n\t\t\t\t  \t\t\tmaxLength = {50}\n\t\t\t\t\t  \t/>\n\t\t\t\t  \t\t{ /* CHG-\n\t\t\t\t  \t\t<TextareaField \n\t\t\t\t\t  \t\tid = {'descr_'+index}\n\t\t\t\t\t  \t\tonValueChanged = {this.changePropertyF}\n\t\t\t\t\t  \t\tvalue = {value}\n\t\t\t\t\t  \t\treadOnly = {this.readOnlyR(index, 'descr')}\n\t\t\t\t  \t\t\tfield = 'descr'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {this.touchedF(index, 'descr')}\n\t\t\t\t  \t\t\tplaceholder = 'description'\n\t\t\t\t  \t\t\twidth = '180px'\n\t\t\t\t\t  \t/>*/}\n\t\t\t\t    </div>)\t\n\t\t  default: console.log('UNKONWN field: '+field)\n\t\t\t  \t   return null\n    \t}\n    }\n\t\n\trenderDeletedContentF(index) {\n\t\tif(!this.isPersistedR(index)) { \n\t\t\treturn(\n\t\t\t<button \n\t\t  \t\ttype=\"button\" \n\t\t  \t\tclassName=\"form-control\"  \n\t\t  \t\tonClick={() => this.changePropertyDeletedF(true, 'deleted', index)}>\n\t\t  \t\t<FontAwesome name = 'remove' style = {{'color': 'red'}}/>\n\t\t    </button>)\n\t\t}\n\t  \t\t\n\t\treturn(\n\t  \t<div>\n\t  \t\t<CheckboxField \n\t\t  \t\tid = {'deleted_'+index}\n\t\t  \t\tonValueChanged = {this.changePropertyDeletedF}\n\t\t  \t\tchecked = {this.state.deleted[index]}\n\t\t  \t\treadOnly = {this.state.values[index].l}\n\t  \t\t\tfield = 'deleted'\n\t  \t\t\tindex = {index}\n\t  \t\t\ttouched = {false}\n\t\t  \t/>\n\t    </div>)\n\t}\n\t\t\n\tsetSortF(field) {\n\t\t//console.log(field)\n\t\tif(!this.state.sort || this.state.sort !==field) {\n\t\t\tthis.setState({\n\t\t\t\tsort : field,\n\t\t\t\tasc : true\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t\tif(this.state.sort === field && this.state.asc) {\n\t\t\tthis.setState({\n\t\t\t\tasc : false\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t\tthis.setState({\n\t\t\tsort : null\n\t\t})\n\t\treturn\n\t}\n\n\tsortersF() {\n\t\tvar inv = this.state.asc ? -1 : 1\n\t\tswitch(this.state.sort) {\n\t\tcase 'i': \n\t\t//TODO: a:n ja c:n tekstiarvolla sorttaus ei id:ll\n\t\t// eslint-disable-next-line\n\t\tcase 'a':\n\t\tcase 'c':\n\t\t\treturn (a, b) => {\n\t\t\t\treturn inv * \n\t\t\t\t(this.chooseValueF(b.index,this.state.sort) - this.chooseValueF(a.index,this.state.sort))\n\t\t\t}\n\t\tcase 'd': \n\t\t\treturn (a, b) => {\n\t\t\t\treturn inv * \n\t\t\t\t(toDateFi(this.chooseValueF(b.index,'d')).getTime() - toDateFi(this.chooseValueF(a.index,'d')).getTime())\n\t\t\t}\n    case 'dc':\n      return (a, b) => {\n        return inv *\n          (toDateFi(this.chooseValueF(b.index,'dc')).getTime() - toDateFi(this.chooseValueF(a.index,'dc')).getTime())\n      }\n\t\tcase 'g':\n\t\t\treturn (a, b) => {\n\t\t\t\t var textA = this.chooseValueF(a.index,'g').toUpperCase()\n\t\t\t\t var textB = this.chooseValueF(b.index,'g').toUpperCase()\n\t\t\t\t return inv * \n\t\t\t\t ((textA < textB) ? -1 : (textA > textB) ? 1 : 0)\n\t\t\t}\n\t\tdefault: return (a, b) => {return 0}\n\t\t}\n\t}\n\t\t\n\taddR(copyLast = true) {\n\t\tvar defaults = this.getDefaultR(copyLast)\n    \tvar valuesCopy = copyArray(this.state.values)\n    \tvar errorsCopy = copyArray(this.state.errors)\n    \tvar count = 1\n    \t\n    \tif(this.state.recurring.recur) {\n    \t\tcount = this.state.recurring.times\n    \t}\n\t\t\n\t\tfor(var i=0; i<count; i++) {\n\t\t\tdefaults = copyPayment(defaults, [])\n\t\t\tdefaults.id = tempId--\n\t\t\tdefaults.index = valuesCopy.length\n\t\t\tdefaults.l = false\n\t\t\tdefaults.check = false\n\t\t\t\t\n\t\t\tif(this.state.recurring.recur) {\n\t\t\t\trecurrent(defaults, i, this.state.recurring.span.value)\n\t\t\t}\n\t\t\t\n\t\t\tvaluesCopy.push(defaults)\n\t\t\tthis.sortedValues.push(defaults)\n\t\t\terrorsCopy.push(this.validateR(defaults))\n\t\t}\n\t\tthis.setState({\n\t\t\t\t\trecurring : { ...this.state.recurring, recur: false },\n    \t\t    \tvalues : valuesCopy,\n    \t\t    \terrors : errorsCopy,\n    \t})\n    }\n\t\n\tsetRecurring() {\n\t\tthis.setState({\n\t\t\trecurring : { ...this.state.recurring, recur: !this.state.recurring.recur }\n    \t})\n\t}\n\t\n\tsetRecurringTimes(times) {\n\t\tthis.setState({\n\t\t\trecurring : { ...this.state.recurring, times: times }\n    \t})\n\t}\n\t\n\tsetRecurringSpan(span) {\n\t\tthis.setState({\n\t\t\trecurring : { ...this.state.recurring, span: span }\n    \t})\n\t}\n\t\n\tgetDefaultR(copyLast) {\n\t\tvar last = defaultValues\n\t\tif (copyLast && this.sortedValues.length){\n\t\t\tlast = this.sortedValues[this.sortedValues.length - 1]\n\t\t} else {\n\t\t\tlast.d = dateFormat(this.props.defaultDate, \"dd.mm.yyyy\")\n      last.dc = dateFormat(this.props.defaultDate, \"dd.mm.yyyy\")\n\t\t}\n\n\t\tvar res = {...last}\n\t\treturn res\n\t}\n    \n    removeR(index) {\n    \tthis.state.values.splice(index, 1)\n        var values_copy = copyArray(this.state.values)\n        this.state.errors.splice(index, 1)\n    \tvar errors_copy = copyArray(this.state.errors)\n\n    \t//reindex:\n    \tfor(var ix=index ; ix<values_copy.length ;ix++) {\n    \t\tvalues_copy[ix].index--\n    \t\terrors_copy[ix].index--\n    \t}\n    \tthis.setState({\n    \t\t    \tvalues : values_copy,\n    \t\t    \terrors : errors_copy,\n    \t})\n    }\n    \n    validateR(v) {\n\t   var res = {}\n\t   fields.forEach( (field) => {\n\t\t   \tres[field] = validators[field](v[field], v)\n    \t})\n    \treturn res\n    }\n    \n    readOnlyR(index, field) {\n\t\tif(index<0) return false  //mask-controls are never readOnly (-1 =checkbox -2 =mask value)\n\t\treturn this.state.masked[field] ||\t//this col is masked?\n\t\t\t   this.state.deleted[index] || //marked as to be deleted?\t\t\t\n\t\t\t   this.state.values[index].l  //locked?\n\t}\n    \n    isPersistedR(index) {\n\t\treturn this.state.values[index].id >=0\n\t}\n    \n    disabledCheckR(index) {\n\t\treturn !this.isPersistedR(index) ||\n\t\t\t   this.state.deleted[index] \t//marked as to be deleted?\t\t\t\n    }\n\n    renderPaymentR(index) {\n      var fields  =  ['check','l','i','s','c','dc','a','d','g','descr'];\n      if(this.props.queryType === 'c') {\n        fields  =  ['check','l','i','s','c','dc','b','a','d','g','descr'];\n      }else if (this.props.queryType === 'a'){\n        fields  =  ['check','l','i','s','c','dc','a','d','b','g','descr'];\n      }\n    \treturn(\n    \t<tr key={index}>\n        {//const fields = ['d','b','i','s','g','c','a','descr']\n        }\n\t \t\t{fields.map( (f) => {\n\t \t\t\treturn this.td(index, f)\n\t \t\t})}\n\t      \t<td className={this.tdClassName(index, 'deleted')}>\n\t      \t\t{this.renderDeletedContentF(index)}\n\t      \t</td>\n\t      \t<td>\n\t      \t{\tthis.isPersistedR(index) ?\n\t            <Button variant=\"primary\" onClick={() => this.showHistory(this.chooseValueF(index, 'id'))} >\n\t            \t<FontAwesome name='history' />\n\t            </Button>\n\t            :\n\t            null\n\t      \t}\n\t      \t</td>\n\t\t</tr>)\n    }\n    \n\tresetT() {\n\t\tvar state = initState(this.state.initial, checkedSet, this.state.recurring)\n\n\t\tstate.maskValues.d = dateFormat(this.props.defaultDate, \"dd.mm.yyyy\")\n\t\tthis.setState({...state})\n\t\tthis.init()\n\t}\n\t\n\tisPristineT() {\n\t\tvar pristine = true\n    \tthis.state.touched.forEach( (v) => {\n    \t\tfields.forEach( (f) => {\n    \t\t\tpristine = pristine && !v[f]\n    \t\t})\n    \t})\n\n    \treturn pristine &&\n    \t\t   (this.state.initial.length === this.state.values.length) && \n    \t       !oneIsTrue(this.state.masked) &&\n    \t       !this.deleteCount \n\t}\n\t\n\thasErrorsT() {\n\t\tvar errors = false\n    \tthis.state.errors.forEach( (v) => {\n    \t\terrors = errors || oneIsTrue(v) \n    \t})\n    \treturn errors || oneIsTrue(this.state.maskErrors)\n\t}\n\t\n\tpreInitT(initialPayments) {\n\t\treturn preInitFormat(initialPayments, checkedSet)\n\t}\n\t\n\tpreSubmitT() {\n\t\tvar created = []\n\t\tthis.state.values.forEach((v,index) => {\n\t\t\tif(!this.isPersistedR(index)) {\n\t\t\t\tvar p={}\n\t\t\t\tfields.forEach( (field) =>\n\t\t\t\t{\n\t\t\t\t\t p[field] = this.chooseValueF(index, field)\n\t\t\t\t})\n\t\t\t\tcreated.push(p)\n\t\t\t}\n\t\t}) \n\t\t\n\t\tvar deleted = []\n\t\tthis.state.deleted.forEach((v,i) => {\n\t\t\tif(v) {\n\t\t\t\tdeleted.push(this.state.values[i].id)\n\t\t\t} \n\t\t})\n\t\t\n\t\tvar modified = []\n\t\t\n\t\tthis.state.values.forEach( (v, index) => {\n\t\t\tif(this.isPersistedR(index)) {\n\t\t\t\tvar p={}\n\t\t\t\tfields.forEach((field) => {\n\t\t\t\t\t if(this.touchedF(index, field)) {\n\t\t\t\t\t\t p.id = v.id\n\t\t\t\t\t\t p[field] = this.chooseValueF(index, field)\n\t\t\t\t\t }\n\t\t\t\t })\n\t\t\t\t if(Object.keys(p).length > 0){\n\t\t\t\t\t modified.push(p)\n\t\t\t\t }\n\t\t\t}\n\t\t})\n\t\tvar updates = {\n\t\t\t\t'created' : preSubmitFormat(created),\n\t\t\t\t'deleted' : deleted,\n\t\t\t\t'modified' : preSubmitFormat(modified)\n\t\t}\n\t\t//console.log(JSON.stringify(updates,null,4))\n\t\t//\"submit\"\n\t\tthis.pristine = null\n\t\tthis.props.update(updates)\n\t\tthis.showOk()\n\t}\n\n    init() {\n        this.deleteCount = 0\n        this.pristine = null\n        this.errors = null\n        this.allChecked = false\n    }\n\n    renderPaymentsHeaderT = () => {\n    \tif (!this.state.values || this.state.values.length === 0) { \n    \t\treturn (<thead><tr><th /></tr></thead>)\n    \t}\n    \treturn (\n\t\t<thead>\n\t  \t\t<tr>\n\t  \t\t\t<th className={this.thClassName('check')}>\n\t\t  \t\t\t<CheckboxField \n\t\t\t\t  \t\tid={'check_all'}\n\t\t\t\t  \t\tonValueChanged={this.setValueCheckAllF}\n\t\t\t\t  \t\tchecked={this.state.allChecked}\n\t\t\t\t  \t\treadOnly={false}\n\t\t\t  \t\t\tfield = {'check_all'}\n\t\t\t  \t\t\tindex = {-2}\n\t\t\t  \t\t\ttouched = {false}\n\t\t\t\t  \t/>\n\t  \t\t\t</th>\n\t\t  \t\t<th className={this.thClassName('l')} />\n          {this.th('i', 'Pay')}\n\n          {this.th('s', <FontAwesome name='pie-chart' size='lg' />, false)}\n          {this.th('c', 'Issue')}\n          {this.th('dc', 'Date')}\n          {this.drawBalanceF() && this.props.queryType === 'c' ?  this.th('b', 'Balance', false) : null}\n          {this.th('a', 'Account')}\n          {this.th('d', 'Date')}\n\t\t  \t\t{this.drawBalanceF() && this.props.queryType === 'a' ?  this.th('b', 'Balance', false) : null}\n\n\n          {this.th('g', <FontAwesome name='paperclip' size='lg' />)}\n\t  \t\t\t{this.th('descr', 'Description')}\t\t  \t\t\t\n\t  \t\t\t<th className={this.thClassName('deleted')}>\n\t  \t\t\t\t<FontAwesome name='trash'  size='lg' />\n\t  \t\t\t</th>\n\t  \t\t\t<th>\n\t  \t\t\t</th>\n\t\t\t</tr>\t\t\t\t  \t\t\t\n\t\t</thead>)\n    }\n    \n\t  \t\t\t\t\n\trenderControls = () => {\n\t  \treturn (\n\t\t<Panel id=\"ctrls-panel\" expanded={this.state.recurring.recur} onToggle={() => {}}  >\n          <Panel.Heading >\n            <Panel.Title >\n\n\t\t\t\t\t<Button onClick={() => this.resetT()} disabled={this.pristine} bsStyle={this.pristine ? \"default\":\"primary\"}>Reset</Button>\n\t\t\t\t\t<Button onClick={() => this.preSubmitT()} disabled={this.pristine  || (this.errors != null)} bsStyle={this.pristine ? \"default\":\"primary\"}>Save</Button>\n\t\t\t\t\t<Button onClick={() => this.addR(false)}><FontAwesome name='plus' /></Button> \n\t\t\t\t\t{ this.state.values.length > 0 ?\n\t\t\t\t\t\t\t<Button onClick={() => this.addR()}>Duplicate last</Button>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\tnull\n\t\t\t\t\t}\n\n\t\t\t\t\t{/*this.pristine ? 'pristine' : 'not pristine'*/}\n\t\t\t\t\t{/*this.errors ? ' errors' : ' no errors'*/}\n\t\t\t\t\t<span style={{marginTop: \"6px\"}}>\n\t\t\t\t\t\t<Panel.Toggle componentClass=\"button\" className=\"link-button\" onClick={this.setRecurring} >\n\t\t\t\t\t\t{   (!this.state.values || this.state.values.length === 0) ?\n\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t:\n\t            \t\t\t' ' + (this.state.recurring.recur ? 'No recur' : 'Recurring...') }\n\t            \t\t</Panel.Toggle>\n            \t\t</span>\n\n            </Panel.Title>\n          </Panel.Heading>\n          <Panel.Collapse>\n            <Panel.Body >\n            <span style={{display: \"inline-flex\"}}>\n            \t<span style={{marginTop: \"6px\"}}>\n            Repeat last row &nbsp;\n            \t</span>\n\t\t\t\t<SimpleSelect\n\t\t\t\t\tstyle={{\n\t\t\t\t    \twidth: '170px'\n\t\t\t\t\t}}\n\t\t\t\t\tonValueChange={this.setRecurringSpan}\n\t\t\t\t\tplaceholder='choose span'\n\t\t\t\t\toptions = {recurSpans}\n\t\t\t\t\tvalue = {this.state.recurring.span}\n\t\t\t\t\thideResetButton = {true}\n\t\t\t\t/>\n\t\t\t\t<NumericInput \n\t\t\t\t\tid=\"recurringTimes\"\n\t\t\t\t\tmin={1} \n\t\t\t\t\tstep={1} \n\t\t\t\t\tprecision={0} \n\t\t\t\t\tmax={365} \n\t\t\t\t\tvalue={this.state.recurring.times} \n\t\t\t\t\tonChange={this.setRecurringTimes} \n\t\t\t\t/> \n\t\t\t\t<span style={{marginTop: \"6px\"}}>\n\t\t\t\t&nbsp;times.&nbsp;\n\t\t\t\t</span>\n\t\t\t\t<Button onClick={() => this.addR()}>Ok</Button>\n\t\t\t</span>\n\n            </Panel.Body>\n          </Panel.Collapse>\n        </Panel>\n\t  \t)\n\t}\n\t  \t\n\t/*renderNarrowT  = () => {\n\t\treturn(\n\t\t\tthis.sortedValues.map(p => {\n\t\t\t\treturn(\n\t\t\t\t<Table id=\"payments_table_s\" bordered condensed>\n\t\t\t\t\t<tbody>\n\t\t       \t\t\t<tr  >\n       \t\t\t\t\t  <td className=\"field_value\">{this.renderContentF('l', p.index)}</td>\n\t                      <td className=\"field_value\">\n\t                      \t<span style={{float: 'right'}}>\n\t                      \t\t<div style={{\"display\": \"inline-flex\", \"whiteSpace\": \"nowrap\", \"alignItems\": \"center\"}}>\n\t                      \t\tmark {this.renderContentF('check', p.index)}\n\t                      \t\t<FontAwesome name='remove' style={{'color': 'red'}}/>\n\t                      \t\t{this.renderDeletedContentF(p.index)} \n\t                      \t\t\n\t                      \t\t</div>\n\t                      \t</span>\n\t                      </td>\n\t\t\t            </tr>\n\t\t\t\t\t\t<tr  >\n\t                      <td className=\"field_name\"><span style={{float: 'right'}}>Date</span></td>\n\t                      <td className={this.tdClassName(p.index, 'd')}>{this.renderContentF('d', p.index)}</td>\n\t\t\t            </tr>\n\t\t\t           \t<tr  >\n\t                      <td className=\"field_name\"><span style={{float: 'right'}}>Sum</span></td>\n\t                      <td className={this.tdClassName(p.index, 'i')}>{this.renderContentF('i', p.index)}</td>\n\t\t\t            </tr>\n\t\t\t            <tr>\n\t                      <td className=\"field_name\"><span style={{float: 'right'}}>In <FontAwesome name='pie-chart' size='lg' /></span></td>\n\t                      <td className={this.tdClassName(p.index, 's')}>{this.renderContentF('s', p.index)}</td>\n\t\t\t            </tr>\n\t\t\t            <tr>\n\t                      <td className=\"field_name\"><span style={{float: 'right'}}>Issue</span></td>\n\t                      <td className={this.tdClassName(p.index, 'c')}>{this.renderContentF('c', p.index)}</td>\n\t\t\t            </tr>\n\t\t\t            <tr>\n\t                      <td className=\"field_name\"><span style={{float: 'right'}}><FontAwesome name='paperclip' size='lg' /></span></td>\n\t                      <td className={this.tdClassName(p.index, 'g')}>{this.renderContentF('g', p.index)}</td>\n\t\t\t            </tr >\t\t\t            \n\t\t\t            <tr>\n\t                      <td className=\"field_name\"><span style={{float: 'right'}}>Account</span></td>\n\t                      <td className={this.tdClassName(p.index, 'd')}>{this.renderContentF('a', p.index)}</td>\n\t\t\t            </tr>\n\t\t\t            <tr>\n\t                      <td className=\"field_name\"><span style={{float: 'right'}}>Descr</span></td>\n\t                      <td className={this.tdClassName(p.index, 'descr')}>{this.renderContentF('descr', p.index)}</td>\n\t\t\t            </tr >\n\t\t\t            \n\t\t\t          </tbody>\n\t\t            </Table>\n\t\t            )}\n\t\t\t\t)\n\t\t)\n\t}*/\n\t                      \n\trenderNormalT  = () => {\n\t\treturn(\n\t\t<Table id=\"payments_table\" striped bordered hover condensed>\n\t\t\t\t{this.renderPaymentsHeaderT()}\n\t\t\t\t<tbody>\n\t\t\t\t  \t{this.sortedValues.map((p) => this.renderPaymentR(p.index))}\n\t\t\t\t</tbody>\n\t\t</Table>\n\t\t)\n\t}\n\t\n\t renderPaymentsT = (width) => {\n\t\tthis.sortedValues = this.state.values.slice(0)\n\t\tif (this.state.sort) this.sortedValues.sort(this.sortersF())\n\t\t\n\t\treturn (\n\t\t<div>\n\t\t\t{this.renderControls()}\n\t\t\t{/*{width === 'narrow' ? this.renderNarrowT() : this.renderNormalT()}*/}\n\t\t\t{this.renderNormalT()}\n\t\t</div>\n\t\t)\n\t}\n\t\t\n\t\n\ttdClassName(index, field) {\n\t\treturn field + '_cell' + \n\t\t\t   (!this.isPersistedR(index) ? ' newRow' : '') +\n\t\t\t   (this.state.deleted[index] ? ' deleted' : '') +\n\t\t\t   (this.state.values[index].check ? ' selected' : '') +\n\t\t\t   (this.state.errors[index][field] ? ' error' : '')\n\t}\n\t\n\tdrawBalanceF() {\n\t\treturn( (this.props.queryType === 'a' || this.props.queryType === 'c') && this.pristine )\n\t}\n\t\n\ttd(index, field) {\n\t\tif( field ==='b' && !this.drawBalanceF()) return\n\t\treturn (\n\t\t<td key={index+'_'+field} className={this.tdClassName(index, field)}>\n\t\t      \t\t{this.renderContentF(field, index)}\t\n\t\t</td>)\n\t}\n\t\n\tthClassName(field) {\n\t\treturn field + '_header' + \n\t\t\t   (this.state.maskErrors[field] ? ' error' : '') + \n\t\t\t   (oneIsTrue(this.state.masked) ? ' header_tall' : '')\n\t}\n\t\n\tth(field, label = null, sort = true) {\n\t\tif(!sort) {\n\t\t\treturn(\n\t\t\t<th className={this.thClassName(field)}>\n\t  \t\t\t<div>\n\t\t  \t\t\t<span style={{display: 'flex'}} >\n\t\t  \t\t\t\t<div  style={{marginTop: 8, textDecoration: 'none'}} className=\"link-button\" >\n\t\t  \t\t\t\t\t{label !== null ? label : ''}\n\t\t  \t\t\t\t</div>\n\t\t  \t\t\t</span>\n\t\t  \t\t</div>\n\t  \t\t</th>)\n\t\t}\n\t\t\n\t\t\n\t\tvar arrow = (<FontAwesome name = {this.state.asc ? 'sort-asc' : 'sort-desc'} />)\n\n\t\tvar sortField = (<div>{this.state.sort === field ? arrow : ''}</div>)\n\t\t\n\t\tvar labelField = (\n\t\t\t\t<div  style={{marginTop: 8}}>\n  \t\t\t\t\t<button type=\"button\" className=\"link-button\" onClick={() => {this.setSortF(field)}}>\n  \t\t\t\t\t\t{label}\n  \t\t\t\t\t</button>\n\t\t  \t\t</div>)\n\t\treturn(\n\t\t<th className={this.thClassName(field)}>\n  \t\t\t<div>\n\t  \t\t\t<span style={{display: \"flex\"}}>\n            {this.renderContentF(field, -1)}\n\t  \t\t\t\t <div style={{marginTop: 8, paddingRight: 3}}>\n\t  \t\t\t\t\t{sortField}\n\t  \t\t\t\t </div>\n\t  \t\t\t\t {label !== null ? labelField : ''}\n\t  \t\t\t</span>\n\t  \t\t</div>\n\t  \t\t{this.renderContentF(field, -2)}\n\t\t</th>)\n\t}\n\t\n\t/*shouldComponentUpdate(nextProps, nextState) {\n\t\tconsole.log(\"shouldComponentUpdate :\"+ this.isPristineT())\n\t\t\n\t\treturn this.isPristineT()\n\t}*/\n\t\n\tcomponentWillReceiveProps(nextprops) {\n\t\tthis.init()\n\t\t/*this.setState(\n\t\t\t\t{...initState(this.preInitT(nextprops.initPayments), checkedSet)}\n\t\t)*/\n\n\n\t\tvar state = {...initState(this.preInitT(nextprops.initPayments), checkedSet)}\n        this.state.maskValues.d = dateFormat(nextprops.defaultDate, \"dd.mm.yyyy\")\n        this.state.maskValues.dc = dateFormat(nextprops.defaultDate, \"dd.mm.yyyy\")\n\t\tthis.setState({...state})\n\t}\n\n\tupdateCheckedSet(value, index, values = null) {\n\t\tif(index<0 || this.disabledCheckR(index)) return\n\t\tvar pos = checkedSet.map(function(e) { return e.id; }).indexOf(this.state.values[index].id);\n\t\tif(value && pos < 0) {\n\t\t\tcheckedSet.push(\n                {\n                    id : this.state.values[index].id,\n                    i : this.state.values[index].i\n                }\n\t\t\t)\n\t\t} if(!value && pos > -1) {\n\t\t\tcheckedSet.splice( pos, 1 )\n\t\t}\n\t\tif(values) values[index].check = value\n\t}\n\t\n\tgroupLoad(grp) {\n\t\tif(this.pristine && grp && grp.length > 0) this.props.groupLoad(grp)\n\t}\n\tdayLoad(d) {\n\t\tif(this.pristine && d && d.length > 0) this.props.dayLoad(toDateFi(d))\n\t}\n\tshowHistory(id) {\n\t\tthis.props.historyLoad(id)\n\t\tthis.setState({ historyShow: true })\n\t}\n\t\n\trender() {\n\t\tlet historyClose = () => this.setState({ historyShow: false });\n\t\t\n\t\tthis.pristine = this.isPristineT()\n\t\tthis.errors = this.hasErrorsT()\n\t\treturn(\n\t\t\t<div>\n\t\t        <AlertContainer ref={a => this.msg = a} {...alertOptions} />\n\t\t\t    <Media query=\"(max-width: 734px)\">\n\t\t\t          {matches =>\n\t\t\t            matches ? (\n\t\t\t              this.renderPaymentsT('narrow')\n\t\t\t            ) : (\n\t\t\t              this.renderPaymentsT('wide')\n\t\t\t            )\n\t\t\t          }\n    \t\t\t</Media>\n\n\t\t\t\t<HistoryModal\n\t\t\t\t\tshow={this.state.historyShow}\n\t\t\t\t\tonHide={historyClose}\n\t\t\t\t/>\n\n    <FormGroup>\n      <ControlLabel>Copyright</ControlLabel>\n      <FormControl.Static>jhupli@gmail.com</FormControl.Static>\n    </FormGroup>\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t   </div>\n\t\t)\n\t}\n}\n\nPaymentsEditor.defaultProps = {\n\t\tinitPayments: [],\n\t\tqueryType: null\n}\n\n\n\nconst mapStateToProps = (store) => {\n    return {\n        start: store.daterange.s,\n        end: store.daterange.e\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return({\n        update: (updates) => {\n            dispatch(update(updates))\n        },\n        paymentSelection: (payments) => {\n            dispatch(payment_selection(payments))\n        },\n        groupLoad: (g) => {\n            dispatch(group_load(g))\n        },\n        dayLoad: (d) => {\n            dispatch(day_load(d))\n        },\n        historyLoad: (id) => {\n            dispatch(history_load(id))\n        },\n        calculatorAdd: (p) => {\n            dispatch(calc_add(p))\n        },\n        categoryLoad: (c, d1, d2) => {\n            dispatch(category_load(c, d1, d2))\n        },\n        accountLoad: (a, d1, d2) => {\n            dispatch(account_load(a, d1, d2))\n        },\n\n    })\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PaymentsEditor)\n\n\n","import React from 'react';\nimport { connect } from 'react-redux'\nimport PaymentsEditor from '../paymentsEditor/PaymentsEditor'\n\nclass Payments extends React.Component {\n\tconstructor(props) {\n\t    super(props);\n\t    this.state = {\n\t        payments: [],\n\t        balances: [] //TODO: needed?, if not remove from backend too!\n\t    }\n\t}\n\t\n\trender() {\n\t\treturn(\n\t\t\t<PaymentsEditor \n\t\t\t\tinitPayments={this.props.payments} \n\t\t\t\tqueryType={this.props.queryType} \n\t\t\t\tdefaultDate={this.props.defaultDate}/>\n\t\t)\n\t}\n}\n\nPayments.defaultProps = {\n\t\tdefaultDate: new Date()\n}\n\nconst mapStateToProps = (store) => {\n    return {\n    \tqueryType: store.payments.queryType,\n        payments: store.payments.payments,\n        balances: store.payments.balances //TODO: needed?, if not remove from backend too!\n    }\n}\n\nexport default connect(mapStateToProps)(Payments)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { list_load } from '../../actions/payments'\nimport currencyFormat  from '../../util/currency'\n//import update from 'react-addons-update';\n\nimport { Badge, Button } from 'react-bootstrap';\nclass PaymentSelection extends React.Component {\n\t\n\tconstructor(props) {\n\t    super(props);\n\t    this.list = this.list.bind(this);\n\t}\n\t/*  constructor(props) {\n\t\t    super(props);\n\t\t    \n\t\t    this.state = {\n\t\t    \tselection : []\n\t\t    }\n\t\t    this.select = this.select.bind(this);\n\t  }\n\t  \n\t  \n\t  select(payments, selected) {\n\t\t  \n\t\t  if (!Array.isArray(payments)) {\n\t\t\t  payments = [payments]\n\t\t  }\n\t\t  \n\t\t  var new_selection = this.state.selection.slice(0)\n\t\t  payments.forEach( (payment) =>  {\n\t\t\t  if (selected) {\n\t\t\t\t  var index =  new_selection.indexOf(payment)\n\t\t\t\t  if (index === -1) {\n\t\t\t\t\t  new_selection.push(payment)\n\t\t\t\t  }\n\t\t\t  } else {\n\t\t\t\t  var index =  new_selection.indexOf(payment)\n\t\t\t\t  if (index !== -1) {\n\t\t\t\t\t  new_selection.splice(index,1)\n\t\t\t\t  }\n\t\t\t  }\n\t\t  })\n\t\t  this.setState({\"selection\": new_selection});\n\t  }\n\t  \n\t  componentWillUpdate(nextProps, nextState){\n\t\t  if (\n\t\t\t\t  nextProps.payment != this.props.payment ||\n\t\t\t\t  nextProps.selected != this.props.selected ) {\n\t\t\t  \t  this.select(nextProps.payment, nextProps.selected)\n\t\t  }\n\t  }*/\n\t\n\t/*componentWillReceiveProps(nextprops) {\n\t\tconsole.log(nextprops)\n\t\tif (nextprops.payment != this.props.payment) {\n\t\t\tvar index =  this.props.payments.indexOf(nextprops.payment);\n\t\t\tif (index !== -1) {\n\t\t\t\tthis.props.payments.splice( index, 1 );\n\t\t\t}\n\t\t}\n\t}*/\n\t\n\tlist() {\n\t\tthis.props.listLoad(this.props.payments.map( x => {return x.id}))\n\t}\n\t\n\trender() {\n\t    var sum = 0;\n\t    this.props.payments.forEach( x => {sum += parseFloat(x.i)})\n\t    return (\n\t     <Button onClick={this.list}><Badge>{currencyFormat(sum)}</Badge></Button>\n\t    );\n\t  }\n}\n\n\nPaymentSelection.defaultProps = {\n\t\tpayments: [],\n\t\t//payment: null\n};\n\nconst mapStateToProps = (store) => {\n\t  return {\n  \t\tpayments: store.payment.payments,\n  \t\t//payment: store.payment.payment\n\t  }\n  }\n\nfunction mapDispatchToProps(dispatch) {\n    return ({\n        listLoad: (ids) => {\n            dispatch(list_load(ids))\n        }       \n    })\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PaymentSelection)\n//export default PaymentSelection\n","import React from 'react'\nimport currencyFormat from './currency'\nimport {findInArray, findIndexInArray} from './findInArray'\nvar dateFormat = require('dateformat');\nvar FontAwesome = require('react-fontawesome');\n\nfunction accountsTooltipTable(dt, curves, constants, showdate = false) {\n\tvar a_table = {};\n\t\n\tif(curves) {\n\t\tvar d = dateFormat(dt, 'yyyymmdd') + 'T00'\n\t\tvar ix = findIndexInArray( curves[0], n => { return d === n})\n    if (ix < 0) {\n      return null\n    }\n\t\tvar trs = []\n\t\t\n\t\tcurves.forEach( (c, i) => {\n\t\t\tif( i===1 ) {\n\t\t\t\ttrs.push(\n\t\t\t\t\t\t<tr className='c3-tooltip-name--data2' key={-1}>\n\n\t\t\t                      <td className=\"name\" ><span style={{backgroundColor: 'green'}}></span></td>\n                            <td className=\"name\">\n                              <span  style = {{'color': 'black', 'marginRight':'15px'}}><FontAwesome name = 'sign-in'  style = {{'color': 'black', 'marginRight':'15px', 'marginLeft':'5px'}} /></span>\n                              Inc\n                            </td>\n\t\t\t                      <td className=\"value\" >{currencyFormat(c[ix])}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t     )\t\t\t\t\t\n\t\t\t}\n\t\t\tif( i===2 ) {\n\t\t\t\ttrs.push(\n\t\t\t\t\t\t<tr className='c3-tooltip-name--data2' key={-2}>\n\t\t\t                      <td className=\"name\"><span style={{backgroundColor: 'red'}}></span></td>\n                            <td className=\"name\">\n                              <span  style = {{'color': 'black', 'marginRight':'15px'}}><FontAwesome name = 'sign-out'  style = {{'color': 'black', 'marginRight':'15px', 'marginLeft':'5px'}} /></span>\n                              Exp\n                            </td>\n\t\t\t                      <td className=\"value\" >{currencyFormat(c[ix])}</td>\n\t\t\t            </tr>\n\t\t\t     )\t\n\t\t\t}\n\t\t\tif(i>=3 && constants && constants['acc']) {\n\t\t\t\tvar acc2 = findInArray(constants['acc'], n => { return c[0] === '' + n.value})\n        var icon = null\n        if(acc2.icon) {\n          icon = \t(<span  style = {{'color': 'black', 'marginRight':'15px'}}><FontAwesome name = {acc2.icon} style = {{'color': 'black', 'marginRight':'15px', 'marginLeft':'5px'}} /></span>)\n        }\n\t\t\t\ttrs.push(\n\t\t\t\t\t\t<tr className='c3-tooltip-name--data2' key={acc2.value}>\n                            <td className=\"name\"><span style={{backgroundColor: acc2.color}}></span></td>\n                            <td className=\"name\" style={{\n                              display: 'block',\n                              textOverflow: 'ellipsis',\n                              overflow: 'hidden',\n                              whiteSpace: 'nowrap',\n                              maxWidth: '80px'\n                            }}>\n                              {icon}\n                            {acc2.label}</td>\n\t\t\t                      <td className=\"value\" >{currencyFormat(c[ix])}</td>\n\t\t\t            </tr>\n\t\t\t     )\n\t\t\t}\n\t\t})\n\t\t\n\t\ta_table = \n\t\t\t        <table className='c3-tooltip'>\n\t\t              <tbody>\n\t\t              \t  {showdate ? <th colSpan = '3'>{dateFormat(dt, \"dd.mm.yyyy ddd\")}</th>: null}\n\t\t              \t  {trs}\n\t\t              </tbody>\n\t\t            </table>\n\t\treturn a_table\n\t}\n}\nexport {accountsTooltipTable}","const NEXTDAY = 'NEXTDAY'\nconst nextDayAction = () => (\n  { \n\ttype: NEXTDAY,\n    payload: \n    \t{\n    \t\tnextday : (new Date()).getTime() //only signal\n    \t} \n  }\n)\n\nconst PREVDAY = 'PREVDAY'\nconst prevDayAction = () => (\n  { \n\ttype: PREVDAY,\n    payload: \n    \t{\n    \t\tprevday : (new Date()).getTime() //only signal\n    \t} \n  }\n)\n\nconst TODAY = 'TODAY'\nconst todayAction = () => (\n  { \n\ttype: TODAY,\n    payload: \n    \t{\n    \t\ttoday : (new Date()).getTime() //only signal\n    \t} \n  }\n)\n\nconst next_day = () => (\n    (dispatch) => {\n    \tdispatch(nextDayAction())\n    }\n)\n\nconst prev_day = () => (\n    (dispatch) => {\n    \tdispatch(prevDayAction())\n    }\n)\n\nconst today = () => (\n    (dispatch) => {\n    \tdispatch(todayAction())\n    }\n)\n\nexport {\n\tnext_day,\n\tprev_day,\n\ttoday,\n}\n","import React from 'react' //  Main React library\nimport { Button } from 'react-bootstrap';\nimport { connect } from 'react-redux'\nimport { prev_day } from '../../actions/day'\nvar FontAwesome = require('react-fontawesome');\n\nclass ButtonL extends React.Component{\n\tconstructor(props) {\n\t    super(props)\n\t    this.prevDay = this.prevDay.bind(this)\n\t}\n\n\tprevDay() {\n\t\tthis.props.chartPrevDay()\n\t}\n\n\t render(){\n\t    return (\n\t    <div>\n\t     <Button onClick={this.prevDay}>\n\t     \t<FontAwesome name='caret-left' />\n\t     </Button>\n\t    </div>\n\t    )\n\t}\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return ({\n    chartPrevDay: () => {\n      dispatch(prev_day())\n    }\n  })\n}\n\nexport default connect(null, mapDispatchToProps)(ButtonL)\n","import React from 'react' //  Main React library\nimport { Button } from 'react-bootstrap';\nimport { connect } from 'react-redux'\nimport { next_day } from '../../actions/day'\nvar FontAwesome = require('react-fontawesome');\n\nclass ButtonR extends React.Component{\n\tconstructor(props) {\n\t    super(props)\n\t    this.nextDay = this.nextDay.bind(this)\n\t}\n\t\n\tnextDay() {\n\t\tthis.props.chartNextDay()\n\t}\n\t\n\trender(){\n\t    return (\n\t    <div>\n\t     <Button onClick={this.nextDay}>\n\t     \t<FontAwesome name='caret-right' />\n\t     </Button>\n\t    </div>\n\t    )\n\t}\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return ({\n        chartNextDay: () => {\n            dispatch(next_day())\n        }\n    })\n}\n\nexport default connect(null, mapDispatchToProps)(ButtonR)\n","import React from 'react' //  Main React library\nimport { Button } from 'react-bootstrap';\nimport { connect } from 'react-redux'\nimport { today } from '../../actions/day'\n\nclass ButtonToday extends React.Component{\n\tconstructor(props) {\n\t    super(props)\n\t    this.today = this.today.bind(this)\n\t}\n\t\n\ttoday() {\n\t\tthis.props.chartToday()\n\t}\n\t\n\trender(){\n\t    return (\n\t    <div>\n\t     <Button onClick={this.today}>\n\t     \tToday\n\t     </Button>\n\t    </div>\n\t    )\n\t}\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return ({\n        chartToday: () => {\n            dispatch(today())\n        }\n    })\n}\n\nexport default connect(null, mapDispatchToProps)(ButtonToday)\n","import React from 'react';\nimport { connect } from 'react-redux'\nimport { Panel, Table, Button } from 'react-bootstrap'\nimport CurrencyField from '../editorFields/CurrencyField'\nimport './Calculator.css'\nimport currencyFormat from '../../util/currency'\n\nvar FontAwesome = require('react-fontawesome')\n\nclass Calculator extends React.Component {\n\tconstructor(props) {\n        super(props)\n        this.changeValue = this.changeValue.bind(this)\n        this.newRow = this.newRow.bind(this)\n        this.clear = this.clear.bind(this)\n        this.state = { \n        \trows: []\n        }\n\t}\n\t\n\tchangeValue(value, field, index) {\n\t\tconsole.log('changePropertyF: '+value+' index:'+index)\n\t\tvar rows = this.state.rows.slice()\n\t\trows[index] = value\n\t\tthis.setState({\n\t\t\t'rows': rows\n\t\t})\n    }\n\t\n\tnewRow() {\n\t\tvar rows = this.state.rows.slice()\n\t\trows.push('0.00')\n\t\t\n\t\tthis.setState({\n\t\t\t'rows': rows\n\t\t})\n\t}\n\t\n\tcomponentWillReceiveProps(nextprops) {\n\t\tif(nextprops.ts !== this.props.ts) {\n\t\t\tvar rows = this.state.rows.slice()\n\t\t\trows.push(nextprops.p)\n\t\t\n\t\t\tthis.setState({\n\t\t\t\t'rows': rows\n\t\t\t})\n\t\t}\n\t}\n\t\n\tclear() {\n\t\tthis.setState({\n\t\t\t'rows': []\n\t\t})\n\t}\n\t\n\trender() {\n\t\t//if(this.state.rows.length === 0) return null\n\t\t\t\n\t\tvar sum = 0\n\t\tthis.state.rows.map( r => {\n\t\t\tsum += Number(r)\n\t\t\treturn null\n\t\t} )\n\t\treturn(\n\t\t\t<div >\n\t\t\t  <Panel  >\n\t\t\t  \t<Panel.Heading style={{padding: \"5px\", height: \"30px\", fontSize: \"15px\"}}>\n\t\t\t\t<span className=\"pull-right\" style={{display: \"inline-flex\"}}>  \t\n\t\t\t\t\t{currencyFormat(sum)}\n\t\t\t\t</span>\n\t\t\t  \t</Panel.Heading>\n\t\t\t  \t<Panel.Body style={{padding: \"2px\"}}>\n\t\t\t  \t{this.state.rows.length === 0 ? null : \n\t\t\t  \t<Table id=\"calc_table\" style={{marginBottom: '10px'}} striped hover condensed>\n\t\t\t\t<tbody style={{border: 'none'}}>\n\t\t\t\t\n\t\t\t\t{this.state.rows.map( (row, index) => {\n\t\t\t\t\treturn(\n\t\t\t\t\t<tr key={'calr'+index}>\t\t\n\t\t\t\t\t<td style={{border: 'none', padding: '0px', margin: '0px'}}>\n\t\t\t\t\t\n\t\t\t  \t\t<CurrencyField \n\t\t\t  \t\t\t\tid = 'calcf'\n\t\t\t\t\t  \t\tonValueChanged = {this.changeValue}\n\t\t\t\t\t  \t\tplaceholder = 'amount'\n\t\t\t\t\t  \t\tvalue = {row}\n\t\t\t\t\t  \t\treadOnly = {false}\n\t\t\t\t  \t\t\tfield = 'calc'\n\t\t\t\t  \t\t\tindex = {index}\n\t\t\t\t  \t\t\ttouched = {false}\n\t\t\t  \t\t/>\n\t\t\t  \t\t</td>\n\t\t\t  \t\t</tr>\n\t\t\t  \t\t\n\t\t\t\t\t)})\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t</tbody>\n\t\t\t</Table>}\n\t          <span className=\"pull-right\" style = {{\"display\": \"inline-flex\", \n              \"whiteSpace\": \"nowrap\",\n                'marginLeft':'1px'}}>\n\t\t\t\t<Button onClick={this.newRow}><FontAwesome name = 'plus' /></Button>\n\t\t\t\t{this.state.rows.length === 0 ? null : <Button style= {{fontStyle: 'italic', fontWeight: 'bold'}} onClick={this.clear}>C</Button> }\n\t\t\t\t</span>\n\t\t\t\t</Panel.Body>\n\n\t\t\t  </Panel>\n\t\t\t</div>\n\t\t\t)\n\t}\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        p: store.calculator.p,\n        ts: store.calculator.ts\n    }\n}\n\nexport default connect(mapStateToProps)(Calculator)\n","import React from 'react' //  Main React library\nimport { connect } from 'react-redux'\nimport { Panel, Button } from 'react-bootstrap';\nimport Payments from '../payments/payments'\nimport PaymentSelection from '../paymentSelection/paymentSelection'\nimport Spinner from './Spinner'\nimport { get_constants } from '../../actions/constants'\nimport { findInArray } from '../../util/findInArray'\nimport {accountsTooltipTable} from '../../util/tooltip'\nimport ButtonL from '../day/buttonL'\nimport ButtonR from '../day/buttonR'\nimport ButtonToday from '../day/buttonToday'\n\nimport { day_load } from '../../actions/payments'\nimport { category_load } from '../../actions/payments'\nimport { account_load } from '../../actions/payments'\n\nimport Calculator from '../calculator/calculator'\n\nimport {prev_in_history, next_in_history} from '../../actions/payments'\nimport Media from 'react-media';\n\n\nvar dateFormat = require('dateformat');\nvar FontAwesome = require('react-fontawesome');\n\n\nclass DetailsPanel extends React.Component{\n\tconstructor(props) {\n\tsuper(props);\n\tthis.state = {\n    \t\taccs: props.getConstants('acc'), // return null, but launches fetch\n    \t\tcats: props.getConstants('cat'), // return null, but launches fetch\n    \t\trefreshTime: null,\n        \tstart: null,\n        \tend: null,   \n       }\n\t   this.defaultDate = new Date()\n       this.prevHistory = this.prevHistory.bind(this)\n       this.nextHistory = this.nextHistory.bind(this)\n\t}\n    componentWillReceiveProps(nextProps){\n\n    \tif( nextProps.constants && nextProps.constants['acc']) {\n    \t\tthis.setState({\n\t\t    \t\taccs : nextProps.constants['acc']\n\t\t    })\n    \t}\n    \tif( nextProps.constants && nextProps.constants['cat']) {\n    \t\tthis.setState({\n\t\t    \t\taccs : nextProps.constants['cat']\n\t\t    })\n    \t}\n    \t\n    \t//range changed: load cat / acc anew\n    \tif (this.state.start == null && nextProps.start != null) {\n\t    \tthis.setState({\n\t\t    \t\tstart : nextProps.start,\n\t\t    \t\tend : nextProps.end\t\t\n\t\t    })\n\t  \t} else if (\n        this.state.start != null && nextProps.start != null\n        &&\n        (\n          this.state.start.getTime() != nextProps.start.getTime()\n          ||\n          this.state.end.getTime() != nextProps.end.getTime()\n        )\n      )\n\t  \t{\n    \t\tthis.setState({\n\t\t    \t\tstart : nextProps.start,\n\t\t    \t\tend : nextProps.end\t\t\n\t\t    })\n    \t\tswitch(this.props.queryType) {\n    \t\t\t\t\tcase 'd' : this.props.dayLoad(this.props.params.d)\n                     break;\n    \t\t\t\t\tcase 'a' :\n    \t\t\t\t\t\t\t   this.props.accountLoad(this.props.params.a, nextProps.start, nextProps.end)\n    \t\t\t\t\t\t\t   break;\n    \t\t\t\t\tcase 'c' : this.props.categoryLoad(this.props.params.c, nextProps.start, nextProps.end)\n    \t\t\t\t\t\t\t   break;\n    \t\t}\n    \t}\n    \t\n    }\n\n  prevHistory() {\n    this.props.prevInHistory()\n  }\n\n  nextHistory() {\n    this.props.nextInHistory()\n  }\n  render(){\n\n\n\t    var info = '';\n\t\tswitch(this.props.queryType) {\n\t\t\tcase 'd' : \n        info =\n          <span style = {{\"display\": \"inline-flex\",\n                          \"whiteSpace\": \"nowrap\",\n                           \"alignItems\": \"center\",\n                           'marginRight':'5px',\n                            'marginLeft':'5px'}}>\n            <ButtonL />\n              <div  style = {{'marginRight':'5px',  'marginLeft':'5px'}} >\n                {dateFormat(this.props.params.d, \"dd.mm.yyyy ddd\")}\n              </div>\n            <ButtonR />\n          </span>\n\n  \t\t\t\tthis.defaultDate = this.props.params.d\n\t\t\t\tbreak\n\t\t\tcase 'a' :\n\t\t\t\tvar acc = findInArray(this.props.constants['acc'], n => { return this.props.params.a === '' + n.value})\n\t\t\t\tinfo = \n\t\t\t\t<span >\n\t\t\t\t\t<span style = {{'marginRight':'5px', 'marginLeft':'5px'}}>\n\t\t\t\t\t\tAccount : <FontAwesome name = 'square' style = {{'color': acc.color}} />\n\t\t\t\t\t</span>\n\t    \t\t\t<span>\n\t    \t\t\t\t{acc.label}\n\t    \t\t\t</span>\n\t    \t\t</span>\n\t\t\t\t\n\t\t\t\tbreak\n\t\t\tcase 'c' : \n\t\t\t\tvar cat = findInArray(this.props.constants['cat'], n => { return this.props.params.c === '' + n.value})\n\t\t\t\tinfo = \n\t\t\t\t<span >\n\t\t\t\t\t<span style = {{'marginRight':'5px', 'marginLeft':'5px'}}>\n\t\t\t\t\t\tIssue : <FontAwesome name = 'square' style = {{'color': cat.color}} />\n\t\t\t\t\t</span>\n\t    \t\t\t<span>\n\t    \t\t\t\t{cat.label}\n\t    \t\t\t</span>\n\t    \t\t</span>\n\t    \t\t\n\t\t\t\tbreak\n\t\t\tcase 'g' :\n\t\t\t\tinfo = \n\t\t\t\t\t<span>\n\t\t\t\t\t\t&nbsp;<FontAwesome name='paperclip' size='lg' />  {this.props.params.g}\n\t\t\t\t\t</span>\n\t\t\t\tbreak\n\t\t\tcase 'l' : \n\t\t\t\tinfo =\n\t\t\t\t    <span>\n                       \t&nbsp;<FontAwesome name='check-square' size='lg' />  {this.props.params.g}\n                    </span>\n\t\t\t\tbreak\n\t\t\tdefault: info = '';\n\t\t\t\tbreak\n\t\t}\n\t\tvar a_table = null\n\t\t\n\t\tif(this.props.queryType === 'd' && this.props.curves) {\n\n\t\t\ta_table = accountsTooltipTable(this.props.params.d, this.props.curves['curves'], this.props.constants)\n\t\t\tif(a_table !== null) {\n\t\t\t\ta_table =\n\t\t\t\t<div style={{paddingBottom: \"4px\"}}>\n\t\t\t\t\t{a_table}\n\t\t\t    </div>\n\t\t\t}\n\n\t\t}\n\n    var hstackfirst = this.props.historystack != null && this.props.historystack.first != null ? this.props.historystack.first : true\n    var hstacklast = this.props.historystack != null && this.props.historystack.last != null ? this.props.historystack.last : true\n\n    var headerNormal =\n    \t\t\t\t<Panel.Heading style={{paddingTop: \"5px\", paddingBottom: \"3px\", height: \"45px\"}}>\n    \t\t\t\t  \t<div style={{\"display\": \"inline-flex\", \"whiteSpace\": \"nowrap\", \"alignItems\": \"center\", fontSize: \"23px\"}}>\n\t\t\t\t  \t\t\t<FontAwesome name='th-list' />&nbsp;<PaymentSelection /><span style={{fontSize: \"15px\"}}>{info}</span><Spinner fetching={this.props.fetching} />\n\t\t\t\t  \t\t</div>\n\t\t\t\t  \t\t<span className=\"pull-right\" style={{display: \"inline-flex\"}}>\n\t\t\t\t\t  \t\t<ButtonToday />\n\t\t\t\t\t  \t\t<Button style={{borderRadius: '20px', height: '35px', paddingTop: '2px', color: (hstackfirst ? \"gray\" : \"darkblue\")}} onClick={this.prevHistory} disabled={hstackfirst}><FontAwesome name='arrow-circle-left' size=\"2x\" color=\"blue\" /></Button>\n\t\t\t\t\t  \t\t<Button style={{borderRadius: '20px', height: '35px', paddingTop: '2px', color: (hstacklast ? \"gray\": \"darkblue\")}} disabled={hstacklast} onClick={this.nextHistory}><FontAwesome name='arrow-circle-right' size=\"2x\" color=\"blue\" /></Button>\n\t\t\t\t\t  \t</span>\n\t\t\t\t\t</Panel.Heading>\n\t\n\tvar headerNarrow =\n\t\t\t\t<Panel.Heading style={{paddingTop: \"5px\", paddingBottom: \"3px\", height: \"80px\"}}>\n\t\t\t\t  \t<div style={{\"display\": \"inline-flex\", \"whiteSpace\": \"nowrap\", \"alignItems\": \"center\", fontSize: \"23px\"}}>\n\t\t\t  \t\t\t<FontAwesome name='th-list' />&nbsp;<PaymentSelection /><span style={{fontSize: \"15px\"}}>{info}</span><PaymentSelection /><Spinner fetching={this.props.fetching} />\n\t\t\t  \t\t</div>\n\t\t\t  \t\t<span style={{display: \"inline-flex\"}}>\n\t\t\t\t  \t\t<ButtonToday />\n\t\t\t\t  \t\t<Button style={{borderRadius: '20px', height: '35px', paddingTop: '2px', color: (hstackfirst ? \"gray\" : \"darkblue\")}} onClick={this.prevHistory} disabled={hstackfirst}><FontAwesome name='arrow-circle-left' size=\"2x\" color=\"blue\" /></Button>\n\t\t\t\t  \t\t<Button style={{borderRadius: '20px', height: '35px', paddingTop: '2px', color: (hstacklast ? \"gray\": \"darkblue\")}} disabled={hstacklast} onClick={this.nextHistory}><FontAwesome name='arrow-circle-right' size=\"2x\" color=\"blue\" /></Button>\n\t\t\t\t  \t</span>\n\t\t\t\t</Panel.Heading>\n\treturn(\n\t\t\t<div>\n\t\t\t  <Panel style={{width: '100%', opacity: this.props.fetching ? 0.3 : 1 }}>\n\t\t\t  \t<Media query=\"(max-width: 432px)\">\n\t\t\t          {matches =>\n\t\t\t            matches ? (\n\t\t\t              headerNarrow\n\t\t\t            ) : (\n\t\t\t              headerNormal\n\t\t\t            )\n\t\t\t          }\n    \t\t\t</Media>\n\t\t\t  \t\n\t\t\t  \t<Panel.Body>\t\t\t\t\t\n\t\t\t  \t<table>\n\t\t\t  \t  <tbody>\n\t\t\t\t  \t  <tr>\n\t        \t\t\t<td style={{width: '100%', verticalAlign: 'top'}}>\n\t\t        \t\t\t<Payments defaultDate={this.defaultDate}/>\n\t\t        \t\t</td>\n\t\t        \t\t<td style={{width: '30px', verticalAlign: 'top', paddingLeft: '4px'}}>\n\t\t        \t\t{a_table}\n\t\t        \t\t<Calculator />\n\t\t        \t\t</td>\n\t\t        \t   </tr>\n\t        \t   </tbody>\n        \t      </table>\n\t\t\t\t</Panel.Body>\n\t\t\t  </Panel>\n\t\t\t</div>\t\t\t\t\t\n\t\t)\n\t}\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        fetching: store.payments.fetching,\n        queryType: store.payments.queryType,\n        historystack: store.payments.historystack,\n        params: store.payments.params,\n        refreshTime:  store.constants.refreshTime,\n        constants: store.constants.constants,\n        curves: store.chart.curves,\n        \n        start: store.daterange.s,\n        end: store.daterange.e,\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return({\n        getConstants: (id) => {\n        \tget_constants(id, dispatch)\n        },\n        prevInHistory: () => {\n          dispatch(prev_in_history())\n        },\n        nextInHistory: () => {\n          dispatch(next_in_history())\n        },\n        dayLoad: (d) => {\n          dispatch(day_load(d))\n        },\n        accountLoad: (a, d1, d2) => {\n            dispatch(account_load(a, d1, d2))\n        },\n        categoryLoad: (c, d1, d2) => {\n            dispatch(category_load(c, d1, d2))\n        },\n    })\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(DetailsPanel)\n\n","import React from 'react'\nimport c3 from 'c3'\nimport ReactDOMServer from 'react-dom/server';\n\nimport {addDays, daydiff} from '../../util/addDays'\nimport {accountsTooltipTable} from '../../util/tooltip'\n\nimport { chart_load } from '../../actions/chart'\nimport { day_load, account_load } from '../../actions/payments'\n//import initials from '../../util/initials'\nimport { connect } from 'react-redux'\nimport { get_constants } from '../../actions/constants'\nimport { set_daterange, set_todayrange, daterange_next_block, daterange_prev_block } from '../../actions/daterange'\n\nimport '../../../node_modules/c3/c3.min.css'\nimport './style_region.css'\n\nimport {findInArray} from '../../util/findInArray'\n\nvar d3 = require('d3');\n\nvar dateFormat = require('dateformat');\nvar selectedDayOrAccount = -1\n\nvar SELECTONHOVER = false\n\nclass Chart extends React.Component {\n    constructor(props) {\n        super(props)\n        \n        var that = this;\n        this.state = {\n    \t\t//start: initials.startDate,\n        \tstart: null,\n    \t\t//end: initials.endDate,\n        \tend: null,\n    \t\tcurves: null, //Curves\n    \t\tconstants: props.getConstants('acc'), // return null, but launches fetch\n    \t\trefreshTime: null,\n    \t\tselectedType: '',\n    \t\tnextday: null,\n    \t\tprevday: null,\n    \t\ttoday: null,\n    \t\tredraw: null\n        }\n        \n        this.boundingRect = null\n        this.hahlo_ix = null\n        this.hahlo = null\n        this.draw = this.draw.bind(this)\n        this.dateselect = this.dateselect.bind(this)\n        this.paint_dayselection = this.paint_dayselection.bind(this)\n        this.nextday = this.nextday.bind(this)\n        this.prevday = this.prevday.bind(this)\n        this.today = this.today.bind(this)\n        this.redraw = this.redraw.bind(this)\n        this.legendnames = this.legendnames.bind(this)\n        this.onmouseover = this.onmouseover.bind(this)\n        this.onmouseover_account = this.onmouseover_account.bind(this)\n        this.onmouseout = this.onmouseout.bind(this)\n        this.find_ix = this.find_ix.bind(this)\n        this.chartDatetoDate = this.chartDatetoDate.bind(this)\n        this.tooltip = this.tooltip.bind(this)\n        this.c3onRendered = this.c3onRendered.bind(this)\n        \n        this.timer = null\n        this.chart_config = {\n        \tonrendered: this.c3onRendered,\n            bindto: '#chart',\n            /*grid: {\n                y: {\n                    lines: [{\n                        value: 0\n                    }]\n                }\n            },*/\n            grid: {\n                x: {\n                    show: true\n                },\n                y: {\n                    show: true,\n                    lines: [{\n                        value: 0\n                    }]\n                }\n            },\n            tooltip: {\n                grouped: true, // Default true\n                /*format: {\n                \tvalue: function (value, ratio, id, index) { return currencyFormat(value) },\n                \tname: function (name, ratio, id, index) { return '' }\n                },*/\n                \n            \n              \tcontents: function (d, defaultTitleFormat, defaultValueFormat, color) {\n            \t  \treturn that.tooltip(d)\n                }\n            },\n            /*regions: [\n                {start:\"20180202T12\", end: \"20180203T12\"},\n                {start:2, end:4, class:'foo'}\n            ],*/\n            data: {\n                x: 'x',\n                onmouseover: function (c) { \n    \t\t        \tif (SELECTONHOVER) {\n    \t\t        \t\tthat.onmouseover(c)\n    \t\t        \t}\n    \t\t    },\n                onclick: this.onmouseover,\n                xFormat: '%Y%m%dT%H',\n                columns: null,\n                transition: {\n                    duration: 500\n                },\n                names : {},\n                colors : {},\n                types : {},\n                type: 'bar',\n                groups: [\n                    ['E', 'I']\n                ],\n                selection: {}\n            },\n            axis: {\n                x: {\n                    type: 'timeseries',\n                    tick: {\n                    \tculling: {\n                    \t\tmax: 10 // the number of tick texts will be adjusted to less than this value note: does not work?\n                    \t},\n                        //format: x => {return dateFormat(x, \"dd.mm.yyyy ddd\")}\n                    \tformat: x => {return dateFormat(x, \"dd.mm\")}\n                    }\n                }\n            },\n            legend: {\n                item: {\n                    onclick: function(a) {\n //                       console.log(\"LEGEND\")\n //                       console.log(a)\n                    \tthat.onmouseover_account(a)\n                    },\n                    onmouseover: function(a) {\n//                        console.log(a)\n                        //magic copied from caller to do the default behaviour (i.e. dim other curves and focus the selected curve) :\n                        if (!this.transiting && this.isTargetToShow(a)) {\n                            this.api.focus(a)\n                        }\n                        //magic ends here\n                        if (SELECTONHOVER) {\n                        \tthat.onmouseover_account(a)\n                        }\n                    }\n                }\n            }\n        }\n       //this.props.chartLoad(this.state.start ,this.state.end)\n    }\n    \n    tooltip(dt) {\n\t\tvar a_table = accountsTooltipTable(dt[0].x, this.props.curves['curves'], this.props.constants, true)\n\t\treturn ReactDOMServer.renderToStaticMarkup(a_table)\n    }\n    \n    onmouseout() {\n        if (this.timer) {\n            clearTimeout(this.timer)\n        }\n    }\n    \n    onmouseover(d) {\n    \t//console.log(d)\n    \tif(SELECTONHOVER) {\n\t    \t\tif(d.id === \"I\" && daydiff(d.x, this.selectedDate) !== 0) {\n\t    \t\t if (this.timer) {\n\t    \t       \tclearTimeout(this.timer)\n\t    \t    }\n\t    \t\tvar f = () => {\n\t    \t\t\tthis.dateselect(d.x)\n\t    \t\t}\n\t    \t\t\n\t    \t\t//console.log(\"FIRE:\" + d.id+ \" \" + d.x + \" \" + this.selectedDate)\n\t\t        this.timer = setTimeout(f, 300)\n\t    \t}\n    \t} else {\n    \t\tthis.dateselect(d.x)\n    \t}\n    \t/*\n    \tif (this.timer) {\n    \t       \tclearTimeout(this.timer)\n    \t    }\n\n\n       if (d.id === \"I\") { //this is because event will be trigger for all curves and we want to load day only once\n\t    \tvar f = () => {\n\t    \t\tthis.dateselect(d.x)\n\t    \t}\n\n\t           console.log(\"FIRE:\" + d.id+ \" \" + d.x)\n\t           this.timer = setTimeout(f, 300)\n       }*/\n    }\n    \n   \n    \n    chartDatetoDate(d) {\n    \tvar year = d.substring(0,4)\n    \tvar month = d.substring(4,6) - 1\n    \tvar day = d.substring(6,8)\n    \treturn new Date(year, month, day)\n    }\n\n    find_ix(d) {\n    \tif(!this.chart_config.data.columns) return null;\n\n    \tvar ix = daydiff(this.chartDatetoDate(this.chart_config.data.columns[0][1]), d)\n    \treturn ix\n    }\n\n    \n    nextday() {\n    \tif(this.selectedDate) {\n    \t\tthis.dateselect(addDays(this.selectedDate, 1))\n    \t}\n    }\n    \n    prevday() {\n    \tif(this.selectedDate) {\n    \t\tthis.dateselect(addDays(this.selectedDate, -1))\n    \t}\n    }\n\n    today() {\n\t\tvar now = new Date()\n\t\tthis.props.daterangeToday()\n\t\tthis.dateselect(now)\n    }\n    \n    redraw() {\n    \tthis.draw()\n    }\n    \n    onmouseover_account(a) {\n    \tif (a === \"I\" || a === \"E\") return;\n        //magic copied from caller to do the default behaviour (i.e. dim other curves and focus the selected curve) :\n       /* if (!this.transiting && this.isTargetToShow(a)) {\n            this.api.focus(a)\n        }*/\n        //magic ends\n    \tvar that = this\n        var f = () => {\n\n            this.props.accountLoad(a, that.props.start ,that.props.end)\n        }\n        this.timer = setTimeout(f, 300)\n    }\n    \n    dateselect(d) {\n    \t\t\tthis.selectedDate = d\n    \t\t\t//CHG-13this.legendnames(this.props.curves, this.props.constants)\n            \t//vhn vois kyl kauniimmaks laittaa:\n    \t\t\tvar ix = this.find_ix(d)\n    \t\t\tif(null !== ix && ix === -1)  {\n    \t\t\t\t//console.log(\"vasemmalta yli \"+ix)\n    \t\t\t\tthis.props.daterangePrevBlock()\n    \t\t\t\tix = this.chart_config.data.columns[0].length - 2\n    \t\t\t\t//console.log(\"vasemmalta yli \"+ix)\n    \t\t\t}\n    \t\t\tif(null != ix && ix === this.chart_config.data.columns[0].length - 1)  {\n    \t\t\t\t//console.log(\"oikealta yli \"+ix)\n    \t\t\t\tthis.props.daterangeNextBlock()\n    \t\t\t\tix = 0\n    \t\t\t}\n\n                this.props.dayLoad(d, ix)\n                this.paint_dayselection()\n\n    }\n   \n    paint_dayselection() {\n\t        if(this.hahlo_ix != null) {\n\t          //console.log(\"gray repaint:\"+dateFormat(this.selectedDate, \"yyyymmdd\"))\n    \t\t\t//dayselection : changing the initial\n    \t\t\tvar alku = dateFormat(addDays(this.selectedDate,-1), \"yyyymmdd\") + \"T20\"\n    \t\t\tvar loppu = dateFormat(this.selectedDate, \"yyyymmdd\") + \"T4\"\n    \t\t\tthis.chart_config.regions[this.hahlo_ix].start = alku\n    \t\t\tthis.chart_config.regions[this.hahlo_ix].end = loppu\n    \t\t\tc3.generate(this.chart_config)\n\t\t\t}\n    }\n    \n    render() {\n    \t//var width = document.getElementById('chart').getBoundingClientRect().width\n    \t//console.log(\"render()\")\n        return ( \n        \t<div id = \"chart\" onMouseOut = {() => this.onmouseout()} />\n        )\n   }\n \n    draw() {\n    \tthis.boundingRect = document.getElementById('chart').getBoundingClientRect()\n    \t//console.log(\"draw() width = \" + this.boundingRect)\n    \t\n    \tif(!this.chart_config.data.columns) {\n    \t\t//console.log(\"draw() nothing yet\")\n    \t\treturn //data not yet there\n    \t}\n    \t/* red / white backgrounds here*/\n       if(!this.chart_config.regions) {\n\n    \t   //init with white\n    \t   this.chart_config.regions = []\n    \t   for(var x=1; x<(this.chart_config.data.columns[0].length); x++) { //x date \n    \t\t   \n    \t\t   for(var y=3; y<this.chart_config.data.columns.length; y++) { //y accounts start with 3 \n    \t\t\t\tvar alku = dateFormat(addDays(this.chartDatetoDate(this.chart_config.data.columns[0][x]),-1), \"yyyymmdd\") + \"T12\"\n\n    \t\t\t\tvar loppu = dateFormat(this.chartDatetoDate(this.chart_config.data.columns[0][x]), \"yyyymmdd\") + \"T12\"\n    \t\t\t\tthis.chart_config.regions.push(\n\t                    {\"start\": alku, \"end\": loppu, class: (!this.chart_config.data.accs[y-3].credit && this.chart_config.data.columns[y][x] < 0) ? \"red\" : \"white\"}\n\t                 )\t\t\n    \t\t   }\n    \t   }\n    \t   if(this.selectedDate) {\n    \t   //initial dayselection as last in array:\n    \t\t   //console.log(\"gray:\"+dateFormat(this.selectedDate, \"yyyymmdd\"))\n\t    \t   this.hahlo_ix = this.chart_config.regions.length\n\t    \t   var alku1 = dateFormat(addDays(this.selectedDate,-1), \"yyyymmdd\") + \"T20\"\n\t    \t   var loppu1 = dateFormat(this.selectedDate, \"yyyymmdd\") + \"T4\"\n\t    \t   this.chart_config.regions.push( \n\t\t            {\"start\": alku1, \"end\": loppu1, class: \"gray\"}\n\t\t       )\n    \t   }\n       }\n        c3.generate(this.chart_config)\n   }\n   \n   c3onRendered() {\n    \t//console.log(\"c3onRendered() width = \" + this.boundingRect)\n    \tthis.chart_config.data.columns[0].forEach((el, i) => {\n    \t\tif(i>0) {\n    \t\t\tvar svg = d3.selectAll('#chart').select('.c3-event-rect-'+(i-1))\n    \t\t\tvar dd=this.chartDatetoDate(el)\n    \t\t\tsvg[0][0].onclick = () => {\n    \t\t\t\tthis.dateselect(dd)\n    \t\t\t}\n    \t\t}\n    \t})\n    }\n    \n    componentWillReceiveProps(nextProps) {\n    \t//var width = document.getElementById('chart').getBoundingClientRect().width\n    \t//console.log(\"componentWillReceiveProps() width = \" + width)\n    \tif(nextProps.nextday !== this.props.nextday) {\n    \t\t//console.log('N')\n    \t\tthis.nextday()\n    \t}\n    \tif(nextProps.prevday !== this.props.prevday) {\n    \t\t//console.log('P')\n    \t\tthis.prevday()\n    \t}\n    \tif(nextProps.today !== this.props.today) {\n    \t\t//console.log('T')\n    \t\tthis.today()\n    \t}\n    \tif(nextProps.redraw !== this.props.redraw) {\n    \t\t//console.log('RD')\n    \t\tthis.redraw()\n    \t}\n    \t\n    \tif(nextProps.selectedType !== this.props.selectedType) {\n    \t\t//console.log('TY')\n    \t\tselectedDayOrAccount = -1 //reset\n    \t}\n    \t\n    \tif(nextProps.selectedType === 'd') {\n    \t\tthis.selectedDate = nextProps.params.d\n    \t\tthis.paint_dayselection()\n    \t}\n    \t\t\n    \t\n    \t\n    \tif( nextProps.constants && nextProps.constants[this.props.constants_id]) {\n    \t\t//console.log('C')\n    \t\tvar constants = nextProps.constants[this.props.constants_id]\n    \t\tvar selectedItem = findInArray(constants, c => { return c.value === nextProps.selectedValue })\n\t    \tvar validConstants = constants.filter(  c => { return (c.valid || c === selectedItem) })\n\t    \tthis.setState({\n\t\t    \t\tselectedValue : selectedItem,\n\t\t    \t\t'items' : validConstants\t\t\n\t\t    })\n    \t}\n    \t\n        if (\n        \t// eslint-disable-next-line\t\n        \t\t!(this.state.start == nextProps.start) //note 'undefined == null' yields true but 'undefined !== null' as well\n        \t|| \n        \t// eslint-disable-next-line\n        \t\t!(this.state.end == nextProps.end)) { \n        \t//console.log('R')\n        \t//selected date span changed?\n        \tthis.setState({\n\t\t    \t\tstart : nextProps.start,\n\t\t    \t\tend : nextProps.end\t\t\n\t\t    })\n            this.props.chartLoad(nextProps.start, nextProps.end)\n        } else if (nextProps.curves !== this.props.curves || nextProps.refreshTime !== this.props.refreshTime) {\n        \t//console.log('CU')\n        \t//TODO ji thn laita vrit ja nimet tilit on jo account#ssa\n        \tthis.chart_config.data.names = {}\n        \tthis.chart_config.data.types = {}\n        \tthis.chart_config.data.colors = {}\n        \tif(nextProps.curves) {\n        \t    this.chart_config.data.columns = nextProps.curves['curves'] //curves updated\n        \t    this.chart_config.data.accs = nextProps.curves['accs']\n        \t    this.chart_config.regions = null\n        \t    this.legendnames(nextProps.curves)\n        \t}\n        \t//this.chart_config.data.names['I'] ='Income'\n        \t//this.chart_config.data.colors['I'] ='green'\n        \t//this.chart_config.data.names['E'] ='Exp'\n        \t//this.chart_config.data.colors['E'] ='red'\n//        \tvar max = 0, min = 0\n        \t/*if (nextProps.curves && nextProps.constants) {\n        \t\t//console.log(\"curves 1\")\n        \t\tvar f = n =>  { return key === '' + n.value}\n\t        \tfor(var i=3; i<nextProps.curves.length; i++) {\n\t        \t\tvar key = nextProps.curves[i][0]\n\t        \t\tvar acc = findInArray(nextProps.constants['acc'], f)\n\t        \t\tif(null !== acc) {\n\t        \t\t    this.chart_config.data.colors[key] = acc.color\n\t        \t\t}\n\t        \t\tthis.chart_config.data.types[key] = 'spline'\n\t        \t}\n\t            this.draw()\n        \t}*/\n        } \n    }\n    \n    \n    legendnames() {\n    \t//heihei ihan karmeen nkst koodia\n\n    \tthis.chart_config.data.names['I'] ='Income'\n    \tthis.chart_config.data.names['E'] ='Exp'\n        this.chart_config.data.colors['I'] ='green'\n        this.chart_config.data.colors['E'] ='red'\n\n        for(var i=0; i<this.chart_config.data.accs.length; i++) {\n            var a = this.chart_config.data.accs[i]\n            this.chart_config.data.names[a.id] = a.descr\n            this.chart_config.data.colors[a.id] = a.color\n            this.chart_config.data.types[a.id] = 'spline'\n        }\n        this.draw()\n\n    } \n}\n\nconst mapStateToProps = (store) => {\n    return {\n        start: store.daterange.s,\n        end: store.daterange.e,\n        curves: store.chart.curves,\n        nextday: store.day.nextday,\n        prevday: store.day.prevday,\n        today: store.day.today,\n        redraw: store.chart.redraw,\n        refreshTime:  store.constants.refreshTime,\n        constants: store.constants.constants,\n        selectedType: store.payments.queryType,\n        params: store.payments.params,\n    }\n}\n\n\nfunction mapDispatchToProps(dispatch) {\n    return ({\n        chartLoad: (s, e) => {\n        \tselectedDayOrAccount = -1; //reset\n            dispatch(chart_load(s, e))\n        },\n        dayLoad: (d, index) => {\n        \tif (index === selectedDayOrAccount) return;\n        \tselectedDayOrAccount = index;\n            dispatch(day_load(d))\n        },\n        accountLoad: (a, d1, d2) => {\n        \tif (a === selectedDayOrAccount) return;\n        \tselectedDayOrAccount = a;\n            dispatch(account_load(a, d1, d2))\n        },\n        getConstants: (id) => {\n        \tget_constants(id, dispatch)\n        },\n        daterangeToday: () => {\n            dispatch(set_todayrange())\n        },\n        daterangeNextBlock: () => {\n            dispatch(daterange_next_block())\n        },\n        daterangePrevBlock: () => {\n            dispatch(daterange_prev_block())\n        },\n        setDateRange: (start, end) => {\n            dispatch(set_daterange(start, end))\n        }\n    })\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Chart)","import React from 'react' //  Main React library\nimport { Panel } from 'react-bootstrap';\n\nimport Chart from '../chart/chart'\n//import Buttons from '../chart/buttons'\n//import Spinner from './Spinner'\nimport { connect } from 'react-redux'\n//var dateFormat = require('dateformat');\n\n//var FontAwesome = require('react-fontawesome');\n\nclass ChartPanel extends React.Component{\n\trender(){\n//\t\tvar dates = \" \" + dateFormat(this.props.start, \"dd.mm.yyyy ddd\") + \" - \" + dateFormat(this.props.end, \"dd.mm.yyyy ddd\")\n\t\treturn(\n\t\t<div>\n\t\t\t<Panel style={{ opacity: this.props.fetching ? 0.3 : 1 }}>\n\t\t\t{/*\n\t\t\t  \t<Panel.Heading style={{paddingTop: \"6px\", paddingBottom: \"3px\", height: \"45px\", fontSize: \"23px\"}}>\n\t\t\t  \t\t<FontAwesome name='bar-chart' /> <span style={{fontSize: \"15px\"}}>{dates}</span><Spinner fetching={this.props.fetching} />\n\t\t\t  \t\t\t<span className=\"pull-right\">\n\t\t\t\t  \t\t\t<Buttons />\n\t\t\t\t  \t    </span>\n\t\t\t  \t</Panel.Heading> */}\n\t\t\t  \t<Panel.Body>\n\t\t\t  \t\t<Chart />\n\t\t\t\t</Panel.Body>\n\t\t\t  </Panel>\n\t\t</div>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        fetching: store.chart.fetching,\n        start: store.daterange.s,\n        end: store.daterange.e\n    }\n}\n\nexport default connect(mapStateToProps)(ChartPanel)","import {addDays} from './addDays'\n\nconst initials = {\n\t\tstartDate: addDays(new Date(),- 10),\n\t\tendDate: addDays(new Date(), 10)\n}\n\nexport default initials","import React from 'react'\nimport c3 from 'c3'\n\nimport '../../../node_modules/c3/c3.min.css'\n\nimport { pie_load } from '../../actions/pie'\nimport { category_load } from '../../actions/payments'\nimport { connect } from 'react-redux'\nimport currencyFormat from '../../util/currency'\nimport initials from '../../util/initials'\nimport { get_constants } from '../../actions/constants'\n\nimport { findInArray } from '../../util/findInArray'\n\nimport Media from 'react-media';\n\nimport './pie.css'\n\n//require('default-passive-events')\n\nvar d3 = require('d3');\n\n\n    \nvar SELECTONHOVER = false\nvar names = {}\n\nclass Pie extends React.Component {\n\n    constructor(props) {\n        super(props)\n        var that = this;\n        this.state = {\n        \tconstants: props.getConstants('cat'), // return null, but launches fetch\n    \t\trefreshTime: null,\n    \t\tredraw: null\n        }\n\n        this.draw = this.draw.bind(this)\n        this.redraw = this.redraw.bind(this)\n        this.onmouseover = this.onmouseover.bind(this)\n        this.onmouseout = this.onmouseout.bind(this)\n        this.c3onRendered = this.c3onRendered.bind(this)\n        this.d3onMouseI = this.d3onMouseI.bind(this)\n        this.d3onMouseOutI = this.d3onMouseOutI.bind(this)\n        this.d3onMouseE = this.d3onMouseE.bind(this)\n        this.d3onMouseOutE = this.d3onMouseOutE.bind(this)\n        this.getBoudingRect = this.getBoudingRect.bind(this)\n        \n        this.timer = null\n        this.chart_config = {\n        \t\tonrendered: this.c3onRendered,\n        \t\tsum_i: 0,\n        \t\tsum_e: 0,\n    \t\t    bindto: '#pie',\n    \t\t    tooltip: {\n    \t\t        format: {\n    \t\t            //TODO make a util function to format a sum:\n    \t\t            value: function (value, ratio, id) {\n    \t\t            \t/*if (id.startsWith(\"p\")) {*/\n    \t\t            \tif (id.substr(0,1) === \"p\") {\n    \t\t            \t\treturn value + \"  (\" + currencyFormat(value*100/that.chart_config.sum_i) + \"%)\"\n    \t\t            \t}else{\n    \t\t            \t\treturn -value + \"  (\" + currencyFormat(-value*100/that.chart_config.sum_e) + \"%)\";\n    \t\t        \t\t    \n    \t\t            \t}\n    \t\t            }\n    \t\t        }\n    \t\t    },\n    \t\t    data: {\n                    names: {},\n    \t\t        columns: [],\n    \t\t        colors: {},\n    \t\t        order: null,\n    \t\t        onclick: function (c) { \n    \t\t        \tthat.onmouseover(c.id)\n    \t\t        },\n    \t\t        onmouseover: function (c) { \n    \t\t        \tif (SELECTONHOVER) {\n    \t\t        \t\tthat.onmouseover(c.id)\n    \t\t        \t}\n    \t\t        }, \t\t        \n    \t\t        type: 'pie'\n    \t\t    },\n    \t\t    pie: {\n    \t\t        label: {\n    \t\t            format: function (value, ratio, id) {\n    \t\t            \t//console.log(value)\n    \t\t            \t//console.log(ratio)\n    \t\t            \t//console.log(id)\n    \t\t            \t//console.log(names[id])\n    \t\t                return names[id];\n    \t\t            }\n    \t\t        }\n    \t\t    },\n                legend: {\n                \tshow: true,\n                    item: {\n                        onclick: function(c) {\n                        \tthat.onmouseover(c)\n                        },\n                        onmouseover: function(c) {\n                            //magic copied from caller to do the default behaviour (i.e. dim other curves and focus the selected curve) :\n                            if (!this.transiting && this.isTargetToShow(c)) {\n                                this.api.focus(c)\n                            }\n                            //magic ends here\n                            if (SELECTONHOVER) {\n                            \tthat.onmouseover(c)\n                            }\n                        }\n                    }\n                }\n    \t\t}\n    }\n\n    onmouseout() {\n        if (this.timer) {\n            clearTimeout(this.timer)\n        }\n    }\n\n    onmouseover(c) {\n            var f = () => {\n                this.props.categoryLoad(c.substring(1), this.props.start, this.props.end)\n            }\n            this.timer = setTimeout(f, 300)\n    }\n    \n    getBoudingRect() {\n    \tvar br = document.getElementById(this.chart_config.bindto.substring(1)).getBoundingClientRect()\n    \tvar doc = document.documentElement\n    \tvar left = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0)\n    \tvar top = (window.pageYOffset || doc.scrollTop)  - (doc.clientTop || 0)\n    \treturn {\n    \t\t\"left\": left + br.left,\n    \t\t\"top\" : top + br.top\n    \t}\n    \t\n    }\n    d3onMouseI() {\n    \tvar br = this.getBoudingRect()\n    \td3.select('#incomes')\n    \t.style(\n    \t\t\t{\"display\": \"inline\", \"left\": -60 + br.left + \"px\", top: 150 + br.top + \"px\"}\n    \t)\n    }\n    \n    d3onMouseOutI() {\n    \td3.select('#incomes')\n    \t.style(\n    \t\t\t{\"display\": \"none\"}\n    \t)\n    }\n    \n    d3onMouseE() {\n    \tvar br = this.getBoudingRect()\n    \td3.select('#expences')\n    \t.style(\n    \t\t\t{\"display\": \"inline\", \"left\": br.left + 'px', top: 150 + br.top + 'px'}\n    \t)\n    }\n    \n    d3onMouseOutE() {\n    \td3.select('#expences')\n    \t.style(\n    \t\t\t{\"display\": \"none\"}\n    \t)\n    }\n    \n    c3onRendered() {\n    \t\n    \tvar INNER_ARC = 0\n    \tvar OUTER_ARC = this.lessThan700 ? this.lessThan450 ? 8 : 20 : 40\n   \n    \tvar total  = this.chart_config.sum_i - this.chart_config.sum_e\n    \tif( total === 0 ) return\n    \tvar middlepoint = (-this.chart_config.sum_e/total)*2*Math.PI\n\n\tvar arc_minus = d3.svg.arc()\n\t.innerRadius(INNER_ARC)\n\t.outerRadius(OUTER_ARC)\n\t.startAngle(0)\n\t.endAngle(middlepoint);\n\t\n\t var arc_plus = d3.svg.arc()\n\t.innerRadius(INNER_ARC)\n\t.outerRadius(OUTER_ARC)\n\t.startAngle(middlepoint)\n\t.endAngle(2*Math.PI);\n\t \n\t var arc_space = d3.svg.arc()\n\t.innerRadius(OUTER_ARC)\n\t.outerRadius(OUTER_ARC + 1)\n\t.startAngle(0)\n\t.endAngle(2*Math.PI);\n\t \n    var svg = d3.selectAll(\"#pie\").select(\".c3-chart-arcs\")\n    \t\n    svg\n    .append(\"svg:path\")\n    .attr(\"id\", \"arc-minus\")\n    .style(\"stroke-width\", 0)\n    .attr(\"d\", arc_minus)\n    .on({\n        \"click\": this.d3onMouseE,\n        \"mouseover\": this.d3onMouseE,\n        \"mouseout\": this.d3onMouseOutE\t\n    })\n \n     svg\n    .append(\"svg:path\")\n    .attr(\"id\", \"arc-plus\")\n    .style(\"stroke-width\", 0)\n    .attr(\"d\", arc_plus)    \n    .on({\n        \"click\": this.d3onMouseI,\n        \"mouseover\": this.d3onMouseI,\n        \"mouseout\": this.d3onMouseOutI\n    })\n    \n    svg\n    .append(\"svg:path\")\n    .attr(\"id\", \"arc-space\")\n    .style(\"stroke-width\", 0)\n    .attr(\"d\", arc_space)    \n\n    }\n    \n    draw() {\n         c3.generate(this.chart_config)\n    }\n\n    redraw() {\n    \tthis.draw()\n    }\n    \n    componentWillReceiveProps(nextProps) {\n        if (this.props.start !== nextProps.start || this.props.end !== nextProps.end) { //selected date span changed?\n            this.props.pieLoad(nextProps.start, nextProps.end)\n        } else {\n\n        \tvar colors = {}\n        \tvar columns = []\n        \tvar sum_i = 0\n        \tvar sum_e = 0\n        \tvar id = null\n        \t\n\n        \t\n        \t\n        \tif (nextProps.slices && nextProps.constants && nextProps.constants['cat']) {\n\t        \tnextProps.slices.forEach(\n\t        \t\t(s) => {\n\t        \t\t\tvar cat = findInArray(nextProps.constants['cat'], n => { return s.c === n.value})\n\t        \t\t\t/* var cat = nextProps.constants['cat'].find( \n\t\t        \t\t\tn => { return s.c == n.value}\n\t        \t\t\t )*/\n\t        \t\t\tif (s.sl<0) {\n\t        \t\t\t\tsum_e += s.sl\n\t        \t\t\t\tid = 'n' + s.c\n\t        \t\t\t\t//names[id] = 'nimi' + s.c\n\t        \t\t\t\tnames[id] = cat.label\n\t        \t\t\t\t//colors[id] = 'red'\n\t        \t\t\t\tcolors[id] = cat.color\n\t        \t\t\t\tcolumns.push([id, -s.sl])\n\t        \t\t\t}else{\n\t        \t\t\t\tsum_i += s.sl\n\t        \t\t\t\tid = 'p' + s.c\n\t        \t\t\t\t//names[id] = 'nimi' + s.c\n\t        \t\t\t\tnames[id] = cat.label\n\t        \t\t\t\t//colors[id] = 'green'\n\t        \t\t\t\tcolors[id] = cat.color\n\t        \t\t\t\tcolumns.push([id, s.sl])\n\t        \t\t\t}\n\t        \t\t}\n\t        \t)\n\t        \tthis.chart_config.sum_i = sum_i\n\t        \tthis.chart_config.sum_e = sum_e\n\t            this.chart_config.data.names = names\n\t            this.chart_config.data.colors = colors\n\t            this.chart_config.data.columns = columns\n\t            this.draw()\n        \t}\n        }\n    }\n\n    render() {\n        return (\n        \t<div>\n        \t\n    \t        <Media query=\"(max-width: 699px)\">\n    \t\t\t\t{matches => this.lessThan700 = matches }\n    \t\t\t</Media>\n     \t        <Media query=\"(max-width: 449px)\">\n    \t\t\t\t{matches => this.lessThan450 = matches }\n    \t\t\t</Media>\n    \t\t\t\n        \t<div id = \"pie\" onMouseOut = {() => this.onmouseout()} />\n        \t<table id=\"incomes\" className=\"c3-tooltip\" style={{display: \"none\", position: \"absolute\"}}>\n        \t<tbody>\n        \t\t<tr>\n        \t\t\t<td >\n        \t\t\t\t<span style={{backgroundColor : \"green\"}} /> Income total\n        \t\t\t</td>\n        \t\t\t<td >\n        \t\t\t\t{currencyFormat(this.chart_config.sum_i)}\n        \t\t\t</td>\n        \t\t</tr>\n        \t</tbody>\n        \t</table>\n        \t<table id=\"expences\" className=\"c3-tooltip\" style={{display: \"none\", position: \"absolute\"}}>\n        \t<tbody>\n        \t\t<tr>\n        \t\t\t<td >\n        \t\t\t\t<span style={{backgroundColor : \"red\"}} /> Expences total\n        \t\t\t</td>\n        \t\t\t<td >\n        \t\t\t\t{currencyFormat(this.chart_config.sum_e)}\n        \t\t\t</td>\n        \t\t</tr>\n        \t</tbody>\n        \t</table>        \t\n        \t</div>\n\n        )\n    }\n}\n\nPie.defaultProps = {\n    \tstart: initials.startDate,\n    \tend: initials.endDate,\n        slices: null\n}\nconst mapStateToProps = (store) => {\n    return {\n        start: store.daterange.s,\n        end: store.daterange.e,\n        slices: store.pie.slices,\n        refreshTime:  store.constants.refreshTime,\n        redraw: store.pie.redraw,\n        constants: store.constants.constants\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return ({\n        pieLoad: (s, e) => {\n            dispatch(pie_load(s, e))\n        },\n        categoryLoad: (c, d1, d2) => {\n            dispatch(category_load(c, d1, d2))\n        },\n        getConstants: (id) => {\n        \tget_constants(id, dispatch)\n        }       \n    })\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Pie)","import React from 'react' //  Main React library\nimport { Panel } from 'react-bootstrap';\nimport Pie from '../pie/pie'\n//import Spinner from './Spinner'\nimport { connect } from 'react-redux'\n//var dateFormat = require('dateformat');\n\n//var FontAwesome = require('react-fontawesome');\n\nclass PiePanel extends React.Component{\n\trender(){\n\t\t//var dates = \" \" + dateFormat(this.props.start, \"dd.mm.yyyy ddd\") + \" - \" + dateFormat(this.props.end, \"dd.mm.yyyy ddd\")\n\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t<Panel style={{ opacity: this.props.fetching ? 0.3 : 1 }} >\n\t\t\t\t{/*\n\t\t\t  \t<Panel.Heading style={{paddingTop: \"6px\", paddingBottom: \"3px\", height: \"45px\", fontSize: \"23px\"}}><FontAwesome name='pie-chart' /> <span style={{fontSize: \"15px\"}}>{dates}</span><Spinner fetching={this.props.fetching} />\n\t\t\t  \t</Panel.Heading> */}\n\t\t\t  \t\t<Panel.Body>\t\t\t\t\t\n\t\t\t  \t\t<Pie />\n\t\t\t\t</Panel.Body>\n\t\t\t  </Panel>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        fetching: store.pie.fetching,\n        start: store.daterange.s,\n        end: store.daterange.e\n    }\n}\n\nexport default connect(mapStateToProps)(PiePanel)\n","import {load as loadcategories} from './categories'\nimport {load as loadaccounts} from './accounts'\nimport {load as loadauditlog} from './auditlog'\n\n\nconst SHOW_VIEW = 'SHOW_VIEW'\n\t\n\nconst naviShowViewRequestAction = (view) => ({\n    type: SHOW_VIEW,\n    payload: {\n    \t\"view\": view\n    }\n})\n\nconst show_view = (view) => (\n    (dispatch: Redux.Dispatch) => {\n    \tif(view === 'c') {\n    \t\tdispatch(loadcategories())\n    \t}\n    \tif(view === 'a') {\n    \t\tdispatch(loadaccounts())\n    \t}\n    \tif(view === 'l') {\n    \t\tdispatch(loadauditlog())\n    \t}\n        dispatch(naviShowViewRequestAction(view))\n    }\n )\n\nexport {\n    show_view\n}","import React from 'react' //  Main React library\n//import { Grid, Row, Col, Tabs, Tab} from 'react-bootstrap';\n\nimport Categories from '../categories/categories'\nimport Accounts from '../accounts/accounts'\nimport Logs from '../logs/logs'\n\nimport RangePanel from './RangePanel'\nimport DetailsPanel from './DetailsPanel'\nimport ChartPanel from './ChartPanel'\nimport PiePanel from './PiePanel'\n\nimport { connect } from 'react-redux'\nimport { show_view } from '../../actions/navi'\nimport { chart_redraw } from '../../actions/chart'\nimport { pie_redraw } from '../../actions/pie'\nimport { minibars_redraw } from '../../actions/minibars'\n/*\n<Tabs defaultActiveKey={2} id=\"uncontrolled-tab-example\">\n  <Tab eventKey={1} title=\"Tab 1\">\n    Tab 1 content\n  </Tab>\n  <Tab eventKey={2} title=\"Tab 2\">\n    Tab 2 content\n  </Tab>\n  <Tab eventKey={3} title=\"Tab 3\" disabled>\n    Tab 3 content\n  </Tab>\n</Tabs>;\n*/\n\nconst Acc = () => (\n\t\t\t\t\t<Accounts />\n)\n\nconst Cat = () => (\n\n\t\t\t\t\t<Categories />\n)\n\nconst Log = () => (\n\t\t\t\t\t<Logs />\n)\n\nclass Content extends React.Component {\n\t/*constructor(props) {\n\t\tsuper(props)\n\t\tthis.handleSelect = this.handleSelect.bind(this)\n\t}*/\n\t\n\t/*handleSelect(key) {\n\t\tif(key === 1) {\n\t\t\t\tvar that = this\n\t\t\t\tvar f = () => {\n\t    \t\t\tthat.props.minibarsRedraw()\n\t    \t\t}\n\t\t        setTimeout(f, 0)\n\t\t}\n\t\tif(key === 2) {\n\t\t\t\tvar that = this\n\t\t\t\tvar f = () => {\n\t    \t\t\tthat.props.chartRedraw()\n\t    \t\t\tthat.props.pieRedraw()\n\t    \t\t}\n\t\t        setTimeout(f, 0)\n\t\t}\n\t}*/\n   \n\tcomponentWillReceiveProps(nextProps) {\n\t\tif(this.props.view !== 'main' && nextProps.view === 'main') {\n\t\t\t//refresh c3-views (bug in lib)\n\t\t\tthis.props.minibarsRedraw()\n\t\t\tthis.props.chartRedraw()\n\t    \tthis.props.pieRedraw()\n\t\t}\n\t}\n\trender() {\n\t\tvar main = \n\t\t\t<div>\n\t\t\t\t<div style={{width: '100%'}}>\n\t\t\t\t\t<RangePanel />\n\t\t\t\t</div>\n\t\t\t\t<div style={{width: '100%'}}>\n\t\t\t\t\t<div style={{width: '100%', \"display\": \"inline-flex\", \"whiteSpace\": \"nowrap\"}}>\n            <div style={{width: '25%', paddingLeft: '2px'}}>\n              <PiePanel />\n            </div>\n\t\t\t\t\t\t<div style={{width: '75%', paddingRight: '2px'}}>\n\t\t\t\t\t\t\t<ChartPanel />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<DetailsPanel />\n\t\t\t</div>\n\t\t\t\n\t\treturn(\n\t\t\t\t<div style={{padding: '15px'}}> \n\t\t\t\t\t<div style={{display : (this.props.view === 'main') ? '' : 'none'}}>\n\t\t\t\t\t\t\t{main}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div style={{display : (this.props.view === 'a') ? '' : 'none'}}>\n\t\t\t\t\t\t\t<Acc />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div style={{display : (this.props.view === 'c') ? '' : 'none'}}>\n\t\t\t\t\t\t\t<Cat /> \n\t\t\t\t\t</div>\n\t\t\t\t\t<div style={{display : (this.props.view === 'l') ? '' : 'none'}}>\n\t\t\t\t\t\t\t<Log /> \n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t)\n\t}\n}\n\nContent.defaultProps = {\n\t\tview: 'main'\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        view: store.navi.view\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return ({\n        showView: (view) => {\n            dispatch(show_view(view))\n        },\n        chartRedraw: () => {\n            dispatch(chart_redraw())\n        },\n        pieRedraw: () => {\n            dispatch(pie_redraw())\n        },\n        minibarsRedraw: () => {\n            dispatch(minibars_redraw())\n        }\n    })\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(Content)\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n","import React from 'react'\nimport { Alert, Button } from 'react-bootstrap'\nimport { connect } from 'react-redux'\n\nclass ErrorMessage extends React.Component {\n    constructor(props) {\n        super(props)\n\n        this.dismiss = this.dismiss.bind(this)\n        this.show = this.show.bind(this)\n\n        this.state = {\n            show: false\n        }\n    }\n\n    dismiss() {\n        this.setState({ show: false })\n    }\n\n    show() {\n        this.setState({ show: true })\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.when !== this.props.when) {\n            this.show()\n        }\n    }\n\n    render() {\n\n        if (!this.state.show) return null;\n\n        const { status, msg } = this.props\n        return (\n\n       <Alert bsStyle=\"danger\" onDismiss={this.dismiss}>\n\t\t    <h4>We've got an error!</h4>\n\t\t    Server returned:\n\t\t    <ul>\n\t\t        <li>Status: {status}</li>\n\t\t        <li>Message: {msg}</li>\n\t\t    </ul>\n\t\t    <hr />\n\t\t    <p>\n\t        \t<Button onClick={this.dismiss}>Close</Button>\n\t        </p>\n\t\t</Alert>\n\t\t)\n    }\n\n}\n\nErrorMessage.defaultProps = {\n    when: 0\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        status: store.errorMessage.status,\n        msg: store.errorMessage.msg,\n        when: store.errorMessage.when\n    }\n}\n\nexport default connect(mapStateToProps)(ErrorMessage)","import axios from 'axios'\nimport {HOST} from './axios'\n\nconst VERSIONINFO_REQUEST = 'VERSIONINFO_REQUEST'\nconst VersionInfoRequestAction = () => {\n    return {\n        type: VERSIONINFO_REQUEST\n    }\n}\n\nconst VERSIONINFO_RESPONSE = 'VERSIONINFO_RESPONSE'\nconst VersionInfoResponseAction = (version) => {\n    return {\n        type: VERSIONINFO_RESPONSE,\n        payload: {\n            'version': version\n        }\n    }\n}\n\nconst versionInfo = () => (\n    (dispatch) => {\n        dispatch(VersionInfoRequestAction())\n        axios.get(HOST + 'version?ts='+Date.now(), {\n                port: 8080\n            })\n            .then(function(response) {\n                dispatch(VersionInfoResponseAction(response.data))\n            })\n            .catch(function(error) {\n\t\t\t\tdispatch(VersionInfoResponseAction('Unavailable'))\n            }\n        )\n    }\n )\n\n export {\n    versionInfo\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux'\nimport { versionInfo } from '../../actions/versionInfo'\n\nclass VersionInfo extends React.Component {\n    constructor(props) {\n        super(props)\n        this.props.versionInfo()\n    }\n  \n    render() {\n\t    return (\n\t      <div >\n\t      \t{this.props.version}\n\t      </div>\n\t    );\n    }\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        version: store.versionInfo.version\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return ({\n        \"versionInfo\": () => {\n            dispatch(versionInfo())\n        }\n    })\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(VersionInfo)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Button, Modal, FormGroup, FormControl, InputGroup} from 'react-bootstrap';\nimport LogEntry from '../logs/logEntry'\nimport './style.css'\nimport AlertContainer from 'react-alert'\nimport alertOptions from '../../util/alertoptions'\nclass GroupId extends React.Component {\n\n\tconstructor(props) {\n        super(props)\n        this.generatedOk = this.generatedOk.bind(this)\n        this.copy = this.copy.bind(this)\n\t}\n\n    copy() {\n        var copyText = document.getElementById(\"groupid\");\n             copyText.select();\n             copyText.setSelectionRange(0, 99999)\n             document.execCommand(\"copy\");\n    }\n\n    generatedOk() {\n        this.msg.show('COPIED ON CLIPBOARD', {\n          time: 2000,\n          type: 'success',\n          icon: <img src=\"yes.png\" alt=\"save ok\" />\n        })\n    }\n\n  render() {\n    var {show, onHide} = {...this.props}\n\tvar props = {show, onHide}\n\treturn (\n\t<div>\n\t    <AlertContainer ref={a => this.msg = a} {...alertOptions} />\n      <Modal\n        {...props}\n        size=\"lg\"\n        aria-labelledby=\"contained-modal-title-vcenter\"\n        centered=\"true\"\n        dialogClassName=\"modal-20w\"\n      >\n        <Modal.Header closeButton>\n          <Modal.Title id=\"contained-modal-title-vcenter\">\n            Unused group-id\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <FormGroup>\n            <InputGroup>\n              <FormControl type=\"text\" defaultValue={this.props.g} id=\"groupid\"></FormControl>\n                <InputGroup.Button>\n                  <Button onClick={() => {this.copy(); this.props.onHide(); this.generatedOk(); }} >Copy</Button>\n                </InputGroup.Button>\n            </InputGroup>\n          </FormGroup>\n\n        </Modal.Body>\n        <Modal.Footer>\n          <Button onClick={this.props.onHide} bsStyle=\"primary\">Close</Button>\n        </Modal.Footer>\n      </Modal>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (store) => {\n    return {\n    }\n}\n\nexport default connect(mapStateToProps)(GroupId)","import {axios_get} from './axios';\n\t\nconst NEW_GROUP_REQUEST = 'NEW_GROUP_REQUEST'\nconst newGroupRequestAction = () => ({\n    type: NEW_GROUP_REQUEST\n})\n\nconst NEW_GROUP_RESPONSE = 'NEW_GROUP_RESPONSE'\nconst newGroupResponseAction = (g) => ({\n    type: NEW_GROUP_RESPONSE,\n    payload: {\n        \"g\": g\n    }\n})\n\n const new_group = () => (\n    (dispatch) => {\n        dispatch(newGroupRequestAction())\n        axios_get('group/newid',\n            null,\n            response => {\n               dispatch(newGroupResponseAction(response.data))\n            },\n            dispatch\n        )\n    }\n )\n \nexport {\n    new_group\n}","import React from 'react';\nimport { Navbar, /*NavItem,*/ Nav, NavDropdown, MenuItem} from 'react-bootstrap';\nimport { connect } from 'react-redux'\nimport VersionInfo from '../versionInfo/versionInfo'\nimport GroupId from '../groupid/GroupId';\nimport AlertContainer from 'react-alert'\nimport alertOptions from '../../util/alertoptions'\n\nimport { show_view } from '../../actions/navi'\nimport { new_group } from '../../actions/group'\n\nconst copy = require('clipboard-copy')\n\n\nclass MenuBar extends React.Component{\n\tconstructor(props) {\n        super(props)\n        //this.generatedOk = this.generatedOk.bind(this)\n        this.generateGroup = this.generateGroup.bind(this)\n        this.showGropId = this.showGropId.bind(this)\n        this.state = {groupIdShow: false}\n\t}\n\t\n\t/*generatedOk(g) {\n\t\tthis.msg.show('NEW GROUPID ON CLIPBOARD', {\n\t      time: 2000,\n\t      type: 'success',\n\t      icon: <img src=\"yes.png\" alt=\"save ok\" />\n\t    })\n\t }*/\n\t\n\tgenerateGroup(){\n\t\tthis.props.newGroup()\n\t}\n\t\n\tcomponentWillReceiveProps(nextprops) {\n\t\tif( nextprops.g !== this.props.g) {\n\t\t\t//copy(nextprops.g)\n\t\t\tthis.showGropId()\n\t\t\t//this.generatedOk(nextprops.g)\n\t\t}\n\t}\n\n\tshowGropId() {\n    \t\tthis.setState({ groupIdShow: true })\n    }\n\n\trender(){\n\t\tlet close = () => this.setState({ groupIdShow: false });\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t<AlertContainer ref={a => this.msg = a} {...alertOptions} />\n\t\t\t\t<Navbar style={{marginBottom: '0px'}}>\n\t\t\t\t    <Navbar.Header>\n\t\t\t\t        <Navbar.Brand>\n\t\t\t\t        \t<span style = {{\"display\": \"inline-flex\", \"whiteSpace\": \"nowrap\"}}>\n\t\t\t\t        \t\tOnassis&nbsp;<VersionInfo />\n\t\t\t\t        \t</span>\n\t\t\t\t        </Navbar.Brand>\n\t\t\t\t        <Navbar.Toggle /> \n\t\t\t\t    </Navbar.Header>\n\t\t\t\t    <Navbar.Collapse>\n\t\t\t\t        <Nav>\n\t\t\t\t            {/*<NavItem eventKey={1} href=\"#\">View</NavItem>*/}\n\t\t\t\t            <NavDropdown eventKey={3} title=\"View\" id=\"basic-nav-dropdown\">\n\t\t\t\t                <MenuItem eventKey={3.1} onSelect={(e) => {this.props.showView('main')}}>\n\t\t\t\t                \t{this.props.view === 'main' ? 'X' : '' } Main\n\t\t\t\t                </MenuItem>\n\t\t\t\t                <MenuItem eventKey={3.2} onSelect={(e) => {this.props.showView('c')}}>\n\t\t\t\t                \t{this.props.view === 'c' ? 'X' : '' } Issues\n\t\t\t\t                </MenuItem>\n\t\t\t\t                <MenuItem eventKey={3.3} onSelect={(e) => {this.props.showView('a')}}>\n\t\t\t\t                \t{this.props.view === 'a' ? 'X' : '' } Accounts\n\t\t\t\t                </MenuItem>\n\t\t\t\t                <MenuItem divider />\n\t\t\t\t                <MenuItem eventKey={3.4} onSelect={(e) => {this.props.showView('l')}}>\n\t\t\t\t                \t{this.props.view === 'l' ? 'X' : '' } Logs\n\t\t\t\t                </MenuItem>\n\t\t\t\t                \t{/*\n\t\t\t\t                <MenuItem divider />\n\t\t\t\t                <MenuItem eventKey={3.5}> Settings </MenuItem>*/}\n\t\t\t\t            </NavDropdown>\n\n\t\t\t\t            <NavDropdown eventKey={4} title=\"Util\" id=\"basic-nav-dropdown\">\n\t\t\t\t                <MenuItem eventKey={4.1} onSelect={(e) => {this.generateGroup()}}>\n\t\t\t\t                \t Generate unused groupid\n\t\t\t\t                </MenuItem>\n\t\t\t\t            </NavDropdown>\n\n\t\t\t\t        </Nav>\n\t\t\t\t        {/*\n\t\t\t\t        <Nav pullRight>\n\t\t\t\t            <NavItem eventKey={2} href=\"#\"> Logout </NavItem>\n\t\t\t\t        </Nav>*/}\n\t\t\t\t    </Navbar.Collapse>\n\t\t\t\t</Navbar>\n                <GroupId\n                    g={this.props.g}\n                    show={this.state.groupIdShow}\n                    onHide={close}\n                />\n\t\t\t</div>\n\n\t\t)\n\t}\n}\n\nMenuBar.defaultProps = {\n\t\tview: 'main'\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        view: store.navi.view,\n        g: store.group.g\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return ({\n        showView: (view) => {\n            dispatch(show_view(view))\n        },\n        newGroup: () => {\n            dispatch(new_group())\n        }\n    })\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(MenuBar)","import axios from 'axios'\nimport {HOST} from './axios'\n\nconst PING_REQUEST = 'PING_REQUEST'\nconst PingRequestAction = () => {\n    return {\n        type: PING_REQUEST\n    }\n}\n\nconst PING_RESPONSE = 'PING_RESPONSE'\nconst PingResponseAction = (status) => {\n    return {\n        type: PING_RESPONSE,\n        payload: {\n            up: status\n        }\n    }\n}\n\nconst ping = () => (\n    (dispatch) => {\n        dispatch(PingRequestAction())\n        axios.get(HOST+'ping?ts='+Date.now(), {\n                port: 8080\n            })\n            .then(function(response) {\n                dispatch(PingResponseAction(true))\n            })\n            .catch(function(error) {\n\t\t\t\tdispatch(PingResponseAction(false))\n            }\n        )\n    }\n )\n\nconst noping = () => (\n    (dispatch) => {\n\t\t\t\tdispatch(PingResponseAction(false))\n    }\n )\n\n    \n\n export {\n    ping,\n    noping\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux'\nimport { ping } from '../../actions/ping'\n\nclass Ping extends React.Component {\n    constructor(props) {\n        super(props)\n        this.timer = null\n    }\n    \n    componentDidMount() {\n        var f = () => {\n        \tthis.props.ping()\n        }\n        this.timer = setInterval(f, 5000)\n    }\n  \n    render() {\n    // Render nothing if the \"show\" prop is false\n    if(!this.props.show) {\n      return null;\n    }\n\n    // The gray background\n    const backdropStyle = {\n      position: 'fixed',\n      top: 0,\n      bottom: 0,\n      left: 0,\n      right: 0,\n      backgroundColor: 'rgba(0,0,0,0.3)',\n      padding: 50,\n      zIndex: 1000\n    };\n\n    // The modal \"window\"\n    const modalStyle = {\n      backgroundColor: '#fff',\n      borderRadius: 5,\n      maxWidth: 500,\n      minHeight: 300,\n      margin: '0 auto',\n      padding: 30\n    };\n\n    return (\n      <div style={backdropStyle} >\n        <div style={modalStyle} >\n        \tWaiting for service to be available...\n        </div>\n      </div>\n    );\n  }\n}\n\nPing.defaultProps = {\n\t\tshow: false\n}\n\nPing.propTypes = {\n  show: PropTypes.bool\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        show: (store.ping.length === 0 ? false : !store.ping.up)\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return ({\n        \"ping\": () => {\n            dispatch(ping())\n        }\n    })\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Ping)\n","import React from 'react' //  Main React library\nimport KeyboardEventHandler from 'react-keyboard-event-handler';\nimport Content from './Content'\nimport ErrorMessage from './ErrorMessage'\nimport MenuBar from '../navi/MenuBar'\nimport Ping from '../ping/ping'\nimport { connect } from 'react-redux'\nimport { today, prev_day, next_day } from '../../actions/day'\nimport { daterange_prev_block, daterange_next_block } from '../../actions/daterange'\n\n//CHG-10 import { set_daterange } from '../../actions/daterange'\n\nconst Keydetect = (props) => (<div>\n  <KeyboardEventHandler\n    handleKeys={['shift+left', 'left', 'shift+right', 'right']}\n    onKeyEvent={(key, e) => {\n        switch(key) {\n            case 'shift+left' : props.daterange_prev_block(); break;\n            case 'left' : props.prev_day(); break;\n            case 'shift+right' : props.daterange_next_block(); break;\n            case 'right' : props.next_day(); break;\n        }\n        }}\n    />\n</div>);\n\nclass Onassis extends React.Component{\n\tcomponentDidMount() {\n\t\t//this.props.setDateRange(addDays(new Date(),-10), addDays(new Date(),+10))\n\t\tthis.props.today()\n\t}\n\n\trender(){\n\t    return (\n\t    \t<div>\n\t    \t <Keydetect\n\t    \t    daterange_prev_block={this.props.daterange_prev_block}\n\t    \t    daterange_next_block={this.props.daterange_next_block}\n\t    \t    prev_day={this.props.prev_day}\n\t    \t    next_day={this.props.next_day}/>\n\t    \t <Ping />\n\t    \t <MenuBar />\n\t    \t <ErrorMessage />\n\t    \t <Content /> \n\t\t\t {/*\n\t\t\t\t<FooterInstance />\n\t\t\t*/}\n\t\t</div>\n\t    )\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return ({\n        today: () => {\n            dispatch(today())\n        },\n        prev_day: () => {\n            dispatch(prev_day())\n        },\n        next_day: () => {\n            dispatch(next_day())\n        },\n        daterange_prev_block: () => {\n                    dispatch(daterange_prev_block())\n                },\n        daterange_next_block: () => {\n            dispatch(daterange_next_block())\n        },\n        /* //CHG-10 ,\n        setDateRange: (start, end) => {\n            dispatch(set_daterange(start, end))\n        }*/\n    })\n}\n\nexport default connect(null, mapDispatchToProps)(Onassis)\n","import React from 'react' //  Main React library\nimport { render } from 'react-dom' //  Main react library\nimport { Provider } from 'react-redux' // Bridge React and Redux\nimport { createStore, applyMiddleware } from 'redux' //  Main Redux library\nimport thunk from 'redux-thunk'\n\n//import { MediaQueryProvider } from 'react-media-query-hoc';\n\n\n//import ReduxFormTutorial from './reduxFormTut'\n//import ExamplePage from './components/exampleForm3/ExamplePage'\n//import FormPage from './components/editpayments/FormPage'\n//import AddPage from './components/payments/add/AddPage'\n\nimport rootReducer from './reducers'\nimport Onassis  from './components/main/Onassis'\nimport { composeWithDevTools } from 'redux-devtools-extension';\n\nconst middleware = [\n  thunk,\n];\n\nconst store = createStore(rootReducer, composeWithDevTools(\n  applyMiddleware(...middleware),\n  // other store enhancers if any:\n  //window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n));\n\n\n\n\n//var FontAwesome = require('react-fontawesome');\n//import AddOne from './AddOne'\n//import ContactPageContainer from './ContactPageContainer'\n//import './index.css';\n//var jquery = require('jquery')\n\n\n//var store = createStore(rootReducer)\n//var store = createStore(rootReducer,\n\t//\tapplyMiddleware(thunk)\n    //,\n    //window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__())\n\t\t//,\t\twindow.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__())\n\n\nwindow.reduxStore = store\n\n/*\nrender(\n\t\t <MediaQueryProvider>\n\t\t \t<Provider store={store}>\n\t\t\t\t<Onassis />\t\n\t\t\t</Provider>\n\t\t </MediaQueryProvider>,\n  document.getElementById('root')\n);*/\n\t\t\t\t\t\t\n\t\t\t\t\t\t\nrender(\n\t\t \t<Provider store={store}>\n\t\t\t\t<Onassis />\t\n\t\t\t</Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}