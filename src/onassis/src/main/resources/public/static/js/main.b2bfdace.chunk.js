(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{136:function(e,t,n){},233:function(e,t,n){e.exports=n(586)},451:function(e,t,n){},513:function(e,t,n){},515:function(e,t,n){},518:function(e,t){var n={convert:function(e){return e.constructor===Date?e:e.constructor===Array?new Date(e[0],e[1],e[2]):e.constructor===Number?new Date(e):e.constructor===String?new Date(e):"object"===typeof e?new Date(e.year,e.month,e.date):NaN},compare:function(e,t){return isFinite(e=this.convert(e).valueOf())&&isFinite(t=this.convert(t).valueOf())?(e>t)-(e<t):NaN},inRange:function(e,t,n){return isFinite(e=this.convert(e).valueOf())&&isFinite(t=this.convert(t).valueOf())&&isFinite(n=this.convert(n).valueOf())?t<=e&&e<=n:NaN}};e.exports=n},538:function(e,t,n){},553:function(e,t,n){},564:function(e,t,n){},567:function(e,t,n){},569:function(e,t,n){},586:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(18),s=n(13),l=n(46),c=n(223),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PING_RESPONSE":return Object.assign({},e,{up:t.payload.up});default:return e}},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DATE_RANGE_SELECTED":return Object.assign({},e,{s:t.payload.s,e:t.payload.e});default:return e}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MINIBARS_REQUEST":return Object.assign({},e,{fetching:!0});case"MINIBARS_RESPONSE":return Object.assign({},e,{balances:t.payload.balances,fetching:!1});case"MINIBARS_REDRAW":return Object.assign({},e,{redraw:t.payload.redraw});default:return e}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHART_REQUEST":return Object.assign({},e,{fetching:!0});case"CHART_RESPONSE":return Object.assign({},e,{curves:t.payload.curves,fetching:!1});case"CHART_NEXTDAY":return Object.assign({},e,{nextday:t.payload.nextday});case"CHART_PREVDAY":return Object.assign({},e,{prevday:t.payload.prevday});case"CHART_TODAY":return Object.assign({},e,{today:t.payload.today});case"CHART_REDRAW":return Object.assign({},e,{redraw:t.payload.redraw});default:return e}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PIE_REQUEST":return Object.assign({},e,{fetching:!0});case"PIE_RESPONSE":return Object.assign({},e,{slices:t.payload.slices,fetching:!1});case"PIE_REDRAW":return Object.assign({},e,{redraw:t.payload.redraw});default:return e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PAYMENTS_REQUEST":return Object.assign({},e,{fetching:!0});case"PAYMENTS_RESPONSE":return Object.assign({},e,{fetching:!1,queryType:t.payload.queryType,params:t.payload.params,payments:t.payload.payments,balances:t.payload.balances,historystack:t.payload.historystack});default:return e}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOCK_PAYMENT_RESPONSE":return Object.assign({},e,{payment:t.payload.payment});case"LOCK_PAYMENT_REQUEST":return Object.assign({},e,{lock_payment_request:t.payload.lock_payment_request,locked:t.payload.locked});case"PAYMENT_SELECTION":return Object.assign({},e,{payments:t.payload.payments});default:return e}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONSTANTS_REFRESH":return Object.assign({},e,{refreshTime:t.payload.refreshTime,constants:t.payload.constants});default:return e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ACCOUNTS_REQUEST":return Object.assign({},e,{fetching:!0});case"ACCOUNTS_RESPONSE":return Object.assign({},e,{fetching:!1,accounts:t.payload.accounts});default:return e}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CATEGORIES_REQUEST":return Object.assign({},e,{fetching:!0});case"CATEGORIES_RESPONSE":return Object.assign({},e,{fetching:!1,categories:t.payload.categories});default:return e}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_VIEW":return Object.assign({},e,{view:t.payload.view});default:return e}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUDITLOG_REQUEST":return Object.assign({},e,{fetching:!0});case"AUDITLOG_RESPONSE":return Object.assign({},e,{fetching:!1,logentries:t.payload.logentries,firstpage:t.payload.firstpage,lastpage:t.payload.lastpage});default:return e}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_ERROR":return Object.assign({},e,{status:t.payload.status,msg:t.payload.msg,when:t.payload.when});default:return e}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_GROUP_REQUEST":return Object.assign({},e,{fetching:!0});case"NEW_GROUP_RESPONSE":return Object.assign({},e,{fetching:!1,g:t.payload.g});default:return e}},k=Object(l.combineReducers)({ping:o,daterange:u,minibars:d,chart:h,pie:p,payments:f,payment:m,constants:b,accounts:y,categories:v,navi:g,auditlog:O,errorMessage:E,group:j}),C=n(5),w=n(6),R=n(8),_=n(7),T=n(9),x=n(593),S=n(65),F=n(20),D=n(1),N=n(157),P=n(587),V=n(66),A=n.n(V),M=function(e,t){return function(n){n(function(e,t,n){return{type:"SHOW_ERROR",payload:{status:e,msg:t,when:n}}}(e,t,Date.now()))}},I=function(e,t){e.response&&e.response.data?t(M(e.response.status,e.response.data.error_message)):t(M("not known",e.message))},L="http://localhost:8080/";function H(e,t){return e+"?"+(null==t?"":t+"&")+"ts="+Date.now()}function U(e,t,n,a){var r=H(e,t);A.a.get(L+r).then(n).catch(function(e){I(e,a)})}function Y(e,t,n,a){var r=H(e,null);A.a.get(L+r,t).then(n).catch(function(e){I(e,a)})}function B(e,t,n,a){A.a.post(L+e,t).then(n).catch(function(e){I(e,a)})}var W=n(261),G={},z=function(e,t){G[e]=null,q(e,t)},q=function(e,t){if(!G[e]){var n=W("GET",L+"constants?id="+e+"&ts="+Date.now()),a=JSON.parse(n.getBody("utf8"));G[e]=a}var r;return t((r=G,{type:"CONSTANTS_REFRESH",payload:{refreshTime:(new Date).getTime(),constants:r}})),null},Q=function(e){return function(t){t(function(e){return{type:"CATEGORIES_UPDATE_REQUEST",payload:{updates:e}}}(e)),B("cat/update",e,function(e){t({type:"CATEGORIES_UPDATE_RESPONSE"}),t(K()),z("cat",t)},t)}},K=function(){return function(e){e({type:"CATEGORIES_REQUEST"}),U("cat/list",null,function(t){e({type:"CATEGORIES_RESPONSE",payload:{categories:t.data}})},e)}},J=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(R.a)(this,Object(_.a)(t).call(this,e))).state={currencyValue:e.value},n.onChange=n.onChange.bind(Object(D.a)(Object(D.a)(n))),n.handleFocus=n.handleFocus.bind(Object(D.a)(Object(D.a)(n))),n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"handleFocus",value:function(e){e.target.select()}},{key:"onChange",value:function(e){var t=this.props,n=t.onValueChanged,a=t.field,r=t.index,i=function(e){if(!e)return e;"-"!==e&&"+"!==e||(e+="0");var t=e.lastIndexOf("+"),n=e.lastIndexOf("-");return""===(e=e.replace(/[^\d]/g,""))&&(e="0"),(e=""+parseInt(e,10)).length<3&&(e="00".slice(-3+e.length)+e),(t>=n?"+":"-")+e.slice(0,-2)+"."+e.slice(-2)}(e.target.value);this.setState({currencyValue:i}),n(i,a,r)}},{key:"componentWillReceiveProps",value:function(e){this.setState({currencyValue:e.value})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.readOnly,a=e.placeholder,i=e.touched,s=e.fontSize;return r.a.createElement("div",null,r.a.createElement("input",{onFocus:this.handleFocus,autoComplete:"off",id:t,disabled:n,value:this.state.currencyValue,onChange:this.onChange,placeholder:n?"":a,type:"text",className:"form-control",style:{fontSize:s,textAlign:"right",color:this.state.currencyValue&&"-"===this.state.currencyValue.substr(0,1)?"red":"green",display:"inline",width:"85px",backgroundColor:i?"lightyellow":""}}))}}]),t}(r.a.Component);J.defaultProps={id:null,onValueChanged:null,placeholder:"",value:"",readOnly:!1,field:null,index:null,touched:!1,fontSize:"inherit"};var X=J,Z=function(e){function t(){return Object(C.a)(this,t),Object(R.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.readOnly,a=e.field,i=e.index,s=e.onValueChanged,l=e.touched,c=e.checked;return r.a.createElement("div",null,r.a.createElement("span",{style:{display:"flex"}},r.a.createElement("div",{className:"checkbox-personalized"},r.a.createElement("input",{name:t,type:"checkbox",disabled:n,id:t,checked:c,onChange:function(e){return s(e.target.checked,a,i)}}),r.a.createElement("label",{htmlFor:t},r.a.createElement("div",{className:"check",style:n?{backgroundColor:"lightgray",borderColor:"lightgray"}:l?{backgroundColor:"darkKhaki",borderColor:"darkKhaki"}:{}})," "))))}}]),t}(r.a.Component);Z.defaultProps={id:null,onValueChanged:null,checked:!0,readOnly:!1,field:null,index:null,touched:!1};var $=Z,ee=n(25),te=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(R.a)(this,Object(_.a)(t).call(this,e))).state={txtValue:e.value},n.onChange=n.onChange.bind(Object(D.a)(Object(D.a)(n))),n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"onChange",value:function(e){var t=this.props,n=t.onValueChanged,a=t.field,r=t.index;this.setState({txtValue:e.target.value}),n(e.target.value,a,r)}},{key:"componentWillReceiveProps",value:function(e){this.setState({txtValue:e.value})}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,a=t.placeholder,i=t.readOnly,s=t.touched,l=t.linkCb,c=l&&this.state.txtValue&&this.state.txtValue.length>0?r.a.createElement(N.a,{bsSize:"small",onClick:function(){l(e.state.txtValue)}},r.a.createElement(ee,{name:"caret-right"})):null;return r.a.createElement("div",null,r.a.createElement("span",{style:{display:"inline-flex"}},r.a.createElement("input",{id:n,value:this.state.txtValue,disabled:i,style:{backgroundColor:s?"lightyellow":""},placeholder:i?"":a,type:"text",onChange:this.onChange,className:"form-control"}),c))}}]),t}(r.a.Component);te.defaultProps={id:null,placeholder:"",onValueChanged:null,value:"",readOnly:!1,field:null,index:null,touched:!1,linkCb:null};var ne=te,ae=n(15),re=n.n(ae),ie=n(226),se=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(R.a)(this,Object(_.a)(t).call(this,e))).handleClick=function(){n.props.readOnly||n.setState({displayColorPicker:!n.state.displayColorPicker})},n.handleClose=function(){n.setState({displayColorPicker:!1})},n.handleChange=function(e){var t=n.props,a=t.onValueChanged,r=t.field,i=t.index;n.setState({color:e.hex,displayColorPicker:!n.state.displayColorPicker}),a(e.hex,r,i)},n.state={displayColorPicker:!1,color:e.color},n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({color:e.color})}},{key:"render",value:function(){var e=re()({default:{color:{width:"28px",height:"24px",borderRadius:"4px",background:this.state.color},swatch:{padding:"5px",background:this.props.touched?"lightyellow":"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,"+(this.props.readOnly?"0":".1")+")",display:"inline-block",cursor:this.props.readOnly?"":"pointer"},popover:{position:"relative",zIndex:"2"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}}});return r.a.createElement("div",null,r.a.createElement("div",{style:e.swatch,onClick:this.handleClick},r.a.createElement("div",{style:e.color})),this.state.displayColorPicker?r.a.createElement("div",{style:e.popover},r.a.createElement("div",{style:e.cover,onClick:this.handleClose}),r.a.createElement(ie.SketchPicker,{color:this.state.color,onChange:this.handleChange})):null)}}]),t}(r.a.Component);se.defaultProps={id:null,onValueChanged:null,color:"red",readOnly:!1,field:null,index:null,touched:!1};var le=se,ce=(n(451),n(136),n(48)),oe=n.n(ce),ue={offset:14,position:"bottom right",theme:"light",time:5e3,transition:"scale"};var de=function(e){return parseFloat(Math.round(100*e)/100).toFixed(2)},he=["color","descr","i","active"],pe={id:null,i:"+0.00",active:!0,descr:"",color:"blue"},fe={i:function(e){return null},active:function(e){return null},descr:function(e){return""!==e?null:"required"},color:function(e){return""!==e?null:"required"}};function me(e){var t=function(e){var t=[];return e.forEach(function(e){t.push(ve(e))}),t}(e);return t.forEach(function(e){e.i=(e.i>=0?"+":"")+de(e.i)}),t}function be(e){return e.forEach(function(e){e.i&&(e.i=parseFloat(e.i))}),e}function ye(e){return{id:e,i:e,active:e,descr:e,color:e}}function ve(e){return{index:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,id:e.id,i:e.i,active:e.active,descr:e.descr,color:e.color}}function ge(e){var t={values:[],initial:[],errors:[],touched:[],deleted:[],sort:null,asc:!0};return e.forEach(function(e,n){t.values.push(ve(e,n)),t.initial.push(ve(e)),t.errors.push(ye(null)),t.touched.push(ye(!1)),t.deleted.push(!1)}),t}function Oe(e){return e.splice(0)}var Ee=n(25),je=-1,ke=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(R.a)(this,Object(_.a)(t).call(this,e))).renderCategoriesT=function(){return n.sortedValues=n.state.values.slice(0),n.state.sort&&n.sortedValues.sort(n.sortersF()),r.a.createElement("div",null,r.a.createElement(x.a,{id:"accs-panel"},r.a.createElement(x.a.Heading,null,r.a.createElement(x.a.Title,null,r.a.createElement(N.a,{onClick:function(){return n.resetT()},disabled:n.pristine,bsStyle:n.pristine?"default":"primary"},"Reset"),r.a.createElement(N.a,{onClick:function(){return n.preSubmitT()},disabled:n.pristine||null!=n.errors,bsStyle:n.pristine?"default":"primary"},"Save"),r.a.createElement(N.a,{onClick:function(){return n.addR()}},"Add"))),r.a.createElement(x.a.Body,null,r.a.createElement(P.a,{id:"categories_table",striped:!0,bordered:!0,hover:!0,condensed:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:n.thClassName("color")}),n.th("descr","Name"),n.th("i","Default"),n.th("active","Active"),r.a.createElement("th",{className:n.thClassName("deleted")},r.a.createElement(Ee,{name:"remove",style:{color:"red"}})))),r.a.createElement("tbody",null,n.sortedValues.map(function(e){return n.renderCategoryR(e.index)}))))))},n.showOk=n.showOk.bind(Object(D.a)(Object(D.a)(n))),n.changePropertyF=n.changePropertyF.bind(Object(D.a)(Object(D.a)(n))),n.changePropertyDeletedF=n.changePropertyDeletedF.bind(Object(D.a)(Object(D.a)(n))),n.setValueF=n.setValueF.bind(Object(D.a)(Object(D.a)(n))),n.validateF=n.validateF.bind(Object(D.a)(Object(D.a)(n))),n.touchedF=n.touchedF.bind(Object(D.a)(Object(D.a)(n))),n.isDifferentFromInitialF=n.isDifferentFromInitialF.bind(Object(D.a)(Object(D.a)(n))),n.chooseValueF=n.chooseValueF.bind(Object(D.a)(Object(D.a)(n))),n.renderContentF=n.renderContentF.bind(Object(D.a)(Object(D.a)(n))),n.renderDeletedContentF=n.renderDeletedContentF.bind(Object(D.a)(Object(D.a)(n))),n.setSortF=n.setSortF.bind(Object(D.a)(Object(D.a)(n))),n.sortersF=n.sortersF.bind(Object(D.a)(Object(D.a)(n))),n.addR=n.addR.bind(Object(D.a)(Object(D.a)(n))),n.getDefaultR=n.getDefaultR.bind(Object(D.a)(Object(D.a)(n))),n.removeR=n.removeR.bind(Object(D.a)(Object(D.a)(n))),n.validateR=n.validateR.bind(Object(D.a)(Object(D.a)(n))),n.readOnlyR=n.readOnlyR.bind(Object(D.a)(Object(D.a)(n))),n.isPersistedR=n.isPersistedR.bind(Object(D.a)(Object(D.a)(n))),n.renderCategoryR=n.renderCategoryR.bind(Object(D.a)(Object(D.a)(n))),n.resetT=n.resetT.bind(Object(D.a)(Object(D.a)(n))),n.isPristineT=n.isPristineT.bind(Object(D.a)(Object(D.a)(n))),n.hasErrorsT=n.hasErrorsT.bind(Object(D.a)(Object(D.a)(n))),n.preInitT=n.preInitT.bind(Object(D.a)(Object(D.a)(n))),n.preSubmitT=n.preSubmitT.bind(Object(D.a)(Object(D.a)(n))),n.init=n.init.bind(Object(D.a)(Object(D.a)(n))),n.renderCategoriesT=n.renderCategoriesT.bind(Object(D.a)(Object(D.a)(n))),n.tdClassName=n.tdClassName.bind(Object(D.a)(Object(D.a)(n))),n.td=n.td.bind(Object(D.a)(Object(D.a)(n))),n.thClassName=n.thClassName.bind(Object(D.a)(Object(D.a)(n))),n.th=n.th.bind(Object(D.a)(Object(D.a)(n))),n.init(),n.state=Object(F.a)({},ge(n.preInitT(e.initCategories))),n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"changePropertyF",value:function(e,t,n){if(this.isPersistedR(n)){var a=Oe(this.state.touched);a[n][t]=this.isDifferentFromInitialF(e,t,n),this.setState({touched:a})}this.validateF(t,e,n),this.setValueF(e,t,n)}},{key:"changePropertyDeletedF",value:function(e,t,n){if(this.isPersistedR(n)){this.deleteCount+=e?1:-1;var a=Oe(this.state.deleted);a[n]=e,this.setState({deleted:a})}else this.removeR(n)}},{key:"setValueF",value:function(e,t,n){var a=Oe(this.state.values);a[n][t]=e,this.setState({values:a})}},{key:"validateF",value:function(e,t,n){var a=this.state.errors[n][e];if(fe[e](t)!==a){var r=Oe(this.state.errors);r[n][e]=fe[e](t),this.setState({errors:r})}}},{key:"touchedF",value:function(e,t){return!(e<0)&&(!this.state.deleted[e]&&(!!this.isPersistedR(e)&&this.state.touched[e][t]))}},{key:"isDifferentFromInitialF",value:function(e,t,n){return e!==this.state.initial[n][t]}},{key:"chooseValueF",value:function(e,t){return this.state.deleted[e]?this.state.initial[e][t]:this.state.values[e][t]}},{key:"renderContentF",value:function(e,t){var n,a=this.chooseValueF(t,e);switch(e){case"i":return r.a.createElement("div",null,r.a.createElement(X,{id:"icat_"+t,onValueChanged:this.changePropertyF,placeholder:"amount",value:a,readOnly:this.readOnlyR(t,"i"),field:"i",index:t,touched:this.touchedF(t,"i")}));case"active":return r.a.createElement("div",null,r.a.createElement($,{id:"activecat_"+t,onValueChanged:this.changePropertyF,checked:a,readOnly:this.isPersistedR(t)&&(n=this.state.touched[t],n.i||n.descr||n.color),field:"active",index:t,touched:this.touchedF(t,"active")}));case"descr":return r.a.createElement("div",null,r.a.createElement(ne,{id:"descrcat_"+t,onValueChanged:this.changePropertyF,value:a,readOnly:this.readOnlyR(t,"descr"),field:"descr",index:t,touched:this.touchedF(t,"descr"),placeholder:"name"}));case"color":return r.a.createElement("div",null,r.a.createElement(le,{id:"colorcat_"+t,onValueChanged:this.changePropertyF,color:a,readOnly:this.readOnlyR(t,"color"),field:"color",index:t,touched:this.touchedF(t,"color")}));default:return console.log("UNKONWN field: "+e),null}}},{key:"renderDeletedContentF",value:function(e){var t=this;if(!this.isPersistedR(e))return r.a.createElement("button",{type:"button",className:"form-control",onClick:function(){return t.changePropertyDeletedF(!0,"deleted",e)}},r.a.createElement(Ee,{name:"remove",style:{color:"red"}}))}},{key:"setSortF",value:function(e){this.state.sort&&this.state.sort===e?this.state.sort===e&&this.state.asc?this.setState({asc:!1}):this.setState({sort:null}):this.setState({sort:e,asc:!0})}},{key:"sortersF",value:function(){var e=this,t=this.state.asc?-1:1;switch(this.state.sort){case"i":return function(n,a){return t*(e.chooseValueF(a.index,e.state.sort)-e.chooseValueF(n.index,e.state.sort))};case"descr":return function(n,a){var r=e.chooseValueF(n.index,"descr").toUpperCase(),i=e.chooseValueF(a.index,"descr").toUpperCase();return t*(r<i?-1:r>i?1:0)};case"active":return function(e,n){return t*(e.active&&n.active?0:e.active?1:-1)};default:return function(e,t){return 0}}}},{key:"addR",value:function(){var e=this.getDefaultR(),t=Oe(this.state.values);t.push(e),this.sortedValues.push(e);var n=Oe(this.state.errors);n.push(this.validateR(e)),this.setState({values:t,errors:n})}},{key:"getDefaultR",value:function(){var e=pe;this.sortedValues.length&&(e=this.sortedValues[this.sortedValues.length-1]);var t=Object(F.a)({},e);return t.index=this.state.values.length,t.id=je--,t.l=!1,t.check=!1,t}},{key:"removeR",value:function(e){this.state.values.splice(e,1);var t=Oe(this.state.values);this.state.errors.splice(e,1);for(var n=Oe(this.state.errors),a=e;a<t.length;a++)t[a].index--,n[a].index--;this.setState({values:t,errors:n})}},{key:"validateR",value:function(e){var t={};return he.forEach(function(n){t[n]=fe[n](e[n])}),t}},{key:"readOnlyR",value:function(e,t){return this.state.deleted[e]||!this.state.values[e].active&&this.isPersistedR(e)}},{key:"isPersistedR",value:function(e){return this.state.values[e].id>=0}},{key:"renderCategoryR",value:function(e){var t=this;return r.a.createElement("tr",{key:e},Object(S.a)(he).map(function(n){return t.td(e,n)}),r.a.createElement("td",{className:this.tdClassName(e,"deleted")},this.renderDeletedContentF(e)))}},{key:"resetT",value:function(){var e=ge(this.state.initial);this.setState(Object(F.a)({},e)),this.init()}},{key:"isPristineT",value:function(){var e=!0;return this.state.touched.forEach(function(t){he.forEach(function(n){e=e&&!t[n]})}),e&&this.state.initial.length===this.state.values.length&&!this.deleteCount}},{key:"hasErrorsT",value:function(){var e=!1;return this.state.errors.forEach(function(t){var n;e=e||((n=t).i||n.active||n.descr||n.color)}),e}},{key:"preInitT",value:function(e){return me(e)}},{key:"showOk",value:function(){this.msg.show("SAVED SUCCESSFULLY",{time:2e3,type:"success",icon:r.a.createElement("img",{src:"yes.png",alt:"save ok"})})}},{key:"preSubmitT",value:function(){var e=this,t=[];this.state.values.forEach(function(n,a){if(!e.isPersistedR(a)){var r={};he.forEach(function(t){r[t]=e.chooseValueF(a,t)}),t.push(r)}});var n=[];this.state.deleted.forEach(function(t,a){t&&n.push(e.state.values[a].id)});var a=[];this.state.values.forEach(function(t,n){if(e.isPersistedR(n)){var r={};he.forEach(function(a){e.touchedF(n,a)&&(r.id=t.id,r[a]=e.chooseValueF(n,a))}),Object.keys(r).length>0&&a.push(r)}});var r={created:be(t),deleted:n,modified:be(a)};console.log(JSON.stringify(r,null,4)),this.pristine=null,this.props.update(r)}},{key:"init",value:function(){this.deleteCount=0,this.pristine=null,this.errors=null,this.allChecked=!1}},{key:"tdClassName",value:function(e,t){return t+"_cell"+(this.isPersistedR(e)?"":" newRow")+(this.state.deleted[e]?" deleted":"")+(this.state.errors[e][t]?" error":"")}},{key:"td",value:function(e,t){return r.a.createElement("td",{key:e+"_"+t,className:this.tdClassName(e,t)},this.renderContentF(t,e))}},{key:"thClassName",value:function(e){return e+"_header"}},{key:"th",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=r.a.createElement(Ee,{name:this.state.asc?"sort-asc":"sort-desc"}),i=r.a.createElement("div",null,this.state.sort===e?a:""),s=r.a.createElement("div",{style:{marginTop:8}},r.a.createElement("button",{type:"button",className:"link-button",onClick:function(){t.setSortF(e)}},n));return r.a.createElement("th",{className:this.thClassName(e)},r.a.createElement("div",null,r.a.createElement("span",{style:{display:"flex"}},r.a.createElement("div",{style:{marginTop:8,paddingRight:3}},i),null!==n?s:"")))}},{key:"componentWillReceiveProps",value:function(e){this.isPristineT()||null!=this.pristine||this.showOk(),this.init(),this.setState(Object(F.a)({},ge(this.preInitT(e.initCategories))))}},{key:"render",value:function(){var e=this;return this.pristine=this.isPristineT(),this.errors=this.hasErrorsT(),r.a.createElement("div",null,r.a.createElement(oe.a,Object.assign({ref:function(t){return e.msg=t}},ue)),this.renderCategoriesT())}}]),t}(r.a.Component);ke.defaultProps={initCategories:[]};var Ce=Object(s.b)(null,function(e){return{update:function(t){e(Q(t))}}})(ke),we=function(e){function t(){return Object(C.a)(this,t),Object(R.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(x.a,null,r.a.createElement(x.a.Heading,{style:{paddingTop:"4px",paddingBottom:"3px",height:"45px",fontSize:"23px"}},r.a.createElement("span",{style:{display:"flow-root",alignItems:"center"}},"Categories")),r.a.createElement(x.a.Body,null,r.a.createElement(Ce,{initCategories:this.props.categories}))))}}]),t}(r.a.Component),Re=Object(s.b)(function(e){return{categories:e.categories.categories}})(we),_e=n(32),Te=function(e,t){return{type:"CHART_REQUEST",payload:{s:e,e:t}}},xe=function(e){return{type:"CHART_RESPONSE",payload:{curves:e}}},Se=null;function Fe(e){e(Te(Se.s,Se.e)),Y("chart",{params:Se},function(t){e(xe(t.data))},e)}var De=function(e,t){return function(n){Se={s:_e(e,"yyyy-mm-dd"),e:_e(t,"yyyy-mm-dd")},Fe(n)}},Ne=function(){return function(e){console.assert(Se),Fe(e)}},Pe=function(){return function(e){e({type:"CHART_NEXTDAY",payload:{nextday:(new Date).getTime()}})}},Ve=function(){return function(e){e({type:"CHART_PREVDAY",payload:{prevday:(new Date).getTime()}})}},Ae=function(){return function(e){e({type:"CHART_TODAY",payload:{today:(new Date).getTime()}})}},Me=function(){return function(e){e({type:"CHART_REDRAW",payload:{redraw:(new Date).getTime()}})}},Ie=function(e){return function(t){t(function(e){return{type:"ACCOUNTS_UPDATE_REQUEST",payload:{updates:e}}}(e)),B("acc/update",e,function(e){t({type:"ACCOUNTS_UPDATE_RESPONSE"}),t(Le()),z("acc",t),t(Ne())},t)}},Le=function(){return function(e){e({type:"ACCOUNTS_REQUEST"}),U("acc/list",null,function(t){e({type:"ACCOUNTS_RESPONSE",payload:{accounts:t.data}})},e)}},He=(n(513),["color","descr","credit","active"]),Ue={id:null,credit:!1,active:!0,descr:"",color:"blue"},Ye={credit:function(e){return null},active:function(e){return null},descr:function(e){return""!==e?null:"required"},color:function(e){return""!==e?null:"required"}};function Be(e){return function(e){var t=[];return e.forEach(function(e){t.push(ze(e))}),t}(e)}function We(e){return e}function Ge(e){return{id:e,credit:e,active:e,descr:e,color:e}}function ze(e){return{index:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,id:e.id,credit:e.credit,active:e.active,descr:e.descr,color:e.color}}function qe(e){var t={values:[],initial:[],errors:[],touched:[],deleted:[],sort:null,asc:!0};return e.forEach(function(e,n){t.values.push(ze(e,n)),t.initial.push(ze(e)),t.errors.push(Ge(null)),t.touched.push(Ge(!1)),t.deleted.push(!1)}),t}function Qe(e){return e.splice(0)}var Ke=n(25),Je=-1,Xe=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(R.a)(this,Object(_.a)(t).call(this,e))).renderAccountsT=function(){return n.sortedValues=n.state.values.slice(0),n.state.sort&&n.sortedValues.sort(n.sortersF()),r.a.createElement("div",null,r.a.createElement(x.a,{id:"accs-panel"},r.a.createElement(x.a.Heading,null,r.a.createElement(x.a.Title,null,r.a.createElement(N.a,{onClick:function(){return n.resetT()},disabled:n.pristine,bsStyle:n.pristine?"default":"primary"},"Reset"),r.a.createElement(N.a,{onClick:function(){return n.preSubmitT()},disabled:n.pristine||null!=n.errors,bsStyle:n.pristine?"default":"primary"},"Save"),r.a.createElement(N.a,{onClick:function(){return n.addR()}},"Add"))),r.a.createElement(x.a.Body,null,r.a.createElement(P.a,{id:"accounts_table",striped:!0,bordered:!0,hover:!0,condensed:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:n.thClassName("color")}),n.th("descr","Name"),n.th("credit","Credit"),n.th("active","Active"),r.a.createElement("th",{className:n.thClassName("deleted")},r.a.createElement(Ke,{name:"remove",style:{color:"red"}})))),r.a.createElement("tbody",null,n.sortedValues.map(function(e){return n.renderAccountR(e.index)}))))))},n.showOk=n.showOk.bind(Object(D.a)(Object(D.a)(n))),n.changePropertyF=n.changePropertyF.bind(Object(D.a)(Object(D.a)(n))),n.changePropertyDeletedF=n.changePropertyDeletedF.bind(Object(D.a)(Object(D.a)(n))),n.setValueF=n.setValueF.bind(Object(D.a)(Object(D.a)(n))),n.validateF=n.validateF.bind(Object(D.a)(Object(D.a)(n))),n.touchedF=n.touchedF.bind(Object(D.a)(Object(D.a)(n))),n.isDifferentFromInitialF=n.isDifferentFromInitialF.bind(Object(D.a)(Object(D.a)(n))),n.chooseValueF=n.chooseValueF.bind(Object(D.a)(Object(D.a)(n))),n.renderContentF=n.renderContentF.bind(Object(D.a)(Object(D.a)(n))),n.renderDeletedContentF=n.renderDeletedContentF.bind(Object(D.a)(Object(D.a)(n))),n.setSortF=n.setSortF.bind(Object(D.a)(Object(D.a)(n))),n.sortersF=n.sortersF.bind(Object(D.a)(Object(D.a)(n))),n.addR=n.addR.bind(Object(D.a)(Object(D.a)(n))),n.getDefaultR=n.getDefaultR.bind(Object(D.a)(Object(D.a)(n))),n.removeR=n.removeR.bind(Object(D.a)(Object(D.a)(n))),n.validateR=n.validateR.bind(Object(D.a)(Object(D.a)(n))),n.readOnlyR=n.readOnlyR.bind(Object(D.a)(Object(D.a)(n))),n.isPersistedR=n.isPersistedR.bind(Object(D.a)(Object(D.a)(n))),n.renderAccountR=n.renderAccountR.bind(Object(D.a)(Object(D.a)(n))),n.resetT=n.resetT.bind(Object(D.a)(Object(D.a)(n))),n.isPristineT=n.isPristineT.bind(Object(D.a)(Object(D.a)(n))),n.hasErrorsT=n.hasErrorsT.bind(Object(D.a)(Object(D.a)(n))),n.preInitT=n.preInitT.bind(Object(D.a)(Object(D.a)(n))),n.preSubmitT=n.preSubmitT.bind(Object(D.a)(Object(D.a)(n))),n.init=n.init.bind(Object(D.a)(Object(D.a)(n))),n.renderAccountsT=n.renderAccountsT.bind(Object(D.a)(Object(D.a)(n))),n.tdClassName=n.tdClassName.bind(Object(D.a)(Object(D.a)(n))),n.td=n.td.bind(Object(D.a)(Object(D.a)(n))),n.thClassName=n.thClassName.bind(Object(D.a)(Object(D.a)(n))),n.th=n.th.bind(Object(D.a)(Object(D.a)(n))),n.init(),n.state=Object(F.a)({},qe(n.preInitT(e.initAccounts))),n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"changePropertyF",value:function(e,t,n){if(this.isPersistedR(n)){var a=Qe(this.state.touched);a[n][t]=this.isDifferentFromInitialF(e,t,n),this.setState({touched:a})}this.validateF(t,e,n),this.setValueF(e,t,n)}},{key:"changePropertyDeletedF",value:function(e,t,n){if(this.isPersistedR(n)){this.deleteCount+=e?1:-1;var a=Qe(this.state.deleted);a[n]=e,this.setState({deleted:a})}else this.removeR(n)}},{key:"setValueF",value:function(e,t,n){var a=Qe(this.state.values);a[n][t]=e,this.setState({values:a})}},{key:"validateF",value:function(e,t,n){var a=this.state.errors[n][e];if(Ye[e](t)!==a){var r=Qe(this.state.errors);r[n][e]=Ye[e](t),this.setState({errors:r})}}},{key:"touchedF",value:function(e,t){return!(e<0)&&(!this.state.deleted[e]&&(!!this.isPersistedR(e)&&this.state.touched[e][t]))}},{key:"isDifferentFromInitialF",value:function(e,t,n){return e!==this.state.initial[n][t]}},{key:"chooseValueF",value:function(e,t){return this.state.deleted[e]?this.state.initial[e][t]:this.state.values[e][t]}},{key:"renderContentF",value:function(e,t){var n,a=this.chooseValueF(t,e);switch(e){case"credit":return r.a.createElement("div",null,r.a.createElement($,{id:"creditacc_"+t,onValueChanged:this.changePropertyF,checked:a,readOnly:this.readOnlyR(t,"credit"),field:"credit",index:t,touched:this.touchedF(t,"credit")}));case"active":return r.a.createElement("div",null,r.a.createElement($,{id:"activeacc_"+t,onValueChanged:this.changePropertyF,checked:a,readOnly:this.isPersistedR(t)&&(n=this.state.touched[t],n.credit||n.descr||n.color),field:"active",index:t,touched:this.touchedF(t,"active")}));case"descr":return r.a.createElement("div",null,r.a.createElement(ne,{id:"descracc_"+t,onValueChanged:this.changePropertyF,value:a,readOnly:this.readOnlyR(t,"descr"),field:"descr",index:t,touched:this.touchedF(t,"descr"),placeholder:"name"}));case"color":return r.a.createElement("div",null,r.a.createElement(le,{id:"coloracc_"+t,onValueChanged:this.changePropertyF,color:a,readOnly:this.readOnlyR(t,"color"),field:"color",index:t,touched:this.touchedF(t,"color")}));default:return console.log("UNKONWN field: "+e),null}}},{key:"renderDeletedContentF",value:function(e){var t=this;if(!this.isPersistedR(e))return r.a.createElement("button",{type:"button",className:"form-control",onClick:function(){return t.changePropertyDeletedF(!0,"deleted",e)}},r.a.createElement(Ke,{name:"remove",style:{color:"red"}}))}},{key:"setSortF",value:function(e){this.state.sort&&this.state.sort===e?this.state.sort===e&&this.state.asc?this.setState({asc:!1}):this.setState({sort:null}):this.setState({sort:e,asc:!0})}},{key:"sortersF",value:function(){var e=this,t=this.state.asc?-1:1;switch(this.state.sort){case"i":return function(n,a){return t*(e.chooseValueF(a.index,e.state.sort)-e.chooseValueF(n.index,e.state.sort))};case"descr":return function(n,a){var r=e.chooseValueF(n.index,"descr").toUpperCase(),i=e.chooseValueF(a.index,"descr").toUpperCase();return t*(r<i?-1:r>i?1:0)};case"credit":return function(e,n){return t*(e.credit&&n.credit?0:e.credit?1:-1)};case"active":return function(e,n){return t*(e.active&&n.active?0:e.active?1:-1)};default:return function(e,t){return 0}}}},{key:"addR",value:function(){var e=this.getDefaultR(),t=Qe(this.state.values);t.push(e),this.sortedValues.push(e);var n=Qe(this.state.errors);n.push(this.validateR(e)),this.setState({values:t,errors:n})}},{key:"getDefaultR",value:function(){var e=Ue;this.sortedValues.length&&(e=this.sortedValues[this.sortedValues.length-1]);var t=Object(F.a)({},e);return t.index=this.state.values.length,t.id=Je--,t.l=!1,t.check=!1,t}},{key:"removeR",value:function(e){this.state.values.splice(e,1);var t=Qe(this.state.values);this.state.errors.splice(e,1);for(var n=Qe(this.state.errors),a=e;a<t.length;a++)t[a].index--,n[a].index--;this.setState({values:t,errors:n})}},{key:"validateR",value:function(e){var t={};return He.forEach(function(n){t[n]=Ye[n](e[n])}),t}},{key:"readOnlyR",value:function(e,t){return this.state.deleted[e]||!this.state.values[e].active&&this.isPersistedR(e)}},{key:"isPersistedR",value:function(e){return this.state.values[e].id>=0}},{key:"renderAccountR",value:function(e){var t=this;return r.a.createElement("tr",{key:e},Object(S.a)(He).map(function(n){return t.td(e,n)}),r.a.createElement("td",{className:this.tdClassName(e,"deleted")},this.renderDeletedContentF(e)))}},{key:"resetT",value:function(){var e=qe(this.state.initial);this.setState(Object(F.a)({},e)),this.init()}},{key:"isPristineT",value:function(){var e=!0;return this.state.touched.forEach(function(t){He.forEach(function(n){e=e&&!t[n]})}),e&&this.state.initial.length===this.state.values.length&&!this.deleteCount}},{key:"hasErrorsT",value:function(){var e=!1;return this.state.errors.forEach(function(t){var n;e=e||((n=t).credit||n.active||n.descr||n.color)}),e}},{key:"preInitT",value:function(e){return Be(e)}},{key:"showOk",value:function(){this.msg.show("SAVED SUCCESSFULLY",{time:2e3,type:"success",icon:r.a.createElement("img",{src:"yes.png",alt:"save ok"})})}},{key:"preSubmitT",value:function(){var e=this,t=[];this.state.values.forEach(function(n,a){if(!e.isPersistedR(a)){var r={};He.forEach(function(t){r[t]=e.chooseValueF(a,t)}),t.push(r)}});var n=[];this.state.deleted.forEach(function(t,a){t&&n.push(e.state.values[a].id)});var a=[];this.state.values.forEach(function(t,n){if(e.isPersistedR(n)){var r={};He.forEach(function(a){e.touchedF(n,a)&&(r.id=t.id,r[a]=e.chooseValueF(n,a))}),Object.keys(r).length>0&&a.push(r)}});var r={created:We(t),deleted:n,modified:We(a)};this.pristine=null,this.props.update(r)}},{key:"init",value:function(){this.deleteCount=0,this.pristine=null,this.errors=null,this.allChecked=!1}},{key:"tdClassName",value:function(e,t){return t+"_cell"+(this.isPersistedR(e)?"":" newRow")+(this.state.deleted[e]?" deleted":"")+(this.state.errors[e][t]?" error":"")}},{key:"td",value:function(e,t){return r.a.createElement("td",{key:e+"_"+t,className:this.tdClassName(e,t)},this.renderContentF(t,e))}},{key:"thClassName",value:function(e){return e+"_header"}},{key:"th",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=r.a.createElement(Ke,{name:this.state.asc?"sort-asc":"sort-desc"}),i=r.a.createElement("div",null,this.state.sort===e?a:""),s=r.a.createElement("div",{style:{marginTop:8}},r.a.createElement("button",{type:"button",className:"link-button",onClick:function(){t.setSortF(e)}},n));return r.a.createElement("th",{className:this.thClassName(e)},r.a.createElement("div",null,r.a.createElement("span",{style:{display:"flex"}},r.a.createElement("div",{style:{marginTop:8,paddingRight:3}},i),null!==n?s:"")))}},{key:"componentWillReceiveProps",value:function(e){this.isPristineT()||null!=this.pristine||this.showOk(),this.init(),this.setState(Object(F.a)({},qe(this.preInitT(e.initAccounts))))}},{key:"render",value:function(){var e=this;return this.pristine=this.isPristineT(),this.errors=this.hasErrorsT(),r.a.createElement("div",null,r.a.createElement(oe.a,Object.assign({ref:function(t){return e.msg=t}},ue)),this.renderAccountsT())}}]),t}(r.a.Component);Xe.defaultProps={initAccounts:[]};var Ze=Object(s.b)(null,function(e){return{update:function(t){e(Ie(t))}}})(Xe),$e=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(R.a)(this,Object(_.a)(t).call(this,e))).state={accounts:[]},n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(x.a,null,r.a.createElement(x.a.Heading,{style:{paddingTop:"4px",paddingBottom:"3px",height:"45px",fontSize:"23px"}},r.a.createElement("span",{style:{display:"flow-root",alignItems:"center"}},"Accounts")),r.a.createElement(x.a.Body,null,r.a.createElement(Ze,{initAccounts:this.props.accounts}))))}}]),t}(r.a.Component),et=Object(s.b)(function(e){return{accounts:e.accounts.accounts}})($e),tt=(n(515),n(25)),nt=function(e){function t(){return Object(C.a)(this,t),Object(R.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=r.a.createElement(tt,{name:"spinner",spin:!0});return this.props.fetching?e:""}}]),t}(r.a.Component),at=function(e,t,n){return{type:"AUDITLOG_RESPONSE",payload:{logentries:e,firstpage:t,lastpage:n}}},rt=function(e){return function(t){t({type:"AUDITLOG_REQUEST"}),U("history",null!=e?"id="+e:"",function(e){var n=!0;51===e.data.length&&(n=!1,e.data.pop()),t(at(e.data,!0,n))},t)}},it=function(e){return function(t){t({type:"AUDITLOG_REQUEST"}),U("history","s="+e,function(e){var n=!0;51===e.data.length&&(n=!1,e.data.pop()),t(at(e.data,!1,n))},t)}},st=function(e){return function(t){t({type:"AUDITLOG_REQUEST"}),U("history","e="+e,function(e){var n=!0;51===e.data.length&&(n=!1,e.data.shift()),t(at(e.data,n,!1))},t)}},lt=n(25),ct=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(R.a)(this,Object(_.a)(t).call(this,e))).next=n.next.bind(Object(D.a)(Object(D.a)(n))),n.prev=n.prev.bind(Object(D.a)(Object(D.a)(n))),n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"next",value:function(){if(this.props.logentries&&0!==this.props.logentries.length){var e=this.props.logentries[this.props.logentries.length-1],t=e.hs[e.rownr].hd;this.props.next(t)}}},{key:"prev",value:function(){if(this.props.logentries&&0!==this.props.logentries.length){var e=this.props.logentries[0],t=e.hs[e.rownr].hd;this.props.prev(t)}}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N.a,{onClick:this.prev,disabled:this.props.firstpage},r.a.createElement(lt,{name:"caret-left"})),r.a.createElement(N.a,{onClick:this.next,disabled:this.props.lastpage},r.a.createElement(lt,{name:"caret-right"})),r.a.createElement(N.a,{href:"http://localhost:8080/log"},r.a.createElement(lt,{name:"download"})))}}]),t}(r.a.Component);var ot=Object(s.b)(function(e){return{logentries:e.auditlog.logentries,firstpage:e.auditlog.firstpage,lastpage:e.auditlog.lastpage}},function(e){return{next:function(t){e(it(t))},prev:function(t){e(st(t))}}})(ct),ut=n(32);function dt(e){var t=e.split("."),n=t[0],a=t[1]-1,r=t[2];return new Date(r,a,n)}function ht(e){var t=new Date(e),n="00"+t.getDate();n=n.substr(n.length-2);var a="00"+(t.getMonth()+1);a=a.substr(a.length-2);var r="00"+t.getHours();r=r.substr(r.length-2);var i="00"+t.getMinutes();i=i.substr(i.length-2);var s="00"+t.getSeconds();s=s.substr(s.length-2);var l="000"+t.getMilliseconds();return l=l.substr(l.length-3),n+"."+a+"."+t.getFullYear()+" "+r+":"+i+":"+s+"."+l}function pt(e,t){switch(t){case"w":return ht(e.hd);case"op":switch(e.op){case"C":return"creation";case"U":return"modification";case"D":return"deletion";default:return console.log("UNKONWN op:"+e.op),null}case"d":return function(e){var t=e.split("-"),n=t[2],a=t[1]-1,r=t[0];return ut(new Date(r,a,n),"dd.mm.yyyy")}(e.d);case"i":return de(e.i);case"s":return e.s?"X":"-";case"g":return e.g;case"c":return e.c_descr;case"a":return e.a_descr;case"descr":return e.descr;default:return console.log("UNKONWN field: "+t),null}}var ft=["d","i","s","g","c","a","descr"],mt=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(R.a)(this,Object(_.a)(t).call(this,e))).renderLogHeaderT=function(){return r.a.createElement("thead",null,r.a.createElement("tr",null,n.th("w","When"),n.th("op","What"),n.th("d","Date"),n.th("i","Pay"),n.th("s","s"),n.th("g","Ref"),n.th("c","Issue"),n.th("a","Account"),n.th("descr","Desc.")))},n.renderLogHeaderT=n.renderLogHeaderT.bind(Object(D.a)(Object(D.a)(n))),n.renderLogR=n.renderLogR.bind(Object(D.a)(Object(D.a)(n))),n.renderContentF=n.renderContentF.bind(Object(D.a)(Object(D.a)(n))),n.tdClassName=n.tdClassName.bind(Object(D.a)(Object(D.a)(n))),n.td=n.td.bind(Object(D.a)(Object(D.a)(n))),n.thClassName=n.thClassName.bind(Object(D.a)(Object(D.a)(n))),n.th=n.th.bind(Object(D.a)(Object(D.a)(n))),n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"renderContentF",value:function(e){return r.a.createElement("div",null,e)}},{key:"thClassName",value:function(e){return e+"_header"}},{key:"th",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=r.a.createElement("div",null,t);return r.a.createElement("th",{className:this.thClassName(e)},r.a.createElement("div",null,r.a.createElement("span",{style:{display:"flex"}},null!==t?n:"")))}},{key:"renderLogR",value:function(e,t){var n=this;return r.a.createElement("tr",{key:e.hs[t].id+"_"+e.hs[t].rownr},["w","op"].concat(ft).map(function(a){return n.td(e,t,a)}))}},{key:"tdClassName",value:function(e,t,n){var a=n+"_cell";return"U"===e.hs[t].op&&ft.indexOf(n)>-1&&e.hs[t][n]!==e.hs[t-1][n]&&(a+=" updatedRow"),(t===e.rownr||this.props.singleEntry)&&(a+=" actualRow"),a}},{key:"td",value:function(e,t,n){var a=pt(e.hs[t],n);return r.a.createElement("td",{key:e.hs[t].id+"_"+t+"_"+n,className:this.tdClassName(e,t,n)},this.renderContentF(a))}},{key:"render",value:function(){var e=this;if(null==this.props.logEntry)return null;var t=this.props.logEntry;return r.a.createElement(P.a,{id:"auditlog_table",key:"al_table_"+t.id,striped:!0,bordered:!0,hover:!0,condensed:!0},this.renderLogHeaderT(),r.a.createElement("tbody",null,t.hs.map(function(n,a){return e.renderLogR(t,a)})))}}]),t}(r.a.Component),bt=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(R.a)(this,Object(_.a)(t).call(this,e))).renderLogEntry=n.renderLogEntry.bind(Object(D.a)(Object(D.a)(n))),n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"renderLogEntry",value:function(e){return e.rownr<0?null:r.a.createElement(x.a,{key:"al_panel_"+e.hs[0].id+"_"+e.rownr},r.a.createElement(x.a.Heading,null,r.a.createElement(x.a.Title,null,pt(e.hs[e.rownr],"op")," at ",ht(e.hs[e.rownr].hd)," ( id: ",e.hs[0].id," )")),r.a.createElement(x.a.Body,null,r.a.createElement(mt,{logEntry:e})))}},{key:"render",value:function(){var e=this,t=this.props.logentries||[];return r.a.createElement("div",null,t.map(function(t){return e.renderLogEntry(t)}))}}]),t}(r.a.Component),yt=function(e){function t(){return Object(C.a)(this,t),Object(R.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.props.logentries||[];return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(x.a,null,r.a.createElement(x.a.Heading,{style:{paddingTop:"6px",paddingBottom:"3px",height:"45px",fontSize:"23px"}},"Audit Log ",r.a.createElement(nt,{fetching:this.props.fetching}),r.a.createElement("span",{className:"pull-right"},r.a.createElement(ot,null))))),r.a.createElement(bt,{logentries:e}),r.a.createElement("div",null,r.a.createElement(x.a,null,r.a.createElement(x.a.Heading,{style:{paddingTop:"6px",paddingBottom:"3px",height:"45px",fontSize:"23px"}},r.a.createElement("span",{className:"pull-right"},r.a.createElement(ot,null))))))}}]),t}(r.a.Component),vt=Object(s.b)(function(e){return{logentries:e.auditlog.logentries,fetching:e.auditlog.fetching}})(yt),gt=function(e){function t(){return Object(C.a)(this,t),Object(R.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(vt,{logentries:this.props.auditlog}))}}]),t}(r.a.Component),Ot=Object(s.b)(function(e){return{auditlog:e.auditlog.logentries}})(gt);function Et(e,t){var n=new Date(e);return n.setDate(n.getDate()+t),n}function jt(e,t){var n=new Date(e);return n.setMonth(n.getMonth()+t),n}function kt(e,t){var n=new Date(e),a=new Date(t);return Math.floor((Date.UTC(a.getFullYear(),a.getMonth(),a.getDate())-Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()))/864e5)}function Ct(e,t){return 1===e.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()&&t.getDate()===wt(e.getMonth(),e.getYear())}function wt(e,t){return new Date(t,e+1,0).getDate()}var Rt,_t,Tt=function(e,t){return function(n){Rt=e,_t=t,n(function(e,t,n){return{type:"DATE_RANGE_SELECTED",payload:{s:e,e:t}}}(e,t))}},xt=function(){return function(e){if(Ct(Rt,_t)){var t=jt(Rt,1),n=new Date(t);return t.setDate(1),n.setDate(wt(n.getMonth(),n.getYear())),void e(Tt(t,n))}var a=kt(Rt,_t);e(Tt(Et(Rt,a+1),Et(_t,a+1)))}},St=function(){return function(e){if(Ct(Rt,_t)){var t=jt(Rt,-1),n=new Date(t);return t.setDate(1),n.setDate(wt(n.getMonth(),n.getYear())),void e(Tt(t,n))}var a=kt(_t,Rt);e(Tt(Et(Rt,a-1),Et(_t,a-1)))}},Ft=function(){return function(e){var t=new Date(0),n=new Date;t.setFullYear(n.getFullYear()),t.setMonth(n.getMonth()),t.setDate(1),t.setHours(0);var a=new Date(t);a.setDate(wt(a.getMonth(),a.getYear())),e(Tt(t,a))}},Dt=0,Nt=function(e){return function(t){Dt=e,t({type:"MINIBARS_REQUEST",payload:null}),Y("minibars",{params:{cat:e}},function(e){var n={data:e.data,balance:0};t(function(e){return{type:"MINIBARS_RESPONSE",payload:{balances:e}}}(n))},t)}},Pt=function(){return function(e){e({type:"MINIBARS_REDRAW",payload:{redraw:(new Date).getTime()}})}};n(137);var Vt=n(518),At=n(32),Mt=n(99);function It(e){return parseFloat(Math.round(100*e)/100).toFixed(2)}var Lt=function(){var e,t,n,a,r,i,s,l,c,o,u,d,h,p,f,m,b,y,v,g,O,E="dd.mm.yyyy ddd",j="mmm",k="mmm yyyy",C="red",w="green",R="blue",_="white",T="pink",x="gray",S="cadetblue",F="lightblue",D="lightblue",N="black",P="lightblue",V=null,A=3,M=.8,I=null,L=null,H=null;var U="_div_minibar",Y="_tip_div_minibar",B="_tip_i_div_minibar",W="_day_text",G="_b_text",z="_b_color",q="_i_text",Q="_leadin_minibar",K="_zero_leadin_minibar",J="_zero_leadin_text_minibar",X="_max_text_minibar",Z="_min_text_minibar",$="_month_minibar",ee="_slot_bg_minibar",te="_i_minibar",ne="_e_minibar",ae="_b_minibar",re="_b_prev_minibar",ie="_b_next_minibar",se="_zero_minibar",le=null;function ce(){t=A*M,b=function(){console.assert(le[0].columns[0].d,"d must be defined"),console.assert(le[le.length-1].columns[0].d,"d must be defined");var e=ue(le[0].columns[0].d),t=ue(le[le.length-1].columns[0].d);return e+"-"+t}(),i=null}function oe(e){return"_"+V+"_"+e.getDate()+"_"+(e.getMonth()+1)+"_"+e.getFullYear()}function ue(e){return"_"+V+"_"+(e.getMonth()+1)+"_"+e.getFullYear()}function de(e){return!I||L||Vt.compare(e.d,I)?(t=e,I&&L&&t.d&&Vt.inRange(t.d,I,L)?x:function(e){if(e.smallestb<0)return T;return _}(e)):S;var t}function he(e){return e.getMonth()%2?D:F}function pe(e){var t=function(e){return Math.round(e).toPrecision(3)}(e),n=Mt.formatPrefix(t);return""+n.scale(t)+("y"===n.symbol?"":n.symbol)}function fe(e){var t=ue(e.d),n=document.getElementById(oe(e.d)+ee).getBoundingClientRect(),a=document.documentElement,r=0,i=-((window.pageYOffset||a.scrollTop)-(a.clientTop||0));Mt.select("#"+t+B).style("display",0===e.i&&0===e.e?"none":"table-row"),Mt.select("#"+t+Y).style({display:"inline",left:n.left-r+A+"px",top:n.top-i+.75*l+"px",position:"absolute"}),Mt.select("#"+t+W).text(At(e.d,E)),Mt.select("#"+t+G).text(It(e.b)),Mt.select("#"+t+z).style("background-color",function(e){return e.i+e.e<0?C:w}(e)),Mt.select("#"+t+q).text(It(e.i+e.e))}function me(e,t){var n=Mt.min([e,t]),a=Mt.max([e,t]);I=n,L=a}var be=864e5;function ye(e,t){var n=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),a=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((a-n)/be)}function ve(e){document.body.style.cursor=e}var ge={click:function(e){if(null==I||I&&L)I=e.d,L=null,ve("col-resize"),Ce();else if(null==L){if(I&&Math.abs(ye(I,e.d))>O)return;L=e.d,ve("pointer"),me(I,L),Ce(),H(I,L)}fe(e),Mt.select("#"+oe(e.d)+ee).attr("fill",S)},mouseover:function(e,t){fe(e),Mt.select("#"+oe(e.d)+ee).attr("fill",S),I&&!L&&Math.abs(ye(I,e.d))>O?ve("not-allowed"):ve(I&&!L?"col-resize":"pointer")},mouseout:function(e){!function(e){Mt.select("#"+ue(e.d)+Y).style("display","none")}(e),Mt.select("#"+oe(e.d)+ee).attr("fill",de(e))}};function Oe(i){var c=ue(i.columns[0].d),u=i.columns.length*A+n,b=Mt.select("#"+V),y={click:function(){var e,t;e=i.columns[0].d,t=i.columns[i.columns.length-1].d,I=e,L=t,Ce(),H(I,L)},mouseover:function(){var e;e=i.columns[0].d,Mt.select("#"+ue(e)+$).attr("fill",S)},mouseout:function(){var e;e=i.columns[0].d,Mt.select("#"+ue(e)+$).attr("fill",he(e))}},v=b.append("div").attr("id",c+U).style({width:u+"px",height:m+"px",float:"left","background-color":"white","border-style":"solid","border-width":e+"px","border-color":"magenta","margin-top":"5px"}),O=b.append("div").attr("id",c+Y).style({display:"none",position:"absolute","pointer-events":"none",top:"0px",left:"0px"}).append("table").attr("class","c3-tooltip").append("tbody");O.append("tr").append("th").attr({id:c+W,colspan:"2"}).text("CCC");var E=O.append("tr").attr("class","c3-tooltip-name--data2");E.append("td").attr("class","name").append("span").style("background-color",R),E.append("td").attr("class","value").attr("id",c+G).text("");var _=O.append("tr").attr("id",c+B).attr("class","c3-tooltip-name--data1");_.append("td").attr("class","name").append("span").attr("id",c+z).style("background-color","white"),_.append("td").attr("class","value").attr("id",c+q).text("");var T=v.append("svg").attr({id:c+Q,width:"0px",height:m});T.append("line").attr({x1:r-.5*n,x2:r-.5*n,y1:d,y2:f,stroke:P,"stroke-width":n}),T.append("line").attr({id:c+K,x1:r-7,x2:r,y1:h-g(0)+s+n,y2:h-g(0)+s+n,stroke:"black","stroke-width":a}),T.append("text").text("").attr({id:c+X,x:r-10,y:d+12,"text-anchor":"end","font-family":"sans-serif","font-size":"12px",fill:"black"}),T.append("text").text("").attr({id:c+Z,x:r-10,y:h,"text-anchor":"end","font-family":"sans-serif","font-size":"12px",fill:"black"});var x,F=v.append("svg").style({cursor:"inherit"}).attr({width:u,height:m,fill:"red"}).on({mouseout:function(){ve("default")}});F.append("rect").attr({id:c+$,y:p,x:0,width:u-n,height:o,fill:he(i.columns[0].d)}).style("cursor","pointer").on(y),F.append("text").text((x=i.columns[0].d,0===x.getMonth()?At(x,k):At(x,j))).attr({x:3,y:p+15,"text-anchor":"start","font-family":"sans-serif","font-size":"12px",fill:N}).style("cursor","pointer").on(y),F.selectAll().data(i.columns).enter().append("rect").attr({id:function(e){return console.assert(e.d,"d must be defined"),oe(e.d)+ee},x:function(e,t){return t*A},y:d,width:A,height:l,fill:function(e){return de(e)}}).on(ge),F.selectAll().data(i.columns).enter().append("rect").attr({id:function(e){return oe(e.d)+te},x:function(e,t){return(t+(1-M)/2)*A},y:function(e){return h-g(e.i)+s+n},width:t,height:function(e){return g(e.i)-g(0)},fill:w}).on(ge),F.selectAll().data(i.columns).enter().append("rect").attr({id:function(e){return oe(e.d)+ne},x:function(e,t){return(t+(1-M)/2)*A},y:h-g(0)+s+n,width:t,height:function(e){return g(0)-g(e.e)},fill:C}).on(ge),F.selectAll().data(i.columns).enter().append("line").attr({id:function(e){return oe(e.d)+se},x1:function(e,t){return t*A},x2:function(e,t){return(t+1)*A},y1:h-g(0)+s+n,y2:h-g(0)+s+n,stroke:"black","stroke-width":a}).on(ge),F.selectAll().data(i.columns).enter().append("line").attr({id:function(e){return oe(e.d)+re},x1:function(e,t){return(t-(null!=e.prev_b?.5:-.5))*A},x2:function(e,t){return(t+.5)*A},y1:function(e){return h-g(null!=e.prev_b?e.prev_b:e.b)+s+n},y2:function(e,t){return h-g(e.b)+s+n},stroke:R,"stroke-width":a}).on(ge),F.selectAll().data(i.columns).enter().append("line").attr({id:function(e){return oe(e.d)+ie},x1:function(e,t){return(t+.5)*A},x2:function(e,t){return(t+(null!=e.next_b?1.5:.5))*A},y1:function(e){return h-g(e.b)+s+n},y2:function(e,t){return h-g(null!=e.next_b?e.next_b:e.b)+s+n},stroke:R,"stroke-width":a}).on(ge),A>4&&F.selectAll().data(i.columns).enter().append("circle").style("shape-rendering","auto").attr({id:function(e){return oe(e.d)+ae},cx:function(e,t){return(t+.5)*A},cy:function(e){return h-g(e.b)+s+n},r:1.5,fill:R}).on(ge),F.append("line").attr({x1:-2,x2:u+2,y1:d+.5*n,y2:d+.5*n,stroke:P,"stroke-width":n}),F.append("line").attr({x1:u-.5*n,x2:u-.5*n,y1:d,y2:f,stroke:P,"stroke-width":n})}function Ee(e){var t=ue(e.columns[0].d),a=document.getElementById(t+U).getBoundingClientRect().left,s=!1,l=e.columns.length*A+n;i||(i=a,s=!0),Mt.select("#"+t+U).style({width:l+(a<=i?r:0)+"px"}),Mt.select("#"+t+Q).attr({width:(a<=i?r:0)+"px"}),s&&(Mt.select("#"+t+X).text(pe(v)),Mt.select("#"+t+Z).text(pe(y)))}function je(e){var t=ue(e.columns[0].d);Mt.select("#"+t+K).transition().attr({y1:h-g(0)+s+n,y2:h-g(0)+s+n}),Mt.select("#"+t+J).transition().attr({y:h-g(0)+3+s+n}),e.columns.forEach(function(e){var t=oe(e.d);Mt.select("#"+t+te).datum(function(t){return t.i=e.i,t.e=e.e,t.b=e.b,t.smallestb=e.smallestb,t.prev_b=e.prev_b,t.next_b=e.next_b,t}).transition().attr({y:function(e){return h-g(e.i)+s+n},height:function(e){return g(e.i)-g(0)}}),Mt.select("#"+t+ee).transition().attr({fill:function(e){return de(e)}}),Mt.select("#"+t+ne).transition().attr({y:h-g(0)+s+n,height:function(e){return g(0)-g(e.e)}}),Mt.select("#"+t+ae).transition().attr({cy:function(e){return h-g(e.b)+s+n}}),Mt.select("#"+t+se).transition().attr({y1:h-g(0)+s+n,y2:h-g(0)+s+n}),Mt.select("#"+t+re).transition().attr({y1:function(e){return h-g(null!=e.prev_b?e.prev_b:e.b)+s+n},y2:function(e){return h-g(e.b)+s+n}}),Mt.select("#"+t+ie).transition().attr({y1:function(e){return h-g(e.b)+s+n},y2:function(e){return h-g(null!=e.next_b?e.next_b:e.b)+s+n}})})}var ke={balance:0,data:[{d:new Date,b:0,e:0,i:0,smallestb:0}]};function Ce(){if(le)for(var e=0,t=le.length;e<t;e++)je(le[e]),Ee(le[e])}function we(){Mt.select("#"+V).selectAll("div").remove();for(var e=0,t=le.length;e<t;e++)Oe(le[e]),Ee(le[e])}return{resize:function(){ce(),we()},config:function(t){V||(console.assert(t,"not a valid config"),function(t){V?console.assert(!t.bindto||V===t.bindto,"bindto can be defined only once"):(console.assert(t.bindto,"bindto is mandatory"),V=t.bindto),e=t.div_border_width||e||0,r=t.leadin_width||r||45,n=t.line_width||n||1,a=t.b_line_width||a||.2,s=t.top_margin||s||10,l=t.datearea_height||l||80,c=t.center_margin||c||0,o=t.month_height||o||20,u=t.bottom_margin||u||3,m=(f=(p=(h=(d=s)+l)+c)+o)+u,H=t.select,O=t.max_selection_days||90,b="NONE"}(t))},generate:function(e){if(e&&e.data){e.data.length||(e=ke),console.assert(V,"config must be called first!"),le=function(e){var t=-1!==e[0].a,n=[];if(!e||!e.length)return n;if("string"===typeof e[0].d)for(var a=0,r=e.length;a<r;a++)e[a].d=new Date(e[a].d);function i(e,t){return new Date(t,e+1,0).getDate()}console.assert(e[0].d,"d is mandatory");for(var s=e[0].d.getMonth()-1,l=e[0].d.getFullYear(),c=e[0].d.getDate()-1,o=0,u=0,d=null,h=0,p=e.length;h<p;h++){var f=e[h];console.assert(f.d,"d is mandatory");var m=f.d.getMonth(),b=f.d.getFullYear(),y=f.d.getDate();for(console.assert(m>=0&&m<12&&y>0&&y<=31&&372*l+31*s+c<372*b+31*m+y,"input array must be ascending"),c=y;s!==m||l!==b;){12===++s&&(l++,s=0),d=[];for(var v=1,g=i(s,l);v<=g;v++)d.push({i:0,e:0,d:new Date(l,s,v),b:o,smallestb:u});n.push({columns:d,range_text:s+1+"/"+l})}console.assert(null!=f.b,"b is mandatory"),console.assert(null!=f.smallestb,"smallestb is mandatory"),console.assert(null!=f.i,"i is mandatory"),console.assert(f.i>=0,"i must be positive"),console.assert(null!=f.e,"e is mandatory"),console.assert(f.e<=0,"i must be negative"),t?(o=f.b,u=f.smallestb):u=o=Math.round(100*(o+f.i+f.e))/100;for(var O=f.d.getDate(),E=d.length;O<E;O++)d[O].b=o,d[O].smallestb=u;d[f.d.getDate()-1].i=f.i,d[f.d.getDate()-1].e=f.e,d[f.d.getDate()-1].b=o,d[f.d.getDate()-1].smallestb=u}for(var j=0,k=n.length;j<k;j++)for(var C=0,w=n[j].columns.length;C<w;C++){var R=n[j].columns[C];j||C?j+1===k&&C+1===w?R.next_b=null:C?C+1===w&&(R.next_b=n[j+1].columns[0].b):R.prev_b=n[j-1].columns[n[j-1].columns.length-1].b:R.prev_b=null,"undefined"===typeof R.prev_b&&(R.prev_b=n[j].columns[C-1].b),"undefined"===typeof R.next_b&&(R.next_b=n[j].columns[C+1].b)}d=[];var _=new Date(n[0].columns[0].d);_.setMonth(_.getMonth()-1);for(var T=1,x=i(s=_.getMonth(),l=_.getFullYear());T<=x;T++)d.push({i:0,e:0,d:new Date(l,s,T),b:0,smallestb:0});n.unshift({columns:d,range_text:s+1+"/"+l}),d=[];var S=n[n.length-1].columns[n[n.length-1].columns.length-1];S.next_b=S.b;var F=new Date(S.d);F.setDate(1),F.setMonth(F.getMonth()+1);for(var D=1,N=i(s=F.getMonth(),l=F.getFullYear());D<=N;D++)d.push({i:0,e:0,d:new Date(l,s,D),b:S.b,smallestb:S.smallestb,prev_b:S.b,next_b:S.b});return d[d.length-1].next_b=null,n.push({columns:d,range_text:s+1+"/"+l}),n}(e.data);var t=b;ce(),function(){y=Mt.min([0,le[0].columns[0].b]),v=Mt.max([0,le[0].columns[0].b]);for(var e=0,t=le.length;e<t;e++)y=Mt.min([y,Mt.min(le[e].columns,function(e){return console.assert(null!=e.i&&null!=e.e&&null!=e.b&&e.d,"i, e, b and d must be defined"),console.assert(e.i>=0&&e.e<=0,"i must be positive, e must be negative"),Mt.min([e.i,e.e,e.b])})]),v=Mt.max([v,Mt.max(le[e].columns,function(e){return Mt.max([e.i,e.e,e.b])})]);0===y&&0===v&&(v=100),g=Mt.scale.linear().domain([y,v]).range([d+n,h])}(),t===b?Ce():we()}},select:function(e,t){e&&t?(me(e,t),Ce()):console.assert(null!=e&&null!=t)}}}();window.addEventListener("resize",function(e){Lt.resize()});var Ht=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(R.a)(this,Object(_.a)(t).call(this,e))).state={start:new Date,end:new Date,balances:null,redraw:null},n.select=n.select.bind(Object(D.a)(Object(D.a)(n))),n.redraw=n.redraw.bind(Object(D.a)(Object(D.a)(n))),e.load(),n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){var e={max_selection_days:400,bindto:this.props.name,select:this.select};this.minibars=Lt,this.minibars.config(e)}},{key:"select",value:function(e,t){this.su=!1,this.props.setDateRange(new Date(e),new Date(t),"rangePicker1")}},{key:"redraw",value:function(){this.minibars.generate(this.props.balances),this.minibars.select(this.props.start,this.props.end)}},{key:"componentWillReceiveProps",value:function(e){this.minibars.generate(e.balances),this.minibars.select(e.start,e.end)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{id:this.props.name}))}}]),t}(r.a.Component);var Ut=Object(s.b)(function(e){return{start:e.daterange.s,end:e.daterange.e,balances:e.minibars.balances,redraw:e.minibars.redraw}},function(e){return{load:function(){e(Nt(0))},setDateRange:function(t,n,a){e(Tt(t,n,a))}}})(Ht),Yt=n(25),Bt=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(R.a)(this,Object(_.a)(t).call(this,e))).prevBlock=n.prevBlock.bind(Object(D.a)(Object(D.a)(n))),n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"prevBlock",value:function(){this.props.daterangePrevBlock()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N.a,{onClick:this.prevBlock},r.a.createElement(Yt,{name:"caret-left"})))}}]),t}(r.a.Component);var Wt=Object(s.b)(null,function(e){return{daterangePrevBlock:function(){e(St())}}})(Bt),Gt=n(25),zt=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(R.a)(this,Object(_.a)(t).call(this,e))).nextBlock=n.nextBlock.bind(Object(D.a)(Object(D.a)(n))),n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"nextBlock",value:function(){this.props.daterangeNextBlock()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N.a,{onClick:this.nextBlock},r.a.createElement(Gt,{name:"caret-right"})))}}]),t}(r.a.Component);var qt=Object(s.b)(null,function(e){return{daterangeNextBlock:function(){e(xt())}}})(zt),Qt=n(42),Kt=n.n(Qt),Jt=n(36),Xt=n.n(Jt),Zt=(n(519),{dateLimit:{days:90},showWeekNumbers:!0,autoApply:!0,alwaysShowCalendars:!0,locale:{direction:"ltr",format:"DD.MM.YYYY",separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",fromLabel:"From",toLabel:"To",customRangeLabel:"Custom",daysOfWeek:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],firstDay:1},linkedCalendars:!1,ranges:{"Last 7 Days":[Kt()().subtract(6,"days"),Kt()()],"Last 30 Days":[Kt()().subtract(29,"days"),Kt()()],"This Month":[Kt()().startOf("month"),Kt()().endOf("month")],"Last Month":[Kt()().subtract(1,"month").startOf("month"),Kt()().subtract(1,"month").endOf("month")]}}),$t={singleDatePicker:!0,showDropdowns:!1,showWeekNumbers:!0,alwaysShowCalendars:!0,autoApply:!0,locale:{direction:"ltr",format:"DD.MM.YYYY",separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",fromLabel:"From",toLabel:"To",customRangeLabel:"Custom",daysOfWeek:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],firstDay:1}},en=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(R.a)(this,Object(_.a)(t).call(this,e))).state={start:e.value?e.value:e.start?e.start:new Date,end:e.value?null:e.end?e.end:new Date},n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.value?(Xt()("#"+this.props.pickerName).data("daterangepicker").setStartDate(e.value),Xt()("#"+this.props.pickerName).data("daterangepicker").setEndDate(e.value)):e.start&&(Xt()("#"+this.props.pickerName).data("daterangepicker").setStartDate(e.start),Xt()("#"+this.props.pickerName).data("daterangepicker").setEndDate(e.end))}},{key:"componentDidMount",value:function(){var e=this;"single"===this.props.pickerType&&Xt()("#"+this.props.pickerName).daterangepicker($t,function(t){e.props.pickerCallback(t,e.props.pickerName)}),"range"===this.props.pickerType&&Xt()("#"+this.props.pickerName).daterangepicker(Zt,function(t,n){e.props.pickerCallback(t,n,e.props.pickerName)}),Xt()("#"+this.props.pickerName).data("daterangepicker").setStartDate(this.state.start),"range"===this.props.pickerType?Xt()("#"+this.props.pickerName).data("daterangepicker").setEndDate(this.state.end):Xt()("#"+this.props.pickerName).data("daterangepicker").setEndDate(this.state.start)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("input",{disabled:this.props.disabled,autoComplete:"off",onKeyDown:function(e){if(9!==(e.which||e.keyCode))return e.preventDefault(),!1},type:"text",id:this.props.pickerName,className:"form-control",style:{display:"inline",width:"range"===this.props.pickerType?"185px":"100px",backgroundColor:this.props.touched?"lightyellow":""}}))}}]),t}(r.a.Component);en.defaultProps={componentWillReceiveProps:!1,start:null,end:null,disabled:!1,touched:!1};var tn=Object(s.b)(function(e){return{start:e.daterange.s,end:e.daterange.e}})(en),nn=n(104);n(536);function an(e,t){for(var n=0;n<e.length;n++){var a=e[n];if(t(a))return a}return null}var rn=n(25),sn=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(R.a)(this,Object(_.a)(t).call(this,e))).state={selectedValue:null,items:e.getConstants(e.constants_id)},n.constants_id=e.constants_id,n.onValueChange=n.onValueChange.bind(Object(D.a)(Object(D.a)(n))),n.className=n.className.bind(Object(D.a)(Object(D.a)(n))),n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"onValueChange",value:function(e){return this.setState({selectedValue:e}),this.props.onValueChange(null!=e?e.value:null),this.renderOption(e)}},{key:"componentWillReceiveProps",value:function(e){if(e.constants&&e.constants[this.props.constants_id]){var t=e.constants[this.props.constants_id],n=an(t,function(t){return t.value===e.selectedValue}),a=t.filter(function(e){return e.valid||e===n});this.setState({selectedValue:n,items:a})}}},{key:"renderOption",value:function(e){if(null!=e)return r.a.createElement("span",{style:{display:"block",whiteSpace:"nowrap"}},r.a.createElement("span",{style:{display:"block",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:"100px"}},r.a.createElement("span",{style:{marginRight:"5px",marginLeft:"5px"}},r.a.createElement(rn,{name:"square",style:{color:e.color}})),r.a.createElement("span",null,e.label)))}},{key:"className",value:function(){return this.props.readOnly||this.props.touched?!this.props.readOnly&&this.props.touched?"simpledropdown_touched":this.props.readOnly&&!this.props.touched?"simpledropdown_ro":this.props.readOnly&&this.props.touched?"simpledropdown_ro_touched":void 0:"simpledropdown"}},{key:"render",value:function(){return r.a.createElement(nn.SimpleSelect,{className:this.className(),disabled:this.props.readOnly,style:{width:"150px",border:"none",backgroundColor:"none",backgroundImage:"none"},renderOption:this.renderOption,renderValue:this.renderOption,onValueChange:this.onValueChange,placeholder:this.props.placeholder,options:this.state.items,value:this.state.selectedValue,hideResetButton:!0})}}]),t}(r.a.Component);sn.defaultProps={refreshTime:null,onValueChange:null,touched:!1,readOnly:!1,placeholder:"",constants:null,constants_id:null};var ln=Object(s.b)(function(e){return{refreshTime:e.constants.refreshTime,constants:e.constants.constants}},function(e){return{getConstants:function(t){q(t,e)}}})(sn),cn=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(R.a)(this,Object(_.a)(t).call(this,e))).state={filter:null,checked:!0},n.onFilterChanged=n.onFilterChanged.bind(Object(D.a)(Object(D.a)(n))),n.onCheck=n.onCheck.bind(Object(D.a)(Object(D.a)(n))),n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"onFilterChanged",value:function(e){this.setState({filter:e}),this.props.balances_load(e)}},{key:"onCheck",value:function(e){this.setState({checked:e}),e?this.props.balances_load(0):this.state.filter&&this.props.balances_load(this.state.filter)}},{key:"render",value:function(){var e=r.a.createElement(ln,{readOnly:this.state.checked,onValueChange:this.onFilterChanged,selectedValue:this.state.filter,placeholder:"filter",constants_id:"cat"});return r.a.createElement("div",null,r.a.createElement("span",{style:{display:"inline-flex"}},r.a.createElement("div",{style:{paddingTop:"7px",paddingRight:"5px"}},"All"),r.a.createElement($,{id:"all",onValueChanged:this.onCheck,checked:this.state.checked}),this.state.checked?null:e))}}]),t}(r.a.Component);var on=Object(s.b)(null,function(e){return{balances_load:function(t){e(Nt(t))}}})(cn),un=n(25),dn=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(R.a)(this,Object(_.a)(t).call(this,e))).showMinibars=n.showMinibars.bind(Object(D.a)(Object(D.a)(n))),n.state={showMinibars:!1},n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"showMinibars",value:function(){this.setState({showMinibars:!this.state.showMinibars});var e=this;console.log("FIRE:"),setTimeout(function(){e.props.minibarsRedraw()},0)}},{key:"render",value:function(){var e=this,t=this.state.showMinibars?r.a.createElement("span",{className:"pull-right",style:{paddingLeft:"20px"}},r.a.createElement(on,null)):null;return r.a.createElement(x.a,{style:{width:"100%"},id:"minibars-panel",expanded:this.state.showMinibars,onToggle:function(){}},r.a.createElement(x.a.Heading,{style:{paddingTop:"3px",paddingBottom:"3px",height:"45px"}},r.a.createElement("div",{style:{display:"inline-flex",whiteSpace:"nowrap",alignItems:"center",fontSize:"23px"}},r.a.createElement(un,{name:"calendar"}),"-",r.a.createElement(un,{name:"calendar"}),"\xa0",r.a.createElement("div",{style:{paddingTop:"1px"}},r.a.createElement(Wt,null)),r.a.createElement(tn,{componentWillReceiveProps:!0,pickerName:"rangePicker1",pickerType:"range",pickerCallback:function(t,n,a){e.props.setDateRange(new Date(t),new Date(n))}}),r.a.createElement("div",{style:{paddingTop:"1px"}},r.a.createElement(qt,null))),r.a.createElement("span",null,r.a.createElement(x.a.Toggle,{componentClass:"button",className:"link-button",onClick:this.showMinibars,style:{textDecoration:"none"}},"\xa0",this.state.showMinibars?r.a.createElement(un,{name:"caret-up",size:"2x"}):r.a.createElement(un,{name:"caret-down",size:"2x"}),"\xa0")),r.a.createElement(nt,{fetching:this.props.fetching}),t),r.a.createElement(x.a.Collapse,null,r.a.createElement(x.a.Body,null,r.a.createElement(Ut,{name:"minibar"}))))}}]),t}(r.a.Component);var hn=Object(s.b)(function(e){return{fetching:e.minibars.fetching}},function(e){return{setDateRange:function(t,n){e(Tt(t,n))},minibarsRedraw:function(){e(Pt())}}})(dn),pn=n(32),fn=function(e,t){return{type:"PIE_REQUEST",payload:{s:e,e:t}}},mn=function(e){return{type:"PIE_RESPONSE",payload:{slices:e}}},bn=null;function yn(e){e(fn(bn.s,bn.e)),Y("pie?ts="+Date.now(),{params:bn},function(t){e(mn(t.data))},e)}var vn=function(e,t){return function(n){bn={s:pn(e,"yyyy-mm-dd"),e:pn(t,"yyyy-mm-dd")},yn(n)}},gn=function(){return function(e){e({type:"PIE_REDRAW",payload:{redraw:(new Date).getTime()}})}},On=n(32),En=null,jn=[],kn=-1,Cn=function(){return{type:"PAYMENTS_REQUEST"}},wn=function(e,t){return{type:"PAYMENTS_RESPONSE",payload:{params:En,queryType:En.e,payments:e,balances:t,historystack:{last:kn===jn.length-1,first:0===kn}}}},Rn=function(e){return function(t){t(function(e){return{type:"PAYMENTS_UPDATE_REQUEST",payload:{updates:e}}}(e)),B("payments/update",e,function(e){t({type:"PAYMENTS_UPDATE_RESPONSE"}),t(Nn()),t(function(e){console.assert(bn),yn(e)}),t(Nt(Dt)),t(Ne())},t)}};function _n(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(kn<jn.length-1&&(jn=jn.slice(0,kn+1)),jn.push(En),kn++),e(Cn()),Y("payments",{params:En},function(t){e(wn(t.data[0],t.data[1]))},e)}var Tn=function(e){return function(t){En={e:"d",d:On(e,"yyyy-mm-dd")},_n(t,!0)}},xn=function(e,t,n){return function(a){En={e:"a",a:e,d1:On(t,"yyyy-mm-dd"),d2:On(n,"yyyy-mm-dd")},_n(a,!0)}},Sn=function(e,t,n){return function(a){En={e:"c",c:e,d1:On(t,"yyyy-mm-dd"),d2:On(n,"yyyy-mm-dd")},_n(a,!0)}},Fn=function(e){return function(t){En={e:"g",g:e},_n(t,!0)}},Dn=function(e){return function(t){En={e:"l",ids:e},_n(t,!0)}},Nn=function(){return function(e){console.assert(En),_n(e)}},Pn=function(){return function(e){En=jn[--kn],_n(e)}},Vn=function(){return function(e){En=jn[++kn],_n(e)}},An=function(e,t){return function(n){n(function(e,t){return{type:"LOCK_PAYMENT_REQUEST",payload:{lock_payment_request:e,locked:t}}}(e,t)),Y("lock",{params:{id:e,l:t}},function(t){n(function(e,t){return{type:"LOCK_PAYMENT_RESPONSE",payload:{payment:e}}}(e))},n)}},Mn=function(e){return function(t){t(function(e){return{type:"PAYMENT_SELECTION",payload:{payments:e}}}(e))}},In=n(594),Ln=(n(538),function(e){function t(){return Object(C.a)(this,t),Object(R.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){if(null==this.props.logentries)return null;var e=this.props.logentries[0],t=Object(F.a)({},this.props),n={show:t.show,onHide:t.onHide};return r.a.createElement(In.a,Object.assign({},n,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:"true",dialogClassName:"modal-90w"}),r.a.createElement(In.a.Header,{closeButton:!0},r.a.createElement(In.a.Title,{id:"contained-modal-title-vcenter"},"History")),r.a.createElement(In.a.Body,null,r.a.createElement(mt,{logEntry:e,singleEntry:!0})),r.a.createElement(In.a.Footer,null,r.a.createElement(N.a,{onClick:this.props.onHide},"Close")))}}]),t}(r.a.Component)),Hn=Object(s.b)(function(e){return{logentries:e.auditlog.logentries}})(Ln),Un=n(227),Yn=n.n(Un),Bn=(n(553),n(25)),Wn=function(e){function t(){return Object(C.a)(this,t),Object(R.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement(Bn,{name:"lock",style:{color:"white"}})}}]),t}(r.a.Component),Gn=function(e){function t(){return Object(C.a)(this,t),Object(R.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement(Bn,{name:"unlock-alt",style:{color:"white"}})}}]),t}(r.a.Component),zn=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(R.a)(this,Object(_.a)(t).call(this,e))).toggleLock=n.toggleLock.bind(Object(D.a)(Object(D.a)(n))),n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"toggleLock",value:function(e){var t=this.props,n=t.field,a=t.index,r=!e.target.checked;this.props.onValueChanged(r,n,a),this.props.lockPayment(this.props.id,r)}},{key:"componentWillReceiveProps",value:function(e){this.setState({checked:e.checked})}},{key:"render",value:function(){var e=this.props,t=e.readOnly,n=e.checked;return r.a.createElement("div",{style:{paddingTop:8}},r.a.createElement(Yn.a,{disabled:t,checked:!n,onChange:this.toggleLock,icons:{checked:r.a.createElement(Gn,null),unchecked:r.a.createElement(Wn,null)}}))}}]),t}(r.a.Component);zn.defaultProps={id:null,onValueChanged:null,checked:!1,readOnly:!1,field:null,index:null};var qn=Object(s.b)(null,function(e){return{lockPayment:function(t,n){e(An(t,n))}}})(zn),Qn=function(e){function t(){return Object(C.a)(this,t),Object(R.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.props,t=e.readOnly,n=e.field,a=e.index,i=e.onValueChanged,s=e.placeholder,l=e.touched,c=e.constants_id;return r.a.createElement("div",null,r.a.createElement(ln,{readOnly:t,onValueChange:function(e){i(e,n,a)},selectedValue:this.props.value,placeholder:s,touched:l,constants_id:c}))}}]),t}(r.a.Component);Qn.defaultProps={onValueChanged:null,value:null,readOnly:!1,placeholder:"",field:null,index:null,touched:!1,constants_id:null};var Kn=Qn,Jn=n(597),Xn=n(588),Zn=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(R.a)(this,Object(_.a)(t).call(this,e))).state={txtValue:e.value},n.onChange=n.onChange.bind(Object(D.a)(Object(D.a)(n))),n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"onChange",value:function(e){var t=this.props,n=t.onValueChanged,a=t.field,r=t.index;this.setState({txtValue:e.target.value}),n(e.target.value,a,r)}},{key:"componentWillReceiveProps",value:function(e){this.setState({txtValue:e.value})}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,a=t.placeholder,i=t.readOnly,s=t.touched,l=t.linkCb,c=t.popoverText,o=r.a.createElement("input",{autoComplete:"off",id:n,value:this.state.txtValue,disabled:i,style:{backgroundColor:s?"lightyellow":""},placeholder:i?"":a,type:"text",onChange:this.onChange,className:"form-control"});if(i)return r.a.createElement(N.a,{className:"link-button",onClick:function(){l(e.state.txtValue)}},o);if(s||null==l||null==this.state.txtValue||0===this.state.txtValue.length)return r.a.createElement("span",{style:{display:"inline-flex"}},o);var u=l&&this.state.txtValue&&this.state.txtValue.length>0?r.a.createElement(N.a,{className:"link-button",onClick:function(){l(e.state.txtValue)}},c):null;return r.a.createElement("div",null,r.a.createElement("span",{style:{display:"inline-flex"}},r.a.createElement(Jn.a,{trigger:"focus",key:"top",placement:"top",overlay:r.a.createElement(Xn.a,{id:"popover-positioned-".concat(n)},u)},o)))}}]),t}(r.a.Component);Zn.defaultProps={id:null,placeholder:"",onValueChanged:null,value:"",readOnly:!1,field:null,index:null,touched:!1,linkCb:null,popoverText:null};var $n=Zn,ea=n(32),ta=function(e){function t(){return Object(C.a)(this,t),Object(R.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.onValueChanged,a=e.value,i=e.readOnly,s=e.field,l=e.index,c=e.touched,o=e.linkCb,u=e.popoverText,d=r.a.createElement("div",null,r.a.createElement(tn,{disabled:i,value:a,id:t,pickerName:"picker_d_"+t+l,pickerCallback:function(e){return n(ea(e,"dd.mm.yyyy"),s,l)},pickerType:"single",touched:c,style:{backgroundColor:c?"lightyellow":""}}));if(i&&null!=o)return r.a.createElement(N.a,{className:"link-button",onClick:function(){o(a)}},d);if(c||i||null==o||null==a||0===a.length)return r.a.createElement("span",{style:{display:"inline-flex"}},d);var h=o&&a&&a.length>0?r.a.createElement(N.a,{className:"link-button",onClick:function(){o(a)}},u):null;return r.a.createElement("div",null,r.a.createElement("span",{style:{display:"inline-flex"}},r.a.createElement(Jn.a,{trigger:"focus",key:"top",placement:"top",overlay:r.a.createElement(Xn.a,{id:"popover-d-positioned-"+t},h)},d)))}}]),t}(r.a.Component);ta.defaultProps={id:null,onValueChanged:null,value:!0,readOnly:!1,field:null,index:null,touched:!1,linkCb:null,popoverText:null};var na=ta,aa=n(229),ra=n.n(aa);n(564);var ia=n(32),sa={DAILY:function(e,t){var n=Et(dt(e.d),1);e.d=ia(n,"dd.mm.yyyy")},WEEKLY:function(e,t){var n=Et(dt(e.d),7);e.d=ia(n,"dd.mm.yyyy")},FORTNIGHTLY:function(e,t){var n=Et(dt(e.d),14);e.d=ia(n,"dd.mm.yyyy")},TWICE_A_MONTH:function(e,t){var n,a=dt(e.d),r=null;n=t,r=0===(n=Number(n))||n&&!(n%2)?Et(a,14):jt(r=Et(a,-14),1),e.d=ia(r,"dd.mm.yyyy")},MONTHLY:function(e,t){var n=jt(dt(e.d),1);e.d=ia(n,"dd.mm.yyyy")},EVERY_OTHER_MONTH:function(e,t){var n=jt(dt(e.d),2);e.d=ia(n,"dd.mm.yyyy")},EVERY_3_MONTHS:function(e,t){var n=jt(dt(e.d),3);e.d=ia(n,"dd.mm.yyyy")},EVERY_4_MONTHS:function(e,t){var n=jt(dt(e.d),4);e.d=ia(n,"dd.mm.yyyy")},EVERY_6_MONTHS:function(e,t){var n=jt(dt(e.d),6);e.d=ia(n,"dd.mm.yyyy")},YEARLY:function(e,t){var n=jt(dt(e.d),12);e.d=ia(n,"dd.mm.yyyy")}};var la=function(e,t,n){sa[n](e,t)},ca=n(32),oa=["d","b","i","s","g","c","a","descr"],ua={id:null,l:!1,d:ca(new Date,"dd.mm.yyyy"),i:"+0.00",c:null,a:null,s:!0,g:"",descr:"",b:null},da={id:null,l:!1,d:ca(new Date,"dd.mm.yyyy"),i:"+0.00",c:null,a:null,s:!0,g:"",descr:"",b:null},ha={check:function(e){return null},l:function(e){return null},d:function(e){return null!=e&&""!==e?null:"required"},i:function(e){return""!==e?null:"required"},s:function(e){return null},c:function(e){return null!=e&&""!==e?null:"required"},a:function(e){return null!==e&&""!==e?null:"required"},g:function(e){return null},descr:function(e){return null},b:function(e){return null}};function pa(e,t){var n=function(e,t){var n=[];return e.forEach(function(e){n.push(ba(e,t))}),n}(e,t);return n.forEach(function(e){e.d=ca(e.d,"dd.mm.yyyy"),e.i=(e.i>=0?"+":"")+de(e.i)}),n}function fa(e){return e.forEach(function(e){e.i&&(e.i=parseFloat(e.i)),e.d&&(e.d=function(e){var t=e.split("."),n=t[0],a=t[1]-1,r=t[2];return ut(new Date(r,a,n),"yyyy-mm-dd")}(e.d))}),e}function ma(e){return{check:e,id:e,l:e,d:e,i:e,c:e,a:e,s:e,g:e,descr:e,b:e}}function ba(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{check:t.indexOf(e.id)>-1,index:n,id:e.id,l:e.l,d:e.d,i:e.i,c:e.c,a:e.a,s:e.s,g:e.g,descr:e.descr,b:e.b}}var ya=[{label:"daily",value:"DAILY"},{label:"weekly",value:"WEEKLY"},{label:"fortnightly",value:"FORTNIGHTLY"},{label:"twice a month",value:"TWICE_A_MONTH"},{label:"monthly",value:"MONTHLY"},{label:"every other month",value:"EVERY_OTHER_MONTH"},{label:"every 3 months",value:"EVERY_3_MONTHS"},{label:"every 4 months",value:"EVERY_4_MONTHS"},{label:"every 6 months",value:"EVERY_6_MONTHS"},{label:"yearly",value:"YEARLY"}];function va(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{recur:!1,times:1,span:ya[3]},a={values:[],initial:[],errors:[],touched:[],deleted:[],masked:ma(!1),maskValues:da,maskErrors:ma(null),sort:null,asc:!0,allChecked:!1,recurring:n};return a.recurring.recur=!1,e.forEach(function(e,n){a.values.push(ba(e,t,n)),a.initial.push(ba(e,t)),a.errors.push(ma(null)),a.touched.push(ma(!1)),a.deleted.push(!1)}),a}function ga(e){return e.d||e.i||e.c||e.a||e.s||e.g||e.descr}function Oa(e){return e.splice(0)}var Ea=n(25),ja=n(32),ka=-1,Ca=[],wa=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(R.a)(this,Object(_.a)(t).call(this,e))).renderPaymentsHeaderT=function(){return n.state.values&&0!==n.state.values.length?r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:n.thClassName("check")},r.a.createElement($,{id:"check_all",onValueChanged:n.setValueCheckAllF,checked:n.state.allChecked,readOnly:!1,field:"check_all",index:-2,touched:!1})),r.a.createElement("th",{className:n.thClassName("l")}),n.th("d","Date"),n.drawBalanceF()?n.th("b","Balance",!1):null,n.th("i","Pay"),r.a.createElement("th",{className:n.thClassName("s")}),n.th("g",r.a.createElement(Ea,{name:"paperclip",size:"lg"})),n.th("c","Issue"),n.th("a","Account"),n.th("descr","Description"),r.a.createElement("th",{className:n.thClassName("deleted")},r.a.createElement(Ea,{name:"remove",style:{color:"red"}})),r.a.createElement("th",null))):r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null)))},n.renderPaymentsT=function(){return n.sortedValues=n.state.values.slice(0),n.state.sort&&n.sortedValues.sort(n.sortersF()),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(x.a,{id:"ctrls-panel",expanded:n.state.recurring.recur,onToggle:function(){}},r.a.createElement(x.a.Heading,null,r.a.createElement(x.a.Title,null,r.a.createElement(N.a,{onClick:function(){return n.resetT()},disabled:n.pristine,bsStyle:n.pristine?"default":"primary"},"Reset"),r.a.createElement(N.a,{onClick:function(){return n.preSubmitT()},disabled:n.pristine||null!=n.errors,bsStyle:n.pristine?"default":"primary"},"Save"),r.a.createElement(N.a,{onClick:function(){return n.addR()}},0===n.state.values.length?"New":n.state.recurring.recur?"Recur last":"Copy last"),r.a.createElement("span",{className:"pull-right",style:{marginTop:"6px"}},r.a.createElement(x.a.Toggle,{componentClass:"button",className:"link-button",onClick:n.setRecurring},n.state.values&&0!==n.state.values.length?n.state.recurring.recur?"No recur":"Recurring...":"")))),r.a.createElement(x.a.Collapse,null,r.a.createElement(x.a.Body,null,r.a.createElement("span",{style:{display:"inline-flex"}},r.a.createElement(nn.SimpleSelect,{style:{width:"170px"},onValueChange:n.setRecurringSpan,placeholder:"choose span",options:ya,value:n.state.recurring.span,hideResetButton:!0}),r.a.createElement(ra.a,{id:"recurringTimes",min:1,step:1,precision:0,max:365,value:n.state.recurring.times,onChange:n.setRecurringTimes}),r.a.createElement("span",{style:{marginTop:"6px"}},"times.")))))),r.a.createElement(P.a,{id:"payments_table",striped:!0,bordered:!0,hover:!0,condensed:!0},n.renderPaymentsHeaderT(),r.a.createElement("tbody",null,n.sortedValues.map(function(e){return n.renderPaymentR(e.index)}))))},n.showAlert=n.showAlert.bind(Object(D.a)(Object(D.a)(n))),n.showOk=n.showOk.bind(Object(D.a)(Object(D.a)(n))),n.changePropertyF=n.changePropertyF.bind(Object(D.a)(Object(D.a)(n))),n.changePropertyDeletedF=n.changePropertyDeletedF.bind(Object(D.a)(Object(D.a)(n))),n.changePropertyLF=n.changePropertyLF.bind(Object(D.a)(Object(D.a)(n))),n.setValueF=n.setValueF.bind(Object(D.a)(Object(D.a)(n))),n.setValueCheckF=n.setValueCheckF.bind(Object(D.a)(Object(D.a)(n))),n.setValueCheckAllF=n.setValueCheckAllF.bind(Object(D.a)(Object(D.a)(n))),n.setValueMaskF=n.setValueMaskF.bind(Object(D.a)(Object(D.a)(n))),n.setValueMaskCheckF=n.setValueMaskCheckF.bind(Object(D.a)(Object(D.a)(n))),n.validateF=n.validateF.bind(Object(D.a)(Object(D.a)(n))),n.validateMaskF=n.validateMaskF.bind(Object(D.a)(Object(D.a)(n))),n.maskedF=n.maskedF.bind(Object(D.a)(Object(D.a)(n))),n.touchedF=n.touchedF.bind(Object(D.a)(Object(D.a)(n))),n.isDifferentFromInitialF=n.isDifferentFromInitialF.bind(Object(D.a)(Object(D.a)(n))),n.drawBalanceF=n.drawBalanceF.bind(Object(D.a)(Object(D.a)(n))),n.chooseValueF=n.chooseValueF.bind(Object(D.a)(Object(D.a)(n))),n.renderContentF=n.renderContentF.bind(Object(D.a)(Object(D.a)(n))),n.renderDeletedContentF=n.renderDeletedContentF.bind(Object(D.a)(Object(D.a)(n))),n.setSortF=n.setSortF.bind(Object(D.a)(Object(D.a)(n))),n.sortersF=n.sortersF.bind(Object(D.a)(Object(D.a)(n))),n.addR=n.addR.bind(Object(D.a)(Object(D.a)(n))),n.getDefaultR=n.getDefaultR.bind(Object(D.a)(Object(D.a)(n))),n.removeR=n.removeR.bind(Object(D.a)(Object(D.a)(n))),n.setRecurring=n.setRecurring.bind(Object(D.a)(Object(D.a)(n))),n.setRecurringTimes=n.setRecurringTimes.bind(Object(D.a)(Object(D.a)(n))),n.setRecurringSpan=n.setRecurringSpan.bind(Object(D.a)(Object(D.a)(n))),n.validateR=n.validateR.bind(Object(D.a)(Object(D.a)(n))),n.readOnlyR=n.readOnlyR.bind(Object(D.a)(Object(D.a)(n))),n.isPersistedR=n.isPersistedR.bind(Object(D.a)(Object(D.a)(n))),n.disabledCheckR=n.disabledCheckR.bind(Object(D.a)(Object(D.a)(n))),n.renderPaymentR=n.renderPaymentR.bind(Object(D.a)(Object(D.a)(n))),n.resetT=n.resetT.bind(Object(D.a)(Object(D.a)(n))),n.isPristineT=n.isPristineT.bind(Object(D.a)(Object(D.a)(n))),n.hasErrorsT=n.hasErrorsT.bind(Object(D.a)(Object(D.a)(n))),n.preInitT=n.preInitT.bind(Object(D.a)(Object(D.a)(n))),n.preSubmitT=n.preSubmitT.bind(Object(D.a)(Object(D.a)(n))),n.init=n.init.bind(Object(D.a)(Object(D.a)(n))),n.renderPaymentsHeaderT=n.renderPaymentsHeaderT.bind(Object(D.a)(Object(D.a)(n))),n.renderPaymentsT=n.renderPaymentsT.bind(Object(D.a)(Object(D.a)(n))),n.tdClassName=n.tdClassName.bind(Object(D.a)(Object(D.a)(n))),n.td=n.td.bind(Object(D.a)(Object(D.a)(n))),n.thClassName=n.thClassName.bind(Object(D.a)(Object(D.a)(n))),n.th=n.th.bind(Object(D.a)(Object(D.a)(n))),n.groupLoad=n.groupLoad.bind(Object(D.a)(Object(D.a)(n))),n.dayLoad=n.dayLoad.bind(Object(D.a)(Object(D.a)(n))),n.showHistory=n.showHistory.bind(Object(D.a)(Object(D.a)(n))),n.init(),n.state=Object(F.a)({},va(n.preInitT(e.initPayments),Ca),{historyShow:!1}),n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"showAlert",value:function(){this.msg.show("SAVE YOUR CHANGES, OR RESET FIRST!",{time:5e3,type:"success",icon:r.a.createElement("img",{src:"stop.png",alt:"SAVE YOUR CHANGES, OR RESET FIRST!"})})}},{key:"showOk",value:function(){this.msg.show("SAVED SUCCESSFULLY",{time:2e3,type:"success",icon:r.a.createElement("img",{src:"yes.png",alt:"save ok"})})}},{key:"changePropertyF",value:function(e,t,n){if(-1!==n){if(-2===n)return this.validateMaskF(t,e),void this.setValueMaskF(t,e);if(this.isPersistedR(n)){var a=Oa(this.state.touched);a[n][t]=this.isDifferentFromInitialF(e,t,n),this.setState({touched:a})}this.state.masked[t]||this.validateF(t,e,n),this.setValueF(e,t,n)}else this.setValueMaskCheckF(t,e)}},{key:"changePropertyDeletedF",value:function(e,t,n){if(this.isPersistedR(n)){this.deleteCount+=e?1:-1;var a=Oa(this.state.deleted);a[n]=e,this.setValueCheckF(!1,"check",n),this.setState({deleted:a})}else this.removeR(n)}},{key:"changePropertyLF",value:function(e,t,n){var a=Oa(this.state.values);a[n].l=e;var r=Oa(this.state.initial);r[n].l=e,this.setState({values:a,initial:r})}},{key:"setValueF",value:function(e,t,n){var a=Oa(this.state.values);a[n][t]=e,this.setState({values:a})}},{key:"setValueCheckF",value:function(e,t,n){this.updateCheckedSet(e,n),this.setValueF(e,"check",n),this.props.paymentSelection(Ca.slice(0))}},{key:"setValueCheckAllF",value:function(e,t,n){var a=this,r=this.state.values.slice(0);r.map(function(t){return a.updateCheckedSet(e,t.index,r),null}),this.setState({values:r,allChecked:e}),this.props.paymentSelection(Ca.slice(0))}},{key:"setValueMaskF",value:function(e,t){var n=Object(F.a)({},this.state.maskValues);n[e]=t,this.setState({maskValues:n})}},{key:"setValueMaskCheckF",value:function(e,t){var n=Object(F.a)({},this.state.masked);n[e]=t,this.setState({masked:n}),(n=Object(F.a)({},this.state.maskErrors))[e]=t?ha[e](this.state.maskValues[e]):null,this.setState({maskErrors:n});var a=Oa(this.state.errors);this.state.values.forEach(function(n,r){a[r][e]=t?null:ha[e](n[e])}),this.setState({errors:a})}},{key:"validateF",value:function(e,t,n){var a=this.state.errors[n][e];if(ha[e](t)!==a){var r=Oa(this.state.errors);r[n][e]=ha[e](t),this.setState({errors:r})}}},{key:"validateMaskF",value:function(e,t){var n=Object(F.a)({},this.state.maskErrors);n[e]=this.state.masked[e]?ha[e](t):null,this.setState({maskErrors:n})}},{key:"maskedF",value:function(e,t){return!(e<0||this.state.deleted[e])&&(this.state.masked[t]&&!this.state.values[e].l)}},{key:"touchedF",value:function(e,t){return!(e<0)&&(!this.state.deleted[e]&&(!(this.maskedF(e,t)&&this.isPersistedR(e)&&!this.isDifferentFromInitialF(this.state.maskValues[t],t,e))&&(!!this.maskedF(e,t)||!!this.isPersistedR(e)&&this.state.touched[e][t])))}},{key:"isDifferentFromInitialF",value:function(e,t,n){return e!==this.state.initial[n][t]}},{key:"chooseValueF",value:function(e,t){return this.state.deleted[e]?this.state.initial[e][t]:this.maskedF(e,t)?this.state.maskValues[t]:this.state.values[e][t]}},{key:"renderContentF",value:function(e,t){if(-1===t)return r.a.createElement("div",null,r.a.createElement($,{id:e+"_mask_check",onValueChanged:this.changePropertyF,checked:this.state.masked[e],readOnly:!1,field:e,index:-1}));if(-2!==t||this.state.masked[e]){var n=null;switch(n=-2===t?this.state.maskValues[e]:this.chooseValueF(t,e),e){case"check":return r.a.createElement("div",null,r.a.createElement($,{id:"check_"+t,onValueChanged:this.setValueCheckF,checked:n,readOnly:this.disabledCheckR(t),field:"check",index:t,touched:!1}));case"l":return r.a.createElement("div",null,r.a.createElement(qn,{id:this.state.values[t].id,onValueChanged:this.changePropertyLF,checked:n,readOnly:!this.isPersistedR(t)||this.state.deleted[t]||ga(this.state.masked)||ga(this.state.touched[t]),field:"l",index:t}));case"d":return r.a.createElement("div",null,r.a.createElement(na,{id:"d_"+t,onValueChanged:this.changePropertyF,value:n,readOnly:this.readOnlyR(t,"d"),field:"d",index:t,touched:this.touchedF(t,"d"),linkCb:"d"!==this.props.queryType&&-2!==t&&this.isPristineT()?this.dayLoad:null,popoverText:"Show day "+n}));case"b":return r.a.createElement("div",null,r.a.createElement(X,{value:""+this.chooseValueF(t,"b"),field:"b",readOnly:!0,touched:!1}));case"i":return r.a.createElement("div",null,r.a.createElement(X,{id:"i_"+t,onValueChanged:this.changePropertyF,placeholder:"amount",value:n,readOnly:this.readOnlyR(t,"i"),field:"i",index:t,touched:this.touchedF(t,"i")}));case"s":return r.a.createElement("div",null,r.a.createElement($,{id:"s_"+t,onValueChanged:this.changePropertyF,checked:n,readOnly:this.readOnlyR(t,"s"),field:"s",index:t,touched:this.touchedF(t,"s")}));case"g":return r.a.createElement("div",null,r.a.createElement($n,{id:"g_"+t,onValueChanged:this.changePropertyF,value:n,readOnly:this.readOnlyR(t,"g"),field:"g",index:t,touched:this.touchedF(t,"g"),placeholder:"gId",linkCb:-2!==t&&this.isPristineT()?this.groupLoad:null,popoverText:'Show all in group "'+n+'"'}));case"c":return r.a.createElement("div",null,r.a.createElement(Kn,{onValueChanged:this.changePropertyF,value:n,readOnly:this.readOnlyR(t,e),placeholder:"select",field:"c",index:t,touched:this.touchedF(t,e),constants_id:"cat"}));case"a":return r.a.createElement("div",{style:{display:"inline-flex",whiteSpace:"nowrap"}},r.a.createElement(Kn,{onValueChanged:this.changePropertyF,value:n,readOnly:this.readOnlyR(t,e),placeholder:"select",field:"a",index:t,touched:this.touchedF(t,e),constants_id:"acc"}));case"descr":return r.a.createElement("div",null,r.a.createElement(ne,{id:"descr_"+t,onValueChanged:this.changePropertyF,value:n,readOnly:this.readOnlyR(t,"descr"),field:"descr",index:t,touched:this.touchedF(t,"descr"),placeholder:"description"}));default:return console.log("UNKONWN field: "+e),null}}}},{key:"renderDeletedContentF",value:function(e){var t=this;return this.isPersistedR(e)?r.a.createElement("div",null,r.a.createElement($,{id:"deleted_"+e,onValueChanged:this.changePropertyDeletedF,checked:this.state.deleted[e],readOnly:this.state.values[e].l,field:"deleted",index:e,touched:!1})):r.a.createElement("button",{type:"button",className:"form-control",onClick:function(){return t.changePropertyDeletedF(!0,"deleted",e)}},r.a.createElement(Ea,{name:"remove",style:{color:"red"}}))}},{key:"setSortF",value:function(e){this.state.sort&&this.state.sort===e?this.state.sort===e&&this.state.asc?this.setState({asc:!1}):this.setState({sort:null}):this.setState({sort:e,asc:!0})}},{key:"sortersF",value:function(){var e=this,t=this.state.asc?-1:1;switch(this.state.sort){case"i":case"a":case"c":return function(n,a){return t*(e.chooseValueF(a.index,e.state.sort)-e.chooseValueF(n.index,e.state.sort))};case"d":return function(n,a){return t*(dt(e.chooseValueF(a.index,"d")).getTime()-dt(e.chooseValueF(n.index,"d")).getTime())};case"g":return function(n,a){var r=e.chooseValueF(n.index,"g").toUpperCase(),i=e.chooseValueF(a.index,"g").toUpperCase();return t*(r<i?-1:r>i?1:0)};default:return function(e,t){return 0}}}},{key:"addR",value:function(){var e=this.getDefaultR(),t=Oa(this.state.values),n=Oa(this.state.errors),a=1;this.state.recurring.recur&&(a=this.state.recurring.times);for(var r=0;r<a;r++)(e=ba(e,[])).id=ka--,e.index=t.length,e.l=!1,e.check=!1,this.state.recurring.recur&&la(e,r,this.state.recurring.span.value),t.push(e),this.sortedValues.push(e),n.push(this.validateR(e));this.setState({values:t,errors:n})}},{key:"setRecurring",value:function(){this.setState({recurring:Object(F.a)({},this.state.recurring,{recur:!this.state.recurring.recur})})}},{key:"setRecurringTimes",value:function(e){this.setState({recurring:Object(F.a)({},this.state.recurring,{times:e})})}},{key:"setRecurringSpan",value:function(e){this.setState({recurring:Object(F.a)({},this.state.recurring,{span:e})})}},{key:"getDefaultR",value:function(){var e=ua;return this.sortedValues.length?e=this.sortedValues[this.sortedValues.length-1]:e.d=ja(this.props.defaultDate,"dd.mm.yyyy"),Object(F.a)({},e)}},{key:"removeR",value:function(e){this.state.values.splice(e,1);var t=Oa(this.state.values);this.state.errors.splice(e,1);for(var n=Oa(this.state.errors),a=e;a<t.length;a++)t[a].index--,n[a].index--;this.setState({values:t,errors:n})}},{key:"validateR",value:function(e){var t={};return oa.forEach(function(n){t[n]=ha[n](e[n])}),t}},{key:"readOnlyR",value:function(e,t){return!(e<0)&&(this.state.masked[t]||this.state.deleted[e]||this.state.values[e].l)}},{key:"isPersistedR",value:function(e){return this.state.values[e].id>=0}},{key:"disabledCheckR",value:function(e){return!this.isPersistedR(e)||this.state.deleted[e]}},{key:"renderPaymentR",value:function(e){var t=this;return r.a.createElement("tr",{key:e},["check","l"].concat(Object(S.a)(oa)).map(function(n){return t.td(e,n)}),r.a.createElement("td",{className:this.tdClassName(e,"deleted")},this.renderDeletedContentF(e)),r.a.createElement("td",null,r.a.createElement(N.a,{variant:"primary",onClick:function(){return t.showHistory(t.chooseValueF(e,"id"))}},r.a.createElement(Ea,{name:"history"}))))}},{key:"resetT",value:function(){var e=va(this.state.initial,Ca,this.state.recurring);this.setState(Object(F.a)({},e)),this.init()}},{key:"isPristineT",value:function(){var e=!0;return this.state.touched.forEach(function(t){oa.forEach(function(n){e=e&&!t[n]})}),e&&this.state.initial.length===this.state.values.length&&!ga(this.state.masked)&&!this.deleteCount}},{key:"hasErrorsT",value:function(){var e=!1;return this.state.errors.forEach(function(t){e=e||ga(t)}),e||ga(this.state.maskErrors)}},{key:"preInitT",value:function(e){return pa(e,Ca)}},{key:"preSubmitT",value:function(){var e=this,t=[];this.state.values.forEach(function(n,a){if(!e.isPersistedR(a)){var r={};oa.forEach(function(t){r[t]=e.chooseValueF(a,t)}),t.push(r)}});var n=[];this.state.deleted.forEach(function(t,a){t&&n.push(e.state.values[a].id)});var a=[];this.state.values.forEach(function(t,n){if(e.isPersistedR(n)){var r={};oa.forEach(function(a){e.touchedF(n,a)&&(r.id=t.id,r[a]=e.chooseValueF(n,a))}),Object.keys(r).length>0&&a.push(r)}});var r={created:fa(t),deleted:n,modified:fa(a)};this.pristine=null,this.props.update(r),this.showOk()}},{key:"init",value:function(){this.deleteCount=0,this.pristine=null,this.errors=null,this.allChecked=!1}},{key:"tdClassName",value:function(e,t){return t+"_cell"+(this.isPersistedR(e)?"":" newRow")+(this.state.deleted[e]?" deleted":"")+(this.state.values[e].check?" selected":"")+(this.state.errors[e][t]?" error":"")}},{key:"drawBalanceF",value:function(){return"a"===this.props.queryType&&this.pristine}},{key:"td",value:function(e,t){if("b"!==t||this.drawBalanceF())return r.a.createElement("td",{key:e+"_"+t,className:this.tdClassName(e,t)},this.renderContentF(t,e))}},{key:"thClassName",value:function(e){return e+"_header"+(this.state.maskErrors[e]?" error":"")+(ga(this.state.masked)?" header_tall":"")}},{key:"th",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]))return r.a.createElement("th",{className:this.thClassName(e)},r.a.createElement("div",null,r.a.createElement("span",{style:{display:"flex"}},r.a.createElement("div",{style:{marginTop:8,textDecoration:"none"},className:"link-button"},null!==n?n:""))));var a=r.a.createElement(Ea,{name:this.state.asc?"sort-asc":"sort-desc"}),i=r.a.createElement("div",null,this.state.sort===e?a:""),s=r.a.createElement("div",{style:{marginTop:8}},r.a.createElement("button",{type:"button",className:"link-button",onClick:function(){t.setSortF(e)}},n));return r.a.createElement("th",{className:this.thClassName(e)},r.a.createElement("div",null,r.a.createElement("span",{style:{display:"flex"}},this.renderContentF(e,-1),r.a.createElement("div",{style:{marginTop:8,paddingRight:3}},i),null!==n?s:"")),this.renderContentF(e,-2))}},{key:"componentWillReceiveProps",value:function(e){this.init(),this.setState(Object(F.a)({},va(this.preInitT(e.initPayments),Ca)))}},{key:"updateCheckedSet",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!(t<0||this.disabledCheckR(t))){var a=Ca.indexOf(this.state.values[t].id);e&&a<0&&Ca.push(this.state.values[t].id),!e&&a>-1&&Ca.splice(a,1),n&&(n[t].check=e)}}},{key:"groupLoad",value:function(e){this.pristine&&e&&e.length>0&&this.props.groupLoad(e)}},{key:"dayLoad",value:function(e){this.pristine&&e&&e.length>0&&this.props.dayLoad(dt(e))}},{key:"showHistory",value:function(e){this.props.historyLoad(e),this.setState({historyShow:!0})}},{key:"render",value:function(){var e=this;return this.pristine=this.isPristineT(),this.errors=this.hasErrorsT(),r.a.createElement("div",null,r.a.createElement(oe.a,Object.assign({ref:function(t){return e.msg=t}},ue)),this.renderPaymentsT(),r.a.createElement(Hn,{show:this.state.historyShow,onHide:function(){return e.setState({historyShow:!1})}}))}}]),t}(r.a.Component);wa.defaultProps={initPayments:[],queryType:null};var Ra=Object(s.b)(null,function(e){return{update:function(t){e(Rn(t))},paymentSelection:function(t){e(Mn(t))},groupLoad:function(t){e(Fn(t))},dayLoad:function(t){e(Tn(t))},historyLoad:function(t){e(rt(t))}}})(wa),_a=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(R.a)(this,Object(_.a)(t).call(this,e))).state={payments:[],balances:[]},n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement(Ra,{initPayments:this.props.payments,queryType:this.props.queryType,defaultDate:this.props.defaultDate})}}]),t}(r.a.Component);_a.defaultProps={defaultDate:new Date};var Ta=Object(s.b)(function(e){return{queryType:e.payments.queryType,payments:e.payments.payments,balances:e.payments.balances}})(_a),xa=n(589),Sa=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(R.a)(this,Object(_.a)(t).call(this,e))).list=n.list.bind(Object(D.a)(Object(D.a)(n))),n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"list",value:function(){this.props.listLoad(this.props.payments)}},{key:"render",value:function(){return 0===this.props.payments.length?null:r.a.createElement(N.a,{onClick:this.list},r.a.createElement(xa.a,null,this.props.payments.length))}}]),t}(r.a.Component);Sa.defaultProps={payments:[]};var Fa=Object(s.b)(function(e){return{payments:e.payment.payments}},function(e){return{listLoad:function(t){e(Dn(t))}}})(Sa),Da=n(32);function Na(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t){var i=Da(e,"yyyymmdd")+"T00",s=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}(t[0],function(e){return i===e});if(s<0)return null;var l=[];return t.forEach(function(e,t){if(1===t&&l.push(r.a.createElement("tr",{className:"c3-tooltip-name--data2",key:-1},r.a.createElement("td",{className:"name"},r.a.createElement("span",{style:{backgroundColor:"green"}})),r.a.createElement("td",{className:"value"},de(e[s])))),2===t&&l.push(r.a.createElement("tr",{className:"c3-tooltip-name--data2",key:-2},r.a.createElement("td",{className:"name"},r.a.createElement("span",{style:{backgroundColor:"red"}})),r.a.createElement("td",{className:"value"},de(e[s])))),t>=3){var a=an(n.acc,function(t){return e[0]===""+t.value});l.push(r.a.createElement("tr",{className:"c3-tooltip-name--data2",key:a.value},r.a.createElement("td",{className:"name"},r.a.createElement("span",{style:{backgroundColor:a.color}})),r.a.createElement("td",{className:"value"},de(e[s]))))}}),r.a.createElement("table",{className:"c3-tooltip"},r.a.createElement("tbody",null,a?r.a.createElement("th",{colSpan:"2"},Da(e,"dd.mm.yyyy ddd")):null,l))}}var Pa=n(25),Va=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(R.a)(this,Object(_.a)(t).call(this,e))).prevDay=n.prevDay.bind(Object(D.a)(Object(D.a)(n))),n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"prevDay",value:function(){this.props.chartPrevDay()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N.a,{onClick:this.prevDay},r.a.createElement(Pa,{name:"caret-left"})))}}]),t}(r.a.Component);var Aa=Object(s.b)(null,function(e){return{chartPrevDay:function(){e(Ve())}}})(Va),Ma=n(25),Ia=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(R.a)(this,Object(_.a)(t).call(this,e))).nextDay=n.nextDay.bind(Object(D.a)(Object(D.a)(n))),n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"nextDay",value:function(){this.props.chartNextDay()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N.a,{onClick:this.nextDay},r.a.createElement(Ma,{name:"caret-right"})))}}]),t}(r.a.Component);var La=Object(s.b)(null,function(e){return{chartNextDay:function(){e(Pe())}}})(Ia),Ha=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(R.a)(this,Object(_.a)(t).call(this,e))).today=n.today.bind(Object(D.a)(Object(D.a)(n))),n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"today",value:function(){this.props.chartToday()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N.a,{onClick:this.today},"Today"))}}]),t}(r.a.Component);var Ua=Object(s.b)(null,function(e){return{chartToday:function(){e(Ae())}}})(Ha),Ya=n(32),Ba=n(25),Wa=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(R.a)(this,Object(_.a)(t).call(this,e))).state={accs:e.getConstants("acc"),cats:e.getConstants("cat"),refreshTime:null},n.defaultDate=new Date,n.prevHistory=n.prevHistory.bind(Object(D.a)(Object(D.a)(n))),n.nextHistory=n.nextHistory.bind(Object(D.a)(Object(D.a)(n))),n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.constants&&e.constants.acc&&this.setState({accs:e.constants.acc}),e.constants&&e.constants.cat&&this.setState({accs:e.constants.cat})}},{key:"prevHistory",value:function(){this.props.prevInHistory()}},{key:"nextHistory",value:function(){this.props.nextInHistory()}},{key:"render",value:function(){var e=this,t="";switch(this.props.queryType){case"d":t=r.a.createElement("span",{style:{display:"inline-flex",whiteSpace:"nowrap",alignItems:"center",marginRight:"5px",marginLeft:"5px"}},r.a.createElement(Aa,null),r.a.createElement("div",{style:{marginRight:"5px",marginLeft:"5px"}},Ya(this.props.params.d,"dd.mm.yyyy ddd")),r.a.createElement(La,null)),this.defaultDate=this.props.params.d;break;case"a":var n=an(this.props.constants.acc,function(t){return e.props.params.a===""+t.value});t=r.a.createElement("span",null,r.a.createElement("span",{style:{marginRight:"5px",marginLeft:"5px"}},"Account : ",r.a.createElement(Ba,{name:"square",style:{color:n.color}})),r.a.createElement("span",null,n.label+" ("+Ya(this.props.params.d1,"dd.mm.yyyy ddd")+" - "+Ya(this.props.params.d2,"dd.mm.yyyy ddd")+")"));break;case"c":var a=an(this.props.constants.cat,function(t){return e.props.params.c===""+t.value});t=r.a.createElement("span",null,r.a.createElement("span",{style:{marginRight:"5px",marginLeft:"5px"}},"Issue : ",r.a.createElement(Ba,{name:"square",style:{color:a.color}})),r.a.createElement("span",null,a.label+" ("+Ya(this.props.params.d1,"dd.mm.yyyy ddd")+" - "+Ya(this.props.params.d2,"dd.mm.yyyy ddd")+")"));break;case"g":t=r.a.createElement("span",null,r.a.createElement(Ba,{name:"paperclip",size:"lg"}),"  ",this.props.params.g);break;case"l":t="Checked";break;default:t=""}var i=null;"d"===this.props.queryType&&this.props.curves&&(i=Na(this.props.params.d,this.props.curves,this.props.constants));var s=null==this.props.historystack||null==this.props.historystack.first||this.props.historystack.first,l=null==this.props.historystack||null==this.props.historystack.last||this.props.historystack.last;return r.a.createElement("div",null,r.a.createElement(x.a,{style:{width:"100%"}},r.a.createElement(x.a.Heading,{style:{paddingTop:"3px",paddingBottom:"3px",height:"45px"}},r.a.createElement("div",{style:{display:"inline-flex",whiteSpace:"nowrap",alignItems:"center",fontSize:"23px"}},r.a.createElement(Ba,{name:"th-list"})," ",r.a.createElement("span",{style:{fontSize:"15px"}},t),r.a.createElement(Fa,null),r.a.createElement(nt,{fetching:this.props.fetching})),r.a.createElement("span",{className:"pull-right",style:{display:"inline-flex"}},r.a.createElement(Ua,null),r.a.createElement(N.a,{style:{borderRadius:"20px",height:"35px",paddingTop:"2px",color:s?"gray":"darkblue"},onClick:this.prevHistory,disabled:s},r.a.createElement(Ba,{name:"arrow-circle-left",size:"2x",color:"blue"})),r.a.createElement(N.a,{style:{borderRadius:"20px",height:"35px",paddingTop:"2px",color:l?"gray":"darkblue"},disabled:l,onClick:this.nextHistory},r.a.createElement(Ba,{name:"arrow-circle-right",size:"2x",color:"blue"})))),r.a.createElement(x.a.Body,null,r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{style:{width:"100%",verticalAlign:"top"}},r.a.createElement(Ta,{defaultDate:this.defaultDate})),r.a.createElement("td",{style:{width:"30px",verticalAlign:"top",paddingLeft:"4px"}},i)))))))}}]),t}(r.a.Component);var Ga=Object(s.b)(function(e){return{fetching:e.payments.fetching,queryType:e.payments.queryType,historystack:e.payments.historystack,params:e.payments.params,refreshTime:e.constants.refreshTime,constants:e.constants.constants,curves:e.chart.curves}},function(e){return{getConstants:function(t){q(t,e)},prevInHistory:function(){e(Pn())},nextInHistory:function(){e(Vn())}}})(Wa),za=n(78),qa=n.n(za),Qa=n(230),Ka=n.n(Qa),Ja=(n(567),n(99)),Xa=n(32),Za=-1,$a=!1,er=function(e){function t(e){var n;Object(C.a)(this,t),n=Object(R.a)(this,Object(_.a)(t).call(this,e));var a=Object(D.a)(Object(D.a)(n));return n.state={start:null,end:null,curves:null,constants:e.getConstants("acc"),refreshTime:null,selectedType:"",nextday:null,prevday:null,today:null,redraw:null},n.boundingRect=null,n.hahlo_ix=null,n.hahlo=null,n.draw=n.draw.bind(Object(D.a)(Object(D.a)(n))),n.dateselect=n.dateselect.bind(Object(D.a)(Object(D.a)(n))),n.paint_dayselection=n.paint_dayselection.bind(Object(D.a)(Object(D.a)(n))),n.nextday=n.nextday.bind(Object(D.a)(Object(D.a)(n))),n.prevday=n.prevday.bind(Object(D.a)(Object(D.a)(n))),n.today=n.today.bind(Object(D.a)(Object(D.a)(n))),n.redraw=n.redraw.bind(Object(D.a)(Object(D.a)(n))),n.legendnames=n.legendnames.bind(Object(D.a)(Object(D.a)(n))),n.onmouseover=n.onmouseover.bind(Object(D.a)(Object(D.a)(n))),n.onmouseover_account=n.onmouseover_account.bind(Object(D.a)(Object(D.a)(n))),n.onmouseout=n.onmouseout.bind(Object(D.a)(Object(D.a)(n))),n.find_ix=n.find_ix.bind(Object(D.a)(Object(D.a)(n))),n.chartDatetoDate=n.chartDatetoDate.bind(Object(D.a)(Object(D.a)(n))),n.tooltip=n.tooltip.bind(Object(D.a)(Object(D.a)(n))),n.c3onRendered=n.c3onRendered.bind(Object(D.a)(Object(D.a)(n))),n.timer=null,n.chart_config={onrendered:n.c3onRendered,bindto:"#chart",grid:{x:{show:!0},y:{show:!0,lines:[{value:0}]}},tooltip:{grouped:!0,contents:function(e,t,n,r){return a.tooltip(e)}},data:{x:"x",onmouseover:function(e){$a&&a.onmouseover(e)},onclick:n.onmouseover,xFormat:"%Y%m%dT%H",columns:null,transition:{duration:500},names:{},colors:{},types:{},type:"bar",groups:[["E","I"]],selection:{}},axis:{x:{type:"timeseries",tick:{culling:{max:10},format:function(e){return Xa(e,"dd.mm")}}}},legend:{item:{onclick:function(e){a.onmouseover_account(e)},onmouseover:function(e){!this.transiting&&this.isTargetToShow(e)&&this.api.focus(e),$a&&a.onmouseover_account(e)}}}},n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"tooltip",value:function(e){var t=Na(e[0].x,this.props.curves,this.props.constants,!0);return Ka.a.renderToStaticMarkup(t)}},{key:"onmouseout",value:function(){this.timer&&clearTimeout(this.timer)}},{key:"onmouseover",value:function(e){var t=this;if($a){if("I"===e.id&&0!==kt(e.x,this.selectedDate)){this.timer&&clearTimeout(this.timer);this.timer=setTimeout(function(){t.dateselect(e.x)},300)}}else this.dateselect(e.x)}},{key:"chartDatetoDate",value:function(e){var t=e.substring(0,4),n=e.substring(4,6)-1,a=e.substring(6,8);return new Date(t,n,a)}},{key:"find_ix",value:function(e){return this.chart_config.data.columns?kt(this.chartDatetoDate(this.chart_config.data.columns[0][1]),e):null}},{key:"nextday",value:function(){this.selectedDate&&this.dateselect(Et(this.selectedDate,1))}},{key:"prevday",value:function(){this.selectedDate&&this.dateselect(Et(this.selectedDate,-1))}},{key:"today",value:function(){var e=new Date;this.props.daterangeToday(),this.dateselect(e)}},{key:"redraw",value:function(){this.draw()}},{key:"onmouseover_account",value:function(e){var t=this;if("I"!==e&&"E"!==e){var n=this;this.timer=setTimeout(function(){t.props.accountLoad(e,n.props.start,n.props.end)},300)}}},{key:"dateselect",value:function(e){this.selectedDate=e;var t=this.find_ix(e);null!==t&&-1===t&&(this.props.daterangePrevBlock(),t=this.chart_config.data.columns[0].length-2),null!=t&&t===this.chart_config.data.columns[0].length-1&&(this.props.daterangeNextBlock(),t=0),this.props.dayLoad(e,t),this.paint_dayselection()}},{key:"paint_dayselection",value:function(){if(null!=this.hahlo_ix){var e=Xa(Et(this.selectedDate,-1),"yyyymmdd")+"T20",t=Xa(this.selectedDate,"yyyymmdd")+"T4";this.chart_config.regions[this.hahlo_ix].start=e,this.chart_config.regions[this.hahlo_ix].end=t,qa.a.generate(this.chart_config)}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"chart",onMouseOut:function(){return e.onmouseout()}})}},{key:"draw",value:function(){if(this.boundingRect=document.getElementById("chart").getBoundingClientRect(),this.chart_config.data.columns){if(!this.chart_config.regions){this.chart_config.regions=[];for(var e=1;e<this.chart_config.data.columns[0].length;e++)for(var t=3;t<this.chart_config.data.columns.length;t++){var n=Xa(Et(this.chartDatetoDate(this.chart_config.data.columns[0][e]),-1),"yyyymmdd")+"T12",a=Xa(this.chartDatetoDate(this.chart_config.data.columns[0][e]),"yyyymmdd")+"T12";this.chart_config.regions.push({start:n,end:a,class:this.chart_config.data.columns[t][e]<0?"red":"white"})}if(this.selectedDate){this.hahlo_ix=this.chart_config.regions.length;var r=Xa(Et(this.selectedDate,-1),"yyyymmdd")+"T20",i=Xa(this.selectedDate,"yyyymmdd")+"T4";this.chart_config.regions.push({start:r,end:i,class:"gray"})}}qa.a.generate(this.chart_config)}}},{key:"c3onRendered",value:function(){var e=this;this.chart_config.data.columns[0].forEach(function(t,n){if(n>0){var a=Ja.selectAll("#chart").select(".c3-event-rect-"+(n-1)),r=e.chartDatetoDate(t);a[0][0].onclick=function(){e.dateselect(r)}}})}},{key:"componentWillReceiveProps",value:function(e){if(e.nextday!==this.props.nextday&&this.nextday(),e.prevday!==this.props.prevday&&this.prevday(),e.today!==this.props.today&&this.today(),e.redraw!==this.props.redraw&&this.redraw(),e.selectedType!==this.props.selectedType&&(Za=-1),"d"===e.selectedType&&(this.selectedDate=e.params.d,this.paint_dayselection()),e.constants&&e.constants[this.props.constants_id]){var t=e.constants[this.props.constants_id],n=an(t,function(t){return t.value===e.selectedValue}),a=t.filter(function(e){return e.valid||e===n});this.setState({selectedValue:n,items:a})}if(this.state.start!=e.start||this.state.end!=e.end)this.setState({start:e.start,end:e.end}),this.props.chartLoad(e.start,e.end);else if((e.curves!==this.props.curves||e.refreshTime!==this.props.refreshTime)&&(this.chart_config.data.names={},this.chart_config.data.types={},this.chart_config.data.colors={},this.chart_config.data.columns=e.curves,this.chart_config.regions=null,this.legendnames(e.curves,e.constants),this.chart_config.data.colors.I="green",this.chart_config.data.colors.E="red",e.curves)){for(var r=function(e){return s===""+e.value},i=3;i<e.curves.length;i++){var s=e.curves[i][0],l=an(e.constants.acc,r);this.chart_config.data.colors[s]=l.color,this.chart_config.data.types[s]="spline"}this.draw()}}},{key:"legendnames",value:function(e,t){if(this.chart_config.data.names.I="Income",this.chart_config.data.names.E="Exp",e)for(var n=function(e){return r===""+e.value},a=3;a<e.length;a++){var r=e[a][0],i=an(t.acc,n);this.chart_config.data.names[r]=i.label}}}]),t}(r.a.Component);var tr=Object(s.b)(function(e){return{start:e.daterange.s,end:e.daterange.e,curves:e.chart.curves,nextday:e.chart.nextday,prevday:e.chart.prevday,today:e.chart.today,redraw:e.chart.redraw,refreshTime:e.constants.refreshTime,constants:e.constants.constants,selectedType:e.payments.queryType,params:e.payments.params}},function(e){return{chartLoad:function(t,n){Za=-1,e(De(t,n))},dayLoad:function(t,n){n!==Za&&(Za=n,e(Tn(t)))},accountLoad:function(t,n,a){t!==Za&&(Za=t,e(xn(t,n,a)))},getConstants:function(t){q(t,e)},daterangeToday:function(){e(Ft())},daterangeNextBlock:function(){e(xt())},daterangePrevBlock:function(){e(St())},setDateRange:function(t,n){e(Tt(t,n))}}})(er),nr=function(e){function t(){return Object(C.a)(this,t),Object(R.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(x.a,null,r.a.createElement(x.a.Body,null,r.a.createElement(tr,null))))}}]),t}(r.a.Component),ar=Object(s.b)(function(e){return{fetching:e.chart.fetching,start:e.daterange.s,end:e.daterange.e}})(nr),rr={startDate:Et(new Date,-10),endDate:Et(new Date,10)},ir=(n(569),n(99)),sr=!1,lr={},cr=function(e){function t(e){var n;Object(C.a)(this,t),n=Object(R.a)(this,Object(_.a)(t).call(this,e));var a=Object(D.a)(Object(D.a)(n));return n.state={constants:e.getConstants("cat"),refreshTime:null,redraw:null},n.draw=n.draw.bind(Object(D.a)(Object(D.a)(n))),n.redraw=n.redraw.bind(Object(D.a)(Object(D.a)(n))),n.onmouseover=n.onmouseover.bind(Object(D.a)(Object(D.a)(n))),n.onmouseout=n.onmouseout.bind(Object(D.a)(Object(D.a)(n))),n.c3onRendered=n.c3onRendered.bind(Object(D.a)(Object(D.a)(n))),n.d3onMouseI=n.d3onMouseI.bind(Object(D.a)(Object(D.a)(n))),n.d3onMouseOutI=n.d3onMouseOutI.bind(Object(D.a)(Object(D.a)(n))),n.d3onMouseE=n.d3onMouseE.bind(Object(D.a)(Object(D.a)(n))),n.d3onMouseOutE=n.d3onMouseOutE.bind(Object(D.a)(Object(D.a)(n))),n.getBoudingRect=n.getBoudingRect.bind(Object(D.a)(Object(D.a)(n))),n.timer=null,n.chart_config={onrendered:n.c3onRendered,sum_i:0,sum_e:0,bindto:"#pie",tooltip:{format:{value:function(e,t,n){return"p"===n.substr(0,1)?e+"  ("+de(100*e/a.chart_config.sum_i)+"%)":-e+"  ("+de(100*-e/a.chart_config.sum_e)+"%)"}}},data:{names:{},columns:[],colors:{},order:null,onclick:function(e){a.onmouseover(e.id)},onmouseover:function(e){sr&&a.onmouseover(e.id)},type:"pie"},pie:{label:{format:function(e,t,n){return lr[n]}}},legend:{show:!0,item:{onclick:function(e){a.onmouseover(e)},onmouseover:function(e){!this.transiting&&this.isTargetToShow(e)&&this.api.focus(e),sr&&a.onmouseover(e)}}}},n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"onmouseout",value:function(){this.timer&&clearTimeout(this.timer)}},{key:"onmouseover",value:function(e){var t=this;this.timer=setTimeout(function(){t.props.categoryLoad(e.substring(1),t.props.start,t.props.end)},300)}},{key:"getBoudingRect",value:function(){var e=document.getElementById(this.chart_config.bindto.substring(1)).getBoundingClientRect(),t=document.documentElement,n=(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0),a=(window.pageYOffset||t.scrollTop)-(t.clientTop||0);return{left:n+e.left,top:a+e.top}}},{key:"d3onMouseI",value:function(){var e=this.getBoudingRect();ir.select("#incomes").style({display:"inline",left:-60+e.left+"px",top:150+e.top+"px"})}},{key:"d3onMouseOutI",value:function(){ir.select("#incomes").style({display:"none"})}},{key:"d3onMouseE",value:function(){var e=this.getBoudingRect();ir.select("#expences").style({display:"inline",left:e.left+"px",top:150+e.top+"px"})}},{key:"d3onMouseOutE",value:function(){ir.select("#expences").style({display:"none"})}},{key:"c3onRendered",value:function(){var e=this.chart_config.sum_i-this.chart_config.sum_e;if(0!==e){var t=-this.chart_config.sum_e/e*2*Math.PI,n=ir.svg.arc().innerRadius(0).outerRadius(40).startAngle(0).endAngle(t),a=ir.svg.arc().innerRadius(0).outerRadius(40).startAngle(t).endAngle(2*Math.PI),r=ir.svg.arc().innerRadius(40).outerRadius(41).startAngle(0).endAngle(2*Math.PI),i=ir.selectAll("#pie").select(".c3-chart-arcs");i.append("svg:path").attr("id","arc-minus").style("stroke-width",0).attr("d",n).on({click:this.d3onMouseE,mouseover:this.d3onMouseE,mouseout:this.d3onMouseOutE}),i.append("svg:path").attr("id","arc-plus").style("stroke-width",0).attr("d",a).on({click:this.d3onMouseI,mouseover:this.d3onMouseI,mouseout:this.d3onMouseOutI}),i.append("svg:path").attr("id","arc-space").style("stroke-width",0).attr("d",r)}}},{key:"draw",value:function(){qa.a.generate(this.chart_config)}},{key:"redraw",value:function(){this.draw()}},{key:"componentWillReceiveProps",value:function(e){if(this.props.start!==e.start||this.props.end!==e.end)this.props.pieLoad(e.start,e.end);else{var t={},n=[],a=0,r=0,i=null;e.slices&&(e.slices.forEach(function(s){var l=an(e.constants.cat,function(e){return s.c===e.value});s.sl<0?(r+=s.sl,i="n"+s.c,lr[i]=l.label,t[i]=l.color,n.push([i,-s.sl])):(a+=s.sl,i="p"+s.c,lr[i]=l.label,t[i]=l.color,n.push([i,s.sl]))}),this.chart_config.sum_i=a,this.chart_config.sum_e=r,this.chart_config.data.names=lr,this.chart_config.data.colors=t,this.chart_config.data.columns=n,this.draw())}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{id:"pie",onMouseOut:function(){return e.onmouseout()}}),r.a.createElement("table",{id:"incomes",className:"c3-tooltip",style:{display:"none",position:"absolute"}},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{style:{backgroundColor:"green"}})," Income total"),r.a.createElement("td",null,de(this.chart_config.sum_i))))),r.a.createElement("table",{id:"expences",className:"c3-tooltip",style:{display:"none",position:"absolute"}},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{style:{backgroundColor:"red"}})," Expences total"),r.a.createElement("td",null,de(this.chart_config.sum_e))))))}}]),t}(r.a.Component);cr.defaultProps={start:rr.startDate,end:rr.endDate,slices:null};var or=Object(s.b)(function(e){return{start:e.daterange.s,end:e.daterange.e,slices:e.pie.slices,refreshTime:e.constants.refreshTime,redraw:e.pie.redraw,constants:e.constants.constants}},function(e){return{pieLoad:function(t,n){e(vn(t,n))},categoryLoad:function(t,n,a){e(Sn(t,n,a))},getConstants:function(t){q(t,e)}}})(cr),ur=function(e){function t(){return Object(C.a)(this,t),Object(R.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(x.a,null,r.a.createElement(x.a.Body,null,r.a.createElement(or,null))))}}]),t}(r.a.Component),dr=Object(s.b)(function(e){return{fetching:e.pie.fetching,start:e.daterange.s,end:e.daterange.e}})(ur),hr=function(e){return function(t){"c"===e&&t(K()),"a"===e&&t(Le()),"l"===e&&t(rt()),t(function(e){return{type:"SHOW_VIEW",payload:{view:e}}}(e))}},pr=function(){return r.a.createElement(et,null)},fr=function(){return r.a.createElement(Re,null)},mr=function(){return r.a.createElement(Ot,null)},br=function(e){function t(){return Object(C.a)(this,t),Object(R.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(w.a)(t,[{key:"componentWillReceiveProps",value:function(e){"main"!==this.props.view&&"main"===e.view&&(this.props.minibarsRedraw(),this.props.chartRedraw(),this.props.pieRedraw())}},{key:"render",value:function(){var e=r.a.createElement("div",null,r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(hn,null)),r.a.createElement("div",{style:{width:"100%"}},r.a.createElement("div",{style:{width:"100%",display:"inline-flex",whiteSpace:"nowrap"}},r.a.createElement("div",{style:{width:"75%",paddingRight:"2px"}},r.a.createElement(ar,null)),r.a.createElement("div",{style:{width:"25%",paddingLeft:"2px"}},r.a.createElement(dr,null)))),r.a.createElement(Ga,null));return r.a.createElement("div",{style:{padding:"15px"}},r.a.createElement("div",{style:{display:"main"===this.props.view?"":"none"}},e),r.a.createElement("div",{style:{display:"a"===this.props.view?"":"none"}},r.a.createElement(pr,null)),r.a.createElement("div",{style:{display:"c"===this.props.view?"":"none"}},r.a.createElement(fr,null)),r.a.createElement("div",{style:{display:"l"===this.props.view?"":"none"}},r.a.createElement(mr,null)))}}]),t}(r.a.Component);br.defaultProps={view:"main"};var yr=Object(s.b)(function(e){return{view:e.navi.view}},function(e){return{showView:function(t){e(hr(t))},chartRedraw:function(){e(Me())},pieRedraw:function(){e(gn())},minibarsRedraw:function(){e(Pt())}}})(br),vr=n(590),gr=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(R.a)(this,Object(_.a)(t).call(this,e))).dismiss=n.dismiss.bind(Object(D.a)(Object(D.a)(n))),n.show=n.show.bind(Object(D.a)(Object(D.a)(n))),n.state={show:!1},n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"dismiss",value:function(){this.setState({show:!1})}},{key:"show",value:function(){this.setState({show:!0})}},{key:"componentWillReceiveProps",value:function(e){e.when!==this.props.when&&this.show()}},{key:"render",value:function(){if(!this.state.show)return null;var e=this.props,t=e.status,n=e.msg;return r.a.createElement(vr.a,{bsStyle:"danger",onDismiss:this.dismiss},r.a.createElement("h4",null,"We've got an error!"),"Server returned:",r.a.createElement("ul",null,r.a.createElement("li",null,"Status: ",t),r.a.createElement("li",null,"Message: ",n)),r.a.createElement("hr",null),r.a.createElement("p",null,r.a.createElement(N.a,{onClick:this.dismiss},"Close")))}}]),t}(r.a.Component);gr.defaultProps={when:0};var Or=Object(s.b)(function(e){return{status:e.errorMessage.status,msg:e.errorMessage.msg,when:e.errorMessage.when}})(gr),Er=n(595),jr=n(591),kr=n(596),Cr=n(592),wr=function(){return function(e){e({type:"NEW_GROUP_REQUEST"}),U("group/newid",null,function(t){e({type:"NEW_GROUP_RESPONSE",payload:{g:t.data}})},e)}},Rr=n(571),_r=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(R.a)(this,Object(_.a)(t).call(this,e))).generatedOk=n.generatedOk.bind(Object(D.a)(Object(D.a)(n))),n.generateGroup=n.generateGroup.bind(Object(D.a)(Object(D.a)(n))),n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"generatedOk",value:function(e){this.msg.show("NEW GROUPID ON CLIPBOARD",{time:2e3,type:"success",icon:r.a.createElement("img",{src:"yes.png",alt:"save ok"})})}},{key:"generateGroup",value:function(){this.props.newGroup()}},{key:"componentWillReceiveProps",value:function(e){e.g!==this.props.g&&(Rr(e.g),this.generatedOk(e.g))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(oe.a,Object.assign({ref:function(t){return e.msg=t}},ue)),r.a.createElement(Er.a,null,r.a.createElement(Er.a.Header,null,r.a.createElement(Er.a.Brand,null," Onassis "),r.a.createElement(Er.a.Toggle,null)),r.a.createElement(Er.a.Collapse,null,r.a.createElement(jr.a,null,r.a.createElement(kr.a,{eventKey:3,title:"View",id:"basic-nav-dropdown"},r.a.createElement(Cr.a,{eventKey:3.1,onSelect:function(t){e.props.showView("main")}},"main"===this.props.view?"X":""," Main"),r.a.createElement(Cr.a,{eventKey:3.2,onSelect:function(t){e.props.showView("c")}},"c"===this.props.view?"X":""," Categories"),r.a.createElement(Cr.a,{eventKey:3.3,onSelect:function(t){e.props.showView("a")}},"a"===this.props.view?"X":""," Accounts"),r.a.createElement(Cr.a,{divider:!0}),r.a.createElement(Cr.a,{eventKey:3.4,onSelect:function(t){e.props.showView("l")}},"l"===this.props.view?"X":""," Logs")),r.a.createElement(kr.a,{eventKey:4,title:"Util",id:"basic-nav-dropdown"},r.a.createElement(Cr.a,{eventKey:4.1,onSelect:function(t){e.generateGroup()}},"Generate unused groupid"))))))}}]),t}(r.a.Component);_r.defaultProps={view:"main"};var Tr=Object(s.b)(function(e){return{view:e.navi.view,g:e.group.g}},function(e){return{showView:function(t){e(hr(t))},newGroup:function(){e(wr())}}})(_r),xr=function(e){return{type:"PING_RESPONSE",payload:{up:e}}},Sr=function(){return function(e){e({type:"PING_REQUEST"}),A.a.get("http://localhost:8080/ping?ts="+Date.now(),{port:8080}).then(function(t){e(xr(!0))}).catch(function(t){e(xr(!1))})}},Fr=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(R.a)(this,Object(_.a)(t).call(this,e))).timer=null,n}return Object(T.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.timer=setInterval(function(){e.props.ping()},5e3)}},{key:"render",value:function(){if(!this.props.show)return null;return r.a.createElement("div",{style:{position:"fixed",top:0,bottom:0,left:0,right:0,backgroundColor:"rgba(0,0,0,0.3)",padding:50,zIndex:1e3}},r.a.createElement("div",{style:{backgroundColor:"#fff",borderRadius:5,maxWidth:500,minHeight:300,margin:"0 auto",padding:30}},"Waiting for service to be available..."))}}]),t}(r.a.Component);Fr.defaultProps={show:!1};var Dr=Object(s.b)(function(e){return{show:0!==e.ping.length&&!e.ping.up}},function(e){return{ping:function(){e(Sr())}}})(Fr),Nr=function(e){function t(){return Object(C.a)(this,t),Object(R.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){this.props.chartToday()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Dr,null),r.a.createElement(Tr,null),r.a.createElement(Or,null),r.a.createElement(yr,null))}}]),t}(r.a.Component);var Pr=Object(s.b)(null,function(e){return{chartToday:function(){e(Ae())}}})(Nr),Vr=n(232),Ar=[c.a],Mr=Object(l.createStore)(k,Object(Vr.composeWithDevTools)(l.applyMiddleware.apply(void 0,Ar)));window.reduxStore=Mr,Object(i.render)(r.a.createElement(s.a,{store:Mr},r.a.createElement(Pr,null)),document.getElementById("root"))}},[[233,2,1]]]);
//# sourceMappingURL=main.b2bfdace.chunk.js.map